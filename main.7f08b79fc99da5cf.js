(self.webpackChunkdepth_angular=self.webpackChunkdepth_angular||[]).push([[792],{692:(Ye,F,q)=>{"use strict";let L=null,V=!1,S=1;const O=Symbol("SIGNAL");function C(n){const e=L;return L=n,e}const l={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function h(n){if(V)throw new Error("");if(null===L)return;L.consumerOnSignalRead(n);const e=L.nextProducerIndex++;$(L),e<L.producerNode.length&&L.producerNode[e]!==n&&N(L)&&U(L.producerNode[e],L.producerIndexOfThis[e]),L.producerNode[e]!==n&&(L.producerNode[e]=n,L.producerIndexOfThis[e]=N(L)?B(n,L,e):0),L.producerLastReadVersion[e]=n.version}function g(n){if((!N(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==S)){if(!n.producerMustRecompute(n)&&!M(n))return n.dirty=!1,void(n.lastCleanEpoch=S);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=S}}function b(n){if(void 0===n.liveConsumerNode)return;const e=V;V=!0;try{for(const t of n.liveConsumerNode)t.dirty||A(t)}finally{V=e}}function x(){return!1!==L?.consumerAllowSignalWrites}function A(n){n.dirty=!0,b(n),n.consumerMarkedDirty?.(n)}function k(n){return n&&(n.nextProducerIndex=0),C(n)}function T(n,e){if(C(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(N(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)U(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function M(n){$(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(g(t),i!==t.version))return!0}return!1}function P(n){if($(n),N(n))for(let e=0;e<n.producerNode.length;e++)U(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function B(n,e,t){if(G(n),0===n.liveConsumerNode.length&&W(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=B(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function U(n,e){if(G(n),1===n.liveConsumerNode.length&&W(n))for(let i=0;i<n.producerNode.length;i++)U(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];$(r),r.producerIndexOfThis[i]=e}}function N(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function $(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function G(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function W(n){return void 0!==n.producerNode}let ge=function pe(){throw new Error};function je(){ge()}let Be=null;function qe(n,e){x()||je(),n.equal(n.value,e)||(n.value=e,function zt(n){n.version++,function f(){S++}(),b(n),Be?.()}(n))}const gt={...l,equal:function z(n,e){return Object.is(n,e)},value:void 0};const Le=()=>{},Yt={...l,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Le};function Ne(n){return"function"==typeof n}function Wt(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const En=Wt(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function rn(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class dn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Ne(i))try{i()}catch(o){e=o instanceof En?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Ki(o)}catch(s){e=e??[],s instanceof En?e=[...e,...s.errors]:e.push(s)}}if(e)throw new En(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ki(e);else{if(e instanceof dn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&rn(t,e)}remove(e){const{_finalizers:t}=this;t&&rn(t,e),e instanceof dn&&e._removeParent(this)}}dn.EMPTY=(()=>{const n=new dn;return n.closed=!0,n})();const hi=dn.EMPTY;function ii(n){return n instanceof dn||n&&"closed"in n&&Ne(n.remove)&&Ne(n.add)&&Ne(n.unsubscribe)}function Ki(n){Ne(n)?n():n.unsubscribe()}const Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q={setTimeout(n,e,...t){const{delegate:i}=Q;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Q;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vt(n){Q.setTimeout(()=>{const{onUnhandledError:e}=Sn;if(!e)throw n;e(n)})}function Re(){}const le=tt("C",void 0,void 0);function tt(n,e,t){return{kind:n,value:e,error:t}}let Xe=null;function Ve(n){if(Sn.useDeprecatedSynchronousErrorHandling){const e=!Xe;if(e&&(Xe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Xe;if(Xe=null,t)throw i}}else n()}class Rt extends dn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ii(e)&&e.add(this)):this.destination=dt}static create(e,t,i){return new Cn(e,t,i)}next(e){this.isStopped?we(function Te(n){return tt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?we(function me(n){return tt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?we(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Dt=Function.prototype.bind;function xt(n,e){return Dt.call(n,e)}class On{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Vi(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Vi(i)}else Vi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Vi(t)}}}class Cn extends Rt{constructor(e,t,i){let r;if(super(),Ne(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&xt(e.next,o),error:e.error&&xt(e.error,o),complete:e.complete&&xt(e.complete,o)}):r=e}this.destination=new On(r)}}function Vi(n){Sn.useDeprecatedSynchronousErrorHandling?function ut(n){Sn.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=n)}(n):vt(n)}function we(n,e){const{onStoppedNotification:t}=Sn;t&&Q.setTimeout(()=>t(n,e))}const dt={closed:!0,next:Re,error:function Yr(n){throw n},complete:Re},Tt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Bt(n){return n}function ht(n){return 0===n.length?Bt:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Ot=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function bn(n){return n&&n instanceof Rt||function ri(n){return n&&Ne(n.next)&&Ne(n.error)&&Ne(n.complete)}(n)&&ii(n)}(t)?t:new Cn(t,i,r);return Ve(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Un(i))((r,o)=>{const s=new Cn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Tt](){return this}pipe(...t){return ht(t)(this)}toPromise(t){return new(t=Un(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function Un(n){var e;return null!==(e=n??Sn.Promise)&&void 0!==e?e:Promise}const Li=Wt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let zn=(()=>{class n extends Ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new ji(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Li}next(t){Ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ve(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?hi:(this.currentObservers=null,o.push(t),new dn(()=>{this.currentObservers=null,rn(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Ot;return t.source=this,t}}return n.create=(e,t)=>new ji(e,t),n})();class ji extends zn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:hi}}class Ui extends zn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function _r(n){return Ne(n?.lift)}function pi(n){return e=>{if(_r(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function on(n,e,t,i,r){return new pn(n,e,t,i,r)}class pn extends Rt{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Jt(n,e){return pi((t,i)=>{let r=0;t.subscribe(on(i,o=>{i.next(n.call(e,o,r++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const eD="https://g.co/ng/security#xss";class ot extends Error{constructor(e,t){super(function Zd(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Bl(n){return{toString:n}.toString()}const mr=globalThis;function sr(n){for(let e in n)if(n[e]===sr)return e;throw Error("Could not find renamed property on target object.")}function P$(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function _o(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(_o).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function kw(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const O$=sr({__forward_ref__:sr});function rr(n){return n.__forward_ref__=rr,n.toString=function(){return _o(this())},n}function Xn(n){return q_(n)?n():n}function q_(n){return"function"==typeof n&&n.hasOwnProperty(O$)&&n.__forward_ref__===rr}function hn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ro(n){return{providers:n.providers||[],imports:n.imports||[]}}function X_(n){return rD(n,K_)||rD(n,oD)}function rD(n,e){return n.hasOwnProperty(e)?n[e]:null}function Y_(n){return n&&(n.hasOwnProperty(Nw)||n.hasOwnProperty(B$))?n[Nw]:null}const K_=sr({\u0275prov:sr}),Nw=sr({\u0275inj:sr}),oD=sr({ngInjectableDef:sr}),B$=sr({ngInjectorDef:sr});class Pt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=hn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vw(n){return n&&!!n.\u0275providers}const Fp=sr({\u0275cmp:sr}),zw=sr({\u0275dir:sr}),jw=sr({\u0275pipe:sr}),aD=sr({\u0275mod:sr}),Vl=sr({\u0275fac:sr}),Lp=sr({__NG_ELEMENT_ID__:sr}),lD=sr({__NG_ENV_ID__:sr});function li(n){return"string"==typeof n?n:null==n?"":String(n)}function $w(n,e){throw new ot(-201,!1)}var Oi=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Oi||{});let Hw;function cD(){return Hw}function Ss(n){const e=Hw;return Hw=n,e}function uD(n,e,t){const i=X_(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Oi.Optional?null:void 0!==e?e:void $w()}const Up={},Gw="__NG_DI_FLAG__",Z_="ngTempTokenPath",G$=/\n/gm,dD="__source";let nh;function Ec(n){const e=nh;return nh=n,e}function X$(n,e=Oi.Default){if(void 0===nh)throw new ot(-203,!1);return null===nh?uD(n,void 0,e):nh.get(n,e&Oi.Optional?null:void 0,e)}function ln(n,e=Oi.Default){return(cD()||X$)(Xn(n),e)}function St(n,e=Oi.Default){return ln(n,Q_(e))}function Q_(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ww(n){const e=[];for(let t=0;t<n.length;t++){const i=Xn(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ot(900,!1);let r,o=Oi.Default;for(let s=0;s<i.length;s++){const a=i[s],c=Y$(a);"number"==typeof c?-1===c?r=a.token:o|=c:r=a}e.push(ln(r,o))}else e.push(ln(i))}return e}function Y$(n){return n[Gw]}function Su(n,e){return n.hasOwnProperty(Vl)?n[Vl]:null}function rh(n,e){n.forEach(t=>Array.isArray(t)?rh(t,e):e(t))}function fD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function eb(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qs(n,e,t){let i=oh(n,e);return i>=0?n[1|i]=t:(i=~i,function pD(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Xw(n,e){const t=oh(n,e);if(t>=0)return n[1|t]}function oh(n,e){return function mD(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const sl={},Xi=[],al=new Pt(""),gD=new Pt("",-1),Yw=new Pt("");class nb{get(e,t=Up){if(t===Up){const i=new Error(`NullInjectorError: No provider for ${_o(e)}!`);throw i.name="NullInjectorError",i}return t}}var ib=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ib||{}),Ba=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ba||{}),sh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(sh||{});function nH(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function Kw(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];bD(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function _D(n){return 3===n||4===n||6===n}function bD(n){return 64===n.charCodeAt(0)}function Vp(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||yD(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function yD(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}const vD="ng-template";function iH(n,e,t,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==nH(e[r+1].toLowerCase(),t,0))return!0}else if(Zw(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&"string"==typeof(o=e[r]);)if(o.toLowerCase()===t)return!0}return!1}function Zw(n){return 4===n.type&&n.value!==vD}function rH(n,e,t){return e===(4!==n.type||t?n.value:vD)}function oH(n,e,t){let i=4;const r=n.attrs,o=null!==r?function lH(n){for(let e=0;e<n.length;e++)if(_D(n[e]))return e;return n.length}(r):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&i){if(i=2|1&i,""!==c&&!rH(n,c,t)||""===c&&1===e.length){if(Va(i))return!1;s=!0}}else if(8&i){if(null===r||!iH(n,r,c,t)){if(Va(i))return!1;s=!0}}else{const d=e[++a],p=sH(c,r,Zw(n),t);if(-1===p){if(Va(i))return!1;s=!0;continue}if(""!==d){let m;if(m=p>o?"":r[p+1].toLowerCase(),2&i&&d!==m){if(Va(i))return!1;s=!0}}}}else{if(!s&&!Va(i)&&!Va(c))return!1;if(s&&Va(c))continue;s=!1,i=c|1&i}}return Va(i)||s}function Va(n){return!(1&n)}function sH(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function cH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function xD(n,e,t=!1){for(let i=0;i<e.length;i++)if(oH(n,e[i],t))return!0;return!1}function uH(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function wD(n,e){return n?":not("+e.trim()+")":e}function dH(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Va(s)&&(e+=wD(o,r),r=""),i=s,o=o||!Va(i);t++}return""!==r&&(e+=wD(o,r)),e}function Ms(n){return Bl(()=>{const e=SD(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ib.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ba.Emulated,styles:n.styles||Xi,_:null,schemas:n.schemas||null,tView:null,id:""};TD(t);const i=n.dependencies;return t.directiveDefs=rb(i,!1),t.pipeDefs=rb(i,!0),t.id=function _H(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function pH(n){return Ri(n)||yo(n)}function mH(n){return null!==n}function bo(n){return Bl(()=>({type:n.type,bootstrap:n.bootstrap||Xi,declarations:n.declarations||Xi,imports:n.imports||Xi,exports:n.exports||Xi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ED(n,e){if(null==n)return sl;const t={};for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];let o,s,a=sh.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(t[o]=a!==sh.None?[i,a]:i,e[o]=s):t[o]=i}return t}function Fn(n){return Bl(()=>{const e=SD(n);return TD(e),e})}function As(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ri(n){return n[Fp]||null}function yo(n){return n[zw]||null}function ko(n){return n[jw]||null}function zo(n,e){const t=n[aD]||null;if(!t&&!0===e)throw new Error(`Type ${_o(n)} does not have '\u0275mod' property.`);return t}function SD(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||sl,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Xi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ED(n.inputs,e),outputs:ED(n.outputs),debugInfo:null}}function TD(n){n.features?.forEach(e=>e(n))}function rb(n,e){if(!n)return null;const t=e?ko:pH;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(mH)}function ah(n){return{\u0275providers:n}}function MD(...n){return{\u0275providers:Qw(0,n),\u0275fromNgModule:!0}}function Qw(n,...e){const t=[],i=new Set;let r;const o=s=>{t.push(s)};return rh(e,s=>{const a=s;ob(a,o,[],i)&&(r||=[],r.push(a))}),void 0!==r&&AD(r,o),t}function AD(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Jw(r,o=>{e(o,i)})}}function ob(n,e,t,i){if(!(n=Xn(n)))return!1;let r=null,o=Y_(n);const s=!o&&Ri(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const c=n.ngModule;if(o=Y_(c),!o)return!1;r=c}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of c)ob(d,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;i.add(r);try{rh(o.imports,p=>{ob(p,e,t,i)&&(d||=[],d.push(p))})}finally{}void 0!==d&&AD(d,e)}if(!a){const d=Su(r)||(()=>new r);e({provide:r,useFactory:d,deps:Xi},r),e({provide:Yw,useValue:r,multi:!0},r),e({provide:al,useValue:()=>ln(r),multi:!0},r)}const c=o.providers;if(null!=c&&!a){const d=n;Jw(c,p=>{e(p,d)})}}}return r!==n&&void 0!==n.providers}function Jw(n,e){for(let t of n)Vw(t)&&(t=t.\u0275providers),Array.isArray(t)?Jw(t,e):e(t)}const bH=sr({provide:String,useValue:sr});function eE(n){return null!==n&&"object"==typeof n&&bH in n}function Tu(n){return"function"==typeof n}const tE=new Pt(""),sb={},vH={};let nE;function ab(){return void 0===nE&&(nE=new nb),nE}class Cs{}class lh extends Cs{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rE(e,s=>this.processProvider(s)),this.records.set(gD,ch(void 0,this)),r.has("environment")&&this.records.set(Cs,ch(void 0,this));const o=this.records.get(tE);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Yw,Xi,Oi.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=C(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),C(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ec(this),i=Ss(void 0);try{return e()}finally{Ec(t),Ss(i)}}get(e,t=Up,i=Oi.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lD))return e[lD](this);i=Q_(i);const o=Ec(this),s=Ss(void 0);try{if(!(i&Oi.SkipSelf)){let c=this.records.get(e);if(void 0===c){const d=function TH(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pt}(e)&&X_(e);c=d&&this.injectableDefInScope(d)?ch(iE(e),sb):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&Oi.Self?ab():this.parent).get(e,t=i&Oi.Optional&&t===Up?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Z_]=a[Z_]||[]).unshift(_o(e)),o)throw a;return function K$(n,e,t,i){const r=n[Z_];throw e[dD]&&r.unshift(e[dD]),n.message=function Z$(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=_o(e);if(Array.isArray(e))r=e.map(_o).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):_o(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(G$,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Z_]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Ss(s),Ec(o)}}resolveInjectorInitializers(){const e=C(null),t=Ec(this),i=Ss(void 0);try{const o=this.get(al,Xi,Oi.Self);for(const s of o)s()}finally{Ec(t),Ss(i),C(e)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(_o(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ot(205,!1)}processProvider(e){let t=Tu(e=Xn(e))?e:Xn(e&&e.provide);const i=function wH(n){return eE(n)?ch(void 0,n.useValue):ch(DD(n),sb)}(e);if(!Tu(e)&&!0===e.multi){let r=this.records.get(t);r||(r=ch(void 0,sb,!0),r.factory=()=>Ww(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){const i=C(null);try{return t.value===sb&&(t.value=vH,t.value=t.factory()),"object"==typeof t.value&&t.value&&function SH(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{C(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Xn(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function iE(n){const e=X_(n),t=null!==e?e.factory:Su(n);if(null!==t)return t;if(n instanceof Pt)throw new ot(204,!1);if(n instanceof Function)return function xH(n){if(n.length>0)throw new ot(204,!1);const t=function U$(n){return n&&(n[K_]||n[oD])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ot(204,!1)}function DD(n,e,t){let i;if(Tu(n)){const r=Xn(n);return Su(r)||iE(r)}if(eE(n))i=()=>Xn(n.useValue);else if(function ID(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Ww(n.deps||[]));else if(function CD(n){return!(!n||!n.useExisting)}(n))i=()=>ln(Xn(n.useExisting));else{const r=Xn(n&&(n.useClass||n.provide));if(!function EH(n){return!!n.deps}(n))return Su(r)||iE(r);i=()=>new r(...Ww(n.deps))}return i}function ch(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rE(n,e){for(const t of n)Array.isArray(t)?rE(t,e):t&&Vw(t)?rE(t.\u0275providers,e):e(t)}function za(n,e){n instanceof lh&&n.assertNotDestroyed();const i=Ec(n),r=Ss(void 0);try{return e()}finally{Ec(i),Ss(r)}}function RD(){return void 0!==cD()||null!=function q$(){return nh}()}const Or=0,Zt=1,jn=2,oo=3,ja=4,No=5,es=6,dh=7,br=8,so=9,ll=10,ei=11,jp=12,OD=13,hh=14,kr=15,Mu=16,fh=17,zl=18,ph=19,kD=20,Tc=21,ub=22,_a=23,$n=25,sE=1,cl=7,mh=9,Kr=10;var hb=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(hb||{});function Co(n){return Array.isArray(n)&&"object"==typeof n[sE]}function jo(n){return Array.isArray(n)&&!0===n[sE]}function aE(n){return!!(4&n.flags)}function Au(n){return n.componentOffset>-1}function fb(n){return!(1&~n.flags)}function $a(n){return!!n.template}function Hp(n){return!!(512&n[jn])}class UH{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function UD(n,e,t,i){null!==e?e.applyValueToInputSignal(e,i):n[t]=i}function ts(){return BD}function BD(n){return n.type.prototype.ngOnChanges&&(n.setInput=VH),BH}function BH(){const n=zD(this),e=n?.current;if(e){const t=n.previous;if(t===sl)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function VH(n,e,t,i,r){const o=this.declaredInputs[i],s=zD(n)||function zH(n,e){return n[VD]=e}(n,{previous:sl,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new UH(d&&d.currentValue,t,c===sl),UD(n,e,r,t)}ts.ngInherit=!0;const VD="__ngSimpleChanges__";function zD(n){return n[VD]||null}const ul=function(n,e,t){},jD="svg";function Ji(n){for(;Array.isArray(n);)n=n[Or];return n}function Gp(n,e){return Ji(e[n])}function ns(n,e){return Ji(e[n.index])}function Wp(n,e){return n.data[e]}function gh(n,e){return n[e]}function Xs(n,e){const t=e[n];return Co(t)?t:t[Or]}function hE(n){return!(128&~n[jn])}function ba(n,e){return null==e?null:n[e]}function HD(n){n[fh]=0}function GD(n){1024&n[jn]||(n[jn]|=1024,hE(n)&&pb(n))}function qp(n){return!!(9216&n[jn]||n[_a]?.dirty)}function fE(n){n[ll].changeDetectionScheduler?.notify(7),64&n[jn]&&(n[jn]|=1024),qp(n)&&pb(n)}function pb(n){n[ll].changeDetectionScheduler?.notify(0);let e=jl(n);for(;null!==e&&!(8192&e[jn])&&(e[jn]|=8192,hE(e));)e=jl(e)}function mb(n,e){if(!(256&~n[jn]))throw new ot(911,!1);null===n[Tc]&&(n[Tc]=[]),n[Tc].push(e)}function jl(n){const e=n[oo];return jo(e)?e[oo]:e}const ti={lFrame:r2(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let qD=!1;function XD(){return ti.bindingsEnabled}function Cu(){return null!==ti.skipHydrationRootTNode}function Et(){return ti.lFrame.lView}function ki(){return ti.lFrame.tView}function Iu(n){return ti.lFrame.contextLView=n,n[br]}function Du(n){return ti.lFrame.contextLView=null,n}function ar(){let n=YD();for(;null!==n&&64===n.type;)n=n.parent;return n}function YD(){return ti.lFrame.currentTNode}function dl(n,e){const t=ti.lFrame;t.currentTNode=n,t.isParent=e}function gE(){return ti.lFrame.isParent}function _E(){ti.lFrame.isParent=!1}function ZD(){return qD}function QD(n){qD=n}function Ha(){return ti.lFrame.bindingIndex++}function Hl(n){const e=ti.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nG(n,e){const t=ti.lFrame;t.bindingIndex=t.bindingRootIndex=n,bE(e)}function bE(n){ti.lFrame.currentDirectiveIndex=n}function vE(){return ti.lFrame.currentQueryIndex}function _b(n){ti.lFrame.currentQueryIndex=n}function rG(n){const e=n[Zt];return 2===e.type?e.declTNode:1===e.type?n[No]:null}function t2(n,e,t){if(t&Oi.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&Oi.Host||(r=rG(o),null===r||(o=o[hh],10&r.type))););if(null===r)return!1;e=r,n=o}const i=ti.lFrame=n2();return i.currentTNode=e,i.lView=n,!0}function xE(n){const e=n2(),t=n[Zt];ti.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function n2(){const n=ti.lFrame,e=null===n?null:n.child;return null===e?r2(n):e}function r2(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function o2(){const n=ti.lFrame;return ti.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const s2=o2;function wE(){const n=o2();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $o(){return ti.lFrame.selectedIndex}function Ru(n){ti.lFrame.selectedIndex=n}function yr(){const n=ti.lFrame;return Wp(n.tView,n.selectedIndex)}function bb(){ti.lFrame.currentNamespace=jD}let c2=!0;function Yp(){return c2}function hl(n){c2=n}function yb(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=p&&(n.destroyHooks??=[]).push(t,p)}}function vb(n,e,t){u2(n,e,3,t)}function xb(n,e,t,i){(3&n[jn])===t&&u2(n,e,t,i)}function EE(n,e){let t=n[jn];(3&t)===e&&(t&=16383,t+=1,n[jn]=t)}function u2(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let c=void 0!==i?65535&n[fh]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[fh]+=65536),(a<o||-1==o)&&(cG(n,t,e,c),n[fh]=(4294901760&n[fh])+c+2),c++}function d2(n,e){ul(4,n,e);const t=C(null);try{e.call(n)}finally{C(t),ul(5,n,e)}}function cG(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];r?n[jn]>>14<n[fh]>>16&&(3&n[jn])===e&&(n[jn]+=16384,d2(a,o)):d2(a,o)}const _h=-1;class Kp{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}const TE={};class wb{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Q_(i);const r=this.injector.get(e,TE,i);return r!==TE||t===TE?r:this.parentInjector.get(e,t,i)}}function ME(n){return n!==_h}function Zp(n){return 32767&n}function Qp(n,e){let t=function pG(n){return n>>16}(n),i=e;for(;t>0;)i=i[hh],t--;return i}let AE=!0;function Eb(n){const e=AE;return AE=n,e}const f2=255,p2=5;let mG=0;const fl={};function Sb(n,e){const t=m2(n,e);if(-1!==t)return t;const i=e[Zt];i.firstCreatePass&&(n.injectorIndex=e.length,CE(i.data,n),CE(e,null),CE(i.blueprint,null));const r=Tb(n,e),o=n.injectorIndex;if(ME(r)){const s=Zp(r),a=Qp(r,e),c=a[Zt].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|c[s+d]}return e[o+8]=r,o}function CE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function m2(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Tb(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=w2(r),null===i)return _h;if(t++,r=r[hh],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return _h}function IE(n,e,t){!function gG(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Lp)&&(i=t[Lp]),null==i&&(i=t[Lp]=mG++);const r=i&f2;e.data[n+(r>>p2)]|=1<<r}(n,e,t)}function g2(n,e,t){if(t&Oi.Optional||void 0!==n)return n;$w()}function _2(n,e,t,i){if(t&Oi.Optional&&void 0===i&&(i=null),!(t&(Oi.Self|Oi.Host))){const r=n[so],o=Ss(void 0);try{return r?r.get(e,i,t&Oi.Optional):uD(e,i,t&Oi.Optional)}finally{Ss(o)}}return g2(i,0,t)}function b2(n,e,t,i=Oi.Default,r){if(null!==n){if(2048&e[jn]&&!(i&Oi.Self)){const s=function xG(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[jn]&&!(512&s[jn]);){const a=y2(o,s,t,i|Oi.Self,fl);if(a!==fl)return a;let c=o.parent;if(!c){const d=s[kD];if(d){const p=d.get(t,fl,i);if(p!==fl)return p}c=w2(s),s=s[hh]}o=c}return r}(n,e,t,i,fl);if(s!==fl)return s}const o=y2(n,e,t,i,fl);if(o!==fl)return o}return _2(e,t,i,r)}function y2(n,e,t,i,r){const o=function yG(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Lp)?n[Lp]:void 0;return"number"==typeof e?e>=0?e&f2:vG:e}(t);if("function"==typeof o){if(!t2(e,n,i))return i&Oi.Host?g2(r,0,i):_2(e,t,i,r);try{let s;if(s=o(i),null!=s||i&Oi.Optional)return s;$w()}finally{s2()}}else if("number"==typeof o){let s=null,a=m2(n,e),c=_h,d=i&Oi.Host?e[kr][No]:null;for((-1===a||i&Oi.SkipSelf)&&(c=-1===a?Tb(n,e):e[a+8],c!==_h&&x2(i,!1)?(s=e[Zt],a=Zp(c),e=Qp(c,e)):a=-1);-1!==a;){const p=e[Zt];if(v2(o,a,p.data)){const m=bG(a,e,t,s,i,d);if(m!==fl)return m}c=e[a+8],c!==_h&&x2(i,e[Zt].data[a+8]===d)&&v2(o,a,e)?(s=p,a=Zp(c),e=Qp(c,e)):a=-1}}return r}function bG(n,e,t,i,r,o){const s=e[Zt],a=s.data[n+8],p=Mb(a,s,t,null==i?Au(a)&&AE:i!=s&&!!(3&a.type),r&Oi.Host&&o===a);return null!==p?Pu(e,s,p,a):fl}function Mb(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,p=o>>20,y=r?a+p:n.directiveEnd;for(let v=i?a:a+p;v<y;v++){const E=s[v];if(v<c&&t===E||v>=c&&E.type===t)return v}if(r){const v=s[c];if(v&&$a(v)&&v.type===t)return c}return null}function Pu(n,e,t,i){let r=n[t];const o=e.data;if(function uG(n){return n instanceof Kp}(r)){const s=r;s.resolving&&function j$(n,e){throw e&&e.join(" > "),new ot(-200,n)}(function Qi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():li(n)}(o[t]));const a=Eb(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?Ss(s.injectImpl):null;t2(n,i,Oi.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function lG(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=BD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==d&&Ss(d),Eb(a),s.resolving=!1,s2()}}return r}function v2(n,e,t){return!!(t[e+(n>>p2)]&1<<n)}function x2(n,e){return!(n&Oi.Self||n&Oi.Host&&e)}class xo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return b2(this._tNode,this._lView,e,Q_(i),t)}}function vG(){return new xo(ar(),Et())}function ao(n){return Bl(()=>{const e=n.prototype.constructor,t=e[Vl]||DE(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[Vl]||DE(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function DE(n){return q_(n)?()=>{const e=DE(Xn(n));return e&&e()}:Su(n)}function w2(n){const e=n[Zt],t=e.type;return 2===t?e.declTNode:1===t?n[No]:null}function Mc(n){return function _G(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(_D(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(ar(),n)}function A2(n,e=null,t=null,i){const r=C2(n,e,t,i);return r.resolveInjectorInitializers(),r}function C2(n,e=null,t=null,i,r=new Set){const o=[t||Xi,MD(n)];return i=i||("object"==typeof n?void 0:_o(n)),new lh(o,e||ab(),i||null,r)}class lo{static#e=this.THROW_IF_NOT_FOUND=Up;static#t=this.NULL=new nb;static create(e,t){if(Array.isArray(e))return A2({name:""},t,e,"");{const i=e.name??"";return A2({name:i},e.parent,e.providers,i)}}static#n=this.\u0275prov=hn({token:lo,providedIn:"any",factory:()=>ln(gD)});static#i=this.__NG_ELEMENT_ID__=-1}new Pt("").__NG_ELEMENT_ID__=n=>{const e=ar();if(null===e)throw new ot(204,!1);if(2&e.type)return e.value;if(n&Oi.Optional)return null;throw new ot(204,!1)};function PE(n){return n.ngOriginalError}class rs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&PE(e);for(;t&&PE(t);)t=PE(t);return t||null}}const D2=new Pt("",{providedIn:"root",factory:()=>St(rs).handleError.bind(void 0)});let vh=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=RG;static#t=this.__NG_ENV_ID__=t=>t}return n})();class DG extends vh{constructor(e){super(),this._lView=e}onDestroy(e){return mb(this._lView,e),()=>function pE(n,e){if(null===n[Tc])return;const t=n[Tc].indexOf(e);-1!==t&&n[Tc].splice(t,1)}(this._lView,e)}}function RG(){return new DG(Et())}function PG(){return xh(ar(),Et())}function xh(n,e){return new Mr(ns(n,e))}let Mr=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=PG}return n})();function P2(n){return n instanceof Mr?n.nativeElement:n}let Ac=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ui(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=hn({token:n,providedIn:"root",factory:()=>new n})}return n})();const $i=class OG extends zn{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,RD()&&(this.destroyRef=St(vh,{optional:!0})??void 0,this.pendingTasks=St(Ac,{optional:!0})??void 0)}emit(e){const t=C(null);try{super.next(e)}finally{C(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof dn&&e.add(a),a}wrapInTimeout(e){return t=>{const i=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==i&&this.pendingTasks?.remove(i)})}}};function kG(){return this._results[Symbol.iterator]()}class wh{static#e=Symbol.iterator;get changes(){return this._changes??=new $i}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=wh.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=kG)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Ts(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function tH(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Cb(n){return!(128&~n.flags)}const OE=new Map;let FG=0;const Db="__ngContext__";function Ho(n,e){Co(e)?(n[Db]=e[ph],function UG(n){OE.set(n[ph],n)}(e)):n[Db]=e}function j2(n){return H2(n[jp])}function $2(n){return H2(n[ja])}function H2(n){for(;null!==n&&!jo(n);)n=n[ja];return n}let NE;const Sh=new Pt("",{providedIn:"root",factory:()=>nW}),nW="ng",Q2=new Pt(""),Ic=new Pt("",{providedIn:"platform",factory:()=>"unknown"}),Gl=new Pt(""),FE=new Pt("",{providedIn:"root",factory:()=>function Cc(){if(void 0!==NE)return NE;if(typeof document<"u")return document;throw new ot(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let J2=()=>null;function $E(n,e,t=!1){return J2(n,e,t)}const aR=new Pt("",{providedIn:"root",factory:()=>!1});let Bb;function Ah(n){return function XE(){if(void 0===Bb&&(Bb=null,mr.trustedTypes))try{Bb=mr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bb}()?.createHTML(n)||n}class Ou{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${eD})`}}class _W extends Ou{getTypeName(){return"HTML"}}class bW extends Ou{getTypeName(){return"Style"}}class yW extends Ou{getTypeName(){return"Script"}}class vW extends Ou{getTypeName(){return"URL"}}class xW extends Ou{getTypeName(){return"ResourceURL"}}function Ys(n){return n instanceof Ou?n.changingThisBreaksApplicationSecurity:n}function pl(n,e){const t=function wW(n){return n instanceof Ou&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${eD})`)}return t===e}class CW{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ah(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class IW{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Ah(e),t}}const RW=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zb(n){return(n=String(n)).match(RW)?n:"unsafe:"+n}function Wl(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function sm(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const fR=Wl("area,br,col,hr,img,wbr"),pR=Wl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mR=Wl("rp,rt"),KE=sm(fR,sm(pR,Wl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sm(mR,Wl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sm(mR,pR)),ZE=Wl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gR=sm(ZE,Wl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PW=Wl("script,style,template");class OW{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)r.push(t),t=FW(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=NW(t);if(o){t=o;break}t=r.pop()}return this.buf.join("")}startElement(e){const t=_R(e).toLowerCase();if(!KE.hasOwnProperty(t))return this.sanitizedSomething=!0,!PW.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),s=o.name,a=s.toLowerCase();if(!gR.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;ZE[a]&&(c=zb(c)),this.buf.push(" ",s,'="',yR(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=_R(e).toLowerCase();KE.hasOwnProperty(t)&&!fR.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(yR(e))}}function NW(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw bR(e);return e}function FW(n){const e=n.firstChild;if(e&&function kW(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw bR(e);return e}function _R(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function bR(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const LW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,UW=/([^\#-~ |!])/g;function yR(n){return n.replace(/&/g,"&amp;").replace(LW,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(UW,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jb;function vR(n,e){let t=null;try{jb=jb||function hR(n){const e=new IW(n);return function DW(){try{return!!(new window.DOMParser).parseFromString(Ah(""),"text/html")}catch{return!1}}()?new CW(e):e}(n);let i=e?String(e):"";t=jb.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=jb.getInertBodyElement(i)}while(i!==o);return Ah((new OW).sanitizeChildren(QE(t)||t))}finally{if(t){const i=QE(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function QE(n){return"content"in n&&function BW(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Fo=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fo||{});function Ks(n){return n instanceof Function?n():n}var Dc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Dc||{});let nS;function iS(n,e){return nS(n,e)}function Ih(n,e,t,i,r){if(null!=i){let o,s=!1;jo(i)?o=i:Co(i)&&(s=!0,i=i[Or]);const a=Ji(i);0===n&&null!==t?null==r?NR(e,t,a):ku(e,t,a,r||null,!0):1===n&&null!==t?ku(e,t,a,r||null,!0):2===n?function um(n,e,t){const i=qb(n,e);i&&function h9(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function m9(n,e,t,i,r){const o=t[cl];o!==Ji(t)&&Ih(e,n,i,o,r);for(let a=Kr;a<t.length;a++){const c=t[a];Yb(c[Zt],c,n,e,i,o)}}(e,n,o,t,r)}}function Gb(n,e,t){return n.createElement(e,t)}function PR(n,e){e[ll].changeDetectionScheduler?.notify(8),Yb(n,e,e[ei],2,null,null)}function OR(n,e){const t=n[mh],i=e[oo];(Co(i)||e[kr]!==i[oo][kr])&&(n[jn]|=hb.HasTransplantedViews),null===t?n[mh]=[e]:t.push(e)}function sS(n,e){const t=n[mh],i=t.indexOf(e);t.splice(i,1)}function lm(n,e){if(n.length<=Kr)return;const t=Kr+e,i=n[t];if(i){const r=i[Mu];null!==r&&r!==n&&sS(r,i),e>0&&(n[t-1][ja]=i[ja]);const o=eb(n,Kr+e);!function s9(n,e){PR(n,e),e[Or]=null,e[No]=null}(i[Zt],i);const s=o[zl];null!==s&&s.detachView(o[Zt]),i[oo]=null,i[ja]=null,i[jn]&=-129}return i}function Wb(n,e){if(!(256&e[jn])){const t=e[ei];t.destroyNode&&Yb(n,e,t,3,null,null),function l9(n){let e=n[jp];if(!e)return aS(n[Zt],n);for(;e;){let t=null;if(Co(e))t=e[jp];else{const i=e[Kr];i&&(t=i)}if(!t){for(;e&&!e[ja]&&e!==n;)Co(e)&&aS(e[Zt],e),e=e[oo];null===e&&(e=n),Co(e)&&aS(e[Zt],e),t=e&&e[ja]}e=t}}(e)}}function aS(n,e){if(256&e[jn])return;const t=C(null);try{e[jn]&=-129,e[jn]|=256,e[_a]&&P(e[_a]),function d9(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Kp)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],c=o[s+1];ul(4,a,c);try{c.call(a)}finally{ul(5,a,c)}}else{ul(4,r,o);try{o.call(r)}finally{ul(5,r,o)}}}}}(n,e),function u9(n,e){const t=n.cleanup,i=e[dh];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[dh]=null);const r=e[Tc];if(null!==r){e[Tc]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(n,e),1===e[Zt].type&&e[ei].destroy();const i=e[Mu];if(null!==i&&jo(e[oo])){i!==e[oo]&&sS(i,e);const r=e[zl];null!==r&&r.detachView(n)}!function BG(n){OE.delete(n[ph])}(e)}finally{C(t)}}function lS(n,e,t){return function kR(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Or];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===Ba.None||o===Ba.Emulated)return null}return ns(i,t)}}(n,e.parent,t)}function ku(n,e,t,i,r){n.insertBefore(e,t,i,r)}function NR(n,e,t){n.appendChild(e,t)}function FR(n,e,t,i,r){null!==i?ku(n,e,t,i,r):NR(n,e,t)}function qb(n,e){return n.parentNode(e)}function LR(n,e,t){return BR(n,e,t)}let cS,BR=function UR(n,e,t){return 40&n.type?ns(n,t):null};function Xb(n,e,t,i){const r=lS(n,i,e),o=e[ei],a=LR(i.parent||e[No],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)FR(o,r,t[c],a,!1);else FR(o,r,t,a,!1);void 0!==cS&&cS(o,i,e,t,r)}function cm(n,e){if(null!==e){const t=e.type;if(3&t)return ns(e,n);if(4&t)return uS(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return cm(n,i);{const r=n[e.index];return jo(r)?uS(-1,r):Ji(r)}}if(32&t)return iS(e,n)()||Ji(n[e.index]);{const i=zR(n,e);return null!==i?Array.isArray(i)?i[0]:cm(jl(n[kr]),i):cm(n,e.next)}}return null}function zR(n,e){return null!==e?n[kr][No].projection[e.projection]:null}function uS(n,e){const t=Kr+n+1;if(t<e.length){const i=e[t],r=i[Zt].firstChild;if(null!==r)return cm(i,r)}return e[cl]}function dS(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],c=t.type;if(s&&0===e&&(a&&Ho(Ji(a),i),t.flags|=2),32&~t.flags)if(8&c)dS(n,e,t.child,i,r,o,!1),Ih(e,n,r,a,o);else if(32&c){const d=iS(t,i);let p;for(;p=d();)Ih(e,n,r,p,o);Ih(e,n,r,a,o)}else 16&c?$R(n,e,i,t,r,o):Ih(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Yb(n,e,t,i,r,o){dS(t,i,n.firstChild,e,r,o,!1)}function $R(n,e,t,i,r,o){const s=t[kr],c=s[No].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++)Ih(e,n,r,c[d],o);else{let d=c;const p=s[oo];Cb(i)&&(d.flags|=128),dS(n,e,d,p,r,o,!0)}}function HR(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function GR(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&Kw(n,e,i),null!==r&&HR(n,e,r),null!==o&&function _9(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}const ci={};function Ni(n=1){WR(ki(),Et(),$o()+n,!1)}function WR(n,e,t,i){if(!i)if(3&~e[jn]){const o=n.preOrderHooks;null!==o&&xb(e,o,0,t)}else{const o=n.preOrderCheckHooks;null!==o&&vb(e,o,t)}Ru(t)}function Je(n,e=Oi.Default){const t=Et();return null===t?ln(n,e):b2(ar(),t,Xn(n),e)}function XR(n,e,t,i,r,o){const s=C(null);try{let a=null;r&sh.SignalBased&&(a=e[i][O]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),r&sh.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(e,o)),null!==n.setInput?n.setInput(e,a,o,t,i):UD(e,a,i,o)}finally{C(s)}}function Kb(n,e,t,i,r,o,s,a,c,d,p){const m=e.blueprint.slice();return m[Or]=r,m[jn]=204|i,(null!==d||n&&2048&n[jn])&&(m[jn]|=2048),HD(m),m[oo]=m[hh]=n,m[br]=t,m[ll]=s||n&&n[ll],m[ei]=a||n&&n[ei],m[so]=c||n&&n[so]||null,m[No]=o,m[ph]=function LG(){return FG++}(),m[es]=p,m[kD]=d,m[kr]=2==e.type?n[kr]:m,m}function Dh(n,e,t,i,r){let o=n.data[e];if(null===o)o=function hS(n,e,t,i,r){const o=YD(),s=gE(),c=n.data[e]=function T9(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Cu()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,i,r),function tG(){return ti.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function Xp(){const n=ti.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return dl(o,!0),o}function dm(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function YR(n,e,t,i,r){const o=$o(),s=2&i;try{Ru(-1),s&&e.length>$n&&WR(n,e,$n,!1),ul(s?2:0,r),t(i,r)}finally{Ru(o),ul(s?3:1,r)}}function fS(n,e,t){if(aE(e)){const i=C(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{C(i)}}}function pS(n,e,t){XD()&&(function P9(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;Au(t)&&function B9(n,e,t){const i=ns(e,n),r=KR(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=Zb(n,Kb(n,r,null,s,i,e,null,n[ll].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Sb(t,e),Ho(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const c=n.data[a],d=Pu(e,n,a,t);Ho(d,e),null!==s&&V9(0,a-r,d,c,0,s),$a(c)&&(Xs(t.index,e)[br]=Pu(e,n,a,t))}}(n,e,t,ns(t,e)),!(64&~t.flags)&&tP(n,e,t))}function mS(n,e,t=ns){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function KR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=gS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function gS(n,e,t,i,r,o,s,a,c,d,p){const m=$n+i,y=m+r,v=function y9(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:ci);return t}(m,y),E="function"==typeof d?d():d;return v[Zt]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:p}}let ZR=()=>null;function QR(n,e,t,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;i??={};let a,c=sh.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let d=o;if(null!==r){if(!r.hasOwnProperty(o))continue;d=r[o]}0===n?JR(i,t,d,a,c):JR(i,t,d,a)}return i}function JR(n,e,t,i,r){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,i):o=n[t]=[e,i],void 0!==r&&o.push(r)}function Rs(n,e,t,i,r,o,s,a){const c=ns(e,t);let p,d=e.inputs;!a&&null!=d&&(p=d[i])?(xS(n,t,p,i,r),Au(e)&&function C9(n,e){const t=Xs(e,n);16&t[jn]||(t[jn]|=64)}(t,e.index)):3&e.type&&(i=function A9(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(c,i,r))}function _S(n,e,t,i){if(XD()){const r=null===i?null:{"":-1},o=function k9(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(xD(e,s.selectors,!1))if(i||(i=[]),$a(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),bS(n,e,a.length)}else i.unshift(s),bS(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&eP(n,e,t,s,r,a),r&&function N9(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new ot(-301,!1);i.push(e[r],o)}}}(t,i,r)}t.mergedAttrs=Vp(t.mergedAttrs,t.attrs)}function eP(n,e,t,i,r,o){for(let d=0;d<i.length;d++)IE(Sb(t,e),n,i[d].type);!function L9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let d=0;d<i.length;d++){const p=i[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,c=dm(n,e,i.length,null);for(let d=0;d<i.length;d++){const p=i[d];t.mergedAttrs=Vp(t.mergedAttrs,p.hostAttrs),U9(n,t,e,c,p),F9(c,p,r),null!==p.contentQueries&&(t.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(t.flags|=64);const m=p.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function M9(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,d=null;for(let p=e.directiveStart;p<r;p++){const m=o[p],y=t?t.get(m):null,E=y?y.outputs:null;c=QR(0,m.inputs,p,c,y?y.inputs:null),d=QR(1,m.outputs,p,d,E);const I=null===c||null===s||Zw(e)?null:z9(c,p,s);a.push(I)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=d}(n,t,o)}function tP(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function iG(){return ti.lFrame.currentDirectiveIndex}();try{Ru(o);for(let a=i;a<r;a++){const c=n.data[a],d=e[a];bE(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&O9(c,d)}}finally{Ru(-1),bE(s)}}function O9(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function bS(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function F9(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;$a(e)&&(t[""]=n)}}function U9(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=Su(r.type)),s=new Kp(o,$a(r),Je);n.blueprint[i]=s,t[i]=s,function D9(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function R9(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,dm(n,t,r.hostVars,ci),r)}function ml(n,e,t,i,r,o){const s=ns(n,e);!function yS(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?li(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[ei],s,o,n.value,t,i,r)}function V9(n,e,t,i,r,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)XR(i,t,s[a++],s[a++],s[a++],s[a++])}function z9(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function nP(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function iP(n,e){const t=n.contentQueries;if(null!==t){const i=C(null);try{for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const a=n.data[s];_b(t[r]),a.contentQueries(2,e[s],s)}}}finally{C(i)}}}function Zb(n,e){return n[jp]?n[OD][ja]=e:n[jp]=e,n[OD]=e,e}function vS(n,e,t){_b(0);const i=C(null);try{e(n,t)}finally{C(i)}}function rP(n){return n[dh]??=[]}function oP(n){return n.cleanup??=[]}function Qb(n,e){const t=n[so],i=t?t.get(rs,null):null;i&&i.handleError(e)}function xS(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],c=t[o++];XR(n.data[s],e[s],i,a,c,r)}}function j9(n,e){const t=Xs(e,n),i=t[Zt];!function $9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Or];null!==r&&null===t[es]&&(t[es]=$E(r,t[so])),wS(i,t,t[br])}function wS(n,e,t){xE(e);try{const i=n.viewQuery;null!==i&&vS(1,i,t);const r=n.template;null!==r&&YR(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[zl]?.finishViewCreation(n),n.staticContentQueries&&iP(n,e),n.staticViewQueries&&vS(2,n.viewQuery,t);const o=n.components;null!==o&&function H9(n,e){for(let t=0;t<e.length;t++)j9(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[jn]&=-5,wE()}}function Rh(n,e,t,i){const r=C(null);try{const o=e.tView,c=Kb(n,o,t,4096&n[jn]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[Mu]=n[e.index];const p=n[zl];return null!==p&&(c[zl]=p.createEmbeddedView(o)),wS(o,c,t),c}finally{C(r)}}function aP(n,e){const t=Kr+e;if(t<n.length)return n[t]}function Nu(n,e){return!e||null===e.firstChild||Cb(n)}function Ph(n,e,t,i=!0){const r=e[Zt];if(function c9(n,e,t,i){const r=Kr+i,o=t.length;i>0&&(t[r-1][ja]=e),i<o-Kr?(e[ja]=t[r],fD(t,Kr+i,e)):(t.push(e),e[ja]=null),e[oo]=t;const s=e[Mu];null!==s&&t!==s&&OR(s,e);const a=e[zl];null!==a&&a.insertView(n),fE(e),e[jn]|=128}(r,e,n,t),i){const s=uS(t,n),a=e[ei],c=qb(a,n[cl]);null!==c&&function a9(n,e,t,i,r,o){i[Or]=r,i[No]=e,Yb(n,i,t,1,r,o)}(r,n[No],a,e,c,s)}const o=e[es];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function ES(n,e){const t=lm(n,e);return void 0!==t&&Wb(t[Zt],t),t}function hm(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];null!==o&&i.push(Ji(o)),jo(o)&&lP(o,i);const s=t.type;if(8&s)hm(n,e,t.child,i);else if(32&s){const a=iS(t,e);let c;for(;c=a();)i.push(c)}else if(16&s){const a=zR(e,t);if(Array.isArray(a))i.push(...a);else{const c=jl(e[kr]);hm(c[Zt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function lP(n,e){for(let t=Kr;t<n.length;t++){const i=n[t],r=i[Zt].firstChild;null!==r&&hm(i[Zt],i,r,e)}n[cl]!==n[Or]&&e.push(n[cl])}let cP=[];const X9={...l,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{pb(n.lView)},consumerOnSignalRead(){this.lView[_a]=this}},K9={...l,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=jl(n.lView);for(;e&&!uP(e[Zt]);)e=jl(e);e&&GD(e)},consumerOnSignalRead(){this.lView[_a]=this}};function uP(n){return 2!==n.type}const Z9=100;function Jb(n,e=!0,t=0){const i=n[ll],r=i.rendererFactory;r.begin?.();try{!function Q9(n,e){const t=ZD();try{QD(!0),SS(n,e);let i=0;for(;qp(n);){if(i===Z9)throw new ot(103,!1);i++,SS(n,1)}}finally{QD(t)}}(n,t)}catch(s){throw e&&Qb(n,s),s}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function J9(n,e,t,i){const r=e[jn];if(!(256&~r))return;e[ll].inlineEffectRunner?.flush(),xE(e);let a=!0,c=null,d=null;uP(n)?(d=function G9(n){return n[_a]??function W9(n){const e=cP.pop()??Object.create(X9);return e.lView=n,e}(n)}(e),c=k(d)):null===function w(){return L}()?(a=!1,d=function Y9(n){const e=n[_a]??Object.create(K9);return e.lView=n,e}(e),c=k(d)):e[_a]&&(P(e[_a]),e[_a]=null);try{HD(e),function JD(n){return ti.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&YR(n,e,t,2,i);const p=!(3&~r);if(p){const v=n.preOrderCheckHooks;null!==v&&vb(e,v,null)}else{const v=n.preOrderHooks;null!==v&&xb(e,v,0,null),EE(e,0)}if(function e7(n){for(let e=j2(n);null!==e;e=$2(e)){if(!(e[jn]&hb.HasTransplantedViews))continue;const t=e[mh];for(let i=0;i<t.length;i++)GD(t[i])}}(e),hP(e,0),null!==n.contentQueries&&iP(n,e),p){const v=n.contentCheckHooks;null!==v&&vb(e,v)}else{const v=n.contentHooks;null!==v&&xb(e,v,1),EE(e,1)}!function b9(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Ru(~r);else{const o=r,s=t[++i],a=t[++i];nG(s,o),a(2,e[o])}}}finally{Ru(-1)}}(n,e);const m=n.components;null!==m&&pP(e,m,0);const y=n.viewQuery;if(null!==y&&vS(2,y,i),p){const v=n.viewCheckHooks;null!==v&&vb(e,v)}else{const v=n.viewHooks;null!==v&&xb(e,v,2),EE(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ub]){for(const v of e[ub])v();e[ub]=null}e[jn]&=-73}catch(p){throw pb(e),p}finally{null!==d&&(T(d,c),a&&function q9(n){n.lView[_a]!==n&&(n.lView=null,cP.push(n))}(d)),wE()}}function hP(n,e){for(let t=j2(n);null!==t;t=$2(t))for(let i=Kr;i<t.length;i++)fP(t[i],e)}function t7(n,e,t){fP(Xs(e,n),t)}function fP(n,e){hE(n)&&SS(n,e)}function SS(n,e){const i=n[Zt],r=n[jn],o=n[_a];let s=!!(0===e&&16&r);if(s||=!!(64&r&&0===e),s||=!!(1024&r),s||=!(!o?.dirty||!M(o)),s||=!1,o&&(o.dirty=!1),n[jn]&=-9217,s)J9(i,n,i.template,n[br]);else if(8192&r){hP(n,1);const a=i.components;null!==a&&pP(n,a,1)}}function pP(n,e,t){for(let i=0;i<e.length;i++)t7(n,e[i],t)}function fm(n,e){const t=ZD()?64:1088;for(n[ll].changeDetectionScheduler?.notify(e);n;){n[jn]|=t;const i=jl(n);if(Hp(n)&&!i)return n;n=i}return null}class pm{get rootNodes(){const e=this._lView,t=e[Zt];return hm(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[br]}set context(e){this._lView[br]=e}get destroyed(){return!(256&~this._lView[jn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[oo];if(jo(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(lm(e,i),eb(t,i))}this._attachedToViewContainer=!1}Wb(this._lView[Zt],this._lView)}onDestroy(e){mb(this._lView,e)}markForCheck(){fm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[jn]&=-129}reattach(){fE(this._lView),this._lView[jn]|=128}detectChanges(){this._lView[jn]|=1024,Jb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ot(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Hp(this._lView),t=this._lView[Mu];null!==t&&!e&&sS(t,this._lView),PR(this._lView[Zt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ot(902,!1);this._appRef=e;const t=Hp(this._lView),i=this._lView[Mu];null!==i&&!t&&OR(i,this._lView),fE(this._lView)}}let gl=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=r7}return n})();const n7=gl,i7=class extends n7{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=Rh(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new pm(r)}};function r7(){return ey(ar(),Et())}function ey(n,e){return 4&n.type?new i7(e,n,xh(n,e)):null}let kP=()=>null;function Lu(n,e){return kP(n,e)}class kh{}const wm=new Pt("",{providedIn:"root",factory:()=>!1}),NP=new Pt("");class G7{}class FP{}class q7{resolveComponentFactory(e){throw function W7(n){const e=Error(`No component factory found for ${_o(n)}.`);return e.ngComponent=n,e}(e)}}class Em{static#e=this.NULL=new q7}class oy{}let Xl=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function X7(){const n=Et(),t=Xs(ar().index,n);return(Co(t)?t:n)[ei]}()}return n})(),Y7=(()=>{class n{static#e=this.\u0275prov=hn({token:n,providedIn:"root",factory:()=>null})}return n})();const UP=new Set;function Ps(n){UP.has(n)||(UP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function BP(n){let e=!0;return setTimeout(()=>{e&&(e=!1,n())}),"function"==typeof mr.requestAnimationFrame&&mr.requestAnimationFrame(()=>{e&&(e=!1,n())}),()=>{e=!1}}function VP(n){let e=!0;return queueMicrotask(()=>{e&&n()}),()=>{e=!1}}function zP(...n){}class wi{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $i(!1),this.onMicrotaskEmpty=new $i(!1),this.onStable=new $i(!1),this.onError=new $i(!1),typeof Zone>"u")throw new ot(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.callbackScheduled=!1,function Q7(n){const e=()=>{!function Z7(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{BP(()=>{n.callbackScheduled=!1,NS(n),n.isCheckStableRunning=!0,kS(n),n.isCheckStableRunning=!1})}),NS(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{if(function J7(n){return HP(n,"__ignore_ng_zone__")}(a))return t.invokeTask(r,o,s,a);try{return jP(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),$P(n)}},onInvoke:(t,i,r,o,s,a,c)=>{try{return jP(n),t.invoke(r,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function eq(n){return HP(n,"__scheduler_tick__")}(a)&&e(),$P(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,NS(n),kS(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wi.isInAngularZone())throw new ot(909,!1)}static assertNotInAngularZone(){if(wi.isInAngularZone())throw new ot(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,K7,zP,zP);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const K7={};function kS(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function NS(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function jP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $P(n){n._nesting--,kS(n)}class FS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $i,this.onMicrotaskEmpty=new $i,this.onStable=new $i,this.onError=new $i}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}function HP(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}let Sm=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of t)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=hn({token:n,providedIn:"root",factory:()=>new n})}return n})();function ay(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=kw(r,a):2==o&&(i=kw(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class ZP extends Em{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ri(e);return new Am(t,this.ngModule)}}function QP(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const i=n[t];void 0!==i&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:t})}return e}class Am extends FP{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=QP(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return QP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function hH(n){return n.map(dH).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){const o=C(null);try{let s=(r=r||this.ngModule)instanceof Cs?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new wb(e,s):e,c=a.get(oy,null);if(null===c)throw new ot(407,!1);const d=a.get(Y7,null),y={rendererFactory:c,sanitizer:d,inlineEffectRunner:null,afterRenderEventManager:a.get(Sm,null),changeDetectionScheduler:a.get(kh,null)},v=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",I=i?function v9(n,e,t,i){const o=i.get(aR,!1)||t===Ba.ShadowDom,s=n.selectRootElement(e,o);return function x9(n){ZR(n)}(s),s}(v,i,this.componentDef.encapsulation,a):Gb(v,E,function oq(n){const e=n.toLowerCase();return"svg"===e?jD:"math"===e?"math":null}(E));let D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let R=null;null!==I&&(R=$E(I,a,!0));const j=gS(0,null,null,1,0,null,null,null,null,null,null),H=Kb(null,j,null,D,null,null,y,v,a,null,R);let Y,he;xE(H);try{const te=this.componentDef;let re,be=null;te.findHostDirectiveDefs?(re=[],be=new Map,te.findHostDirectiveDefs(te,re,be),re.push(te)):re=[te];const se=function aq(n,e){const t=n[Zt],i=$n;return n[i]=e,Dh(t,i,2,"#host",null)}(H,I),ie=function lq(n,e,t,i,r,o,s){const a=r[Zt];!function cq(n,e,t,i){for(const r of n)e.mergedAttrs=Vp(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(ay(e,e.mergedAttrs,!0),null!==t&&GR(i,t,e))}(i,n,e,s);let c=null;null!==e&&(c=$E(e,r[so]));const d=o.rendererFactory.createRenderer(e,t);let p=16;t.signals?p=4096:t.onPush&&(p=64);const m=Kb(r,KR(t),null,p,r[n.index],n,o,d,null,null,c);return a.firstCreatePass&&bS(a,n,i.length-1),Zb(r,m),r[n.index]=m}(se,I,te,re,H,y,v);he=Wp(j,$n),I&&function dq(n,e,t,i){if(i)Kw(n,t,["ng-version","18.0.4"]);else{const{attrs:r,classes:o}=function fH(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Va(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Kw(n,t,r),o&&o.length>0&&HR(n,t,o.join(" "))}}(v,te,I,i),void 0!==t&&function hq(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(he,this.ngContentSelectors,t),Y=function uq(n,e,t,i,r,o){const s=ar(),a=r[Zt],c=ns(s,r);eP(a,r,s,t,null,i);for(let p=0;p<t.length;p++)Ho(Pu(r,a,s.directiveStart+p,s),r);tP(a,r,s),c&&Ho(c,r);const d=Pu(r,a,s.directiveStart+s.componentOffset,s);if(n[br]=r[br]=d,null!==o)for(const p of o)p(d,e);return fS(a,s,r),d}(ie,te,re,be,H,[fq]),wS(j,H,null)}finally{wE()}return new sq(this.componentType,Y,xh(he,H),H,he)}finally{C(o)}}}class sq extends G7{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new pm(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;xS(o[Zt],o,r,e,t),this.previousInputValues.set(e,t),fm(Xs(this._tNode.index,o),1)}}get injector(){return new xo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function fq(){const n=ar();yb(Et()[Zt],n)}let Zs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=pq}return n})();function pq(){return tO(ar(),Et())}const mq=Zs,JP=class extends mq{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return xh(this._hostTNode,this._hostLView)}get injector(){return new xo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Tb(this._hostTNode,this._hostLView);if(ME(e)){const t=Qp(e,this._hostLView),i=Zp(e);return new xo(t[Zt].data[i+8],t)}return new xo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=eO(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Kr}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=Lu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,Nu(this._hostTNode,s)),a}createComponent(e,t,i,r,o){const s=e&&!function zp(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const E=t||{};a=E.index,i=E.injector,r=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}const c=s?e:new Am(Ri(e)),d=i||this.parentInjector;if(!o&&null==c.ngModule){const I=(s?d:this.parentInjector).get(Cs,null);I&&(o=I)}const p=Ri(c.componentType??{}),m=Lu(this._lContainer,p?.id??null),v=c.create(d,r,m?.firstChild??null,o);return this.insertImpl(v.hostView,a,Nu(this._hostTNode,m)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function GH(n){return jo(n[oo])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[oo],d=new JP(c,c[No],c[oo]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return Ph(s,r,o,i),e.attachToViewContainerRef(),fD(VS(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=eO(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=lm(this._lContainer,t);i&&(eb(VS(this._lContainer),t),Wb(i[Zt],i))}detach(e){const t=this._adjustIndex(e,-1),i=lm(this._lContainer,t);return i&&null!=eb(VS(this._lContainer),t)?new pm(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function eO(n){return n[8]}function VS(n){return n[8]||(n[8]=[])}function tO(n,e){let t;const i=e[n.index];return jo(i)?t=i:(t=nP(i,e,null,n),e[n.index]=t,Zb(e,t)),nO(t,e,n,i),new JP(t,n,e)}let nO=function rO(n,e,t,i){if(n[cl])return;let r;r=8&t.type?Ji(i):function gq(n,e){const t=n[ei],i=t.createComment(""),r=ns(e,n);return ku(t,qb(t,r),i,function f9(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[cl]=r},zS=()=>!1;class jS{constructor(e){this.queryList=e,this.matches=null}clone(){return new jS(this.queryList)}setDirty(){this.queryList.setDirty()}}class $S{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new $S(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==XS(e,t).matches&&this.queries[t].setDirty()}}class oO{constructor(e,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof e?function Sq(n){return n.split(",").map(e=>e.trim())}(e):e}}class HS{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new HS(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class GS{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new GS(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,vq(t,o)),this.matchTNodeWithReadOption(e,t,Mb(t,e,o,!1,!1))}else i===gl?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Mb(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===Mr||r===Zs||r===gl&&4&t.type)this.addMatch(t.index,-2);else{const o=Mb(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function vq(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function wq(n,e,t,i){return-1===t?function xq(n,e){return 11&n.type?xh(n,e):4&n.type?ey(n,e):null}(e,n):-2===t?function Eq(n,e,t){return t===Mr?xh(e,n):t===gl?ey(e,n):t===Zs?tO(e,n):void 0}(n,e,i):Pu(n,n[Zt],t,e)}function sO(n,e,t,i){const r=e[zl].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const d=s[c];a.push(d<0?null:wq(e,o[d],s[c+1],t.metadata.read))}r.matches=a}return r.matches}function WS(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=sO(n,e,r,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)i.push(s[a/2]);else{const d=o[a+1],p=e[-c];for(let m=Kr;m<p.length;m++){const y=p[m];y[Mu]===y[oo]&&WS(y[Zt],y,d,i)}if(null!==p[mh]){const m=p[mh];for(let y=0;y<m.length;y++){const v=m[y];WS(v[Zt],v,d,i)}}}}}return i}function aO(n,e,t){const i=new wh(!(4&~t));return function S9(n,e,t,i){const r=rP(e);r.push(t),n.firstCreatePass&&oP(n).push(i,r.length-1)}(n,e,i,i.destroy),(e[zl]??=new $S).queries.push(new jS(i))-1}function uO(n,e,t){null===n.queries&&(n.queries=new HS),n.queries.track(new GS(e,t))}function XS(n,e){return n.queries.getByIndex(e)}function dO(n,e){const t=n[Zt],i=XS(t,e);return i.crossesNgTemplate?WS(t,n,e,[]):sO(t,n,i,e)}function ly(n){return"function"==typeof n&&void 0!==n[O]}function hO(n,e){Ps("NgSignals");const t=function ee(n){const e=Object.create(gt);e.value=n;const t=()=>(h(e),e.value);return t[O]=e,t}(n),i=t[O];return e?.equal&&(i.equal=e.equal),t.set=r=>qe(i,r),t.update=r=>function Mt(n,e){x()||je(),qe(n,e(n.value))}(i,r),t.asReadonly=fO.bind(t),t}function fO(){const n=this[O];if(void 0===n.readonlyFn){const e=()=>this();e[O]=n,n.readonlyFn=e}return n.readonlyFn}function pO(n){return ly(n)&&"function"==typeof n.set}function Hi(n){let e=function TO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if($a(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ot(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=uy(n.inputs),s.inputTransforms=uy(n.inputTransforms),s.declaredInputs=uy(n.declaredInputs),s.outputs=uy(n.outputs);const a=r.hostBindings;a&&Bq(n,a);const c=r.viewQuery,d=r.contentQueries;if(c&&Lq(n,c),d&&Uq(n,d),Nq(n,r),P$(n.outputs,r.outputs),$a(r)&&r.data.animation){const p=n.data;p.animation=(p.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Hi&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Fq(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Vp(r.hostAttrs,t=Vp(t,r.hostAttrs))}}(i)}function Nq(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const i=e.inputs[t];if(void 0!==i&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function uy(n){return n===sl?{}:n===Xi?[]:n}function Lq(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function Uq(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function Bq(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function ya(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}class Bu{}class IO{}class KS extends Bu{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ZP(this);const r=zo(e);this._bootstrapComponents=Ks(r.bootstrap),this._r3Injector=C2(e,t,[{provide:Bu,useValue:this},{provide:Em,useValue:this.componentFactoryResolver},...i],_o(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ZS extends IO{constructor(e){super(),this.moduleType=e}create(e){return new KS(this.moduleType,e,[])}}class DO extends Bu{constructor(e){super(),this.componentFactoryResolver=new ZP(this),this.instance=null;const t=new lh([...e.providers,{provide:Bu,useValue:this},{provide:Em,useValue:this.componentFactoryResolver}],e.parent||ab(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function QS(n,e,t=null){return new DO({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Zr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Dm(n,e,t,i,r,o,s,a,c,d){const p=t+$n,m=e.firstCreatePass?function Zq(n,e,t,i,r,o,s,a,c){const d=e.consts,p=Dh(e,n,4,s||null,a||null);_S(e,t,p,ba(d,c)),yb(e,p);const m=p.tView=gS(2,p,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,p),m.queries=e.queries.embeddedTView(p)),p}(p,e,n,i,r,o,s,a,c):e.data[p];dl(m,!1);const y=RO(e,n,m,t);Yp()&&Xb(e,n,y,m),Ho(y,n);const v=nP(y,n,y,m);return n[p]=v,Zb(n,v),function iO(n,e,t){return zS(n,e,t)}(v,m,n),fb(m)&&pS(e,n,m),null!=c&&mS(n,m,d),m}function xa(n,e,t,i,r,o,s,a){const c=Et(),d=ki();return Dm(c,d,n,e,t,i,r,ba(d.consts,o),s,a),xa}let RO=function PO(n,e,t,i){return hl(!0),e[ei].createComment("")};function Io(n,e,t,i){const r=Et();return Zr(r,Ha(),e)&&(ki(),ml(yr(),r,n,e,t,i)),Io}function by(n,e){return n<<17|e<<2}function kc(n){return n>>17&32767}function u1(n){return 2|n}function ju(n){return(131068&n)>>2}function d1(n,e){return-131069&n|e<<2}function h1(n){return 1|n}function ck(n,e,t,i){const r=n[t+1],o=null===e;let s=i?kc(r):ju(r),a=!1;for(;0!==s&&(!1===a||o);){const d=n[s+1];FX(n[s],e)&&(a=!0,n[s+1]=i?h1(d):u1(d)),s=i?kc(d):ju(d)}a&&(n[t+1]=i?u1(r):h1(r))}function FX(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&oh(n,e)>=0}const wo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uk(n){return n.substring(wo.key,wo.keyEnd)}function dk(n,e){const t=wo.textEnd;return t===e?-1:(e=wo.keyEnd=function VX(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,wo.key=e,t),Qh(n,e,t))}function Qh(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function lr(n,e,t){const i=Et();return Zr(i,Ha(),e)&&Rs(ki(),yr(),i,n,e,i[ei],t,!1),lr}function f1(n,e,t,i,r){const s=r?"class":"style";xS(n,t,e.inputs[s],s,i)}function yy(n,e,t){return Ga(n,e,t,!1),yy}function Go(n,e){return Ga(n,e,null,!0),Go}function Jh(n){!function Wa(n,e,t,i){const r=ki(),o=Hl(2);r.firstUpdatePass&&_k(r,null,o,i);const s=Et();if(t!==ci&&Zr(s,o,t)){const a=r.data[$o()];if(xk(a,i)&&!gk(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=kw(c,t||"")),f1(r,a,s,t,i)}else!function KX(n,e,t,i,r,o,s,a){r===ci&&(r=Xi);let c=0,d=0,p=0<r.length?r[0]:null,m=0<o.length?o[0]:null;for(;null!==p||null!==m;){const y=c<r.length?r[c+1]:void 0,v=d<o.length?o[d+1]:void 0;let I,E=null;p===m?(c+=2,d+=2,y!==v&&(E=m,I=v)):null===m||null!==p&&p<m?(c+=2,E=p):(d+=2,E=m,I=v),null!==E&&yk(n,e,t,i,E,I,s,a),p=c<r.length?r[c]:null,m=d<o.length?o[d]:null}}(r,a,s,s[ei],s[o+1],s[o+1]=function XX(n,e,t){if(null==t||""===t)return Xi;const i=[],r=Ys(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,o)}}(YX,yl,n,!0)}function yl(n,e){for(let t=function UX(n){return function fk(n){wo.key=0,wo.keyEnd=0,wo.value=0,wo.valueEnd=0,wo.textEnd=n.length}(n),dk(n,Qh(n,0,wo.textEnd))}(e);t>=0;t=dk(e,t))qs(n,uk(e),!0)}function Ga(n,e,t,i){const r=Et(),o=ki(),s=Hl(2);o.firstUpdatePass&&_k(o,n,s,i),e!==ci&&Zr(r,s,e)&&yk(o,o.data[$o()],r,r[ei],n,r[s+1]=function ZX(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=_o(Ys(n)))),n}(e,t),i,s)}function gk(n,e){return e>=n.expandoStartIndex}function _k(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[$o()],s=gk(n,t);xk(o,i)&&null===e&&!s&&(e=!1),e=function HX(n,e,t,i){const r=function yE(n){const e=ti.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=km(t=p1(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=p1(r,n,e,t,i),null===o){let c=function GX(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==ju(i))return n[kc(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=p1(null,n,e,c[1],i),c=km(c,e.attrs,i),function WX(n,e,t,i){n[kc(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else o=function qX(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=km(i,n[o].hostAttrs,t);return km(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function kX(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=kc(s),c=ju(s);n[i]=t;let p,d=!1;if(Array.isArray(t)?(p=t[1],(null===p||oh(t,p)>0)&&(d=!0)):p=t,r)if(0!==c){const y=kc(n[a+1]);n[i+1]=by(y,a),0!==y&&(n[y+1]=d1(n[y+1],i)),n[a+1]=function PX(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=by(a,0),0!==a&&(n[a+1]=d1(n[a+1],i)),a=i;else n[i+1]=by(c,0),0===a?a=i:n[c+1]=d1(n[c+1],i),c=i;d&&(n[i+1]=u1(n[i+1])),ck(n,p,i,!0),ck(n,p,i,!1),function NX(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&oh(o,e)>=0&&(t[i+1]=h1(t[i+1]))}(e,p,n,i,o),s=by(a,c),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}function p1(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=km(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function km(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qs(n,s,!!t||e[++o]))}return void 0===n?null:n}function YX(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&qs(n,i,t)}function yk(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const c=n.data,d=c[a+1],p=function OX(n){return!(1&~n)}(d)?vk(c,e,t,r,ju(d),s):void 0;vy(p)||(vy(o)||function RX(n){return!(2&~n)}(d)&&(o=vk(c,null,t,r,a,s)),function g9(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:Dc.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Dc.Important),n.setStyle(t,i,r,o))}}(i,s,Gp($o(),t),r,o))}function vk(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const c=n[r],d=Array.isArray(c),p=d?c[1]:c,m=null===p;let y=t[r+1];y===ci&&(y=m?Xi:void 0);let v=m?Xw(y,i):p===i?y:void 0;if(d&&!vy(v)&&(v=Xw(c,i)),vy(v)&&(a=v,s))return a;const E=n[r+1];r=s?kc(E):ju(E)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Xw(c,i))}return a}function vy(n){return void 0!==n}function xk(n,e){return!!(n.flags&(e?8:16))}class lY{destroy(e){}updateValue(e,t){}swap(e,t){const i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){const s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}}function m1(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function g1(n,e,t,i){return!(void 0===e||!e.has(i)||(n.attach(t,e.get(i)),e.delete(i),0))}function wk(n,e,t,i,r){if(g1(n,e,i,t(i,r)))n.updateValue(i,r);else{const o=n.create(i,r);n.attach(i,o)}}function Ek(n,e,t,i){const r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}class Sk{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const t=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),void 0!==this._vMap){const r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}}function $u(n,e){Ps("NgControlFlow");const t=Et(),i=Ha(),r=t[i]!==ci?t[i]:-1,o=-1!==r?xy(t,$n+r):void 0;if(Zr(t,i,n)){const a=C(null);try{if(void 0!==o&&ES(o,0),-1!==n){const c=$n+n,d=xy(t,c),p=_1(t[Zt],c),m=Lu(d,p.tView.ssrId);Ph(d,Rh(t,p,e,{dehydratedView:m}),0,Nu(p,m))}}finally{C(a)}}else if(void 0!==o){const a=aP(o,0);void 0!==a&&(a[br]=e)}}class uY{constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Kr}}function Tk(n){return n}class hY{constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}}class fY extends lY{constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Kr}at(e){return this.getLView(e)[br].$implicit}attach(e,t){const i=t[es];this.needsIndexUpdate||=e!==this.length,Ph(this.lContainer,t,e,Nu(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function pY(n,e){return lm(n,e)}(this.lContainer,e)}create(e,t){const i=Lu(this.lContainer,this.templateTNode.tView.ssrId),r=Rh(this.hostLView,this.templateTNode,new uY(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Wb(e[Zt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[br].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[br].$index=e}getLView(e){return function mY(n,e){return aP(n,e)}(this.lContainer,e)}}function xy(n,e){return n[e]}function _1(n,e){return Wp(n,e)}function Mn(n,e,t,i){const r=Et(),o=ki(),s=$n+n,a=r[ei],c=o.firstCreatePass?function gY(n,e,t,i,r,o){const s=e.consts,c=Dh(e,n,2,i,ba(s,r));return _S(e,t,c,ba(s,o)),null!==c.attrs&&ay(c,c.attrs,!1),null!==c.mergedAttrs&&ay(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,e,t,i):o.data[s],d=Ck(o,r,c,a,e,n);r[s]=d;const p=fb(c);return dl(c,!0),GR(a,d,c),!function Fh(n){return!(32&~n.flags)}(c)&&Yp()&&Xb(o,r,d,c),0===function WH(){return ti.lFrame.elementDepthCount}()&&Ho(d,r),function qH(){ti.lFrame.elementDepthCount++}(),p&&(pS(o,r,c),fS(o,c,r)),null!==i&&mS(r,c),Mn}function xn(){let n=ar();gE()?_E():(n=n.parent,dl(n,!1));const e=n;(function YH(n){return ti.skipHydrationRootTNode===n})(e)&&function JH(){ti.skipHydrationRootTNode=null}(),function XH(){ti.lFrame.elementDepthCount--}();const t=ki();return t.firstCreatePass&&(yb(t,n),aE(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function hG(n){return!!(8&n.flags)}(e)&&f1(t,e,Et(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function fG(n){return!!(16&n.flags)}(e)&&f1(t,e,Et(),e.stylesWithoutHost,!1),xn}function Ai(n,e,t,i){return Mn(n,e,t,i),xn(),Ai}let Ck=(n,e,t,i,r,o)=>(hl(!0),Gb(i,r,function l2(){return ti.lFrame.currentNamespace}()));function wy(){return Et()}function v1(n,e,t){const i=Et();return Zr(i,Ha(),e)&&Rs(ki(),yr(),i,n,e,i[ei],t,!0),v1}const tf="en-US";let kk=tf;let Jk=(n,e,t)=>{};function Yi(n,e,t,i){const r=Et(),o=ki(),s=ar();return E1(o,r,r[ei],s,n,e,i),Yi}function E1(n,e,t,i,r,o,s){const a=fb(i),d=n.firstCreatePass&&oP(n),p=e[br],m=rP(e);let y=!0;if(3&i.type||s){const I=ns(i,e),D=s?s(I):I,R=m.length,j=s?Y=>s(Ji(Y[i.index])):i.index;let H=null;if(!s&&a&&(H=function hK(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[dh],c=r[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==H)(H.__ngLastListenerFn__||H).__ngNextListenerFn__=o,H.__ngLastListenerFn__=o,y=!1;else{o=iN(i,e,p,o),Jk(I,r,o);const Y=t.listen(D,r,o);m.push(o,Y),d&&d.push(r,j,R,R+1)}}else o=iN(i,e,p,o);const v=i.outputs;let E;if(y&&null!==v&&(E=v[r])){const I=E.length;if(I)for(let D=0;D<I;D+=2){const he=e[E[D]][E[D+1]].subscribe(o),te=m.length;m.push(o,he),d&&d.push(r,i.index,te,-(te+1))}}}function nN(n,e,t,i){const r=C(null);try{return ul(6,e,t),!1!==t(i)}catch(o){return Qb(n,o),!1}finally{ul(7,e,t),C(r)}}function iN(n,e,t,i){return function r(o){if(o===Function)return i;fm(n.componentOffset>-1?Xs(n.index,e):e,5);let a=nN(e,t,i,o),c=r.__ngNextListenerFn__;for(;c;)a=nN(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Gu(n=1){return function oG(n){return(ti.lFrame.contextLView=function WD(n,e){for(;n>0;)e=e[hh],n--;return e}(n,ti.lFrame.contextLView))[br]}(n)}function fK(n,e){let t=null;const i=function aH(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?xD(n,o,!0):uH(i,o))return r}else t=r}return t}function Nc(n){const e=Et()[kr][No];if(!e.projection){const i=e.projection=function tb(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(n?n.length:1,null),r=i.slice();let o=e.child;for(;null!==o;){const s=n?fK(o,n):0;null!==s&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function ks(n,e=0,t,i,r,o){const s=Et(),a=ki(),c=i?n+1:null;null!==c&&Dm(s,a,c,i,r,o,null,t);const d=Dh(a,$n+n,16,null,t||null);null===d.projection&&(d.projection=e),_E();const m=!s[es]||Cu();null===s[kr][No].projection[d.projection]&&null!==c?function pK(n,e,t){const i=$n+t,r=e.data[i],o=n[i],s=Lu(o,r.tView.ssrId);Ph(o,Rh(n,r,void 0,{dehydratedView:s}),0,Nu(r,s))}(s,a,c):m&&32&~d.flags&&function p9(n,e,t){$R(e[ei],0,e,t,lS(n,t,e),LR(t.parent||e[No],t,e))}(a,s,d)}function nf(n,e,t,i){!function cO(n,e,t,i){const r=ki();if(r.firstCreatePass){const o=ar();uO(r,new oO(e,t,i),o.index),function Tq(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),!(2&~t)&&(r.staticContentQueries=!0)}return aO(r,Et(),t)}(n,e,t,i)}function vl(n,e,t){!function lO(n,e,t){const i=ki();return i.firstCreatePass&&(uO(i,new oO(n,e,t),-1),!(2&~e)&&(i.staticViewQueries=!0)),aO(i,Et(),e)}(n,e,t)}function ss(n){const e=Et(),t=ki(),i=vE();_b(i+1);const r=XS(t,i);if(n.dirty&&function HH(n){return!(4&~n[jn])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)n.reset([]);else{const o=dO(e,i);n.reset(o,P2),n.notifyOnChanges()}return!0}return!1}function as(){return function qS(n,e){return n[zl].queries[e].queryList}(Et(),vE())}function Ar(n,e=""){const t=Et(),i=ki(),r=n+$n,o=i.firstCreatePass?Dh(i,r,1,e,null):i.data[r],s=EN(i,t,o,e,n);t[r]=s,Yp()&&Xb(i,t,s,o),dl(o,!1)}let EN=(n,e,t,i,r)=>(hl(!0),function rS(n,e){return n.createText(e)}(e[ei],i));function My(n){return Ay("",n,""),My}function Ay(n,e,t){const i=Et(),r=function Hh(n,e,t,i){return Zr(n,Ha(),t)?e+li(t)+i:ci}(i,n,e,t);return r!==ci&&function ql(n,e,t){const i=Gp(e,n);!function RR(n,e,t){n.setValue(e,t)}(n[ei],i,t)}(i,$o(),r),Ay}function Wu(n,e,t){pO(e)&&(e=e());const i=Et();return Zr(i,Ha(),e)&&Rs(ki(),yr(),i,n,e,i[ei],t,!1),Wu}function rf(n,e){const t=pO(n);return t&&n.set(e),t}function qu(n,e){const t=Et(),i=ki(),r=ar();return E1(i,t,t[ei],r,n,e),qu}function T1(n,e,t,i,r){if(n=Xn(n),Array.isArray(n))for(let o=0;o<n.length;o++)T1(n[o],e,t,i,r);else{const o=ki(),s=Et(),a=ar();let c=Tu(n)?n:Xn(n.provide);const d=DD(n),p=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(Tu(n)||!n.multi){const v=new Kp(d,r,Je),E=A1(c,e,r?p:p+y,m);-1===E?(IE(Sb(a,s),o,c),M1(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[E]=v,s[E]=v)}else{const v=A1(c,e,p+y,m),E=A1(c,e,p,p+y),D=E>=0&&t[E];if(r&&!D||!r&&!(v>=0&&t[v])){IE(Sb(a,s),o,c);const R=function NK(n,e,t,i,r){const o=new Kp(n,t,Je);return o.multi=[],o.index=e,o.componentProviders=0,ON(o,r,i&&!t),o}(r?kK:OK,t.length,r,i,d);!r&&D&&(t[E].providerFactory=R),M1(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(R),s.push(R)}else M1(o,n,v>-1?v:E,ON(t[r?E:v],d,!r&&i));!r&&i&&D&&t[E].componentProviders++}}}function M1(n,e,t,i){const r=Tu(e),o=function yH(n){return!!n.useClass}(e);if(r||o){const c=(o?Xn(e.useClass):e).prototype.ngOnDestroy;if(c){const d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const p=d.indexOf(t);-1===p?d.push(t,[i,c]):d[p+1].push(i,c)}else d.push(t,c)}}}function ON(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function A1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function OK(n,e,t,i){return C1(this.multi,[])}function kK(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Pu(t,t[Zt],this.providerFactory.index,i);o=a.slice(0,s),C1(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],C1(r,o);return o}function C1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Wi(n,e=[]){return t=>{t.providersResolver=(i,r)=>function PK(n,e,t){const i=ki();if(i.firstCreatePass){const r=$a(n);T1(t,i.data,i.blueprint,r,!0),T1(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}let FK=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=Qw(0,t.type),r=i.length>0?QS([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=hn({token:n,providedIn:"environment",factory:()=>new n(ln(Cs))})}return n})();function Ns(n){Ps("NgStandalone"),n.getStandaloneInjector=e=>e.get(FK).getOrCreateStandaloneInjector(n)}function FN(n,e,t,i,r,o){const s=e+t;return Zr(n,s,r)?function _l(n,e,t){return n[e]=t}(n,s+1,o?i.call(o,r):i(r)):function Vm(n,e){const t=n[e];return t===ci?void 0:t}(n,s+1)}function Dy(n,e){const t=ki();let i;const r=n+$n;t.firstCreatePass?(i=function KK(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const o=i.factory||(i.factory=Su(i.type)),a=Ss(Je);try{const c=Eb(!1),d=o();return Eb(c),function bK(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Et(),r,d),d}finally{Ss(a)}}function Ry(n,e,t){const i=n+$n,r=Et(),o=gh(r,i);return function zm(n,e){return n[Zt].data[e].pure}(r,i)?FN(r,function is(){const n=ti.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),e,o.transform,t,o):o.transform(t)}let nF=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const aF=new Pt(""),ky=new Pt("");let F1,k1=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,F1||(function XZ(n){F1=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wi.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(ln(wi),ln(N1),ln(ky))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})(),N1=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return F1?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Hm(n){return!!n&&"function"==typeof n.then}function lF(n){return!!n&&"function"==typeof n.subscribe}const YZ=new Pt("");let L1=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=St(YZ,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const o=r();if(Hm(o))t.push(o);else if(lF(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ny=new Pt("");let qa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=St(D2),this.afterRenderEffectManager=St(Sm),this.zonelessEnabled=St(wm),this.externalTestViews=new Set,this.beforeRender=new zn,this.afterTick=new zn,this.componentTypes=[],this.components=[],this.isStable=St(Ac).hasPendingTasks.pipe(Jt(t=>!t)),this._injector=St(Cs)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof FP;if(!this._injector.get(L1).done)throw!r&&function Sc(n){const e=Ri(n)||yo(n)||ko(n);return null!==e&&e.standalone}(t),new ot(405,!1);let s;s=r?t:this._injector.get(Em).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function KZ(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Bu),d=s.create(lo.NULL,[],i||s.selector,a),p=d.location.nativeElement,m=d.injector.get(aF,null);return m?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),Fy(this.components,d),m?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ot(101,!1);const i=C(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,C(i),this.afterTick.next()}}detectChangesInAttachedViews(t){let i=null;this._injector.destroyed||(i=this._injector.get(oy,null,{optional:!0}));let r=0;const o=this.afterRenderEffectManager;for(;r<10;){const s=0===r;if(t||!s){this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)QZ(a,c,s,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(r++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>qp(a))&&(o.execute(),!this.allViews.some(({_lView:a})=>qp(a))))break}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Fy(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Ny,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Fy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ot(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function QZ(n,e,t,i){(t||qp(n))&&Jb(n,e,t&&!i?0:1)}class JZ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let eQ=(()=>{class n{compileModuleSync(t){return new ZS(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=Ks(zo(t).declarations).reduce((s,a)=>{const c=Ri(a);return c&&s.push(new Am(c)),s},[]);return new JZ(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iQ=(()=>{class n{constructor(){this.zone=St(wi),this.changeDetectionScheduler=St(kh),this.applicationRef=St(qa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const rQ=new Pt("",{factory:()=>!1});function U1({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new wi(B1()),[{provide:wi,useFactory:n},{provide:al,multi:!0,useFactory:()=>{const t=St(iQ,{optional:!0});return()=>t.initialize()}},{provide:al,multi:!0,useFactory:()=>{const t=St(aQ);return()=>{t.initialize()}}},{provide:D2,useFactory:oQ},!0===e?{provide:NP,useValue:!0}:[]]}function oQ(){const n=St(wi),e=St(rs);return t=>n.runOutsideAngular(()=>e.handleError(t))}function B1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let aQ=(()=>{class n{constructor(){this.subscription=new dn,this.initialized=!1,this.zone=St(wi),this.pendingTasks=St(Ac)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{wi.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{wi.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gm=(()=>{class n{constructor(){this.appRef=St(qa),this.taskService=St(Ac),this.ngZone=St(wi),this.zonelessEnabled=St(wm),this.disableScheduling=St(NP,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new dn,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof FS||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const i=this.useMicrotaskScheduler?VP:BP;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&wi.isInAngularZone())}tick(t){if(this.runningTick||this.appRef.destroyed)return;const i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(t)},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(i),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,VP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xl=new Pt("",{providedIn:"root",factory:()=>St(xl,Oi.Optional|Oi.SkipSelf)||function lQ(){return typeof $localize<"u"&&$localize.locale||tf}()}),z1=new Pt("");let Fc=null;let Js=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=pQ}return n})();function pQ(n){return function mQ(n,e,t){if(Au(n)&&!t){const i=Xs(n.index,e);return new pm(i,i)}return 47&n.type?new pm(e[kr],e):null}(ar(),Et(),!(16&~n))}let AQ=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(ln(qa))};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({})}return n})();function jQ(n){try{const{rootComponent:e,appProviders:t,platformProviders:i}=n,r=function fQ(n=[]){if(Fc)return Fc;const e=function bF(n=[],e){return lo.create({name:e,providers:[{provide:tE,useValue:"platform"},{provide:z1,useValue:new Set([()=>Fc=null])},...n]})}(n);return Fc=e,function cF(){!function de(n){ge=n}(()=>{throw new ot(600,!1)})}(),function yF(n){n.get(Q2,null)?.forEach(t=>t())}(e),e}(i),o=[U1({}),{provide:kh,useExisting:Gm},...t||[]],a=new DO({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(wi);return c.run(()=>{a.resolveInjectorInitializers();const d=a.get(rs,null);let p;c.runOutsideAngular(()=>{p=c.onError.subscribe({next:v=>{d.handleError(v)}})});const m=()=>a.destroy(),y=r.get(z1);return y.add(m),a.onDestroy(()=>{p.unsubscribe(),y.delete(m)}),function uF(n,e,t){try{const i=t();return Hm(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,c,()=>{const v=a.get(L1);return v.runInitializers(),v.donePromise.then(()=>{!function Nk(n){"string"==typeof n&&(kk=n.toLowerCase().replace(/_/g,"-"))}(a.get(xl,tf)||tf);const I=a.get(qa);return void 0!==e&&I.bootstrap(e),I})})})}catch(e){return Promise.reject(e)}}function xr(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function wl(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function iL(n){const e=C(null);try{return n()}finally{C(e)}}const uJ=new Pt("",{providedIn:"root",factory:()=>St(dJ)});let dJ=(()=>{class n{static#e=this.\u0275prov=hn({token:n,providedIn:"root",factory:()=>new hJ})}return n})();class hJ{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=St(Ac),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){const t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);const i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}class fJ{constructor(e,t,i,r,o,s){this.scheduler=e,this.effectFn=t,this.creationZone=i,this.injector=o,this.watcher=function Ce(n,e,t){const i=Object.create(Yt);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=c=>{i.cleanupFn=c};return i.ref={notify:()=>A(i),run:()=>{if(null===i.fn)return;if(function _(){return V}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!M(i))return;i.hasRun=!0;const c=k(i);try{i.cleanupFn(),i.cleanupFn=Le,i.fn(r)}finally{T(i,c)}},cleanup:()=>i.cleanupFn(),destroy:()=>function s(c){(function o(c){return null===c.fn&&null===c.schedule})(c)||(P(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Le)}(i),[O]:i},i.ref}(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(rs,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function rL(n,e){Ps("NgSignals"),!e?.injector&&function lb(n){if(!RD())throw new ot(-203,!1)}();const t=e?.injector??St(lo),i=!0!==e?.manualCleanup?t.get(vh):null,r=new fJ(t.get(uJ),n,typeof Zone>"u"?null:Zone.current,i,t,e?.allowSignalWrites??!1),o=t.get(Js,null,{optional:!0});return o&&8&o._lView[jn]?(o._lView[ub]??=[]).push(r.watcher.notify):r.watcher.notify(),r}let oL=null;function Lc(){return oL}class mJ{}const Nr=new Pt("");let sL=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>St(gJ),providedIn:"platform"})}return n})(),gJ=(()=>{class n extends sL{constructor(){super(),this._doc=St(Nr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lc().getBaseHref(this._doc)}onPopState(t){const i=Lc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Lc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function aL(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function lL(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ku(n){return n&&"?"!==n[0]?"?"+n:n}let qy=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>St(bJ),providedIn:"root"})}return n})();const _J=new Pt("");let bJ=(()=>{class n extends qy{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??St(Nr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return aL(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ku(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+Ku(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+Ku(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ln(sL),ln(_J,8))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xm=(()=>{class n{constructor(t){this._subject=new $i,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function xJ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(lL(cL(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ku(i))}normalize(t){return n.stripTrailingSlash(function vJ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,cL(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ku(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ku(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Ku;static#t=this.joinWithSlash=aL;static#n=this.stripTrailingSlash=lL;static#i=this.\u0275fac=function(i){return new(i||n)(ln(qy))};static#r=this.\u0275prov=hn({token:n,factory:()=>function yJ(){return new Xm(ln(qy))}(),providedIn:"root"})}return n})();function cL(n){return n.replace(/\/index.html$/,"")}function bL(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}let wL=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new cee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){EL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){EL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Zs),Je(gl))};static#t=this.\u0275dir=Fn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class cee{constructor(){this.$implicit=null,this.ngIf=null}}function EL(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${_o(e)}'.`)}class fee{createSubscription(e,t){return iL(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){iL(()=>e.unsubscribe())}}class pee{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const mee=new pee,gee=new fee;let TL=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Hm(t))return mee;if(lF(t))return gee;throw function Ya(n,e){return new ot(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Js,16))};static#t=this.\u0275pipe=As({name:"async",type:n,pure:!1,standalone:!0})}return n})(),uT=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({})}return n})();const AL="browser";function CL(n){return"server"===n}class IL{}class ute extends mJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class hT extends ute{static makeCurrent(){!function pJ(n){oL??=n}(new hT)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function dte(){return Qm=Qm||document.querySelector("base"),Qm?Qm.getAttribute("href"):null}();return null==t?null:function hte(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Qm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bL(document.cookie,e)}}let Qm=null,pte=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();const fT=new Pt("");let UL=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new ot(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(ln(fT),ln(wi))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();class BL{constructor(e){this._doc=e}}const pT="ng-app-id";let VL=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=CL(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${pT}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(pT),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(pT,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Nr),ln(Sh),ln(FE,8),ln(Ic))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();const mT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gT=/%COMP%/g,bte=new Pt("",{providedIn:"root",factory:()=>!0});function jL(n,e){return e.map(t=>t.replace(gT,n))}let _T=(()=>{class n{constructor(t,i,r,o,s,a,c,d=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=CL(a),this.defaultRenderer=new bT(t,s,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ba.ShadowDom&&(i={...i,encapsulation:Ba.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof HL?r.applyToHost(t):r instanceof yT&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Ba.Emulated:o=new HL(c,d,i,this.appId,p,s,a,m);break;case Ba.ShadowDom:return new wte(c,d,t,i,s,a,this.nonce,m);default:o=new yT(c,d,i,p,s,a,m)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(ln(UL),ln(VL),ln(Sh),ln(bte),ln(Nr),ln(Ic),ln(wi),ln(FE))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();class bT{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(mT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){($L(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&($L(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ot(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=mT[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=mT[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Dc.DashCase|Dc.Important)?e.style.setProperty(t,i,r&Dc.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Dc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Lc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function $L(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class wte extends bT{constructor(e,t,i,r,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=jL(r.id,r.styles);for(const p of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yT extends bT{constructor(e,t,i,r,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?jL(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class HL extends yT{constructor(e,t,i,r,o,s,a,c){const d=r+"-"+i.id;super(e,t,i,o,s,a,c,d),this.contentAttr=function yte(n){return"_ngcontent-%COMP%".replace(gT,n)}(d),this.hostAttr=function vte(n){return"_nghost-%COMP%".replace(gT,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Ete=(()=>{class n extends BL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Nr))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();const GL=["alt","control","meta","shift"],Ste={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mte=(()=>{class n extends BL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lc().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),GL.forEach(d=>{const p=i.indexOf(d);p>-1&&(i.splice(p,1),s+=d+".")}),s+=o,0!=i.length||0===o.length)return null;const c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=Ste[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),GL.forEach(s=>{s!==r&&(0,Tte[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Nr))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();function WL(n){return{appProviders:[...XL,...n?.providers??[]],platformProviders:Rte}}const Rte=[{provide:Ic,useValue:AL},{provide:Q2,useValue:function Cte(){hT.makeCurrent()},multi:!0},{provide:Nr,useFactory:function Dte(){return function tW(n){NE=n}(document),document},deps:[]}],Pte=new Pt(""),qL=[{provide:ky,useClass:class fte{addToWindow(e){mr.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new ot(5103,!1);return o},mr.getAllAngularTestabilities=()=>e.getAllTestabilities(),mr.getAllAngularRootElements=()=>e.getAllRootElements(),mr.frameworkStabilizers||(mr.frameworkStabilizers=[]),mr.frameworkStabilizers.push(i=>{const r=mr.getAllAngularTestabilities();let o=r.length;const s=function(){o--,0==o&&i()};r.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Lc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:aF,useClass:k1,deps:[wi,N1,ky]},{provide:k1,useClass:k1,deps:[wi,N1,ky]}],XL=[{provide:tE,useValue:"root"},{provide:rs,useFactory:function Ite(){return new rs},deps:[]},{provide:fT,useClass:Ete,multi:!0,deps:[Nr,wi,Ic]},{provide:fT,useClass:Mte,multi:!0,deps:[Nr]},_T,VL,UL,{provide:oy,useExisting:_T},{provide:IL,useClass:pte,deps:[]},[]];let Ote=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Sh,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Pte,12))};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({providers:[...XL,...qL],imports:[uT,AQ]})}return n})(),kte=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Nr))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lv=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:function(i){let r=null;return r=i?new(i||n):ln(Ute),r},providedIn:"root"})}return n})(),Ute=(()=>{class n extends lv{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case Fo.NONE:return i;case Fo.HTML:return pl(i,"HTML")?Ys(i):vR(this._doc,String(i)).toString();case Fo.STYLE:return pl(i,"Style")?Ys(i):i;case Fo.SCRIPT:if(pl(i,"Script"))return Ys(i);throw new ot(5200,!1);case Fo.URL:return pl(i,"URL")?Ys(i):zb(String(i));case Fo.RESOURCE_URL:if(pl(i,"ResourceURL"))return Ys(i);throw new ot(5201,!1);default:throw new ot(5202,!1)}}bypassSecurityTrustHtml(t){return function EW(n){return new _W(n)}(t)}bypassSecurityTrustStyle(t){return function SW(n){return new bW(n)}(t)}bypassSecurityTrustScript(t){return function TW(n){return new yW(n)}(t)}bypassSecurityTrustUrl(t){return function MW(n){return new vW(n)}(t)}bypassSecurityTrustResourceUrl(t){return function AW(n){return new xW(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Nr))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uc(n){return this instanceof Uc?(this.v=n,this):new Uc(n)}function t3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ET(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){!function r(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}(a,c,(s=n[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const n3=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function i3(n){return Ne(n?.then)}function r3(n){return Ne(n[Tt])}function o3(n){return Symbol.asyncIterator&&Ne(n?.[Symbol.asyncIterator])}function s3(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const a3=function sne(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function l3(n){return Ne(n?.[a3])}function c3(n){return function e3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},a("next"),a("throw"),a("return",function s(v){return function(E){return Promise.resolve(E).then(v,m)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(v,E){i[v]&&(r[v]=function(I){return new Promise(function(D,R){o.push([v,I,D,R])>1||c(v,I)})},E&&(r[v]=E(r[v])))}function c(v,E){try{!function d(v){v.value instanceof Uc?Promise.resolve(v.value.v).then(p,m):y(o[0][2],v)}(i[v](E))}catch(I){y(o[0][3],I)}}function p(v){c("next",v)}function m(v){c("throw",v)}function y(v,E){v(E),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Uc(t.read());if(r)return yield Uc(void 0);yield yield Uc(i)}}finally{t.releaseLock()}})}function u3(n){return Ne(n?.getReader)}function ta(n){if(n instanceof Ot)return n;if(null!=n){if(r3(n))return function ane(n){return new Ot(e=>{const t=n[Tt]();if(Ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(n3(n))return function lne(n){return new Ot(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(i3(n))return function cne(n){return new Ot(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,vt)})}(n);if(o3(n))return d3(n);if(l3(n))return function une(n){return new Ot(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(u3(n))return function dne(n){return d3(c3(n))}(n)}throw s3(n)}function d3(n){return new Ot(e=>{(function hne(n,e){var t,i,r,o;return function QL(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(p){try{d(i.next(p))}catch(m){s(m)}}function c(p){try{d(i.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(p.value).then(a,c)}d((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=t3(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Zl(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function h3(n,e=0){return pi((t,i)=>{t.subscribe(on(i,r=>Zl(i,n,()=>i.next(r),e),()=>Zl(i,n,()=>i.complete(),e),r=>Zl(i,n,()=>i.error(r),e)))})}function f3(n,e=0){return pi((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function p3(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ot(t=>{Zl(t,e,()=>{const i=n[Symbol.asyncIterator]();Zl(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Do(n,e){return e?function bne(n,e){if(null!=n){if(r3(n))return function fne(n,e){return ta(n).pipe(f3(e),h3(e))}(n,e);if(n3(n))return function mne(n,e){return new Ot(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(i3(n))return function pne(n,e){return ta(n).pipe(f3(e),h3(e))}(n,e);if(o3(n))return p3(n,e);if(l3(n))return function gne(n,e){return new Ot(t=>{let i;return Zl(t,e,()=>{i=n[a3](),Zl(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>Ne(i?.return)&&i.return()})}(n,e);if(u3(n))return function _ne(n,e){return p3(c3(n),e)}(n,e)}throw s3(n)}(n,e):ta(n)}function ST(n){return n[n.length-1]}function m3(n){return Ne(ST(n))?n.pop():void 0}function Jm(n){return function yne(n){return n&&Ne(n.schedule)}(ST(n))?n.pop():void 0}function qn(...n){return Do(n,Jm(n))}const uv=Wt(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:xne}=Array,{getPrototypeOf:wne,prototype:Ene,keys:Sne}=Object;function g3(n){if(1===n.length){const e=n[0];if(xne(e))return{args:e,keys:null};if(function Tne(n){return n&&"object"==typeof n&&wne(n)===Ene}(e)){const t=Sne(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Mne}=Array;function _3(n){return Jt(e=>function Ane(n,e){return Mne(e)?n(...e):n(e)}(n,e))}function b3(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function TT(...n){const e=Jm(n),t=m3(n),{args:i,keys:r}=g3(n);if(0===i.length)return Do([],e);const o=new Ot(function Cne(n,e,t=Bt){return i=>{y3(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let c=0;c<r;c++)y3(e,()=>{const d=Do(n[c],e);let p=!1;d.subscribe(on(i,m=>{o[c]=m,p||(p=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>b3(r,s):Bt));return t?o.pipe(_3(t)):o}function y3(n,e,t){n?Zl(t,n,e):e()}function us(n,e,t=1/0){return Ne(e)?us((i,r)=>Jt((o,s)=>e(i,o,r,s))(ta(n(i,r))),t):("number"==typeof e&&(t=e),pi((i,r)=>function Ine(n,e,t,i,r,o,s,a){const c=[];let d=0,p=0,m=!1;const y=()=>{m&&!c.length&&!d&&e.complete()},v=I=>d<i?E(I):c.push(I),E=I=>{o&&e.next(I),d++;let D=!1;ta(t(I,p++)).subscribe(on(e,R=>{r?.(R),o?v(R):e.next(R)},()=>{D=!0},void 0,()=>{if(D)try{for(d--;c.length&&d<i;){const R=c.shift();s?Zl(e,s,()=>E(R)):E(R)}y()}catch(R){e.error(R)}}))};return n.subscribe(on(e,v,()=>{m=!0,y()})),()=>{a?.()}}(i,r,n,t)))}function dv(n=1/0){return us(Bt,n)}function hv(...n){return function Dne(){return dv(1)}()(Do(n,Jm(n)))}function v3(n){return new Ot(e=>{ta(n()).subscribe(e)})}function eg(n,e){const t=Ne(n)?n:()=>n,i=r=>r.error(t());return new Ot(e?r=>e.schedule(i,0,r):i)}const Sa=new Ot(n=>n.complete());function MT(){return pi((n,e)=>{let t=null;n._refCount++;const i=on(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class x3 extends Ot{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,_r(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dn;const t=this.getSubject();e.add(this.source.subscribe(on(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dn.EMPTY)}return e}refCount(){return MT()(this)}}function El(n,e){return pi((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(on(i,c=>{r?.unsubscribe();let d=0;const p=o++;ta(n(c,p)).subscribe(r=on(i,m=>i.next(e?e(c,m,p,d++):m),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Sl(n){return n<=0?()=>Sa:pi((e,t)=>{let i=0;e.subscribe(on(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function fv(...n){const e=Jm(n);return pi((t,i)=>{(e?hv(n,t,e):hv(n,t)).subscribe(i)})}function Fs(n,e){return pi((t,i)=>{let r=0;t.subscribe(on(i,o=>n.call(e,o,r++)&&i.next(o)))})}function pv(n){return pi((e,t)=>{let i=!1;e.subscribe(on(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function w3(n=Pne){return pi((e,t)=>{let i=!1;e.subscribe(on(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Pne(){return new uv}function Qu(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Fs((r,o)=>n(r,o,i)):Bt,Sl(1),t?pv(e):w3(()=>new uv))}function tg(n,e){return Ne(e)?us(n,e,1):us(n,1)}function So(n,e,t){const i=Ne(n)||e||t?{next:n,error:e,complete:t}:n;return i?pi((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(on(o,c=>{var d;null===(d=i.next)||void 0===d||d.call(i,c),o.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),o.complete()},c=>{var d;a=!1,null===(d=i.error)||void 0===d||d.call(i,c),o.error(c)},()=>{var c,d;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(d=i.finalize)||void 0===d||d.call(i)}))}):Bt}function Ju(n){return pi((e,t)=>{let o,i=null,r=!1;i=e.subscribe(on(t,void 0,void 0,s=>{o=ta(n(s,Ju(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function AT(n){return n<=0?()=>Sa:pi((e,t)=>{let i=[];e.subscribe(on(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function ng(n){return pi((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function CT(n){return pi((e,t)=>{ta(n).subscribe(on(t,()=>t.complete(),Re)),!t.closed&&e.subscribe(t)})}const Ei="primary",ig=Symbol("RouteTitle");class Lne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function cf(n){return new Lne(n)}function Une(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(":"===s[0])r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Tl(n,e){const t=n?IT(n):void 0,i=e?IT(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!E3(n[r],e[r]))return!1;return!0}function IT(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function E3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function S3(n){return n.length>0?n[n.length-1]:null}function Bc(n){return function ZL(n){return!!n&&(n instanceof Ot||Ne(n.lift)&&Ne(n.subscribe))}(n)?n:Hm(n)?Do(Promise.resolve(n)):qn(n)}const Vne={exact:function A3(n,e,t){if(!ed(n.segments,e.segments)||!mv(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!A3(n.children[i],e.children[i],t))return!1;return!0},subset:C3},T3={exact:function zne(n,e){return Tl(n,e)},subset:function jne(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>E3(n[t],e[t]))},ignored:()=>!0};function M3(n,e,t){return Vne[t.paths](n.root,e.root,t.matrixParams)&&T3[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function C3(n,e,t){return I3(n,e,e.segments,t)}function I3(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!ed(r,t)||e.hasChildren()||!mv(r,t,i))}if(n.segments.length===t.length){if(!ed(n.segments,t)||!mv(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!C3(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(ed(n.segments,r)&&mv(n.segments,r,i)&&n.children[Ei])&&I3(n.children[Ei],e,o,i)}}function mv(n,e,t){return e.every((i,r)=>T3[t](n[r].parameters,i.parameters))}class uf{constructor(e=new ur([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=cf(this.queryParams),this._queryParamMap}toString(){return Gne.serialize(this)}}class ur{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _v(this)}}class rg{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=cf(this.parameters),this._parameterMap}toString(){return P3(this)}}function ed(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let df=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>new gv,providedIn:"root"})}return n})();class gv{parse(e){const t=new nie(e);return new uf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${og(e.root,!0)}`,i=function Xne(n){const e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${bv(t)}=${bv(r)}`).join("&"):`${bv(t)}=${bv(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Wne(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Gne=new gv;function _v(n){return n.segments.map(e=>P3(e)).join("/")}function og(n,e){if(!n.hasChildren())return _v(n);if(e){const t=n.children[Ei]?og(n.children[Ei],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Ei&&i.push(`${r}:${og(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Hne(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Ei&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Ei&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===Ei?[og(n.children[Ei],!1)]:[`${r}:${og(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ei]?`${_v(n)}/${t[0]}`:`${_v(n)}/(${t.join("//")})`}}function D3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bv(n){return D3(n).replace(/%3B/gi,";")}function DT(n){return D3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yv(n){return decodeURIComponent(n)}function R3(n){return yv(n.replace(/\+/g,"%20"))}function P3(n){return`${DT(n.path)}${function qne(n){return Object.entries(n).map(([e,t])=>`;${DT(e)}=${DT(t)}`).join("")}(n.parameters)}`}const Yne=/^[^\/()?;#]+/;function RT(n){const e=n.match(Yne);return e?e[0]:""}const Kne=/^[^\/()?;=#]+/,Qne=/^[^=?&#]+/,eie=/^[^&#]+/;class nie{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ur([],{}):new ur([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ei]=new ur(e,t)),i}parseSegment(){const e=RT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ot(4009,!1);return this.capture(e),new rg(yv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Zne(n){const e=n.match(Kne);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=RT(this.remaining);r&&(i=r,this.capture(i))}e[yv(t)]=yv(i)}parseQueryParam(e){const t=function Jne(n){const e=n.match(Qne);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function tie(n){const e=n.match(eie);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=R3(t),o=R3(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=RT(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ot(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ei);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[Ei]:new ur([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ot(4011,!1)}}function O3(n){return n.segments.length>0?new ur([],{[Ei]:n}):n}function k3(n){const e={};for(const[i,r]of Object.entries(n.children)){const o=k3(r);if(i===Ei&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function iie(n){if(1===n.numberOfChildren&&n.children[Ei]){const e=n.children[Ei];return new ur(n.segments.concat(e.segments),e.children)}return n}(new ur(n.segments,e))}function sg(n){return n instanceof uf}function N3(n){let e;const r=O3(function t(o){const s={};for(const c of o.children){const d=t(c);s[c.outlet]=d}const a=new ur(o.url,s);return o===n&&(e=a),a}(n.root));return e??r}function F3(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return PT(r,r,r,t,i);const o=function oie(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new U3(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]="string"==typeof d?d.split("/"):d}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new U3(t,e,i)}(e);if(o.toRoot())return PT(r,r,new ur([],{}),t,i);const s=function sie(n,e,t){if(n.isAbsolute)return new xv(e,!0,0);if(!t)return new xv(e,!1,NaN);if(null===t.parent)return new xv(t,!0,0);const i=vv(n.commands[0])?0:1;return function aie(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ot(4005,!1);r=i.segments.length}return new xv(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),a=s.processChildren?lg(s.segmentGroup,s.index,o.commands):B3(s.segmentGroup,s.index,o.commands);return PT(r,s.segmentGroup,a,t,i)}function vv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ag(n){return"object"==typeof n&&null!=n&&n.outlets}function PT(n,e,t,i,r){let s,o={};i&&Object.entries(i).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`}),s=n===e?t:L3(n,e,t);const a=O3(k3(s));return new uf(a,o,r)}function L3(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:L3(o,e,t)}),new ur(n.segments,i)}class U3{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&vv(i[0]))throw new ot(4003,!1);const r=i.find(ag);if(r&&r!==S3(i))throw new ot(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xv{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function B3(n,e,t){if(n??=new ur([],{}),0===n.segments.length&&n.hasChildren())return lg(n,e,t);const i=function cie(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(ag(a))break;const c=`${a}`,d=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&d&&"object"==typeof d&&void 0===d.outlets){if(!z3(c,d,s))return o;i+=2}else{if(!z3(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new ur(n.segments.slice(0,i.pathIndex),{});return o.children[Ei]=new ur(n.segments.slice(i.pathIndex),n.children),lg(o,0,r)}return i.match&&0===r.length?new ur(n.segments,{}):i.match&&!n.hasChildren()?OT(n,e,t):i.match?lg(n,0,r):OT(n,e,t)}function lg(n,e,t){if(0===t.length)return new ur(n.segments,{});{const i=function lie(n){return ag(n[0])?n[0].outlets:{[Ei]:n}}(t),r={};if(Object.keys(i).some(o=>o!==Ei)&&n.children[Ei]&&1===n.numberOfChildren&&0===n.children[Ei].segments.length){const o=lg(n.children[Ei],e,t);return new ur(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=B3(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===i[o]&&(r[o]=s)}),new ur(n.segments,r)}}function OT(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(ag(o)){const c=uie(o.outlets);return new ur(i,c)}if(0===r&&vv(t[0])){i.push(new rg(n.segments[e].path,V3(t[0]))),r++;continue}const s=ag(o)?o.outlets[Ei]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&vv(a)?(i.push(new rg(s,V3(a))),r+=2):(i.push(new rg(s,{})),r++)}return new ur(i,{})}function uie(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=OT(new ur([],{}),0,i))}),e}function V3(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function z3(n,e,t){return n==t.path&&Tl(e,t.parameters)}const cg="imperative";var Gi=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Gi||{});class Ml{constructor(e,t){this.id=e,this.url=t}}class kT extends Ml{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Gi.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class td extends Ml{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Gi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var na=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(na||{}),NT=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(NT||{});class nd extends Ml{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Gi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ug extends Ml{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Gi.NavigationSkipped}}class FT extends Ml{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Gi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class j3 extends Ml{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Gi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class die extends Ml{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Gi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hie extends Ml{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Gi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fie extends Ml{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Gi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pie extends Ml{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Gi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mie{constructor(e){this.route=e,this.type=Gi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gie{constructor(e){this.route=e,this.type=Gi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _ie{constructor(e){this.snapshot=e,this.type=Gi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bie{constructor(e){this.snapshot=e,this.type=Gi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yie{constructor(e){this.snapshot=e,this.type=Gi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vie{constructor(e){this.snapshot=e,this.type=Gi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LT{}class wv{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}class xie{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new dg(this.injector),this.attachRef=null}}let dg=(()=>{class n{constructor(t){this.parentInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new xie(this.parentInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Cs))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class $3{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=UT(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=UT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=BT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return BT(e,this._root).map(t=>t.value)}}function UT(n,e){if(n===e.value)return e;for(const t of e.children){const i=UT(n,t);if(i)return i}return null}function BT(n,e){if(n===e.value)return[e];for(const t of e.children){const i=BT(n,t);if(i.length)return i.unshift(e),i}return[]}class Ka{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function hf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class H3 extends $3{constructor(e,t){super(e),this.snapshot=t,VT(this,e)}toString(){return this.snapshot.toString()}}function G3(n){const e=function wie(n){const o=new Sv([],{},{},"",{},Ei,n,null,{});return new W3("",new Ka(o,[]))}(n),t=new Ui([new rg("",{})]),i=new Ui({}),r=new Ui({}),o=new Ui({}),s=new Ui(""),a=new ff(t,i,o,s,r,Ei,n,e.root);return a.snapshot=e.root,new H3(new Ka(a,[]),e)}class ff{constructor(e,t,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Jt(d=>d[ig]))??qn(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Jt(e=>cf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Jt(e=>cf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ev(n,e,t="emptyOnly"){let i;const{routeConfig:r}=n;return i=null===e||"always"!==t&&""!==r?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...r?.data,...n._resolvedData}},r&&X3(r)&&(i.resolve[ig]=r.title),i}class Sv{get title(){return this.data?.[ig]}constructor(e,t,i,r,o,s,a,c,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=cf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=cf(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class W3 extends $3{constructor(e,t){super(t),this.url=e,VT(this,t)}toString(){return q3(this._root)}}function VT(n,e){e.value._routerState=n,e.children.forEach(t=>VT(n,t))}function q3(n){const e=n.children.length>0?` { ${n.children.map(q3).join(", ")} } `:"";return`${n.value}${e}`}function zT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Tl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Tl(e.params,t.params)||n.paramsSubject.next(t.params),function Bne(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Tl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Tl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function jT(n,e){const t=Tl(n.params,e.params)&&function $ne(n,e){return ed(n,e)&&n.every((t,i)=>Tl(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jT(n.parent,e.parent))}function X3(n){return"string"==typeof n.title||null===n.title}let Y3=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ei,this.activateEvents=new $i,this.deactivateEvents=new $i,this.attachEvents=new $i,this.detachEvents=new $i,this.parentContexts=St(dg),this.location=St(Zs),this.changeDetector=St(Js),this.inputBinder=St(Tv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ot(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ot(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ot(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ot(4013,!1);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new $T(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Fn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ts]})}return n})();class $T{__ngOutletInjector(e){return new $T(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ff?this.route:e===dg?this.childContexts:this.parent.get(e,t)}}const Tv=new Pt("");function hg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Sie(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return hg(n,i,r);return hg(n,i)})}(n,e,t);return new Ka(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>hg(n,a)),s}}const i=function Tie(n){return new ff(new Ui(n.url),new Ui(n.params),new Ui(n.queryParams),new Ui(n.fragment),new Ui(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>hg(n,o));return new Ka(i,r)}}class HT{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const Z3="ngNavigationCancelingError";function Mv(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=sg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Q3(!1,na.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Q3(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[Z3]=!0,t.cancellationCode=e,t}function J3(n){return!!n&&n[Z3]}let eU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ms({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ns],decls:1,vars:0,template:function(i,r){1&i&&Ai(0,"router-outlet")},dependencies:[Y3],encapsulation:2})}return n})();function GT(n){const e=n.children&&n.children.map(GT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ei&&(t.component=eU),t}function Za(n){return n.outlet||Ei}function fg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Oie{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),zT(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=hf(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=hf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=hf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=hf(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new vie(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bie(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(zT(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),zT(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=fg(r.snapshot);s.attachRef=null,s.route=r,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class tU{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Av{constructor(e,t){this.component=e,this.route=t}}function kie(n,e,t){const i=n._root;return pg(i,e?e._root:null,t,[i.value])}function pf(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function L$(n){return null!==X_(n)}(n)?e.get(n):n:i}function pg(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=hf(e);return n.children.forEach(s=>{(function Fie(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function Lie(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ed(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ed(n.url,e.url)||!Tl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jT(n,e)||!Tl(n.queryParams,e.queryParams);default:return!jT(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new tU(i)):(o.data=s.data,o._resolvedData=s._resolvedData),pg(n,e,o.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Av(a.outlet.component,s))}else s&&mg(e,a,r),r.canActivateChecks.push(new tU(i)),pg(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>mg(a,t.getContext(s),r)),r}function mg(n,e,t){const i=hf(n),r=n.value;Object.entries(i).forEach(([o,s])=>{mg(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Av(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function gg(n){return"function"==typeof n}function nU(n){return n instanceof uv||"EmptyError"===n?.name}const Cv=Symbol("INITIAL_VALUE");function mf(){return El(n=>TT(n.map(e=>e.pipe(Sl(1),fv(Cv)))).pipe(Jt(e=>{for(const t of e)if(!0!==t){if(t===Cv)return Cv;if(!1===t||Hie(t))return t}return!0}),Fs(e=>e!==Cv),Sl(1)))}function Hie(n){return sg(n)||n instanceof HT}function iU(n){return function At(...n){return ht(n)}(So(e=>{if("boolean"!=typeof e)throw Mv(0,e)}),Jt(e=>!0===e))}class WT{constructor(e){this.segmentGroup=e||null}}class Iv extends Error{constructor(e){super(),this.urlTree=e}}function gf(n){return eg(new WT(n))}class ire{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return qn(i);if(r.numberOfChildren>1||!r.children[Ei])return eg(new ot(4e3,!1));r=r.children[Ei]}}applyRedirectCommands(e,t,i,r,o){if("string"!=typeof t){const a=t,{queryParams:c,fragment:d,routeConfig:p,url:m,outlet:y,params:v,data:E,title:I}=r,D=za(o,()=>a({params:v,data:E,queryParams:c,fragment:d,routeConfig:p,url:m,outlet:y,title:I}));if(D instanceof uf)throw new Iv(D);t=D}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if("/"===t[0])throw new Iv(s);return s}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new uf(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new ur(o,s)}createSegments(e,t,i,r){return t.map(o=>":"===o.path[0]?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ot(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const qT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rre(n,e,t,i,r){const o=XT(n,e,t);return o.matched?(i=function Aie(n,e){return n.providers&&!n._injector&&(n._injector=QS(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function ere(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?qn(r.map(s=>{const a=pf(s,n);return Bc(function $ie(n){return n&&gg(n.canMatch)}(a)?a.canMatch(e,t):za(n,()=>a(e,t)))})).pipe(mf(),iU()):qn(!0)}(i,e,t).pipe(Jt(s=>!0===s?o:{...qT}))):qn(o)}function XT(n,e,t){if("**"===e.path)return function ore(n){return{matched:!0,parameters:n.length>0?S3(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Une)(t,n,e);if(!r)return{...qT};const o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function rU(n,e,t,i){return t.length>0&&function lre(n,e,t){return t.some(i=>Dv(n,e,i)&&Za(i)!==Ei)}(n,t,i)?{segmentGroup:new ur(e,are(i,new ur(t,n.children))),slicedSegments:[]}:0===t.length&&function cre(n,e,t){return t.some(i=>Dv(n,e,i))}(n,t,i)?{segmentGroup:new ur(n.segments,sre(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new ur(n.segments,n.children),slicedSegments:t}}function sre(n,e,t,i){const r={};for(const o of t)if(Dv(n,e,o)&&!i[Za(o)]){const s=new ur([],{});r[Za(o)]=s}return{...i,...r}}function are(n,e){const t={};t[Ei]=e;for(const i of n)if(""===i.path&&Za(i)!==Ei){const r=new ur([],{});t[Za(i)]=r}return t}function Dv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class hre{}class mre{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ire(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ot(4002,`'${e.segmentGroup}'`)}recognize(){const e=rU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Jt(({children:t,rootSnapshot:i})=>{const r=new Ka(i,t),o=new W3("",r),s=function rie(n,e,t=null,i=null){return F3(N3(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const t=new Sv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Ei,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ei,t).pipe(Jt(i=>({children:i,rootSnapshot:t})),Ju(i=>{if(i instanceof Iv)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof WT?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Jt(s=>s instanceof Ka?[s]:[]))}processChildren(e,t,i,r){const o=[];for(const s of Object.keys(i.children))"primary"===s?o.unshift(s):o.push(s);return Do(o).pipe(tg(s=>{const a=i.children[s],c=function Rie(n,e){const t=n.filter(i=>Za(i)===e);return t.push(...n.filter(i=>Za(i)!==e)),t}(t,s);return this.processSegmentGroup(e,c,a,s,r)}),function kne(n,e){return pi(function One(n,e,t,i,r){return(o,s)=>{let a=t,c=e,d=0;o.subscribe(on(s,p=>{const m=d++;c=a?n(c,p,m):(a=!0,p),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),pv(null),function Nne(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Fs((r,o)=>n(r,o,i)):Bt,AT(1),t?pv(e):w3(()=>new uv))}(),us(s=>{if(null===s)return gf(i);const a=oU(s);return function gre(n){n.sort((e,t)=>e.value.outlet===Ei?-1:t.value.outlet===Ei?1:e.value.outlet.localeCompare(t.value.outlet))}(a),qn(a)}))}processSegment(e,t,i,r,o,s,a){return Do(t).pipe(tg(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s,a).pipe(Ju(d=>{if(d instanceof WT)return qn(null);throw d}))),Qu(c=>!!c),Ju(c=>{if(nU(c))return function dre(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?qn(new hre):gf(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,c){return function ure(n,e,t,i){return!!(Za(n)===i||i!==Ei&&Dv(e,t,n))&&XT(e,n,t).matched}(i,r,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,c):gf(r):gf(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){const{matched:c,parameters:d,consumedSegments:p,positionalParamSegments:m,remainingSegments:y}=XT(t,r,o);if(!c)return gf(t);"string"==typeof r.redirectTo&&"/"===r.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const v=new Sv(o,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sU(r),Za(r),r.component??r._loadedComponent??null,r,aU(r)),E=Ev(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(E.params),v.data=Object.freeze(E.data);const I=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,m,v,e);return this.applyRedirects.lineralizeSegments(r,I).pipe(us(D=>this.processSegment(e,i,t,D.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){const a=rre(t,i,r,e);return"**"===i.path&&(t.children={}),a.pipe(El(c=>c.matched?this.getChildConfig(e=i._injector??e,i,r).pipe(El(({routes:d})=>{const p=i._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:v}=c,E=new Sv(y,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sU(i),Za(i),i.component??i._loadedComponent??null,i,aU(i)),I=Ev(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(I.params),E.data=Object.freeze(I.data);const{segmentGroup:D,slicedSegments:R}=rU(t,y,v,d);if(0===R.length&&D.hasChildren())return this.processChildren(p,d,D,E).pipe(Jt(H=>new Ka(E,H)));if(0===d.length&&0===R.length)return qn(new Ka(E,[]));const j=Za(i)===o;return this.processSegment(p,d,D,R,j?Ei:o,!0,E).pipe(Jt(H=>new Ka(E,H instanceof Ka?[H]:[])))})):gf(t)))}getChildConfig(e,t,i){return t.children?qn({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?qn({routes:t._loadedRoutes,injector:t._loadedInjector}):function Jie(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?qn(!0):qn(r.map(s=>{const a=pf(s,n);return Bc(function Bie(n){return n&&gg(n.canLoad)}(a)?a.canLoad(e,t):za(n,()=>a(e,t)))})).pipe(mf(),iU())}(e,t,i).pipe(us(r=>r?this.configLoader.loadChildren(e,t).pipe(So(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function nre(n){return eg(Q3(!1,na.GuardRejected))}())):qn({routes:[],injector:e})}}function _re(n){const e=n.value.routeConfig;return e&&""===e.path}function oU(n){const e=[],t=new Set;for(const i of n){if(!_re(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=oU(i.children);e.push(new Ka(i.value,r))}return e.filter(i=>!t.has(i))}function sU(n){return n.data||{}}function aU(n){return n.resolve||{}}function lU(n){const e=n.children.map(t=>lU(t)).flat();return[n,...e]}function YT(n){return El(e=>{const t=n(e);return t?Do(t).pipe(Jt(()=>e)):qn(e)})}let cU=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Ei);return i}getResolvedTitleForRoute(t){return t.data[ig]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>St(Ere),providedIn:"root"})}return n})(),Ere=(()=>{class n extends cU{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(ln(kte))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _g=new Pt("",{providedIn:"root",factory:()=>({})}),Rv=new Pt("");let uU=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=St(eQ)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return qn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Bc(t.loadComponent()).pipe(Jt(dU),So(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ng(()=>{this.componentLoaders.delete(t)})),r=new x3(i,()=>new zn).pipe(MT());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return qn({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=function Sre(n,e,t,i){return Bc(n.loadChildren()).pipe(Jt(dU),us(r=>r instanceof IO||Array.isArray(r)?qn(r):Do(e.compileModuleAsync(r))),Jt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(t).injector,s=o.get(Rv,[],{optional:!0,self:!0}).flat()),{routes:s.map(GT),injector:o}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(ng(()=>{this.childrenLoaders.delete(i)})),s=new x3(o,()=>new zn).pipe(MT());return this.childrenLoaders.set(i,s),s}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dU(n){return function Tre(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let KT=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>St(Mre),providedIn:"root"})}return n})(),Mre=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const hU=new Pt(""),pU=new Pt("");let Pv=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new zn,this.transitionAbortSubject=new zn,this.configLoader=St(uU),this.environmentInjector=St(Cs),this.urlSerializer=St(df),this.rootContexts=St(dg),this.location=St(Xm),this.inputBindingEnabled=null!==St(Tv,{optional:!0}),this.titleStrategy=St(cU),this.options=St(_g,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=St(KT),this.createViewTransition=St(hU,{optional:!0}),this.navigationErrorHandler=St(pU,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>qn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new gie(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new mie(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new Ui({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:cg,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fs(o=>0!==o.id),Jt(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),El(o=>{let s=!1,a=!1;return qn(o).pipe(El(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",na.SupersededByNewNavigation),Sa;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!d&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new ug(c.id,this.urlSerializer.serialize(c.rawUrl),m,NT.IgnoredSameUrlNavigation)),c.resolve(!1),Sa}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return qn(c).pipe(El(m=>{const y=this.transitions?.getValue();return this.events.next(new kT(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Sa:Promise.resolve(m)}),function bre(n,e,t,i,r,o){return us(s=>function fre(n,e,t,i,r,o,s="emptyOnly"){return new mre(n,e,t,i,r,s,o).recognize()}(n,e,t,i,s.extractedUrl,r,o).pipe(Jt(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),So(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new j3(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:m,extractedUrl:y,source:v,restoredState:E,extras:I}=c,D=new kT(m,this.urlSerializer.serialize(y),v,E);this.events.next(D);const R=G3(this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:R,urlAfterRedirects:y,extras:{...I,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=y,qn(o)}{const m="";return this.events.next(new ug(c.id,this.urlSerializer.serialize(c.extractedUrl),m,NT.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Sa}}),So(c=>{const d=new die(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Jt(c=>(this.currentTransition=o={...c,guards:kie(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function Gie(n,e){return us(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?qn({...t,guardsResult:!0}):function Wie(n,e,t,i){return Do(n).pipe(us(r=>function Qie(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?qn(o.map(a=>{const c=fg(e)??r,d=pf(a,c);return Bc(function jie(n){return n&&gg(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,i):za(c,()=>d(n,e,t,i))).pipe(Qu())})).pipe(mf()):qn(!0)}(r.component,r.route,t,e,i)),Qu(r=>!0!==r,!0))}(s,i,r,n).pipe(us(a=>a&&function Uie(n){return"boolean"==typeof n}(a)?function qie(n,e,t,i){return Do(e).pipe(tg(r=>hv(function Yie(n,e){return null!==n&&e&&e(new _ie(n)),qn(!0)}(r.route.parent,i),function Xie(n,e){return null!==n&&e&&e(new yie(n)),qn(!0)}(r.route,i),function Zie(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function Nie(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>v3(()=>qn(s.guards.map(c=>{const d=fg(s.node)??t,p=pf(c,d);return Bc(function zie(n){return n&&gg(n.canActivateChild)}(p)?p.canActivateChild(i,n):za(d,()=>p(i,n))).pipe(Qu())})).pipe(mf())));return qn(o).pipe(mf())}(n,r.path,t),function Kie(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return qn(!0);const r=i.map(o=>v3(()=>{const s=fg(e)??t,a=pf(o,s);return Bc(function Vie(n){return n&&gg(n.canActivate)}(a)?a.canActivate(e,n):za(s,()=>a(e,n))).pipe(Qu())}));return qn(r).pipe(mf())}(n,r.route,t))),Qu(r=>!0!==r,!0))}(i,o,n,e):qn(a)),Jt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),So(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw Mv(0,c.guardsResult);const d=new hie(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Fs(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",na.GuardRejected),!1)),YT(c=>{if(c.guards.canActivateChecks.length)return qn(c).pipe(So(d=>{const p=new fie(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),El(d=>{let p=!1;return qn(d).pipe(function yre(n,e){return us(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return qn(t);const o=new Set(r.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const d of lU(c))s.add(d);let a=0;return Do(s).pipe(tg(c=>o.has(c)?function vre(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!X3(r)&&(o[ig]=r.title),function xre(n,e,t,i){const r=IT(n);if(0===r.length)return qn({});const o={};return Do(r).pipe(us(s=>function wre(n,e,t,i){const r=fg(e)??i,o=pf(n,r);return Bc(o.resolve?o.resolve(e,t):za(r,()=>o(e,t)))}(n[s],e,t,i).pipe(Qu(),So(a=>{if(a instanceof HT)throw Mv(new gv,a);o[s]=a}))),AT(1),function Fne(n){return Jt(()=>n)}(o),Ju(s=>nU(s)?Sa:eg(s)))}(o,n,e,i).pipe(Jt(s=>(n._resolvedData=s,n.data=Ev(n,n.parent,t).resolve,null)))}(c,i,n,e):(c.data=Ev(c,c.parent,n).resolve,qn(void 0))),So(()=>a++),AT(1),us(c=>a===s.size?qn(t):Sa))})}(this.paramsInheritanceStrategy,this.environmentInjector),So({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",na.NoDataFromResolver)}}))}),So(d=>{const p=new pie(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),YT(c=>{const d=p=>{const m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(So(y=>{p.component=y}),Jt(()=>{})));for(const y of p.children)m.push(...d(y));return m};return TT(d(c.targetSnapshot.root)).pipe(pv(null),Sl(1))}),YT(()=>this.afterPreactivation()),El(()=>{const{currentSnapshot:c,targetSnapshot:d}=o,p=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return p?Do(p).pipe(Jt(()=>o)):qn(o)}),Jt(c=>{const d=function Eie(n,e,t){const i=hg(n,e._root,t?t._root:void 0);return new H3(i,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:d},this.currentNavigation.targetRouterState=d,o}),So(()=>{this.events.next(new LT)}),((n,e,t,i)=>Jt(r=>(new Oie(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Sl(1),So({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new td(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),CT(this.transitionAbortSubject.pipe(So(c=>{throw c}))),ng(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",na.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ju(c=>{if(a=!0,J3(c))this.events.next(new nd(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function Mie(n){return J3(n)&&sg(n.url)}(c)?this.events.next(new wv(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{const d=new FT(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{const p=za(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(p instanceof HT){const{message:m,cancellationCode:y}=Mv(0,p);this.events.next(new nd(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new wv(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(d);const m=t.errorHandler(c);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Sa}))}))}cancelNavigationTransition(t,i,r){const o=new nd(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ire(n){return n!==cg}let Dre=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>St(Pre),providedIn:"root"})}return n})();class Rre{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Pre=(()=>{class n extends Rre{static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ao(n)))(r||n)}})();static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:()=>St(Ore),providedIn:"root"})}return n})(),Ore=(()=>{class n extends mU{constructor(){super(...arguments),this.location=St(Xm),this.urlSerializer=St(df),this.options=St(_g,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=St(KT),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new uf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=G3(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof kT)this.stateMemento=this.createStateMemento();else if(t instanceof ug)this.rawUrlTree=i.initialUrl;else if(t instanceof j3){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(r,i)}}else t instanceof LT?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):t instanceof nd&&(t.code===na.GuardRejected||t.code===na.NoDataFromResolver)?this.restoreHistory(i):t instanceof FT?this.restoreHistory(i,!0):t instanceof td&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&0===o&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ao(n)))(r||n)}})();static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bg||{});function kre(n){throw n}const Nre={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fre={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vc=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=St(nF),this.stateManager=St(mU),this.options=St(_g,{optional:!0})||{},this.pendingTasks=St(Ac),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=St(Pv),this.urlSerializer=St(df),this.location=St(Xm),this.urlHandlingStrategy=St(KT),this._events=new zn,this.errorHandler=this.options.errorHandler||kre,this.navigated=!1,this.routeReuseStrategy=St(Dre),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=St(Rv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!St(Tv,{optional:!0}),this.eventsSubscription=new dn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==r&&null!==o)if(this.stateManager.handleRouterEvent(i,o),i instanceof nd&&i.code!==na.Redirect&&i.code!==na.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof td)this.navigated=!0;else if(i instanceof wv){const s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Ire(r.source),...s};this.scheduleNavigation(a,cg,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}(function Ure(n){return!(n instanceof LT||n instanceof wv)})(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const c={...r};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(GT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:s;let m,p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...o};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}null!==p&&(p=this.removeEmptyProps(p));try{m=N3(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),m=this.currentUrlTree.root}return F3(m,t,p,d??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=sg(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,cg,null,i)}navigate(t,i={skipLocationChange:!1}){return function Lre(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ot(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(r=!0===i?{...Nre}:!1===i?{...Fre}:i,sg(t))return M3(this.currentUrlTree,t,r);const o=this.parseUrl(t);return M3(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(null!=o&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((m,y)=>{a=m,c=y});const p=this.pendingTasks.add();return function gU(n,e){n.events.pipe(Fs(t=>t instanceof td||t instanceof nd||t instanceof FT||t instanceof ug),Jt(t=>t instanceof td||t instanceof ug?bg.COMPLETE:t instanceof nd&&(t.code===na.Redirect||t.code===na.SupersededByNewNavigation)?bg.REDIRECTING:bg.FAILED),Fs(t=>t!==bg.REDIRECTING),Sl(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const QT=new Pt("");function bU(n){return n.routerState.root}function yU(){const n=St(lo);return e=>{const t=n.get(qa);if(e!==t.components[0])return;const i=n.get(Vc),r=n.get(vU);1===n.get(JT)&&i.initialNavigation(),n.get(xU,null,Oi.Optional)?.setUpPreloading(),n.get(QT,null,Oi.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const vU=new Pt("",{factory:()=>new zn}),JT=new Pt("",{providedIn:"root",factory:()=>1}),xU=new Pt("");var ke=q(467);class Ov{}class kv{}class Ta{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ta?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ta;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ta?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class qre{encodeKey(e){return EU(e)}encodeValue(e){return EU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Yre=/%(\d[a-f0-9])/gi,Kre={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function EU(n){return encodeURIComponent(n).replace(Yre,(e,t)=>Kre[t]??e)}function Nv(n){return`${n}`}class zc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new qre,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Xre(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(Nv):[Nv(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new zc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Nv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Nv(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Zre{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function SU(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function TU(n){return typeof Blob<"u"&&n instanceof Blob}function MU(n){return typeof FormData<"u"&&n instanceof FormData}class yg{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Qre(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ta,this.context??=new Zre,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new zc,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||SU(this.body)||TU(this.body)||MU(this.body)||function Jre(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof zc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||MU(this.body)?null:TU(this.body)?this.body.type||null:SU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let d=e.headers||this.headers,p=e.params||this.params;const m=e.context??this.context;return void 0!==e.setHeaders&&(d=Object.keys(e.setHeaders).reduce((y,v)=>y.set(v,e.setHeaders[v]),d)),e.setParams&&(p=Object.keys(e.setParams).reduce((y,v)=>y.set(v,e.setParams[v]),p)),new yg(t,i,s,{params:p,headers:d,context:m,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}}var jc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(jc||{});class eM{constructor(e,t=200,i="OK"){this.headers=e.headers||new Ta,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Fv extends eM{constructor(e={}){super(e),this.type=jc.ResponseHeader}clone(e={}){return new Fv({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class id extends eM{constructor(e={}){super(e),this.type=jc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new id({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _f extends eM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function tM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let nM=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof yg)o=t;else{let c,d;c=r.headers instanceof Ta?r.headers:new Ta(r.headers),r.params&&(d=r.params instanceof zc?r.params:new zc({fromObject:r.params})),o=new yg(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const s=qn(o).pipe(tg(c=>this.handler.handle(c)));if(t instanceof yg||"events"===r.observe)return s;const a=s.pipe(Fs(c=>c instanceof id));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Jt(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Jt(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Jt(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Jt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new zc).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,tM(r,i))}post(t,i,r={}){return this.request("POST",t,tM(r,i))}put(t,i,r={}){return this.request("PUT",t,tM(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Ov))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();const noe=/^\)\]\}',?\n/;function CU(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let iM=(()=>{class n{constructor(){this.fetchImpl=St(roe,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=St(wi)}handle(t){return new Ot(i=>{const r=new AbortController;return this.doRequest(t,r.signal,i).then(rM,o=>i.error(new _f({error:o}))),()=>r.abort()})}doRequest(t,i,r){var o=this;return(0,ke.A)(function*(){const s=o.createRequestInit(t);let a;try{const E=o.fetchImpl(t.urlWithParams,{signal:i,...s});(function ooe(n){n.then(rM,rM)})(E),r.next({type:jc.Sent}),a=yield E}catch(E){return void r.error(new _f({error:E,status:E.status??0,statusText:E.statusText,url:t.urlWithParams,headers:E.headers}))}const c=new Ta(a.headers),d=a.statusText,p=CU(a)??t.urlWithParams;let m=a.status,y=null;if(t.reportProgress&&r.next(new Fv({headers:c,status:m,statusText:d,url:p})),a.body){const E=a.headers.get("content-length"),I=[],D=a.body.getReader();let j,H,R=0;const Y=typeof Zone<"u"&&Zone.current;yield o.ngZone.runOutsideAngular((0,ke.A)(function*(){for(;;){const{done:te,value:re}=yield D.read();if(te)break;if(I.push(re),R+=re.length,t.reportProgress){H="text"===t.responseType?(H??"")+(j??=new TextDecoder).decode(re,{stream:!0}):void 0;const be=()=>r.next({type:jc.DownloadProgress,total:E?+E:void 0,loaded:R,partialText:H});Y?Y.run(be):be()}}}));const he=o.concatChunks(I,R);try{const te=a.headers.get("Content-Type")??"";y=o.parseBody(t,he,te)}catch(te){return void r.error(new _f({error:te,headers:new Ta(a.headers),status:a.status,statusText:a.statusText,url:CU(a)??t.urlWithParams}))}}0===m&&(m=y?200:0),m>=200&&m<300?(r.next(new id({body:y,headers:c,status:m,statusText:d,url:p})),r.complete()):r.error(new _f({error:y,headers:c,status:m,statusText:d,url:p}))})()}parseBody(t,i,r){switch(t.responseType){case"json":const o=(new TextDecoder).decode(i).replace(noe,"");return""===o?null:JSON.parse(o);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){const i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>i[o]=s.join(",")),i.Accept??="application/json, text/plain, */*",!i["Content-Type"]){const o=t.detectContentTypeHeader();null!==o&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){const r=new Uint8Array(i);let o=0;for(const s of t)r.set(s,o),o+=s.length;return r}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();class roe{}function rM(){}function IU(n,e){return e(n)}const vg=new Pt(""),DU=new Pt(""),RU=new Pt("",{providedIn:"root",factory:()=>!0});let PU=(()=>{class n extends Ov{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=St(Ac),this.contributeToStability=St(RU)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(vg),...this.injector.get(DU,[])]));this.chain=i.reduceRight((r,o)=>function aoe(n,e,t){return(i,r)=>za(t,()=>e(i,o=>n(o,r)))}(r,o,this.injector),IU)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(ng(()=>this.pendingTasks.remove(i)))}return this.chain(t,i=>this.backend.handle(i))}static#e=this.\u0275fac=function(i){return new(i||n)(ln(kv),ln(Cs))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();const poe=/^\)\]\}',?\n/;let kU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new ot(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Do(i.\u0275loadImpl()):qn(null)).pipe(El(()=>new Ot(o=>{const s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((I,D)=>s.setRequestHeader(I,D.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const I=t.detectContentTypeHeader();null!==I&&s.setRequestHeader("Content-Type",I)}if(t.responseType){const I=t.responseType.toLowerCase();s.responseType="json"!==I?I:"text"}const a=t.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const I=s.statusText||"OK",D=new Ta(s.getAllResponseHeaders()),R=function moe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new Fv({headers:D,status:s.status,statusText:I,url:R}),c},p=()=>{let{headers:I,status:D,statusText:R,url:j}=d(),H=null;204!==D&&(H=typeof s.response>"u"?s.responseText:s.response),0===D&&(D=H?200:0);let Y=D>=200&&D<300;if("json"===t.responseType&&"string"==typeof H){const he=H;H=H.replace(poe,"");try{H=""!==H?JSON.parse(H):null}catch(te){H=he,Y&&(Y=!1,H={error:te,text:H})}}Y?(o.next(new id({body:H,headers:I,status:D,statusText:R,url:j||void 0})),o.complete()):o.error(new _f({error:H,headers:I,status:D,statusText:R,url:j||void 0}))},m=I=>{const{url:D}=d(),R=new _f({error:I,status:s.status||0,statusText:s.statusText||"Unknown Error",url:D||void 0});o.error(R)};let y=!1;const v=I=>{y||(o.next(d()),y=!0);let D={type:jc.DownloadProgress,loaded:I.loaded};I.lengthComputable&&(D.total=I.total),"text"===t.responseType&&s.responseText&&(D.partialText=s.responseText),o.next(D)},E=I=>{let D={type:jc.UploadProgress,loaded:I.loaded};I.lengthComputable&&(D.total=I.total),o.next(D)};return s.addEventListener("load",p),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),t.reportProgress&&(s.addEventListener("progress",v),null!==a&&s.upload&&s.upload.addEventListener("progress",E)),s.send(a),o.next({type:jc.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",p),s.removeEventListener("timeout",m),t.reportProgress&&(s.removeEventListener("progress",v),null!==a&&s.upload&&s.upload.removeEventListener("progress",E)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(ln(IL))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();const oM=new Pt(""),NU=new Pt("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),FU=new Pt("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class LU{}let boe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bL(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Nr),ln(Ic),ln(NU))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();function yoe(n,e){const t=n.url.toLowerCase();if(!St(oM)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=St(LU).getToken(),r=St(FU);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var ni=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ni||{});const Ql="*";function sM(n,e){return{type:ni.Trigger,name:n,definitions:e,options:{}}}function aM(n,e=null){return{type:ni.Animate,styles:e,timings:n}}function Hc(n){return{type:ni.Style,styles:n,offset:null}}function xg(n,e,t){return{type:ni.State,name:n,styles:e,options:t}}function lM(n,e,t=null){return{type:ni.Transition,expr:n,animation:e,options:t}}class wg{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class WU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function qU(n){return new ot(3e3,!1)}function Gc(n){switch(n.length){case 0:return new wg;case 1:return n[0];default:return new WU(n)}}function XU(n,e,t=new Map,i=new Map){const r=[],o=[];let s=-1,a=null;if(e.forEach(c=>{const d=c.get("offset"),p=d==s,m=p&&a||new Map;c.forEach((y,v)=>{let E=v,I=y;if("offset"!==v)switch(E=n.normalizePropertyName(E,r),I){case"!":I=t.get(v);break;case Ql:I=i.get(v);break;default:I=n.normalizeStyleValue(v,E,I,r)}m.set(E,I)}),p||o.push(m),a=m,s=d}),r.length)throw function nse(n){return new ot(3502,!1)}();return o}function uM(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&dM(t,"start",n)));break;case"done":n.onDone(()=>i(t&&dM(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&dM(t,"destroy",n)))}}function dM(n,e,t){const o=hM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function hM(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function ia(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function YU(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const pse=typeof document>"u"?null:document.documentElement;function fM(n){const e=n.parentNode||n.host||null;return e===pse?null:e}let od=null,KU=!1;function ZU(n,e){for(;e;){if(e===n)return!0;e=fM(e)}return!1}function QU(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let pM=(()=>{class n{validateStyleProperty(t){return function gse(n){od||(od=function _se(){return typeof document<"u"?document.body:null}()||{},KU=!!od.style&&"WebkitAppearance"in od.style);let e=!0;return od.style&&!function mse(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in od.style,!e&&KU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in od.style)),e}(t)}containsElement(t,i){return ZU(t,i)}getParentElement(t){return fM(t)}query(t,i,r){return QU(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],c){return new wg(r,o)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})();class mM{static#e=this.NOOP=new pM}class gM{}const yse=1e3,_M="ng-enter",Uv="ng-leave",Bv="ng-trigger",Vv=".ng-trigger",eB="ng-animating",bM=".ng-animating";function Jl(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:yM(parseFloat(e[1]),e[2])}function yM(n,e){return"s"===e?n*yse:n}function zv(n,e,t){return n.hasOwnProperty("duration")?n:function xse(n,e,t){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(qU()),{duration:0,delay:0,easing:""};r=yM(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(o=yM(parseFloat(c),a[4]));const d=a[5];d&&(s=d)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(function koe(){return new ot(3100,!1)}()),a=!0),o<0&&(e.push(function Noe(){return new ot(3101,!1)}()),a=!0),a&&e.splice(c,0,qU())}return{duration:r,delay:o,easing:s}}(n,e,t)}function Cl(n,e,t){e.forEach((i,r)=>{const o=xM(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function sd(n,e){e.forEach((t,i)=>{const r=xM(i);n.style[r]=""})}function Eg(n){return Array.isArray(n)?1==n.length?n[0]:function Ioe(n,e=null){return{type:ni.Sequence,steps:n,options:e}}(n):n}const vM=new RegExp("{{\\s*(.+?)\\s*}}","g");function nB(n){let e=[];if("string"==typeof n){let t;for(;t=vM.exec(n);)e.push(t[1]);vM.lastIndex=0}return e}function Sg(n,e,t){const i=`${n}`,r=i.replace(vM,(o,s)=>{let a=e[s];return null==a&&(t.push(function Loe(n){return new ot(3003,!1)}()),a=""),a.toString()});return r==i?n:r}const Sse=/-+([a-z0-9])/g;function xM(n){return n.replace(Sse,(...e)=>e[1].toUpperCase())}function ra(n,e,t){switch(e.type){case ni.Trigger:return n.visitTrigger(e,t);case ni.State:return n.visitState(e,t);case ni.Transition:return n.visitTransition(e,t);case ni.Sequence:return n.visitSequence(e,t);case ni.Group:return n.visitGroup(e,t);case ni.Animate:return n.visitAnimate(e,t);case ni.Keyframes:return n.visitKeyframes(e,t);case ni.Style:return n.visitStyle(e,t);case ni.Reference:return n.visitReference(e,t);case ni.AnimateChild:return n.visitAnimateChild(e,t);case ni.AnimateRef:return n.visitAnimateRef(e,t);case ni.Query:return n.visitQuery(e,t);case ni.Stagger:return n.visitStagger(e,t);default:throw function Uoe(n){return new ot(3004,!1)}()}}function wM(n,e){return window.getComputedStyle(n)[e]}const Ase=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class iB extends gM{normalizePropertyName(e,t){return xM(e)}normalizeStyleValue(e,t,i,r){let o="";const s=i.toString().trim();if(Ase.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Boe(n,e){return new ot(3005,!1)}())}return s+o}}const jv="*";const $v=new Set(["true","1"]),Hv=new Set(["false","0"]);function rB(n,e){const t=$v.has(n)||Hv.has(n),i=$v.has(e)||Hv.has(e);return(r,o)=>{let s=n==jv||n==r,a=e==jv||e==o;return!s&&t&&"boolean"==typeof r&&(s=r?$v.has(n):Hv.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?$v.has(e):Hv.has(e)),s&&a}}const Rse=new RegExp("s*:selfs*,?","g");function EM(n,e,t,i){return new Pse(n).build(e,t,i)}class Pse{constructor(e){this._driver=e}build(e,t,i){const r=new Nse(t);return this._resetContextStyleTimingState(r),ra(this,Eg(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function Voe(){return new ot(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ni.State){const c=a,d=c.name;d.toString().split(/\s*,\s*/).forEach(p=>{c.name=p,o.push(this.visitState(c,t))}),c.name=d}else if(a.type==ni.Transition){const c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,s.push(c)}else t.errors.push(function zoe(){return new ot(3007,!1)}())}),{type:ni.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{nB(c).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&t.errors.push(function joe(n,e){return new ot(3008,!1)}(0,o.values()))}return{type:ni.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=ra(this,Eg(e.animation),t),r=function Cse(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function Ise(n,e,t){if(":"==n[0]){const c=function Dse(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Qoe(n){return new ot(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Zoe(n){return new ot(3015,!1)}()),e;const r=i[1],o=i[2],s=i[3];e.push(rB(r,s)),"<"==o[0]&&(r!=jv||s!=jv)&&e.push(rB(s,r))}(i,t,e)):t.push(n),t}(e.expr,t.errors);return{type:ni.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ad(e.options)}}visitSequence(e,t){return{type:ni.Sequence,steps:e.steps.map(i=>ra(this,i,t)),options:ad(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(s=>{t.currentTime=i;const a=ra(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:ni.Group,steps:o,options:ad(e.options)}}visitAnimate(e,t){const i=function Lse(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return SM(zv(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=SM(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=zv(t,e);return SM(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Hc({});if(o.type==ni.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const d={};i.easing&&(d.easing=i.easing),s=Hc(d)}t.currentTime+=i.duration+i.delay;const c=this.visitStyle(s,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:ni.Animate,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Ql?i.push(a):t.errors.push(new ot(3002,!1)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let c of a.values())if(c.toString().indexOf("{{")>=0){o=!0;break}}),{type:ni.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{const d=t.collectedStyles.get(t.currentQuerySelector),p=d.get(c);let m=!0;p&&(o!=r&&o>=p.startTime&&r<=p.endTime&&(t.errors.push(function Hoe(n,e,t,i,r){return new ot(3010,!1)}()),m=!1),o=p.startTime),m&&d.set(c,{startTime:o,endTime:r}),t.options&&function Ese(n,e,t){const i=e.params||{},r=nB(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function Foe(n){return new ot(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:ni.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Goe(){return new ot(3011,!1)}()),i;let o=0;const s=[];let a=!1,c=!1,d=0;const p=e.steps.map(R=>{const j=this._makeStyleAst(R,t);let H=null!=j.offset?j.offset:function Fse(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(j.styles),Y=0;return null!=H&&(o++,Y=j.offset=H),c=c||Y<0||Y>1,a=a||Y<d,d=Y,s.push(Y),j});c&&t.errors.push(function Woe(){return new ot(3012,!1)}()),a&&t.errors.push(function qoe(){return new ot(3200,!1)}());const m=e.steps.length;let y=0;o>0&&o<m?t.errors.push(function Xoe(){return new ot(3202,!1)}()):0==o&&(y=1/(m-1));const v=m-1,E=t.currentTime,I=t.currentAnimateTimings,D=I.duration;return p.forEach((R,j)=>{const H=y>0?j==v?1:y*j:s[j],Y=H*D;t.currentTime=E+I.delay+Y,I.duration=Y,this._validateStyleAst(R,t),R.offset=H,i.styles.push(R)}),i}visitReference(e,t){return{type:ni.Reference,animation:ra(this,Eg(e.animation),t),options:ad(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ni.AnimateChild,options:ad(e.options)}}visitAnimateRef(e,t){return{type:ni.AnimateRef,animation:this.visitReference(e.animation,t),options:ad(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function Ose(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Rse,"")),n=n.replace(/@\*/g,Vv).replace(/@\w+/g,t=>Vv+"-"+t.slice(1)).replace(/:animating/g,bM),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,ia(t.collectedStyles,t.currentQuerySelector,new Map);const a=ra(this,Eg(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:ni.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:ad(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Yoe(){return new ot(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:zv(e.timings,t.errors,!0);return{type:ni.Stagger,animation:ra(this,Eg(e.animation),t),timings:i,options:null}}}class Nse{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ad(n){return n?(n={...n}).params&&(n.params=function kse(n){return n?{...n}:null}(n.params)):n={},n}function SM(n,e,t){return{duration:n,delay:e,easing:t}}function TM(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class Gv{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Vse=new RegExp(":enter","g"),jse=new RegExp(":leave","g");function MM(n,e,t,i,r,o=new Map,s=new Map,a,c,d=[]){return(new $se).buildKeyframes(n,e,t,i,r,o,s,a,c,d)}class $se{buildKeyframes(e,t,i,r,o,s,a,c,d,p=[]){d=d||new Gv;const m=new AM(e,t,d,r,o,p,[]);m.options=c;const y=c.delay?Jl(c.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([s],null,m.errors,c),ra(this,i,m);const v=m.timelines.filter(E=>E.containsAnimation());if(v.length&&a.size){let E;for(let I=v.length-1;I>=0;I--){const D=v[I];if(D.element===t){E=D;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,m.errors,c)}return v.length?v.map(E=>E.buildKeyframes()):[TM(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const s="number"==typeof o?o:Jl(Sg(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?Jl(i.duration):null,a=null!=i.delay?Jl(i.delay):null;return 0!==s&&e.forEach(c=>{const d=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ra(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){r.previousNode.type==ni.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Wv);const s=Jl(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>ra(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Jl(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),ra(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return zv(t.params?Sg(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;o.type==ni.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?Jl(r.delay):0;o&&(t.previousNode.type===ni.Style||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Wv);let s=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((d,p)=>{t.currentQueryIndex=p;const m=t.createSubContext(e.options,d);o&&m.delayNextStep(o),d===t.element&&(c=m.currentTimeline),ra(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime}const p=t.currentTimeline;c&&p.delayNextStep(c);const m=p.currentTime;ra(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-m+(r.startTime-i.currentTimeline.startTime)}}const Wv={};class AM{constructor(e,t,i,r,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Wv,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new qv(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Jl(i.duration)),null!=i.delay&&(r.delay=Jl(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Sg(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new AM(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Wv,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new Hse(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Vse,"."+this._enterClassName)).replace(jse,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=i);0!==i&&(d=i<0?d.slice(d.length+i,d.length):d.slice(0,i)),a.push(...d)}return!o&&0==a.length&&s.push(function Koe(n){return new ot(3014,!1)}()),a}}class qv{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new qv(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ql),this._currentKeyframe.set(t,Ql);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function Gse(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i??=e.keys();for(let o of i)t.set(o,Ql)}else for(let[o,s]of r)t.set(o,s)}),t}(e,this._globalTimelineStyles);for(let[a,c]of s){const d=Sg(c,o,i);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ql),this._updateStyle(a,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,c)=>{const d=new Map([...this._backFill,...a]);d.forEach((p,m)=>{"!"===p?e.add(m):p===Ql&&t.add(m)}),i||d.set("offset",c/this.duration),r.push(d)});const o=[...e.values()],s=[...t.values()];if(i){const a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return TM(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class Hse extends qv{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);const d=new Map(e[0]);d.set("offset",aB(a)),o.push(d);const p=e.length-1;for(let m=1;m<=p;m++){let y=new Map(e[m]);const v=y.get("offset");y.set("offset",aB((t+v*i)/s)),o.push(y)}i=s,t=0,r="",e=o}return TM(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function aB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function lB(n,e,t,i,r,o,s,a,c,d,p,m,y){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:c,preStyleProps:d,postStyleProps:p,totalTime:m,errors:y}}const CM={};class cB{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Wse(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,c,d,p){const m=[],y=this.ast.options&&this.ast.options.params||CM,E=this.buildStyles(i,a&&a.params||CM,m),I=c&&c.params||CM,D=this.buildStyles(r,I,m),R=new Set,j=new Map,H=new Map,Y="void"===r,he={params:uB(I,y),delay:this.ast.options?.delay},te=p?[]:MM(e,t,this.ast.animation,o,s,E,D,he,d,m);let re=0;return te.forEach(be=>{re=Math.max(be.duration+be.delay,re)}),m.length?lB(t,this._triggerName,i,r,Y,E,D,[],[],j,H,re,m):(te.forEach(be=>{const se=be.element,ie=ia(j,se,new Set);be.preStyleProps.forEach($e=>ie.add($e));const Ee=ia(H,se,new Set);be.postStyleProps.forEach($e=>Ee.add($e)),se!==t&&R.add(se)}),lB(t,this._triggerName,i,r,Y,E,D,te,[...R.values()],j,H,re))}}function uB(n,e){const t={...e};return Object.entries(n).forEach(([i,r])=>{null!=r&&(t[i]=r)}),t}class qse{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=uB(e,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Sg(s,r,t));const c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),i.set(a,s)})}),i}}class Yse{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new qse(r.style,r.options&&r.options.params||{},i))}),dB(this.states,"true","1"),dB(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new cB(e,r,this.states))}),this.fallbackTransition=function Kse(n,e,t){return new cB(n,{type:ni.Transition,animation:{type:ni.Sequence,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function dB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Zse=new Gv;class Qse{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=EM(this._driver,t,i,[]);if(i.length)throw function ise(n){return new ot(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=XU(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=MM(this._driver,t,o,_M,Uv,new Map,new Map,i,Zse,r),s.forEach(p=>{const m=ia(a,p.element,new Map);p.postStyleProps.forEach(y=>m.set(y,null))})):(r.push(function rse(){return new ot(3300,!1)}()),s=[]),r.length)throw function ose(n){return new ot(3504,!1)}();a.forEach((p,m)=>{p.forEach((y,v)=>{p.set(v,this._driver.computeStyle(m,v,Ql))})});const d=Gc(s.map(p=>{const m=a.get(p.element);return this._buildPlayer(p,new Map,m)}));return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function sse(n){return new ot(3301,!1)}();return t}listen(e,t,i,r){const o=hM(t,"","","");return uM(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const hB="ng-animate-queued",IM="ng-animate-disabled",iae=[],fB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rae={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qa="__ng_removed";class DM{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function lae(n){return n??null}(i?e.value:e),i){const{value:o,...s}=e;this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Tg="void",RM=new DM(Tg);class oae{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ma(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function ase(n,e){return new ot(3302,!1)}();if(null==i||0==i.length)throw function lse(n){return new ot(3303,!1)}();if(!function cae(n){return"start"==n||"done"==n}(i))throw function cse(n,e){return new ot(3400,!1)}();const o=ia(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);const a=ia(this._engine.statesByElement,e,new Map);return a.has(t)||(Ma(e,Bv),Ma(e,Bv+"-"+t),a.set(t,RM)),()=>{this._engine.afterFlush(()=>{const c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function use(n){return new ot(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),s=new PM(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Ma(e,Bv),Ma(e,Bv+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const d=new DM(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&d.absorbOptions(c.options),a.set(t,d),c||(c=RM),d.value!==Tg&&c.value===d.value){if(!function hae(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(c.params,d.params)){const I=[],D=o.matchStyles(c.value,c.params,I),R=o.matchStyles(d.value,d.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(()=>{sd(e,D),Cl(e,R)})}return}const y=ia(this._engine.playersByElement,e,[]);y.forEach(I=>{I.namespaceId==this.id&&I.triggerName==t&&I.queued&&I.destroy()});let v=o.matchTransition(c.value,d.value,e,d.params),E=!1;if(!v){if(!r)return;v=o.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:v,fromState:c,toState:d,player:s,isFallbackTransition:E}),E||(Ma(e,hB),s.onStart(()=>{bf(e,hB)})),s.onDone(()=>{let I=this.players.indexOf(s);I>=0&&this.players.splice(I,1);const D=this._engine.playersByElement.get(e);if(D){let R=D.indexOf(s);R>=0&&D.splice(R,1)}}),this.players.push(s),y.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Vv,!0);i.forEach(r=>{if(r[Qa])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((c,d)=>{if(s.set(d,c.value),this._triggers.has(d)){const p=this.trigger(e,d,Tg,r);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&Gc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const c=this._triggers.get(s).fallbackTransition,d=i.get(s)||RM,p=new DM(Tg),m=new PM(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:d,toState:p,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Qa];(!o||o===fB)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Ma(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const c=hM(o,i.triggerName,i.fromState.value,i.toState.value);c._data=e,uM(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class sae{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new oae(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const c=r.get(a);if(c){const d=i.indexOf(c);i.splice(d+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(Xv(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Xv(t))return;const o=t[Qa];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ma(e,IM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),bf(e,IM))}removeNode(e,t,i){if(Xv(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Qa]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return Xv(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Vv,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,bM,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Qa];if(t&&t.setForRemoval){if(e[Qa]=fB,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(IM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Ma(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Gc(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function dse(n){return new ot(3402,!1)}()}_flushAnimations(e,t){const i=new Gv,r=[],o=new Map,s=[],a=new Map,c=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(ye=>{p.add(ye);const De=this.driver.query(ye,".ng-animate-queued",!0);for(let Fe=0;Fe<De.length;Fe++)p.add(De[Fe])});const m=this.bodyNode,y=Array.from(this.statesByElement.keys()),v=gB(y,this.collectedEnterElements),E=new Map;let I=0;v.forEach((ye,De)=>{const Fe=_M+I++;E.set(De,Fe),ye.forEach(at=>Ma(at,Fe))});const D=[],R=new Set,j=new Set;for(let ye=0;ye<this.collectedLeaveElements.length;ye++){const De=this.collectedLeaveElements[ye],Fe=De[Qa];Fe&&Fe.setForRemoval&&(D.push(De),R.add(De),Fe.hasAnimation?this.driver.query(De,".ng-star-inserted",!0).forEach(at=>R.add(at)):j.add(De))}const H=new Map,Y=gB(y,Array.from(R));Y.forEach((ye,De)=>{const Fe=Uv+I++;H.set(De,Fe),ye.forEach(at=>Ma(at,Fe))}),e.push(()=>{v.forEach((ye,De)=>{const Fe=E.get(De);ye.forEach(at=>bf(at,Fe))}),Y.forEach((ye,De)=>{const Fe=H.get(De);ye.forEach(at=>bf(at,Fe))}),D.forEach(ye=>{this.processLeaveNode(ye)})});const he=[],te=[];for(let ye=this._namespaceList.length-1;ye>=0;ye--)this._namespaceList[ye].drainQueuedTransitions(t).forEach(Fe=>{const at=Fe.player,Vt=Fe.element;if(he.push(at),this.collectedEnterElements.length){const Nt=Vt[Qa];if(Nt&&Nt.setForMove){if(Nt.previousTriggersValues&&Nt.previousTriggersValues.has(Fe.triggerName)){const Pn=Nt.previousTriggersValues.get(Fe.triggerName),Tn=this.statesByElement.get(Fe.element);if(Tn&&Tn.has(Fe.triggerName)){const Bn=Tn.get(Fe.triggerName);Bn.value=Pn,Tn.set(Fe.triggerName,Bn)}}return void at.destroy()}}const jt=!m||!this.driver.containsElement(m,Vt),In=H.get(Vt),Zn=E.get(Vt),st=this._buildInstruction(Fe,i,Zn,In,jt);if(st.errors&&st.errors.length)return void te.push(st);if(jt)return at.onStart(()=>sd(Vt,st.fromStyles)),at.onDestroy(()=>Cl(Vt,st.toStyles)),void r.push(at);if(Fe.isFallbackTransition)return at.onStart(()=>sd(Vt,st.fromStyles)),at.onDestroy(()=>Cl(Vt,st.toStyles)),void r.push(at);const qt=[];st.timelines.forEach(Nt=>{Nt.stretchStartingKeyframe=!0,this.disabledNodes.has(Nt.element)||qt.push(Nt)}),st.timelines=qt,i.append(Vt,st.timelines),s.push({instruction:st,player:at,element:Vt}),st.queriedElements.forEach(Nt=>ia(a,Nt,[]).push(at)),st.preStyleProps.forEach((Nt,Pn)=>{if(Nt.size){let Tn=c.get(Pn);Tn||c.set(Pn,Tn=new Set),Nt.forEach((Bn,Oe)=>Tn.add(Oe))}}),st.postStyleProps.forEach((Nt,Pn)=>{let Tn=d.get(Pn);Tn||d.set(Pn,Tn=new Set),Nt.forEach((Bn,Oe)=>Tn.add(Oe))})});if(te.length){const ye=[];te.forEach(De=>{ye.push(function hse(n,e){return new ot(3505,!1)}())}),he.forEach(De=>De.destroy()),this.reportError(ye)}const re=new Map,be=new Map;s.forEach(ye=>{const De=ye.element;i.has(De)&&(be.set(De,De),this._beforeAnimationBuild(ye.player.namespaceId,ye.instruction,re))}),r.forEach(ye=>{const De=ye.element;this._getPreviousPlayers(De,!1,ye.namespaceId,ye.triggerName,null).forEach(at=>{ia(re,De,[]).push(at),at.destroy()})});const se=D.filter(ye=>bB(ye,c,d)),ie=new Map;mB(ie,this.driver,j,d,Ql).forEach(ye=>{bB(ye,c,d)&&se.push(ye)});const $e=new Map;v.forEach((ye,De)=>{mB($e,this.driver,new Set(ye),c,"!")}),se.forEach(ye=>{const De=ie.get(ye),Fe=$e.get(ye);ie.set(ye,new Map([...De?.entries()??[],...Fe?.entries()??[]]))});const He=[],Ge=[],Ie={};s.forEach(ye=>{const{element:De,player:Fe,instruction:at}=ye;if(i.has(De)){if(p.has(De))return Fe.onDestroy(()=>Cl(De,at.toStyles)),Fe.disabled=!0,Fe.overrideTotalTime(at.totalTime),void r.push(Fe);let Vt=Ie;if(be.size>1){let In=De;const Zn=[];for(;In=In.parentNode;){const st=be.get(In);if(st){Vt=st;break}Zn.push(In)}Zn.forEach(st=>be.set(st,Vt))}const jt=this._buildAnimation(Fe.namespaceId,at,re,o,$e,ie);if(Fe.setRealPlayer(jt),Vt===Ie)He.push(Fe);else{const In=this.playersByElement.get(Vt);In&&In.length&&(Fe.parentPlayer=Gc(In)),r.push(Fe)}}else sd(De,at.fromStyles),Fe.onDestroy(()=>Cl(De,at.toStyles)),Ge.push(Fe),p.has(De)&&r.push(Fe)}),Ge.forEach(ye=>{const De=o.get(ye.element);if(De&&De.length){const Fe=Gc(De);ye.setRealPlayer(Fe)}}),r.forEach(ye=>{ye.parentPlayer?ye.syncPlayerEvents(ye.parentPlayer):ye.destroy()});for(let ye=0;ye<D.length;ye++){const De=D[ye],Fe=De[Qa];if(bf(De,Uv),Fe&&Fe.hasAnimation)continue;let at=[];if(a.size){let jt=a.get(De);jt&&jt.length&&at.push(...jt);let In=this.driver.query(De,bM,!0);for(let Zn=0;Zn<In.length;Zn++){let st=a.get(In[Zn]);st&&st.length&&at.push(...st)}}const Vt=at.filter(jt=>!jt.destroyed);Vt.length?uae(this,De,Vt):this.processLeaveNode(De)}return D.length=0,He.forEach(ye=>{this.players.push(ye),ye.onDone(()=>{ye.destroy();const De=this.players.indexOf(ye);this.players.splice(De,1)}),ye.play()}),He}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const c=!o||o==Tg;a.forEach(d=>{d.queued||!c&&d.triggerName!=r||s.push(d)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const d=c.element,p=d!==o,m=ia(i,d,[]);this._getPreviousPlayers(d,p,s,a,t.toState).forEach(v=>{const E=v.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),v.destroy(),m.push(v)})}sd(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){const a=t.triggerName,c=t.element,d=[],p=new Set,m=new Set,y=t.timelines.map(E=>{const I=E.element;p.add(I);const D=I[Qa];if(D&&D.removedBeforeQueried)return new wg(E.duration,E.delay);const R=I!==c,j=function dae(n){const e=[];return _B(n,e),e}((i.get(I)||iae).map(re=>re.getRealPlayer())).filter(re=>!!re.element&&re.element===I),H=o.get(I),Y=s.get(I),he=XU(this._normalizer,E.keyframes,H,Y),te=this._buildPlayer(E,he,j);if(E.subTimeline&&r&&m.add(I),R){const re=new PM(e,a,I);re.setRealPlayer(te),d.push(re)}return te});d.forEach(E=>{ia(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function aae(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,E.element,E))}),p.forEach(E=>Ma(E,eB));const v=Gc(y);return v.onDestroy(()=>{p.forEach(E=>bf(E,eB)),Cl(c,t.toStyles)}),m.forEach(E=>{ia(r,E,[]).push(v)}),v}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new wg(e.duration,e.delay)}}class PM{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new wg,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>uM(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ia(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Xv(n){return n&&1===n.nodeType}function pB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function mB(n,e,t,i,r){const o=[];t.forEach(c=>o.push(pB(c)));const s=[];i.forEach((c,d)=>{const p=new Map;c.forEach(m=>{const y=e.computeStyle(d,m,r);p.set(m,y),(!y||0==y.length)&&(d[Qa]=rae,s.push(d))}),n.set(d,p)});let a=0;return t.forEach(c=>pB(c,o[a++])),s}function gB(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),o=new Map;function s(a){if(!a)return 1;let c=o.get(a);if(c)return c;const d=a.parentNode;return c=t.has(d)?d:r.has(d)?1:s(d),o.set(a,c),c}return e.forEach(a=>{const c=s(a);1!==c&&t.get(c).push(a)}),t}function Ma(n,e){n.classList?.add(e)}function bf(n,e){n.classList?.remove(e)}function uae(n,e,t){Gc(t).onDone(()=>n.processLeaveNode(e))}function _B(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof WU?_B(i.players,e):e.push(i)}}function bB(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class Mg{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new sae(e.body,t,i),this._timelineEngine=new Qse(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const s=e+"-"+r;let a=this._triggerCache[s];if(!a){const c=[],p=EM(this._driver,o,c,[]);if(c.length)throw function tse(n,e){return new ot(3404,!1)}();a=function Xse(n,e,t){return new Yse(n,e,t)}(r,p,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,s]=YU(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=YU(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class Ag{static#e=this.initialStylesByElement=new WeakMap;constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=Ag.initialStylesByElement.get(e);r||Ag.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Cl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Cl(this._element,this._initialStyles),this._endStyles&&(Cl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Ag.initialStylesByElement.delete(this._element),this._startStyles&&(sd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(sd(this._element,this._endStyles),this._endStyles=null),Cl(this._element,this._initialStyles),this._state=3)}}function OM(n){let e=null;return n.forEach((t,i)=>{(function pae(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class yB{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:wM(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class vB{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return ZU(e,t)}getParentElement(e){return fM(e)}query(e,t,i){return QU(e,t,i)}computeStyle(e,t,i){return wM(e,t)}animate(e,t,i,r,o,s=[]){const c={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(c.easing=o);const d=new Map,p=s.filter(v=>v instanceof yB);(function Tse(n,e){return 0===n||0===e})(i,r)&&p.forEach(v=>{v.currentSnapshot.forEach((E,I)=>d.set(I,E))});let m=function wse(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(v=>new Map(v));m=function Mse(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,wM(n,a)))}}return e}(e,m,d);const y=function fae(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=OM(e[0]),e.length>1&&(i=OM(e[e.length-1]))):e instanceof Map&&(t=OM(e)),t||i?new Ag(n,t,i):null}(e,m);return new yB(e,m,c,y)}}const xB="@.disabled";class wB{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==xB?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class mae extends wB{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==xB?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function gae(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function _ae(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}class bae{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{const s=o?.parentNode(r);s&&o.removeChild(s,r)}}createRenderer(e,t){const r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const d=this._rendererCache;let p=d.get(r);return p||(p=new wB("",r,this.engine,()=>d.delete(r)),d.set(r,p)),p}const o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);const a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(o,s,e,d.name,d)};return t.data.animation.forEach(a),new mae(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(i));const r=this._animationCallbacksBuffer;0==r.length&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const EB=[{provide:gM,useFactory:function vae(){return new iB}},{provide:Mg,useClass:(()=>{class n extends Mg{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Nr),ln(mM),ln(gM))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac})}return n})()},{provide:oy,useFactory:function xae(n,e,t){return new bae(n,e,t)},deps:[_T,Mg,wi]}],kM=[{provide:mM,useFactory:()=>new vB},{provide:Gl,useValue:"BrowserAnimations"},...EB],SB=[{provide:mM,useClass:pM},{provide:Gl,useValue:"NoopAnimations"},...EB];let wae=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?SB:kM}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({providers:kM,imports:[Ote]})}return n})();const Sae={providers:[function sQ(n){const e=n?.ignoreChangesOutsideZone,t=U1({ngZoneFactory:()=>{const i=B1(n);return i.shouldCoalesceEventChangeDetection&&Ps("NgZone_CoalesceEvent"),new wi(i)},ignoreChangesOutsideZone:e});return ah([{provide:rQ,useValue:!0},{provide:wm,useValue:!1},t])}({eventCoalescing:!0}),function $re(n,...e){return ah([{provide:Rv,multi:!0,useValue:n},[],{provide:ff,useFactory:bU,deps:[Vc]},{provide:Ny,multi:!0,useFactory:yU},e.map(t=>t.\u0275providers)])}([]),function voe(...n){const e=[nM,kU,PU,{provide:Ov,useExisting:PU},{provide:kv,useFactory:()=>St(iM,{optional:!0})??St(kU)},{provide:vg,useValue:yoe,multi:!0},{provide:oM,useValue:!0},{provide:LU,useClass:boe}];for(const t of n)e.push(...t.\u0275providers);return ah(e)}(),MD(wae)]},MB=1,Aae=2,ec=3,Wc=0,Ls=1,Il=2,ld=100,Iae=101,Dae=102,Oae=200,kae=201,Nae=202,Fae=203,FM=204,LM=205,Lae=206,Uae=207,Bae=208,Vae=209,zae=210,jae=211,$ae=212,Hae=213,Gae=214,Zv=0,Jae=1,ele=2,Xc=0,tle=1,nle=2,ile=3,rle=4,ole=5,sle=6,ale=7,Yc=301,cd=302,Cg=306,e0=1e3,Ja=1001,t0=1002,Lo=1003,RB=1004,Ig=1005,To=1006,n0=1007,tc=1008,Kc=1009,wf=1014,Aa=1015,Ef=1020,oa=1023,Sf=1026,Tf=1027,Ca="srgb",Qc="srgb-linear",qM="display-p3",l0="display-p3-linear",c0="linear",Cr="srgb",u0="rec709",d0="p3",Cf=7680,Sle=512,Tle=513,Mle=514,f4=515,Ale=516,Cle=517,Ile=518,Dle=519,p4="300 es",nc=2e3;class ic{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}}const Wo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],dd=Math.PI/180,If=180/Math.PI;function sa(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Wo[255&n]+Wo[n>>8&255]+Wo[n>>16&255]+Wo[n>>24&255]+"-"+Wo[255&e]+Wo[e>>8&255]+"-"+Wo[e>>16&15|64]+Wo[e>>24&255]+"-"+Wo[63&t|128]+Wo[t>>8&255]+"-"+Wo[t>>16&255]+Wo[t>>24&255]+Wo[255&i]+Wo[i>>8&255]+Wo[i>>16&255]+Wo[i>>24&255]).toLowerCase()}function zr(n,e,t){return Math.max(e,Math.min(t,n))}function Dg(n,e,t){return(1-t)*n+t*e}function ds(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _i(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const qle_DEG2RAD=dd;class It{constructor(e=0,t=0){It.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(zr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Si{constructor(e,t,i,r,o,s,a,c,d){Si.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,c,d)}set(e,t,i,r,o,s,a,c,d){const p=this.elements;return p[0]=e,p[1]=r,p[2]=a,p[3]=t,p[4]=o,p[5]=c,p[6]=i,p[7]=s,p[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],c=i[6],d=i[1],p=i[4],m=i[7],y=i[2],v=i[5],E=i[8],I=r[0],D=r[3],R=r[6],j=r[1],H=r[4],Y=r[7],he=r[2],te=r[5],re=r[8];return o[0]=s*I+a*j+c*he,o[3]=s*D+a*H+c*te,o[6]=s*R+a*Y+c*re,o[1]=d*I+p*j+m*he,o[4]=d*D+p*H+m*te,o[7]=d*R+p*Y+m*re,o[2]=y*I+v*j+E*he,o[5]=y*D+v*H+E*te,o[8]=y*R+v*Y+E*re,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],d=e[7],p=e[8];return t*s*p-t*a*d-i*o*p+i*a*c+r*o*d-r*s*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],d=e[7],p=e[8],m=p*s-a*d,y=a*c-p*o,v=d*o-s*c,E=t*m+i*y+r*v;if(0===E)return this.set(0,0,0,0,0,0,0,0,0);const I=1/E;return e[0]=m*I,e[1]=(r*d-p*i)*I,e[2]=(a*i-r*s)*I,e[3]=y*I,e[4]=(p*t-r*c)*I,e[5]=(r*o-a*t)*I,e[6]=v*I,e[7]=(i*c-d*t)*I,e[8]=(s*t-i*o)*I,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){const c=Math.cos(o),d=Math.sin(o);return this.set(i*c,i*d,-i*(c*s+d*a)+s+e,-r*d,r*c,-r*(-d*s+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(YM.makeScale(e,t)),this}rotate(e){return this.premultiply(YM.makeRotation(-e)),this}translate(e,t){return this.premultiply(YM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const YM=new Si;function g4(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Rg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Yle(){const n=Rg("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const _4={};function KM(n){n in _4||(_4[n]=!0,console.warn(n))}const b4=(new Si).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),y4=(new Si).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),p0={[Qc]:{transfer:c0,primaries:u0,toReference:n=>n,fromReference:n=>n},[Ca]:{transfer:Cr,primaries:u0,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[l0]:{transfer:c0,primaries:d0,toReference:n=>n.applyMatrix3(y4),fromReference:n=>n.applyMatrix3(b4)},[qM]:{transfer:Cr,primaries:d0,toReference:n=>n.convertSRGBToLinear().applyMatrix3(y4),fromReference:n=>n.applyMatrix3(b4).convertLinearToSRGB()}},Zle=new Set([Qc,l0]),or={enabled:!0,_workingColorSpace:Qc,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Zle.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,p0[t].fromReference)((0,p0[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return p0[n].primaries},getTransfer:function(n){return""===n?c0:p0[n].transfer}};function Rf(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function ZM(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Pf;class Qle{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Pf&&(Pf=Rg("canvas")),Pf.width=e.width,Pf.height=e.height;const i=Pf.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Pf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Rg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=255*Rf(o[s]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Rf(t[i]/255)):Rf(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Jle=0;class Of{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Jle++}),this.uuid=sa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)o.push(QM(r[s].isDataTexture?r[s].image:r[s]))}else o=QM(r);i.url=o}return t||(e.images[this.uuid]=i),i}}function QM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Qle.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ece=0,Us=(()=>{class n extends ic{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Ja,o=Ja,s=To,a=tc,c=oa,d=Kc,p=n.DEFAULT_ANISOTROPY,m=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ece++}),this.uuid=sa(),this.name="",this.source=new Of(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=d,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Si,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Ja:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Ja:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class dr{constructor(e=0,t=0,i=0,r=1){dr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o;const c=e.elements,d=c[0],p=c[4],m=c[8],y=c[1],v=c[5],E=c[9],I=c[2],D=c[6],R=c[10];if(Math.abs(p-y)<.01&&Math.abs(m-I)<.01&&Math.abs(E-D)<.01){if(Math.abs(p+y)<.1&&Math.abs(m+I)<.1&&Math.abs(E+D)<.1&&Math.abs(d+v+R-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const H=(d+1)/2,Y=(v+1)/2,he=(R+1)/2,te=(p+y)/4,re=(m+I)/4,be=(E+D)/4;return H>Y&&H>he?H<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(H),r=te/i,o=re/i):Y>he?Y<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(Y),i=te/r,o=be/r):he<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(he),i=re/o,r=be/o),this.set(i,r,o,t),this}let j=Math.sqrt((D-E)*(D-E)+(m-I)*(m-I)+(y-p)*(y-p));return Math.abs(j)<.001&&(j=1),this.x=(D-E)/j,this.y=(m-I)/j,this.z=(y-p)/j,this.w=Math.acos((d+v+R-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tce extends ic{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new dr(0,0,e,t),this.scissorTest=!1,this.viewport=new dr(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:To,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const o=new Us(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];const s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Of(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Dl extends tce{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class JM extends Us{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Lo,this.minFilter=Lo,this.wrapR=Ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class v4 extends Us{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Lo,this.minFilter=Lo,this.wrapR=Ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let c=i[r+0],d=i[r+1],p=i[r+2],m=i[r+3];const y=o[s+0],v=o[s+1],E=o[s+2],I=o[s+3];if(0===a)return e[t+0]=c,e[t+1]=d,e[t+2]=p,void(e[t+3]=m);if(1===a)return e[t+0]=y,e[t+1]=v,e[t+2]=E,void(e[t+3]=I);if(m!==I||c!==y||d!==v||p!==E){let D=1-a;const R=c*y+d*v+p*E+m*I,j=R>=0?1:-1,H=1-R*R;if(H>Number.EPSILON){const he=Math.sqrt(H),te=Math.atan2(he,R*j);D=Math.sin(D*te)/he,a=Math.sin(a*te)/he}const Y=a*j;if(c=c*D+y*Y,d=d*D+v*Y,p=p*D+E*Y,m=m*D+I*Y,D===1-a){const he=1/Math.sqrt(c*c+d*d+p*p+m*m);c*=he,d*=he,p*=he,m*=he}}e[t]=c,e[t+1]=d,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,i,r,o,s){const a=i[r],c=i[r+1],d=i[r+2],p=i[r+3],m=o[s],y=o[s+1],v=o[s+2],E=o[s+3];return e[t]=a*E+p*m+c*v-d*y,e[t+1]=c*E+p*y+d*m-a*v,e[t+2]=d*E+p*v+a*y-c*m,e[t+3]=p*E-a*m-c*y-d*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,d=a(i/2),p=a(r/2),m=a(o/2),y=c(i/2),v=c(r/2),E=c(o/2);switch(s){case"XYZ":this._x=y*p*m+d*v*E,this._y=d*v*m-y*p*E,this._z=d*p*E+y*v*m,this._w=d*p*m-y*v*E;break;case"YXZ":this._x=y*p*m+d*v*E,this._y=d*v*m-y*p*E,this._z=d*p*E-y*v*m,this._w=d*p*m+y*v*E;break;case"ZXY":this._x=y*p*m-d*v*E,this._y=d*v*m+y*p*E,this._z=d*p*E+y*v*m,this._w=d*p*m-y*v*E;break;case"ZYX":this._x=y*p*m-d*v*E,this._y=d*v*m+y*p*E,this._z=d*p*E-y*v*m,this._w=d*p*m+y*v*E;break;case"YZX":this._x=y*p*m+d*v*E,this._y=d*v*m+y*p*E,this._z=d*p*E-y*v*m,this._w=d*p*m-y*v*E;break;case"XZY":this._x=y*p*m-d*v*E,this._y=d*v*m-y*p*E,this._z=d*p*E+y*v*m,this._w=d*p*m+y*v*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],c=t[9],d=t[2],p=t[6],m=t[10],y=i+a+m;if(y>0){const v=.5/Math.sqrt(y+1);this._w=.25/v,this._x=(p-c)*v,this._y=(o-d)*v,this._z=(s-r)*v}else if(i>a&&i>m){const v=2*Math.sqrt(1+i-a-m);this._w=(p-c)/v,this._x=.25*v,this._y=(r+s)/v,this._z=(o+d)/v}else if(a>m){const v=2*Math.sqrt(1+a-i-m);this._w=(o-d)/v,this._x=(r+s)/v,this._y=.25*v,this._z=(c+p)/v}else{const v=2*Math.sqrt(1+m-i-a);this._w=(s-r)/v,this._x=(o+d)/v,this._y=(c+p)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zr(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,c=t._y,d=t._z,p=t._w;return this._x=i*p+s*a+r*d-o*c,this._y=r*p+s*c+o*a-i*d,this._z=o*p+s*d+i*c-r*a,this._w=s*p-i*a-r*c-o*d,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,o=this._z,s=this._w;let a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;const c=1-a*a;if(c<=Number.EPSILON){const v=1-t;return this._w=v*s+t*this._w,this._x=v*i+t*this._x,this._y=v*r+t*this._y,this._z=v*o+t*this._z,this.normalize(),this}const d=Math.sqrt(c),p=Math.atan2(d,a),m=Math.sin((1-t)*p)/d,y=Math.sin(t*p)/d;return this._w=s*m+this._w*y,this._x=i*m+this._x*y,this._y=r*m+this._y*y,this._z=o*m+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class xe{constructor(e=0,t=0,i=0){xe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(x4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(x4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,c=e.w,d=2*(s*r-a*i),p=2*(a*t-o*r),m=2*(o*i-s*t);return this.x=t+c*d+s*m-a*p,this.y=i+c*p+a*d-o*m,this.z=r+c*m+o*p-s*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,c=t.z;return this.x=r*c-o*a,this.y=o*s-i*c,this.z=i*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return eA.copy(this).projectOnVector(e),this.sub(eA)}reflect(e){return this.sub(eA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(zr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const eA=new xe,x4=new hs;class Bs{constructor(e=new xe(1/0,1/0,1/0),t=new xe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(el.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(el.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=el.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const o=i.getAttribute("position");if(!0===t&&void 0!==o&&!0!==e.isInstancedMesh)for(let s=0,a=o.count;s<a;s++)!0===e.isMesh?e.getVertexPosition(s,el):el.fromBufferAttribute(o,s),el.applyMatrix4(e.matrixWorld),this.expandByPoint(el);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),m0.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),m0.copy(i.boundingBox)),m0.applyMatrix4(e.matrixWorld),this.union(m0)}const r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,el),el.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Pg),g0.subVectors(this.max,Pg),kf.subVectors(e.a,Pg),Nf.subVectors(e.b,Pg),Ff.subVectors(e.c,Pg),Jc.subVectors(Nf,kf),eu.subVectors(Ff,Nf),hd.subVectors(kf,Ff);let t=[0,-Jc.z,Jc.y,0,-eu.z,eu.y,0,-hd.z,hd.y,Jc.z,0,-Jc.x,eu.z,0,-eu.x,hd.z,0,-hd.x,-Jc.y,Jc.x,0,-eu.y,eu.x,0,-hd.y,hd.x,0];return!(!tA(t,kf,Nf,Ff,g0)||(t=[1,0,0,0,1,0,0,0,1],!tA(t,kf,Nf,Ff,g0)))&&(_0.crossVectors(Jc,eu),t=[_0.x,_0.y,_0.z],tA(t,kf,Nf,Ff,g0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,el).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(el).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(rc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rc=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe],el=new xe,m0=new Bs,kf=new xe,Nf=new xe,Ff=new xe,Jc=new xe,eu=new xe,hd=new xe,Pg=new xe,g0=new xe,_0=new xe,fd=new xe;function tA(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){fd.fromArray(n,o);const a=r.x*Math.abs(fd.x)+r.y*Math.abs(fd.y)+r.z*Math.abs(fd.z),c=e.dot(fd),d=t.dot(fd),p=i.dot(fd);if(Math.max(-Math.max(c,d,p),Math.min(c,d,p))>a)return!1}return!0}const nce=new Bs,Og=new xe,nA=new xe;class fs{constructor(e=new xe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):nce.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Og.subVectors(e,this.center);const t=Og.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Og,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(nA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Og.copy(e.center).add(nA)),this.expandByPoint(Og.copy(e.center).sub(nA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const oc=new xe,iA=new xe,b0=new xe,tu=new xe,rA=new xe,y0=new xe,oA=new xe;class Lf{constructor(e=new xe,t=new xe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=oc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(oc.copy(this.origin).addScaledVector(this.direction,t),oc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){iA.copy(e).add(t).multiplyScalar(.5),b0.copy(t).sub(e).normalize(),tu.copy(this.origin).sub(iA);const o=.5*e.distanceTo(t),s=-this.direction.dot(b0),a=tu.dot(this.direction),c=-tu.dot(b0),d=tu.lengthSq(),p=Math.abs(1-s*s);let m,y,v,E;if(p>0)if(m=s*c-a,y=s*a-c,E=o*p,m>=0)if(y>=-E)if(y<=E){const I=1/p;m*=I,y*=I,v=m*(m+s*y+2*a)+y*(s*m+y+2*c)+d}else y=o,m=Math.max(0,-(s*y+a)),v=-m*m+y*(y+2*c)+d;else y=-o,m=Math.max(0,-(s*y+a)),v=-m*m+y*(y+2*c)+d;else y<=-E?(m=Math.max(0,-(-s*o+a)),y=m>0?-o:Math.min(Math.max(-o,-c),o),v=-m*m+y*(y+2*c)+d):y<=E?(m=0,y=Math.min(Math.max(-o,-c),o),v=y*(y+2*c)+d):(m=Math.max(0,-(s*o+a)),y=m>0?o:Math.min(Math.max(-o,-c),o),v=-m*m+y*(y+2*c)+d);else y=s>0?-o:o,m=Math.max(0,-(s*y+a)),v=-m*m+y*(y+2*c)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(iA).addScaledVector(b0,y),v}intersectSphere(e,t){oc.subVectors(e.center,this.origin);const i=oc.dot(this.direction),r=oc.dot(oc)-i*i,o=e.radius*e.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=i-s,c=i+s;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,c;const d=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,y=this.origin;return d>=0?(i=(e.min.x-y.x)*d,r=(e.max.x-y.x)*d):(i=(e.max.x-y.x)*d,r=(e.min.x-y.x)*d),p>=0?(o=(e.min.y-y.y)*p,s=(e.max.y-y.y)*p):(o=(e.max.y-y.y)*p,s=(e.min.y-y.y)*p),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),m>=0?(a=(e.min.z-y.z)*m,c=(e.max.z-y.z)*m):(a=(e.max.z-y.z)*m,c=(e.min.z-y.z)*m),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,oc)}intersectTriangle(e,t,i,r,o){rA.subVectors(t,e),y0.subVectors(i,e),oA.crossVectors(rA,y0);let a,s=this.direction.dot(oA);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}tu.subVectors(this.origin,e);const c=a*this.direction.dot(y0.crossVectors(tu,y0));if(c<0)return null;const d=a*this.direction.dot(rA.cross(tu));if(d<0||c+d>s)return null;const p=-a*tu.dot(oA);return p<0?null:this.at(p/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Yn{constructor(e,t,i,r,o,s,a,c,d,p,m,y,v,E,I,D){Yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,o,s,a,c,d,p,m,y,v,E,I,D)}set(e,t,i,r,o,s,a,c,d,p,m,y,v,E,I,D){const R=this.elements;return R[0]=e,R[4]=t,R[8]=i,R[12]=r,R[1]=o,R[5]=s,R[9]=a,R[13]=c,R[2]=d,R[6]=p,R[10]=m,R[14]=y,R[3]=v,R[7]=E,R[11]=I,R[15]=D,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Yn).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Uf.setFromMatrixColumn(e,0).length(),o=1/Uf.setFromMatrixColumn(e,1).length(),s=1/Uf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),c=Math.cos(r),d=Math.sin(r),p=Math.cos(o),m=Math.sin(o);if("XYZ"===e.order){const y=s*p,v=s*m,E=a*p,I=a*m;t[0]=c*p,t[4]=-c*m,t[8]=d,t[1]=v+E*d,t[5]=y-I*d,t[9]=-a*c,t[2]=I-y*d,t[6]=E+v*d,t[10]=s*c}else if("YXZ"===e.order){const y=c*p,v=c*m,E=d*p,I=d*m;t[0]=y+I*a,t[4]=E*a-v,t[8]=s*d,t[1]=s*m,t[5]=s*p,t[9]=-a,t[2]=v*a-E,t[6]=I+y*a,t[10]=s*c}else if("ZXY"===e.order){const y=c*p,v=c*m,E=d*p,I=d*m;t[0]=y-I*a,t[4]=-s*m,t[8]=E+v*a,t[1]=v+E*a,t[5]=s*p,t[9]=I-y*a,t[2]=-s*d,t[6]=a,t[10]=s*c}else if("ZYX"===e.order){const y=s*p,v=s*m,E=a*p,I=a*m;t[0]=c*p,t[4]=E*d-v,t[8]=y*d+I,t[1]=c*m,t[5]=I*d+y,t[9]=v*d-E,t[2]=-d,t[6]=a*c,t[10]=s*c}else if("YZX"===e.order){const y=s*c,v=s*d,E=a*c,I=a*d;t[0]=c*p,t[4]=I-y*m,t[8]=E*m+v,t[1]=m,t[5]=s*p,t[9]=-a*p,t[2]=-d*p,t[6]=v*m+E,t[10]=y-I*m}else if("XZY"===e.order){const y=s*c,v=s*d,E=a*c,I=a*d;t[0]=c*p,t[4]=-m,t[8]=d*p,t[1]=y*m+I,t[5]=s*p,t[9]=v*m-E,t[2]=E*m-v,t[6]=a*p,t[10]=I*m+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ice,e,rce)}lookAt(e,t,i){const r=this.elements;return aa.subVectors(e,t),0===aa.lengthSq()&&(aa.z=1),aa.normalize(),nu.crossVectors(i,aa),0===nu.lengthSq()&&(1===Math.abs(i.z)?aa.x+=1e-4:aa.z+=1e-4,aa.normalize(),nu.crossVectors(i,aa)),nu.normalize(),v0.crossVectors(aa,nu),r[0]=nu.x,r[4]=v0.x,r[8]=aa.x,r[1]=nu.y,r[5]=v0.y,r[9]=aa.y,r[2]=nu.z,r[6]=v0.z,r[10]=aa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],c=i[8],d=i[12],p=i[1],m=i[5],y=i[9],v=i[13],E=i[2],I=i[6],D=i[10],R=i[14],j=i[3],H=i[7],Y=i[11],he=i[15],te=r[0],re=r[4],be=r[8],se=r[12],ie=r[1],Ee=r[5],$e=r[9],He=r[13],Ge=r[2],Ie=r[6],ye=r[10],De=r[14],Fe=r[3],at=r[7],Vt=r[11],jt=r[15];return o[0]=s*te+a*ie+c*Ge+d*Fe,o[4]=s*re+a*Ee+c*Ie+d*at,o[8]=s*be+a*$e+c*ye+d*Vt,o[12]=s*se+a*He+c*De+d*jt,o[1]=p*te+m*ie+y*Ge+v*Fe,o[5]=p*re+m*Ee+y*Ie+v*at,o[9]=p*be+m*$e+y*ye+v*Vt,o[13]=p*se+m*He+y*De+v*jt,o[2]=E*te+I*ie+D*Ge+R*Fe,o[6]=E*re+I*Ee+D*Ie+R*at,o[10]=E*be+I*$e+D*ye+R*Vt,o[14]=E*se+I*He+D*De+R*jt,o[3]=j*te+H*ie+Y*Ge+he*Fe,o[7]=j*re+H*Ee+Y*Ie+he*at,o[11]=j*be+H*$e+Y*ye+he*Vt,o[15]=j*se+H*He+Y*De+he*jt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],c=e[9],d=e[13],p=e[2],m=e[6],y=e[10],v=e[14];return e[3]*(+o*c*m-r*d*m-o*a*y+i*d*y+r*a*v-i*c*v)+e[7]*(+t*c*v-t*d*y+o*s*y-r*s*v+r*d*p-o*c*p)+e[11]*(+t*d*m-t*a*v-o*s*m+i*s*v+o*a*p-i*d*p)+e[15]*(-r*a*p-t*c*m+t*a*y+r*s*m-i*s*y+i*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],d=e[7],p=e[8],m=e[9],y=e[10],v=e[11],E=e[12],I=e[13],D=e[14],R=e[15],j=m*D*d-I*y*d+I*c*v-a*D*v-m*c*R+a*y*R,H=E*y*d-p*D*d-E*c*v+s*D*v+p*c*R-s*y*R,Y=p*I*d-E*m*d+E*a*v-s*I*v-p*a*R+s*m*R,he=E*m*c-p*I*c-E*a*y+s*I*y+p*a*D-s*m*D,te=t*j+i*H+r*Y+o*he;if(0===te)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const re=1/te;return e[0]=j*re,e[1]=(I*y*o-m*D*o-I*r*v+i*D*v+m*r*R-i*y*R)*re,e[2]=(a*D*o-I*c*o+I*r*d-i*D*d-a*r*R+i*c*R)*re,e[3]=(m*c*o-a*y*o-m*r*d+i*y*d+a*r*v-i*c*v)*re,e[4]=H*re,e[5]=(p*D*o-E*y*o+E*r*v-t*D*v-p*r*R+t*y*R)*re,e[6]=(E*c*o-s*D*o-E*r*d+t*D*d+s*r*R-t*c*R)*re,e[7]=(s*y*o-p*c*o+p*r*d-t*y*d-s*r*v+t*c*v)*re,e[8]=Y*re,e[9]=(E*m*o-p*I*o-E*i*v+t*I*v+p*i*R-t*m*R)*re,e[10]=(s*I*o-E*a*o+E*i*d-t*I*d-s*i*R+t*a*R)*re,e[11]=(p*a*o-s*m*o-p*i*d+t*m*d+s*i*v-t*a*v)*re,e[12]=he*re,e[13]=(p*I*r-E*m*r+E*i*y-t*I*y-p*i*D+t*m*D)*re,e[14]=(E*a*r-s*I*r-E*i*c+t*I*c+s*i*D-t*a*D)*re,e[15]=(s*m*r-p*a*r+p*i*c-t*m*c-s*i*y+t*a*y)*re,this}scale(e){const t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,c=e.z,d=o*s,p=o*a;return this.set(d*s+i,d*a-r*c,d*c+r*a,0,d*a+r*c,p*a+i,p*c-r*s,0,d*c-r*a,p*c+r*s,o*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,o=t._x,s=t._y,a=t._z,c=t._w,d=o+o,p=s+s,m=a+a,y=o*d,v=o*p,E=o*m,I=s*p,D=s*m,R=a*m,j=c*d,H=c*p,Y=c*m,he=i.x,te=i.y,re=i.z;return r[0]=(1-(I+R))*he,r[1]=(v+Y)*he,r[2]=(E-H)*he,r[3]=0,r[4]=(v-Y)*te,r[5]=(1-(y+R))*te,r[6]=(D+j)*te,r[7]=0,r[8]=(E+H)*re,r[9]=(D-j)*re,r[10]=(1-(y+I))*re,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let o=Uf.set(r[0],r[1],r[2]).length();const s=Uf.set(r[4],r[5],r[6]).length(),a=Uf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],tl.copy(this);const d=1/o,p=1/s,m=1/a;return tl.elements[0]*=d,tl.elements[1]*=d,tl.elements[2]*=d,tl.elements[4]*=p,tl.elements[5]*=p,tl.elements[6]*=p,tl.elements[8]*=m,tl.elements[9]*=m,tl.elements[10]*=m,t.setFromRotationMatrix(tl),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=nc){const c=this.elements,d=2*o/(t-e),p=2*o/(i-r),m=(t+e)/(t-e),y=(i+r)/(i-r);let v,E;if(a===nc)v=-(s+o)/(s-o),E=-2*s*o/(s-o);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);v=-s/(s-o),E=-s*o/(s-o)}return c[0]=d,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=p,c[9]=y,c[13]=0,c[2]=0,c[6]=0,c[10]=v,c[14]=E,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=nc){const c=this.elements,d=1/(t-e),p=1/(i-r),m=1/(s-o),y=(t+e)*d,v=(i+r)*p;let E,I;if(a===nc)E=(s+o)*m,I=-2*m;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);E=o*m,I=-1*m}return c[0]=2*d,c[4]=0,c[8]=0,c[12]=-y,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-v,c[2]=0,c[6]=0,c[10]=I,c[14]=-E,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Uf=new xe,tl=new Yn,ice=new xe(0,0,0),rce=new xe(1,1,1),nu=new xe,v0=new xe,aa=new xe,w4=new Yn,E4=new hs;let sc=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const o=t.elements,s=o[0],a=o[4],c=o[8],d=o[1],p=o[5],m=o[9],y=o[2],v=o[6],E=o[10];switch(i){case"XYZ":this._y=Math.asin(zr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-m,E),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(v,p),this._z=0);break;case"YXZ":this._x=Math.asin(-zr(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(c,E),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-y,s),this._z=0);break;case"ZXY":this._x=Math.asin(zr(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-y,E),this._z=Math.atan2(-a,p)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-zr(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(v,E),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-a,p));break;case"YZX":this._z=Math.asin(zr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-m,p),this._y=Math.atan2(-y,s)):(this._x=0,this._y=Math.atan2(c,E));break;case"XZY":this._z=Math.asin(-zr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,p),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-m,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return w4.makeRotationFromQuaternion(t),this.setFromRotationMatrix(w4,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return E4.setFromEuler(this),this.setFromQuaternion(E4,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class sA{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let oce=0;const S4=new xe,Bf=new hs,ac=new Yn,x0=new xe,kg=new xe,sce=new xe,ace=new hs,T4=new xe(1,0,0),M4=new xe(0,1,0),A4=new xe(0,0,1),C4={type:"added"},lce={type:"removed"},Vf={type:"childadded",child:null},aA={type:"childremoved",child:null};let Fr=(()=>{class n extends ic{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oce++}),this.uuid=sa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new xe,i=new sc,r=new hs,o=new xe(1,1,1);i._onChange(function s(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Yn},normalMatrix:{value:new Si}}),this.matrix=new Yn,this.matrixWorld=new Yn,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new sA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Bf.setFromAxisAngle(t,i),this.quaternion.multiply(Bf),this}rotateOnWorldAxis(t,i){return Bf.setFromAxisAngle(t,i),this.quaternion.premultiply(Bf),this}rotateX(t){return this.rotateOnAxis(T4,t)}rotateY(t){return this.rotateOnAxis(M4,t)}rotateZ(t){return this.rotateOnAxis(A4,t)}translateOnAxis(t,i){return S4.copy(t).applyQuaternion(this.quaternion),this.position.add(S4.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(T4,t)}translateY(t){return this.translateOnAxis(M4,t)}translateZ(t){return this.translateOnAxis(A4,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ac.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?x0.copy(t):x0.set(t,i,r);const o=this.parent;this.updateWorldMatrix(!0,!1),kg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ac.lookAt(kg,x0,this.up):ac.lookAt(x0,kg,this.up),this.quaternion.setFromRotationMatrix(ac),o&&(ac.extractRotation(o.matrixWorld),Bf.setFromRotationMatrix(ac),this.quaternion.premultiply(Bf.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(C4),Vf.child=t,this.dispatchEvent(Vf),Vf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(lce),aA.child=t,this.dispatchEvent(aA),aA.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),ac.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ac.multiply(t.parent.matrixWorld)),t.applyMatrix4(ac),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(C4),Vf.child=t,this.dispatchEvent(Vf),Vf.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kg,t,sce),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kg,ace,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,o=i.length;r<o;r++){const s=i[r];(!0===s.matrixWorldAutoUpdate||!0===t)&&s.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const o=this.children;for(let s=0,a=o.length;s<a;s++){const c=o[s];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};function s(c,d){return void 0===c[d.uuid]&&(c[d.uuid]=d.toJSON(t)),d.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),o.maxGeometryCount=this._maxGeometryCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(o.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),null!==this.boundingBox&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const d=c.shapes;if(Array.isArray(d))for(let p=0,m=d.length;p<m;p++)s(t.shapes,d[p]);else s(t.shapes,d)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let d=0,p=this.material.length;d<p;d++)c.push(s(t.materials,this.material[d]));o.material=c}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++)o.animations.push(s(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),d=a(t.materials),p=a(t.textures),m=a(t.images),y=a(t.shapes),v=a(t.skeletons),E=a(t.animations),I=a(t.nodes);c.length>0&&(r.geometries=c),d.length>0&&(r.materials=d),p.length>0&&(r.textures=p),m.length>0&&(r.images=m),y.length>0&&(r.shapes=y),v.length>0&&(r.skeletons=v),E.length>0&&(r.animations=E),I.length>0&&(r.nodes=I)}return r.object=o,r;function a(c){const d=[];for(const p in c){const m=c[p];delete m.metadata,d.push(m)}return d}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new xe(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const nl=new xe,lc=new xe,lA=new xe,cc=new xe,zf=new xe,jf=new xe,I4=new xe,cA=new xe,uA=new xe,dA=new xe;class Ia{constructor(e=new xe,t=new xe,i=new xe){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),nl.subVectors(e,t),r.cross(nl);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){nl.subVectors(r,t),lc.subVectors(i,t),lA.subVectors(e,t);const s=nl.dot(nl),a=nl.dot(lc),c=nl.dot(lA),d=lc.dot(lc),p=lc.dot(lA),m=s*d-a*a;if(0===m)return o.set(0,0,0),null;const y=1/m,v=(d*c-a*p)*y,E=(s*p-a*c)*y;return o.set(1-v-E,E,v)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,cc)&&cc.x>=0&&cc.y>=0&&cc.x+cc.y<=1}static getInterpolation(e,t,i,r,o,s,a,c){return null===this.getBarycoord(e,t,i,r,cc)?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,cc.x),c.addScaledVector(s,cc.y),c.addScaledVector(a,cc.z),c)}static isFrontFacing(e,t,i,r){return nl.subVectors(i,t),lc.subVectors(e,t),nl.cross(lc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return nl.subVectors(this.c,this.b),lc.subVectors(this.a,this.b),.5*nl.cross(lc).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ia.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ia.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return Ia.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return Ia.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ia.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,o=this.c;let s,a;zf.subVectors(r,i),jf.subVectors(o,i),cA.subVectors(e,i);const c=zf.dot(cA),d=jf.dot(cA);if(c<=0&&d<=0)return t.copy(i);uA.subVectors(e,r);const p=zf.dot(uA),m=jf.dot(uA);if(p>=0&&m<=p)return t.copy(r);const y=c*m-p*d;if(y<=0&&c>=0&&p<=0)return s=c/(c-p),t.copy(i).addScaledVector(zf,s);dA.subVectors(e,o);const v=zf.dot(dA),E=jf.dot(dA);if(E>=0&&v<=E)return t.copy(o);const I=v*d-c*E;if(I<=0&&d>=0&&E<=0)return a=d/(d-E),t.copy(i).addScaledVector(jf,a);const D=p*E-v*m;if(D<=0&&m-p>=0&&v-E>=0)return I4.subVectors(o,r),a=(m-p)/(m-p+(v-E)),t.copy(r).addScaledVector(I4,a);const R=1/(D+I+y);return s=I*R,a=y*R,t.copy(i).addScaledVector(zf,s).addScaledVector(jf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const D4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},iu={h:0,s:0,l:0},w0={h:0,s:0,l:0};function hA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class wn{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ca){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,or.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=or.workingColorSpace){return this.r=e,this.g=t,this.b=i,or.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=or.workingColorSpace){if(e=function XM(n,e){return(n%e+e)%e}(e,1),t=zr(t,0,1),i=zr(i,0,1),0===t)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=hA(s,o,e+1/3),this.g=hA(s,o,e),this.b=hA(s,o,e-1/3)}return or.toWorkingColorSpace(this,r),this}setStyle(e,t=Ca){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],s=o.length;if(3===s)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(6===s)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ca){const i=D4[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rf(e.r),this.g=Rf(e.g),this.b=Rf(e.b),this}copyLinearToSRGB(e){return this.r=ZM(e.r),this.g=ZM(e.g),this.b=ZM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ca){return or.fromWorkingColorSpace(qo.copy(this),e),65536*Math.round(zr(255*qo.r,0,255))+256*Math.round(zr(255*qo.g,0,255))+Math.round(zr(255*qo.b,0,255))}getHexString(e=Ca){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=or.workingColorSpace){or.fromWorkingColorSpace(qo.copy(this),t);const i=qo.r,r=qo.g,o=qo.b,s=Math.max(i,r,o),a=Math.min(i,r,o);let c,d;const p=(a+s)/2;if(a===s)c=0,d=0;else{const m=s-a;switch(d=p<=.5?m/(s+a):m/(2-s-a),s){case i:c=(r-o)/m+(r<o?6:0);break;case r:c=(o-i)/m+2;break;case o:c=(i-r)/m+4}c/=6}return e.h=c,e.s=d,e.l=p,e}getRGB(e,t=or.workingColorSpace){return or.fromWorkingColorSpace(qo.copy(this),t),e.r=qo.r,e.g=qo.g,e.b=qo.b,e}getStyle(e=Ca){or.fromWorkingColorSpace(qo.copy(this),e);const t=qo.r,i=qo.g,r=qo.b;return e!==Ca?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(iu),this.setHSL(iu.h+e,iu.s+t,iu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(iu),e.getHSL(w0);const i=Dg(iu.h,w0.h,t),r=Dg(iu.s,w0.s,t),o=Dg(iu.l,w0.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qo=new wn;wn.NAMES=D4;let cce=0;class ps extends ic{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cce++}),this.uuid=sa(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wn(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cf,this.stencilZFail=Cf,this.stencilZPass=Cf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(o){const s=[];for(const a in o){const c=o[a];delete c.metadata,s.push(c)}return s}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Cf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Cf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Cf&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class pd extends ps{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sc,this.combine=Zv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ho=new xe,E0=new It;class hr{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Aa,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return KM("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)E0.fromBufferAttribute(this,t),E0.applyMatrix3(e),this.setXY(t,E0.x,E0.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.applyMatrix3(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.applyMatrix4(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.applyNormalMatrix(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ho.fromBufferAttribute(this,t),ho.transformDirection(e),this.setXYZ(t,ho.x,ho.y,ho.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ds(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_i(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ds(t,this.array)),t}setX(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ds(t,this.array)),t}setY(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ds(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ds(t,this.array)),t}setW(e,t){return this.normalized&&(t=_i(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),i=_i(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),i=_i(i,this.array),r=_i(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=_i(t,this.array),i=_i(i,this.array),r=_i(r,this.array),o=_i(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class R4 extends hr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class P4 extends hr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Rn extends hr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let dce=0;const Da=new Yn,fA=new Fr,$f=new xe,la=new Bs,Fg=new Bs,Ro=new xe;class Pi extends ic{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dce++}),this.uuid=sa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(g4(e)?P4:R4)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const o=(new Si).getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Da.makeRotationFromQuaternion(e),this.applyMatrix4(Da),this}rotateX(e){return Da.makeRotationX(e),this.applyMatrix4(Da),this}rotateY(e){return Da.makeRotationY(e),this.applyMatrix4(Da),this}rotateZ(e){return Da.makeRotationZ(e),this.applyMatrix4(Da),this}translate(e,t,i){return Da.makeTranslation(e,t,i),this.applyMatrix4(Da),this}scale(e,t,i){return Da.makeScale(e,t,i),this.applyMatrix4(Da),this}lookAt(e){return fA.lookAt(e),fA.updateMatrix(),this.applyMatrix4(fA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($f).negate(),this.translate($f.x,$f.y,$f.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Rn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Bs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new xe(-1/0,-1/0,-1/0),new xe(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)la.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Ro.addVectors(this.boundingBox.min,la.min),this.boundingBox.expandByPoint(Ro),Ro.addVectors(this.boundingBox.max,la.max),this.boundingBox.expandByPoint(Ro)):(this.boundingBox.expandByPoint(la.min),this.boundingBox.expandByPoint(la.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new fs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new xe,1/0);if(e){const i=this.boundingSphere.center;if(la.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++)Fg.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(Ro.addVectors(la.min,Fg.min),la.expandByPoint(Ro),Ro.addVectors(la.max,Fg.max),la.expandByPoint(Ro)):(la.expandByPoint(Fg.min),la.expandByPoint(Fg.max));la.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)Ro.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(Ro));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],c=this.morphTargetsRelative;for(let d=0,p=a.count;d<p;d++)Ro.fromBufferAttribute(a,d),c&&($f.fromBufferAttribute(e,d),Ro.add($f)),r=Math.max(r,i.distanceToSquared(Ro))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.position,r=t.normal,o=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new hr(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),a=[],c=[];for(let be=0;be<i.count;be++)a[be]=new xe,c[be]=new xe;const d=new xe,p=new xe,m=new xe,y=new It,v=new It,E=new It,I=new xe,D=new xe;function R(be,se,ie){d.fromBufferAttribute(i,be),p.fromBufferAttribute(i,se),m.fromBufferAttribute(i,ie),y.fromBufferAttribute(o,be),v.fromBufferAttribute(o,se),E.fromBufferAttribute(o,ie),p.sub(d),m.sub(d),v.sub(y),E.sub(y);const Ee=1/(v.x*E.y-E.x*v.y);isFinite(Ee)&&(I.copy(p).multiplyScalar(E.y).addScaledVector(m,-v.y).multiplyScalar(Ee),D.copy(m).multiplyScalar(v.x).addScaledVector(p,-E.x).multiplyScalar(Ee),a[be].add(I),a[se].add(I),a[ie].add(I),c[be].add(D),c[se].add(D),c[ie].add(D))}let j=this.groups;0===j.length&&(j=[{start:0,count:e.count}]);for(let be=0,se=j.length;be<se;++be){const ie=j[be],Ee=ie.start;for(let He=Ee,Ge=Ee+ie.count;He<Ge;He+=3)R(e.getX(He+0),e.getX(He+1),e.getX(He+2))}const H=new xe,Y=new xe,he=new xe,te=new xe;function re(be){he.fromBufferAttribute(r,be),te.copy(he);const se=a[be];H.copy(se),H.sub(he.multiplyScalar(he.dot(se))).normalize(),Y.crossVectors(te,se);const Ee=Y.dot(c[be])<0?-1:1;s.setXYZW(be,H.x,H.y,H.z,Ee)}for(let be=0,se=j.length;be<se;++be){const ie=j[be],Ee=ie.start;for(let He=Ee,Ge=Ee+ie.count;He<Ge;He+=3)re(e.getX(He+0)),re(e.getX(He+1)),re(e.getX(He+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new hr(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let y=0,v=i.count;y<v;y++)i.setXYZ(y,0,0,0);const r=new xe,o=new xe,s=new xe,a=new xe,c=new xe,d=new xe,p=new xe,m=new xe;if(e)for(let y=0,v=e.count;y<v;y+=3){const E=e.getX(y+0),I=e.getX(y+1),D=e.getX(y+2);r.fromBufferAttribute(t,E),o.fromBufferAttribute(t,I),s.fromBufferAttribute(t,D),p.subVectors(s,o),m.subVectors(r,o),p.cross(m),a.fromBufferAttribute(i,E),c.fromBufferAttribute(i,I),d.fromBufferAttribute(i,D),a.add(p),c.add(p),d.add(p),i.setXYZ(E,a.x,a.y,a.z),i.setXYZ(I,c.x,c.y,c.z),i.setXYZ(D,d.x,d.y,d.z)}else for(let y=0,v=t.count;y<v;y+=3)r.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),p.subVectors(s,o),m.subVectors(r,o),p.cross(m),i.setXYZ(y+0,p.x,p.y,p.z),i.setXYZ(y+1,p.x,p.y,p.z),i.setXYZ(y+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ro.fromBufferAttribute(e,t),Ro.normalize(),e.setXYZ(t,Ro.x,Ro.y,Ro.z)}toNonIndexed(){function e(a,c){const d=a.array,p=a.itemSize,m=a.normalized,y=new d.constructor(c.length*p);let v=0,E=0;for(let I=0,D=c.length;I<D;I++){v=a.isInterleavedBufferAttribute?c[I]*a.data.stride+a.offset:c[I]*p;for(let R=0;R<p;R++)y[E++]=d[v++]}return new hr(y,p,m)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Pi,i=this.index.array,r=this.attributes;for(const a in r){const d=e(r[a],i);t.setAttribute(a,d)}const o=this.morphAttributes;for(const a in o){const c=[],d=o[a];for(let p=0,m=d.length;p<m;p++){const v=e(d[p],i);c.push(v)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,c=s.length;a<c;a++){const d=s[a];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const d in c)void 0!==c[d]&&(e[d]=c[d]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let o=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],p=[];for(let m=0,y=d.length;m<y;m++)p.push(d[m].toJSON(e.data));p.length>0&&(r[c]=p,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const d in r)this.setAttribute(d,r[d].clone(t));const o=e.morphAttributes;for(const d in o){const p=[],m=o[d];for(let y=0,v=m.length;y<v;y++)p.push(m[y].clone(t));this.morphAttributes[d]=p}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let d=0,p=s.length;d<p;d++){const m=s[d];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const O4=new Yn,md=new Lf,S0=new fs,k4=new xe,Hf=new xe,Gf=new xe,Wf=new xe,pA=new xe,T0=new xe,M0=new It,A0=new It,C0=new It,N4=new xe,F4=new xe,L4=new xe,I0=new xe,D0=new xe;class fo extends Fr{constructor(e=new Pi,t=new pd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){const i=this.geometry,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(o&&a){T0.set(0,0,0);for(let c=0,d=o.length;c<d;c++){const p=a[c];0!==p&&(pA.fromBufferAttribute(o[c],e),T0.addScaledVector(s?pA:pA.sub(t),p))}t.add(T0)}return t}raycast(e,t){const i=this.geometry,o=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),S0.copy(i.boundingSphere),S0.applyMatrix4(o),md.copy(e.ray).recast(e.near),(!1!==S0.containsPoint(md.origin)||!(null===md.intersectSphere(S0,k4)||md.origin.distanceToSquared(k4)>(e.far-e.near)**2))&&(O4.copy(o).invert(),md.copy(e.ray).applyMatrix4(O4),(null===i.boundingBox||!1!==md.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,md)))}_computeIntersections(e,t,i){let r;const o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,d=o.attributes.uv,p=o.attributes.uv1,m=o.attributes.normal,y=o.groups,v=o.drawRange;if(null!==a)if(Array.isArray(s))for(let E=0,I=y.length;E<I;E++){const D=y[E],R=s[D.materialIndex];for(let Y=Math.max(D.start,v.start),he=Math.min(a.count,Math.min(D.start+D.count,v.start+v.count));Y<he;Y+=3)r=R0(this,R,e,i,d,p,m,a.getX(Y),a.getX(Y+1),a.getX(Y+2)),r&&(r.faceIndex=Math.floor(Y/3),r.face.materialIndex=D.materialIndex,t.push(r))}else for(let D=Math.max(0,v.start),R=Math.min(a.count,v.start+v.count);D<R;D+=3)r=R0(this,s,e,i,d,p,m,a.getX(D),a.getX(D+1),a.getX(D+2)),r&&(r.faceIndex=Math.floor(D/3),t.push(r));else if(void 0!==c)if(Array.isArray(s))for(let E=0,I=y.length;E<I;E++){const D=y[E],R=s[D.materialIndex];for(let Y=Math.max(D.start,v.start),he=Math.min(c.count,Math.min(D.start+D.count,v.start+v.count));Y<he;Y+=3)r=R0(this,R,e,i,d,p,m,Y,Y+1,Y+2),r&&(r.faceIndex=Math.floor(Y/3),r.face.materialIndex=D.materialIndex,t.push(r))}else for(let D=Math.max(0,v.start),R=Math.min(c.count,v.start+v.count);D<R;D+=3)r=R0(this,s,e,i,d,p,m,D,D+1,D+2),r&&(r.faceIndex=Math.floor(D/3),t.push(r))}}function R0(n,e,t,i,r,o,s,a,c,d){n.getVertexPosition(a,Hf),n.getVertexPosition(c,Gf),n.getVertexPosition(d,Wf);const p=function hce(n,e,t,i,r,o,s,a){let c;if(c=1===e.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,0===e.side,a),null===c)return null;D0.copy(a),D0.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(D0);return d<t.near||d>t.far?null:{distance:d,point:D0.clone(),object:n}}(n,e,t,i,Hf,Gf,Wf,I0);if(p){r&&(M0.fromBufferAttribute(r,a),A0.fromBufferAttribute(r,c),C0.fromBufferAttribute(r,d),p.uv=Ia.getInterpolation(I0,Hf,Gf,Wf,M0,A0,C0,new It)),o&&(M0.fromBufferAttribute(o,a),A0.fromBufferAttribute(o,c),C0.fromBufferAttribute(o,d),p.uv1=Ia.getInterpolation(I0,Hf,Gf,Wf,M0,A0,C0,new It)),s&&(N4.fromBufferAttribute(s,a),F4.fromBufferAttribute(s,c),L4.fromBufferAttribute(s,d),p.normal=Ia.getInterpolation(I0,Hf,Gf,Wf,N4,F4,L4,new xe),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const m={a,b:c,c:d,normal:new xe,materialIndex:0};Ia.getNormal(Hf,Gf,Wf,m.normal),p.face=m}return p}class qf extends Pi{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const c=[],d=[],p=[],m=[];let y=0,v=0;function E(I,D,R,j,H,Y,he,te,re,be,se){const ie=Y/re,Ee=he/be,$e=Y/2,He=he/2,Ge=te/2,Ie=re+1,ye=be+1;let De=0,Fe=0;const at=new xe;for(let Vt=0;Vt<ye;Vt++){const jt=Vt*Ee-He;for(let In=0;In<Ie;In++)at[I]=(In*ie-$e)*j,at[D]=jt*H,at[R]=Ge,d.push(at.x,at.y,at.z),at[I]=0,at[D]=0,at[R]=te>0?1:-1,p.push(at.x,at.y,at.z),m.push(In/re),m.push(1-Vt/be),De+=1}for(let Vt=0;Vt<be;Vt++)for(let jt=0;jt<re;jt++){const Zn=y+jt+Ie*(Vt+1),st=y+(jt+1)+Ie*(Vt+1),qt=y+(jt+1)+Ie*Vt;c.push(y+jt+Ie*Vt,Zn,qt),c.push(Zn,st,qt),Fe+=6}a.addGroup(v,Fe,se),v+=Fe,y+=De}E("z","y","x",-1,-1,i,t,e,s,o,0),E("z","y","x",1,-1,i,t,-e,s,o,1),E("x","z","y",1,1,e,i,t,r,s,2),E("x","z","y",1,-1,e,i,-t,r,s,3),E("x","y","z",1,-1,e,t,i,r,o,4),E("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(c),this.setAttribute("position",new Rn(d,3)),this.setAttribute("normal",new Rn(p,3)),this.setAttribute("uv",new Rn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Xf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function ms(n){const e={};for(let t=0;t<n.length;t++){const i=Xf(n[t]);for(const r in i)e[r]=i[r]}return e}function U4(n){const e=n.getRenderTarget();return null===e?n.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:or.workingColorSpace}const pce={clone:Xf,merge:ms};class Rl extends ps{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xf(e.uniforms),this.uniformsGroups=function fce(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;t.uniforms[r]=s&&s.isTexture?{type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class mA extends Fr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yn,this.projectionMatrix=new Yn,this.projectionMatrixInverse=new Yn,this.coordinateSystem=nc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const ru=new xe,B4=new It,V4=new It;class Uo extends mA{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*If*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*dd*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*If*Math.atan(Math.tan(.5*dd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ru.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ru.x,ru.y).multiplyScalar(-e/ru.z),ru.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ru.x,ru.y).multiplyScalar(-e/ru.z)}getViewSize(e,t){return this.getViewBounds(e,B4,V4),t.subVectors(V4,B4)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*dd*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const c=s.fullWidth,d=s.fullHeight;o+=s.offsetX*r/c,t-=s.offsetY*i/d,r*=s.width/c,i*=s.height/d}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class _ce extends Fr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Uo(-90,1,e,t);r.layers=this.layers,this.add(r);const o=new Uo(-90,1,e,t);o.layers=this.layers,this.add(o);const s=new Uo(-90,1,e,t);s.layers=this.layers,this.add(s);const a=new Uo(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new Uo(-90,1,e,t);c.layers=this.layers,this.add(c);const d=new Uo(-90,1,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,c]=t;for(const d of t)this.remove(d);if(e===nc)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,c,d,p]=this.children,m=e.getRenderTarget(),y=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const I=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,d),i.texture.generateMipmaps=I,e.setRenderTarget(i,5,r),e.render(t,p),e.setRenderTarget(m,y,v),e.xr.enabled=E,i.texture.needsPMREMUpdate=!0}}class P0 extends Us{constructor(e,t,i,r,o,s,a,c,d,p){super(e=void 0!==e?e:[],t=void 0!==t?t:Yc,i,r,o,s,a,c,d,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bce extends Dl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new P0([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:To}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new qf(5,5,5),o=new Rl({name:"CubemapFromEquirect",uniforms:Xf(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new fo(r,o),a=t.minFilter;return t.minFilter===tc&&(t.minFilter=To),new _ce(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}}const gA=new xe,yce=new xe,vce=new Si;class ou{constructor(e=new xe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=gA.subVectors(i,t).cross(yce.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(gA),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||vce.getNormalMatrix(e),r=this.coplanarPoint(gA).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const gd=new fs,O0=new xe;class k0{constructor(e=new ou,t=new ou,i=new ou,r=new ou,o=new ou,s=new ou){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=nc){const i=this.planes,r=e.elements,o=r[0],s=r[1],a=r[2],c=r[3],d=r[4],p=r[5],m=r[6],y=r[7],v=r[8],E=r[9],I=r[10],D=r[11],R=r[12],j=r[13],H=r[14],Y=r[15];if(i[0].setComponents(c-o,y-d,D-v,Y-R).normalize(),i[1].setComponents(c+o,y+d,D+v,Y+R).normalize(),i[2].setComponents(c+s,y+p,D+E,Y+j).normalize(),i[3].setComponents(c-s,y-p,D-E,Y-j).normalize(),i[4].setComponents(c-a,y-m,D-I,Y-H).normalize(),t===nc)i[5].setComponents(c+a,y+m,D+I,Y+H).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,m,I,H).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),gd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),gd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(gd)}intersectsSprite(e){return gd.center.set(0,0,0),gd.radius=.7071067811865476,gd.applyMatrix4(e.matrixWorld),this.intersectsSphere(gd)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(O0.x=r.normal.x>0?e.max.x:e.min.x,O0.y=r.normal.y>0?e.max.y:e.min.y,O0.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(O0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function z4(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function xce(n){const e=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)},remove:function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))},update:function s(a,c){if(a.isGLBufferAttribute){const p=e.get(a);return void((!p||p.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}a.isInterleavedBufferAttribute&&(a=a.data);const d=e.get(a);if(void 0===d)e.set(a,function t(a,c){const d=a.array,p=a.usage,m=d.byteLength,y=n.createBuffer();let v;if(n.bindBuffer(c,y),n.bufferData(c,d,p),a.onUploadCallback(),d instanceof Float32Array)v=n.FLOAT;else if(d instanceof Uint16Array)v=a.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(d instanceof Int16Array)v=n.SHORT;else if(d instanceof Uint32Array)v=n.UNSIGNED_INT;else if(d instanceof Int32Array)v=n.INT;else if(d instanceof Int8Array)v=n.BYTE;else if(d instanceof Uint8Array)v=n.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);v=n.UNSIGNED_BYTE}return{buffer:y,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:a.version,size:m}}(a,c));else if(d.version<a.version){if(d.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function i(a,c,d){const p=c.array,m=c._updateRange,y=c.updateRanges;if(n.bindBuffer(d,a),-1===m.count&&0===y.length&&n.bufferSubData(d,0,p),0!==y.length){for(let v=0,E=y.length;v<E;v++){const I=y[v];n.bufferSubData(d,I.start*p.BYTES_PER_ELEMENT,p,I.start,I.count)}c.clearUpdateRanges()}-1!==m.count&&(n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count),m.count=-1),c.onUploadCallback()})(d.buffer,a,c),d.version=a.version}}}}class Zf extends Pi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const o=e/2,s=t/2,a=Math.floor(i),c=Math.floor(r),d=a+1,p=c+1,m=e/a,y=t/c,v=[],E=[],I=[],D=[];for(let R=0;R<p;R++){const j=R*y-s;for(let H=0;H<d;H++)E.push(H*m-o,-j,0),I.push(0,0,1),D.push(H/a),D.push(1-R/c)}for(let R=0;R<c;R++)for(let j=0;j<a;j++){const Y=j+d*(R+1),he=j+1+d*(R+1),te=j+1+d*R;v.push(j+d*R,Y,te),v.push(Y,he,te)}this.setIndex(v),this.setAttribute("position",new Rn(E,3)),this.setAttribute("normal",new Rn(I,3)),this.setAttribute("uv",new Rn(D,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zf(e.width,e.height,e.widthSegments,e.heightSegments)}}const Ci={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( batchId );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},fn={common:{diffuse:{value:new wn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Si},alphaMap:{value:null},alphaMapTransform:{value:new Si},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Si}},envmap:{envMap:{value:null},envMapRotation:{value:new Si},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Si}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Si}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Si},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Si},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Si},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Si}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Si}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Si}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Si},alphaTest:{value:0},uvTransform:{value:new Si}},sprite:{diffuse:{value:new wn(16777215)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Si},alphaMap:{value:null},alphaMapTransform:{value:new Si},alphaTest:{value:0}}},Pl={basic:{uniforms:ms([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.fog]),vertexShader:Ci.meshbasic_vert,fragmentShader:Ci.meshbasic_frag},lambert:{uniforms:ms([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,fn.lights,{emissive:{value:new wn(0)}}]),vertexShader:Ci.meshlambert_vert,fragmentShader:Ci.meshlambert_frag},phong:{uniforms:ms([fn.common,fn.specularmap,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,fn.lights,{emissive:{value:new wn(0)},specular:{value:new wn(1118481)},shininess:{value:30}}]),vertexShader:Ci.meshphong_vert,fragmentShader:Ci.meshphong_frag},standard:{uniforms:ms([fn.common,fn.envmap,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.roughnessmap,fn.metalnessmap,fn.fog,fn.lights,{emissive:{value:new wn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ci.meshphysical_vert,fragmentShader:Ci.meshphysical_frag},toon:{uniforms:ms([fn.common,fn.aomap,fn.lightmap,fn.emissivemap,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.gradientmap,fn.fog,fn.lights,{emissive:{value:new wn(0)}}]),vertexShader:Ci.meshtoon_vert,fragmentShader:Ci.meshtoon_frag},matcap:{uniforms:ms([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,fn.fog,{matcap:{value:null}}]),vertexShader:Ci.meshmatcap_vert,fragmentShader:Ci.meshmatcap_frag},points:{uniforms:ms([fn.points,fn.fog]),vertexShader:Ci.points_vert,fragmentShader:Ci.points_frag},dashed:{uniforms:ms([fn.common,fn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ci.linedashed_vert,fragmentShader:Ci.linedashed_frag},depth:{uniforms:ms([fn.common,fn.displacementmap]),vertexShader:Ci.depth_vert,fragmentShader:Ci.depth_frag},normal:{uniforms:ms([fn.common,fn.bumpmap,fn.normalmap,fn.displacementmap,{opacity:{value:1}}]),vertexShader:Ci.meshnormal_vert,fragmentShader:Ci.meshnormal_frag},sprite:{uniforms:ms([fn.sprite,fn.fog]),vertexShader:Ci.sprite_vert,fragmentShader:Ci.sprite_frag},background:{uniforms:{uvTransform:{value:new Si},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ci.background_vert,fragmentShader:Ci.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Si}},vertexShader:Ci.backgroundCube_vert,fragmentShader:Ci.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ci.cube_vert,fragmentShader:Ci.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ci.equirect_vert,fragmentShader:Ci.equirect_frag},distanceRGBA:{uniforms:ms([fn.common,fn.displacementmap,{referencePosition:{value:new xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ci.distanceRGBA_vert,fragmentShader:Ci.distanceRGBA_frag},shadow:{uniforms:ms([fn.lights,fn.fog,{color:{value:new wn(0)},opacity:{value:1}}]),vertexShader:Ci.shadow_vert,fragmentShader:Ci.shadow_frag}};Pl.physical={uniforms:ms([Pl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Si},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Si},clearcoatNormalScale:{value:new It(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Si},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Si},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Si},sheen:{value:0},sheenColor:{value:new wn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Si},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Si},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Si},transmissionSamplerSize:{value:new It},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Si},attenuationDistance:{value:0},attenuationColor:{value:new wn(0)},specularColor:{value:new wn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Si},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Si},anisotropyVector:{value:new It},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Si}}]),vertexShader:Ci.meshphysical_vert,fragmentShader:Ci.meshphysical_frag};const N0={r:0,b:0,g:0},_d=new sc,xde=new Yn;function wde(n,e,t,i,r,o,s){const a=new wn(0);let d,p,c=!0===o?0:1,m=null,y=0,v=null;function E(j){let H=!0===j.isScene?j.background:null;return H&&H.isTexture&&(H=(j.backgroundBlurriness>0?t:e).get(H)),H}function R(j,H){j.getRGB(N0,U4(n)),i.buffers.color.setClear(N0.r,N0.g,N0.b,H,s)}return{getClearColor:function(){return a},setClearColor:function(j,H=1){a.set(j),c=H,R(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(j){c=j,R(a,c)},render:function I(j){let H=!1;const Y=E(j);null===Y?R(a,c):Y&&Y.isColor&&(R(Y,1),H=!0);const he=n.xr.getEnvironmentBlendMode();"additive"===he?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===he&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||H)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))},addToRenderList:function D(j,H){const Y=E(H);Y&&(Y.isCubeTexture||Y.mapping===Cg)?(void 0===p&&(p=new fo(new qf(1,1,1),new Rl({name:"BackgroundCubeMaterial",uniforms:Xf(Pl.backgroundCube.uniforms),vertexShader:Pl.backgroundCube.vertexShader,fragmentShader:Pl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(he,te,re){this.matrixWorld.copyPosition(re.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),_d.copy(H.backgroundRotation),_d.x*=-1,_d.y*=-1,_d.z*=-1,Y.isCubeTexture&&!1===Y.isRenderTargetTexture&&(_d.y*=-1,_d.z*=-1),p.material.uniforms.envMap.value=Y,p.material.uniforms.flipEnvMap.value=Y.isCubeTexture&&!1===Y.isRenderTargetTexture?-1:1,p.material.uniforms.backgroundBlurriness.value=H.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=H.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(xde.makeRotationFromEuler(_d)),p.material.toneMapped=or.getTransfer(Y.colorSpace)!==Cr,(m!==Y||y!==Y.version||v!==n.toneMapping)&&(p.material.needsUpdate=!0,m=Y,y=Y.version,v=n.toneMapping),p.layers.enableAll(),j.unshift(p,p.geometry,p.material,0,0,null)):Y&&Y.isTexture&&(void 0===d&&(d=new fo(new Zf(2,2),new Rl({name:"BackgroundMaterial",uniforms:Xf(Pl.background.uniforms),vertexShader:Pl.background.vertexShader,fragmentShader:Pl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=Y,d.material.uniforms.backgroundIntensity.value=H.backgroundIntensity,d.material.toneMapped=or.getTransfer(Y.colorSpace)!==Cr,!0===Y.matrixAutoUpdate&&Y.updateMatrix(),d.material.uniforms.uvTransform.value.copy(Y.matrix),(m!==Y||y!==Y.version||v!==n.toneMapping)&&(d.material.needsUpdate=!0,m=Y,y=Y.version,v=n.toneMapping),d.layers.enableAll(),j.unshift(d,d.geometry,d.material,0,0,null))}}}function Ede(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=y(null);let o=r,s=!1;function d(ie){return n.bindVertexArray(ie)}function p(ie){return n.deleteVertexArray(ie)}function y(ie){const Ee=[],$e=[],He=[];for(let Ge=0;Ge<t;Ge++)Ee[Ge]=0,$e[Ge]=0,He[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ee,enabledAttributes:$e,attributeDivisors:He,object:ie,attributes:{},index:null}}function I(){const ie=o.newAttributes;for(let Ee=0,$e=ie.length;Ee<$e;Ee++)ie[Ee]=0}function D(ie){R(ie,0)}function R(ie,Ee){const He=o.enabledAttributes,Ge=o.attributeDivisors;o.newAttributes[ie]=1,0===He[ie]&&(n.enableVertexAttribArray(ie),He[ie]=1),Ge[ie]!==Ee&&(n.vertexAttribDivisor(ie,Ee),Ge[ie]=Ee)}function j(){const ie=o.newAttributes,Ee=o.enabledAttributes;for(let $e=0,He=Ee.length;$e<He;$e++)Ee[$e]!==ie[$e]&&(n.disableVertexAttribArray($e),Ee[$e]=0)}function H(ie,Ee,$e,He,Ge,Ie,ye){!0===ye?n.vertexAttribIPointer(ie,Ee,$e,Ge,Ie):n.vertexAttribPointer(ie,Ee,$e,He,Ge,Ie)}function be(){se(),s=!0,o!==r&&(o=r,d(o.object))}function se(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(ie,Ee,$e,He,Ge){let Ie=!1;const ye=function m(ie,Ee,$e){const He=!0===$e.wireframe;let Ge=i[ie.id];void 0===Ge&&(Ge={},i[ie.id]=Ge);let Ie=Ge[Ee.id];void 0===Ie&&(Ie={},Ge[Ee.id]=Ie);let ye=Ie[He];return void 0===ye&&(ye=y(function c(){return n.createVertexArray()}()),Ie[He]=ye),ye}(He,$e,Ee);o!==ye&&(o=ye,d(o.object)),Ie=function v(ie,Ee,$e,He){const Ge=o.attributes,Ie=Ee.attributes;let ye=0;const De=$e.getAttributes();for(const Fe in De)if(De[Fe].location>=0){const Vt=Ge[Fe];let jt=Ie[Fe];if(void 0===jt&&("instanceMatrix"===Fe&&ie.instanceMatrix&&(jt=ie.instanceMatrix),"instanceColor"===Fe&&ie.instanceColor&&(jt=ie.instanceColor)),void 0===Vt||Vt.attribute!==jt||jt&&Vt.data!==jt.data)return!0;ye++}return o.attributesNum!==ye||o.index!==He}(ie,He,$e,Ge),Ie&&function E(ie,Ee,$e,He){const Ge={},Ie=Ee.attributes;let ye=0;const De=$e.getAttributes();for(const Fe in De)if(De[Fe].location>=0){let Vt=Ie[Fe];void 0===Vt&&("instanceMatrix"===Fe&&ie.instanceMatrix&&(Vt=ie.instanceMatrix),"instanceColor"===Fe&&ie.instanceColor&&(Vt=ie.instanceColor));const jt={};jt.attribute=Vt,Vt&&Vt.data&&(jt.data=Vt.data),Ge[Fe]=jt,ye++}o.attributes=Ge,o.attributesNum=ye,o.index=He}(ie,He,$e,Ge),null!==Ge&&e.update(Ge,n.ELEMENT_ARRAY_BUFFER),(Ie||s)&&(s=!1,function Y(ie,Ee,$e,He){I();const Ge=He.attributes,Ie=$e.getAttributes(),ye=Ee.defaultAttributeValues;for(const De in Ie){const Fe=Ie[De];if(Fe.location>=0){let at=Ge[De];if(void 0===at&&("instanceMatrix"===De&&ie.instanceMatrix&&(at=ie.instanceMatrix),"instanceColor"===De&&ie.instanceColor&&(at=ie.instanceColor)),void 0!==at){const Vt=at.normalized,jt=at.itemSize,In=e.get(at);if(void 0===In)continue;const Zn=In.buffer,st=In.type,qt=In.bytesPerElement,un=st===n.INT||st===n.UNSIGNED_INT||1013===at.gpuType;if(at.isInterleavedBufferAttribute){const Nt=at.data,Pn=Nt.stride,Tn=at.offset;if(Nt.isInstancedInterleavedBuffer){for(let Bn=0;Bn<Fe.locationSize;Bn++)R(Fe.location+Bn,Nt.meshPerAttribute);!0!==ie.isInstancedMesh&&void 0===He._maxInstanceCount&&(He._maxInstanceCount=Nt.meshPerAttribute*Nt.count)}else for(let Bn=0;Bn<Fe.locationSize;Bn++)D(Fe.location+Bn);n.bindBuffer(n.ARRAY_BUFFER,Zn);for(let Bn=0;Bn<Fe.locationSize;Bn++)H(Fe.location+Bn,jt/Fe.locationSize,st,Vt,Pn*qt,(Tn+jt/Fe.locationSize*Bn)*qt,un)}else{if(at.isInstancedBufferAttribute){for(let Nt=0;Nt<Fe.locationSize;Nt++)R(Fe.location+Nt,at.meshPerAttribute);!0!==ie.isInstancedMesh&&void 0===He._maxInstanceCount&&(He._maxInstanceCount=at.meshPerAttribute*at.count)}else for(let Nt=0;Nt<Fe.locationSize;Nt++)D(Fe.location+Nt);n.bindBuffer(n.ARRAY_BUFFER,Zn);for(let Nt=0;Nt<Fe.locationSize;Nt++)H(Fe.location+Nt,jt/Fe.locationSize,st,Vt,jt*qt,jt/Fe.locationSize*Nt*qt,un)}}else if(void 0!==ye){const Vt=ye[De];if(void 0!==Vt)switch(Vt.length){case 2:n.vertexAttrib2fv(Fe.location,Vt);break;case 3:n.vertexAttrib3fv(Fe.location,Vt);break;case 4:n.vertexAttrib4fv(Fe.location,Vt);break;default:n.vertexAttrib1fv(Fe.location,Vt)}}}}j()}(ie,Ee,$e,He),null!==Ge&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Ge).buffer))},reset:be,resetDefaultState:se,dispose:function he(){be();for(const ie in i){const Ee=i[ie];for(const $e in Ee){const He=Ee[$e];for(const Ge in He)p(He[Ge].object),delete He[Ge];delete Ee[$e]}delete i[ie]}},releaseStatesOfGeometry:function te(ie){if(void 0===i[ie.id])return;const Ee=i[ie.id];for(const $e in Ee){const He=Ee[$e];for(const Ge in He)p(He[Ge].object),delete He[Ge];delete Ee[$e]}delete i[ie.id]},releaseStatesOfProgram:function re(ie){for(const Ee in i){const $e=i[Ee];if(void 0===$e[ie.id])continue;const He=$e[ie.id];for(const Ge in He)p(He[Ge].object),delete He[Ge];delete $e[ie.id]}},initAttributes:I,enableAttribute:D,disableUnusedAttributes:j}}function Sde(n,e,t){let i;function s(d,p,m){0!==m&&(n.drawArraysInstanced(i,d,p,m),t.update(p,i,m))}this.setMode=function r(d){i=d},this.render=function o(d,p){n.drawArrays(i,d,p),t.update(p,i,1)},this.renderInstances=s,this.renderMultiDraw=function a(d,p,m){if(0===m)return;const y=e.get("WEBGL_multi_draw");if(null===y)for(let v=0;v<m;v++)this.render(d[v],p[v]);else{y.multiDrawArraysWEBGL(i,d,0,p,0,m);let v=0;for(let E=0;E<m;E++)v+=p[E];t.update(v,i,1)}},this.renderMultiDrawInstances=function c(d,p,m,y){if(0===m)return;const v=e.get("WEBGL_multi_draw");if(null===v)for(let E=0;E<d.length;E++)s(d[E],p[E],y[E]);else{v.multiDrawArraysInstancedWEBGL(i,d,0,p,0,y,0,m);let E=0;for(let I=0;I<m;I++)E+=p[I];for(let I=0;I<y.length;I++)t.update(E,i,y[I])}}}function Tde(n,e,t,i){let r;function c(te){if("highp"===te){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";te="mediump"}return"mediump"===te&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=void 0!==t.precision?t.precision:"highp";const p=c(d);p!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",p,"instead."),d=p);const m=!0===t.logarithmicDepthBuffer,y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function o(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const te=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(te.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:c,textureFormatReadable:function s(te){return!(te!==oa&&i.convert(te)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(te){const re=1016===te&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(te!==Kc&&i.convert(te)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&te!==Aa&&!re)},precision:d,logarithmicDepthBuffer:m,maxTextures:y,maxVertexTextures:v,maxTextureSize:n.getParameter(n.MAX_TEXTURE_SIZE),maxCubemapSize:n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:n.getParameter(n.MAX_VERTEX_ATTRIBS),maxVertexUniforms:n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:n.getParameter(n.MAX_VARYING_VECTORS),maxFragmentUniforms:n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:v>0,maxSamples:n.getParameter(n.MAX_SAMPLES)}}function Mde(n){const e=this;let t=null,i=0,r=!1,o=!1;const s=new ou,a=new Si,c={value:null,needsUpdate:!1};function p(m,y,v,E){const I=null!==m?m.length:0;let D=null;if(0!==I){if(D=c.value,!0!==E||null===D){const R=v+4*I,j=y.matrixWorldInverse;a.getNormalMatrix(j),(null===D||D.length<R)&&(D=new Float32Array(R));for(let H=0,Y=v;H!==I;++H,Y+=4)s.copy(m[H]).applyMatrix4(j,a),s.normal.toArray(D,Y),D[Y+3]=s.constant}c.value=D,c.needsUpdate=!0}return e.numPlanes=I,e.numIntersection=0,D}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,y){const v=0!==m.length||y||0!==i||r;return r=y,i=m.length,v},this.beginShadows=function(){o=!0,p(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(m,y){t=p(m,y,0)},this.setState=function(m,y,v){const E=m.clippingPlanes,I=m.clipIntersection,D=m.clipShadows,R=n.get(m);if(!r||null===E||0===E.length||o&&!D)o?p(null):function d(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const j=o?0:i,H=4*j;let Y=R.clippingState||null;c.value=Y,Y=p(E,y,H,v);for(let he=0;he!==H;++he)Y[he]=t[he];R.clippingState=Y,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=j}}}function Ade(n){let e=new WeakMap;function t(s,a){return 303===a?s.mapping=Yc:304===a&&(s.mapping=cd),s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(s){if(s&&s.isTexture){const a=s.mapping;if(303===a||304===a){if(e.has(s))return t(e.get(s).texture,s.mapping);{const c=s.image;if(c&&c.height>0){const d=new bce(c.height);return d.fromEquirectangularTexture(n,s),e.set(s,d),s.addEventListener("dispose",r),t(d.texture,s.mapping)}return null}}}return s},dispose:function o(){e=new WeakMap}}}class _A extends mA{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=i-e,s=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,s=o+d*this.view.width,a-=p*this.view.offsetY,c=a-p*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const j4=[.125,.215,.35,.446,.526,.582],bA=new _A,$4=new wn;let yA=null,vA=0,xA=0,wA=!1;const yd=(1+Math.sqrt(5))/2,Jf=1/yd,H4=[new xe(-yd,Jf,0),new xe(yd,Jf,0),new xe(-Jf,0,yd),new xe(Jf,0,yd),new xe(0,yd,-Jf),new xe(0,yd,Jf),new xe(-1,1,-1),new xe(1,1,-1),new xe(-1,1,1),new xe(1,1,1)];class G4{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){yA=this._renderer.getRenderTarget(),vA=this._renderer.getActiveCubeFace(),xA=this._renderer.getActiveMipmapLevel(),wA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=X4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=q4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yA,vA,xA),this._renderer.xr.enabled=wA,e.scissorTest=!1,F0(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Yc||e.mapping===cd?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),yA=this._renderer.getRenderTarget(),vA=this._renderer.getActiveCubeFace(),xA=this._renderer.getActiveMipmapLevel(),wA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:To,minFilter:To,generateMipmaps:!1,type:1016,format:oa,colorSpace:Qc,depthBuffer:!1},r=W4(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=W4(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Cde(n){const e=[],t=[],i=[];let r=n;const o=n-4+1+j4.length;for(let s=0;s<o;s++){const a=Math.pow(2,r);t.push(a);let c=1/a;s>n-4?c=j4[s-n+4-1]:0===s&&(c=0),i.push(c);const d=1/(a-2),p=-d,m=1+d,y=[p,p,m,p,m,m,p,p,m,m,p,m],v=6,E=6,I=3,D=2,R=1,j=new Float32Array(I*E*v),H=new Float32Array(D*E*v),Y=new Float32Array(R*E*v);for(let te=0;te<v;te++){const re=te%3*2/3-1,be=te>2?0:-1;j.set([re,be,0,re+2/3,be,0,re+2/3,be+1,0,re,be,0,re+2/3,be+1,0,re,be+1,0],I*E*te),H.set(y,D*E*te),Y.set([te,te,te,te,te,te],R*E*te)}const he=new Pi;he.setAttribute("position",new hr(j,I)),he.setAttribute("uv",new hr(H,D)),he.setAttribute("faceIndex",new hr(Y,R)),e.push(he),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(o)),this._blurMaterial=function Ide(n,e,t){const i=new Float32Array(20),r=new xe(0,1,0);return new Rl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,e,t)}return r}_compileMaterial(e){const t=new fo(this._lodPlanes[0],e);this._renderer.compile(t,bA)}_sceneToCubeUV(e,t,i,r){const a=new Uo(90,1,t,i),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,y=p.toneMapping;p.getClearColor($4),p.toneMapping=Xc,p.autoClear=!1;const v=new pd({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),E=new fo(new qf,v);let I=!1;const D=e.background;D?D.isColor&&(v.color.copy(D),e.background=null,I=!0):(v.color.copy($4),I=!0);for(let R=0;R<6;R++){const j=R%3;0===j?(a.up.set(0,c[R],0),a.lookAt(d[R],0,0)):1===j?(a.up.set(0,0,c[R]),a.lookAt(0,d[R],0)):(a.up.set(0,c[R],0),a.lookAt(0,0,d[R]));const H=this._cubeSize;F0(r,j*H,R>2?H:0,H,H),p.setRenderTarget(r),I&&p.render(E,a),p.render(e,a)}E.geometry.dispose(),E.material.dispose(),p.toneMapping=y,p.autoClear=m,e.background=D}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Yc||e.mapping===cd;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=X4()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=q4());const o=r?this._cubemapMaterial:this._equirectMaterial,s=new fo(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const c=this._cubeSize;F0(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,bA)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let o=1;o<r;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]);this._blur(e,o-1,o,s,H4[(r-o-1)%H4.length])}t.autoClear=i}_blur(e,t,i,r,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){const c=this._renderer,d=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const m=new fo(this._lodPlanes[r],d),y=d.uniforms,v=this._sizeLods[i]-1,E=isFinite(o)?Math.PI/(2*v):2*Math.PI/39,I=o/E,D=isFinite(o)?1+Math.floor(3*I):20;D>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${D} samples when the maximum is set to 20`);const R=[];let j=0;for(let re=0;re<20;++re){const be=re/I,se=Math.exp(-be*be/2);R.push(se),0===re?j+=se:re<D&&(j+=2*se)}for(let re=0;re<R.length;re++)R[re]=R[re]/j;y.envMap.value=e.texture,y.samples.value=D,y.weights.value=R,y.latitudinal.value="latitudinal"===s,a&&(y.poleAxis.value=a);const{_lodMax:H}=this;y.dTheta.value=E,y.mipInt.value=H-i;const Y=this._sizeLods[r];F0(t,3*Y*(r>H-4?r-H+4:0),4*(this._cubeSize-Y),3*Y,2*Y),c.setRenderTarget(t),c.render(m,bA)}}function W4(n,e,t){const i=new Dl(n,e,t);return i.texture.mapping=Cg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function F0(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function q4(){return new Rl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function X4(){return new Rl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Dde(n){let e=new WeakMap,t=null;function o(a){const c=a.target;c.removeEventListener("dispose",o);const d=e.get(c);void 0!==d&&(e.delete(c),d.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,d=303===c||304===c,p=c===Yc||c===cd;if(d||p){let m=e.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==m?m.texture.pmremVersion:0))return null===t&&(t=new G4(n)),m=d?t.fromEquirectangular(a,m):t.fromCubemap(a,m),m.texture.pmremVersion=a.pmremVersion,e.set(a,m),m.texture;if(void 0!==m)return m.texture;{const v=a.image;return d&&v&&v.height>0||p&&v&&function r(a){let c=0;for(let p=0;p<6;p++)void 0!==a[p]&&c++;return 6===c}(v)?(null===t&&(t=new G4(n)),m=d?t.fromEquirectangular(a):t.fromCubemap(a),m.texture.pmremVersion=a.pmremVersion,e.set(a,m),a.addEventListener("dispose",o),m.texture):null}}}return a},dispose:function s(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Rde(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return null===r&&KM("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Pde(n,e,t,i){const r={},o=new WeakMap;function s(m){const y=m.target;null!==y.index&&e.remove(y.index);for(const E in y.attributes)e.remove(y.attributes[E]);for(const E in y.morphAttributes){const I=y.morphAttributes[E];for(let D=0,R=I.length;D<R;D++)e.remove(I[D])}y.removeEventListener("dispose",s),delete r[y.id];const v=o.get(y);v&&(e.remove(v),o.delete(y)),i.releaseStatesOfGeometry(y),!0===y.isInstancedBufferGeometry&&delete y._maxInstanceCount,t.memory.geometries--}function d(m){const y=[],v=m.index,E=m.attributes.position;let I=0;if(null!==v){const j=v.array;I=v.version;for(let H=0,Y=j.length;H<Y;H+=3){const he=j[H+0],te=j[H+1],re=j[H+2];y.push(he,te,te,re,re,he)}}else{if(void 0===E)return;I=E.version;for(let H=0,Y=E.array.length/3-1;H<Y;H+=3){const he=H+0,te=H+1,re=H+2;y.push(he,te,te,re,re,he)}}const D=new(g4(y)?P4:R4)(y,1);D.version=I;const R=o.get(m);R&&e.remove(R),o.set(m,D)}return{get:function a(m,y){return!0===r[y.id]||(y.addEventListener("dispose",s),r[y.id]=!0,t.memory.geometries++),y},update:function c(m){const y=m.attributes;for(const E in y)e.update(y[E],n.ARRAY_BUFFER);const v=m.morphAttributes;for(const E in v){const I=v[E];for(let D=0,R=I.length;D<R;D++)e.update(I[D],n.ARRAY_BUFFER)}},getWireframeAttribute:function p(m){const y=o.get(m);if(y){const v=m.index;null!==v&&y.version<v.version&&d(m)}else d(m);return o.get(m)}}}function Ode(n,e,t){let i,o,s;function d(y,v,E){0!==E&&(n.drawElementsInstanced(i,v,o,y*s,E),t.update(v,i,E))}this.setMode=function r(y){i=y},this.setIndex=function a(y){o=y.type,s=y.bytesPerElement},this.render=function c(y,v){n.drawElements(i,v,o,y*s),t.update(v,i,1)},this.renderInstances=d,this.renderMultiDraw=function p(y,v,E){if(0===E)return;const I=e.get("WEBGL_multi_draw");if(null===I)for(let D=0;D<E;D++)this.render(y[D]/s,v[D]);else{I.multiDrawElementsWEBGL(i,v,0,o,y,0,E);let D=0;for(let R=0;R<E;R++)D+=v[R];t.update(D,i,1)}},this.renderMultiDrawInstances=function m(y,v,E,I){if(0===E)return;const D=e.get("WEBGL_multi_draw");if(null===D)for(let R=0;R<y.length;R++)d(y[R]/s,v[R],I[R]);else{D.multiDrawElementsInstancedWEBGL(i,v,0,o,y,0,I,0,E);let R=0;for(let j=0;j<E;j++)R+=v[j];for(let j=0;j<I.length;j++)t.update(R,i,I[j])}}}function kde(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function Nde(n,e,t){const i=new WeakMap,r=new dr;return{update:function o(s,a,c){const d=s.morphTargetInfluences,p=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,m=void 0!==p?p.length:0;let y=i.get(a);if(void 0===y||y.count!==m){let se=function(){re.dispose(),i.delete(a),a.removeEventListener("dispose",se)};void 0!==y&&y.texture.dispose();const v=void 0!==a.morphAttributes.position,E=void 0!==a.morphAttributes.normal,I=void 0!==a.morphAttributes.color,D=a.morphAttributes.position||[],R=a.morphAttributes.normal||[],j=a.morphAttributes.color||[];let H=0;!0===v&&(H=1),!0===E&&(H=2),!0===I&&(H=3);let Y=a.attributes.position.count*H,he=1;Y>e.maxTextureSize&&(he=Math.ceil(Y/e.maxTextureSize),Y=e.maxTextureSize);const te=new Float32Array(Y*he*4*m),re=new JM(te,Y,he,m);re.type=Aa,re.needsUpdate=!0;const be=4*H;for(let ie=0;ie<m;ie++){const Ee=D[ie],$e=R[ie],He=j[ie],Ge=Y*he*4*ie;for(let Ie=0;Ie<Ee.count;Ie++){const ye=Ie*be;!0===v&&(r.fromBufferAttribute(Ee,Ie),te[Ge+ye+0]=r.x,te[Ge+ye+1]=r.y,te[Ge+ye+2]=r.z,te[Ge+ye+3]=0),!0===E&&(r.fromBufferAttribute($e,Ie),te[Ge+ye+4]=r.x,te[Ge+ye+5]=r.y,te[Ge+ye+6]=r.z,te[Ge+ye+7]=0),!0===I&&(r.fromBufferAttribute(He,Ie),te[Ge+ye+8]=r.x,te[Ge+ye+9]=r.y,te[Ge+ye+10]=r.z,te[Ge+ye+11]=4===He.itemSize?r.w:1)}}y={count:m,texture:re,size:new It(Y,he)},i.set(a,y),a.addEventListener("dispose",se)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let v=0;for(let I=0;I<d.length;I++)v+=d[I];const E=a.morphTargetsRelative?1:1-v;c.getUniforms().setValue(n,"morphTargetBaseInfluence",E),c.getUniforms().setValue(n,"morphTargetInfluences",d)}c.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}}}function Fde(n,e,t,i){let r=new WeakMap;function a(c){const d=c.target;d.removeEventListener("dispose",a),t.remove(d.instanceMatrix),null!==d.instanceColor&&t.remove(d.instanceColor)}return{update:function o(c){const d=i.render.frame,m=e.get(c,c.geometry);if(r.get(m)!==d&&(e.update(m),r.set(m,d)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),r.get(c)!==d&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,d))),c.isSkinnedMesh){const y=c.skeleton;r.get(y)!==d&&(y.update(),r.set(y,d))}return m},dispose:function s(){r=new WeakMap}}}class Y4 extends Us{constructor(e,t,i,r,o,s,a,c,d,p=Sf){if(p!==Sf&&p!==Tf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&p===Sf&&(i=wf),void 0===i&&p===Tf&&(i=Ef),super(null,r,o,s,a,c,p,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Lo,this.minFilter=void 0!==c?c:Lo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const K4=new Us,Z4=new Y4(1,1);Z4.compareFunction=515;const Q4=new JM,J4=new v4,eV=new P0,tV=[],nV=[],iV=new Float32Array(16),rV=new Float32Array(9),oV=new Float32Array(4);function ep(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let o=tV[r];if(void 0===o&&(o=new Float32Array(r),tV[r]=o),0!==e){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Mo(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ao(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function L0(n,e){let t=nV[e];void 0===t&&(t=new Int32Array(e),nV[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Lde(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Ude(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mo(t,e))return;n.uniform2fv(this.addr,e),Ao(t,e)}}function Bde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Mo(t,e))return;n.uniform3fv(this.addr,e),Ao(t,e)}}function Vde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mo(t,e))return;n.uniform4fv(this.addr,e),Ao(t,e)}}function zde(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Mo(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ao(t,e)}else{if(Mo(t,i))return;oV.set(i),n.uniformMatrix2fv(this.addr,!1,oV),Ao(t,i)}}function jde(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Mo(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ao(t,e)}else{if(Mo(t,i))return;rV.set(i),n.uniformMatrix3fv(this.addr,!1,rV),Ao(t,i)}}function $de(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Mo(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ao(t,e)}else{if(Mo(t,i))return;iV.set(i),n.uniformMatrix4fv(this.addr,!1,iV),Ao(t,i)}}function Hde(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Gde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mo(t,e))return;n.uniform2iv(this.addr,e),Ao(t,e)}}function Wde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mo(t,e))return;n.uniform3iv(this.addr,e),Ao(t,e)}}function qde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mo(t,e))return;n.uniform4iv(this.addr,e),Ao(t,e)}}function Xde(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Yde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mo(t,e))return;n.uniform2uiv(this.addr,e),Ao(t,e)}}function Kde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mo(t,e))return;n.uniform3uiv(this.addr,e),Ao(t,e)}}function Zde(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mo(t,e))return;n.uniform4uiv(this.addr,e),Ao(t,e)}}function Qde(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||(this.type===n.SAMPLER_2D_SHADOW?Z4:K4),r)}function Jde(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||J4,r)}function ehe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||eV,r)}function the(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Q4,r)}function ihe(n,e){n.uniform1fv(this.addr,e)}function rhe(n,e){const t=ep(e,this.size,2);n.uniform2fv(this.addr,t)}function ohe(n,e){const t=ep(e,this.size,3);n.uniform3fv(this.addr,t)}function she(n,e){const t=ep(e,this.size,4);n.uniform4fv(this.addr,t)}function ahe(n,e){const t=ep(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function lhe(n,e){const t=ep(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function che(n,e){const t=ep(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function uhe(n,e){n.uniform1iv(this.addr,e)}function dhe(n,e){n.uniform2iv(this.addr,e)}function hhe(n,e){n.uniform3iv(this.addr,e)}function fhe(n,e){n.uniform4iv(this.addr,e)}function phe(n,e){n.uniform1uiv(this.addr,e)}function mhe(n,e){n.uniform2uiv(this.addr,e)}function ghe(n,e){n.uniform3uiv(this.addr,e)}function _he(n,e){n.uniform4uiv(this.addr,e)}function bhe(n,e,t){const i=this.cache,r=e.length,o=L0(t,r);Mo(i,o)||(n.uniform1iv(this.addr,o),Ao(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||K4,o[s])}function yhe(n,e,t){const i=this.cache,r=e.length,o=L0(t,r);Mo(i,o)||(n.uniform1iv(this.addr,o),Ao(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||J4,o[s])}function vhe(n,e,t){const i=this.cache,r=e.length,o=L0(t,r);Mo(i,o)||(n.uniform1iv(this.addr,o),Ao(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||eV,o[s])}function xhe(n,e,t){const i=this.cache,r=e.length,o=L0(t,r);Mo(i,o)||(n.uniform1iv(this.addr,o),Ao(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||Q4,o[s])}class Ehe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function nhe(n){switch(n){case 5126:return Lde;case 35664:return Ude;case 35665:return Bde;case 35666:return Vde;case 35674:return zde;case 35675:return jde;case 35676:return $de;case 5124:case 35670:return Hde;case 35667:case 35671:return Gde;case 35668:case 35672:return Wde;case 35669:case 35673:return qde;case 5125:return Xde;case 36294:return Yde;case 36295:return Kde;case 36296:return Zde;case 35678:case 36198:case 36298:case 36306:case 35682:return Qde;case 35679:case 36299:case 36307:return Jde;case 35680:case 36300:case 36308:case 36293:return ehe;case 36289:case 36303:case 36311:case 36292:return the}}(t.type)}}class She{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function whe(n){switch(n){case 5126:return ihe;case 35664:return rhe;case 35665:return ohe;case 35666:return she;case 35674:return ahe;case 35675:return lhe;case 35676:return che;case 5124:case 35670:return uhe;case 35667:case 35671:return dhe;case 35668:case 35672:return hhe;case 35669:case 35673:return fhe;case 5125:return phe;case 36294:return mhe;case 36295:return ghe;case 36296:return _he;case 35678:case 36198:case 36298:case 36306:case 35682:return bhe;case 35679:case 36299:case 36307:return yhe;case 35680:case 36300:case 36308:case 36293:return vhe;case 36289:case 36303:case 36311:case 36292:return xhe}}(t.type)}}class The{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let o=0,s=r.length;o!==s;++o){const a=r[o];a.setValue(e,t[a.id],i)}}}const SA=/(\w+)(\])?(\[|\.)?/g;function sV(n,e){n.seq.push(e),n.map[e.id]=e}function Mhe(n,e,t){const i=n.name,r=i.length;for(SA.lastIndex=0;;){const o=SA.exec(i);let a=o[1];const d=o[3];if("]"===o[2]&&(a|=0),void 0===d||"["===d&&SA.lastIndex+2===r){sV(t,void 0===d?new Ehe(a,n,e):new She(a,n,e));break}{let m=t.map[a];void 0===m&&(m=new The(a),sV(t,m)),t=m}}}class U0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const o=e.getActiveUniform(t,r);Mhe(o,e.getUniformLocation(t,o.name),this)}}setValue(e,t,i,r){const o=this.map[t];void 0!==o&&o.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){const a=t[o],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,o=e.length;r!==o;++r){const s=e[r];s.id in t&&i.push(s)}return i}}function aV(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Ahe=37297;let Che=0;function lV(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const s=parseInt(o[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Ihe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){const a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join("\n")}(n.getShaderSource(e),s)}return r}function Rhe(n,e){const t=function Dhe(n){const e=or.getPrimaries(or.workingColorSpace),t=or.getPrimaries(n);let i;switch(e===t?i="":e===d0&&t===u0?i="LinearDisplayP3ToLinearSRGB":e===u0&&t===d0&&(i="LinearSRGBToLinearDisplayP3"),n){case Qc:case l0:return[i,"LinearTransferOETF"];case Ca:case qM:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Phe(n,e){let t;switch(e){case tle:t="Linear";break;case nle:t="Reinhard";break;case ile:t="OptimizedCineon";break;case rle:t="ACESFilmic";break;case sle:t="AgX";break;case ale:t="Neutral";break;case ole:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Lg(n){return""!==n}function cV(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function uV(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Fhe=/^[ \t]*#include +<([\w\d./]+)>/gm;function TA(n){return n.replace(Fhe,Uhe)}const Lhe=new Map;function Uhe(n,e){let t=Ci[e];if(void 0===t){const i=Lhe.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=Ci[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return TA(t)}const Bhe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dV(n){return n.replace(Bhe,Vhe)}function Vhe(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function hV(n){let e=`precision ${n.precision} float;\n\tprecision ${n.precision} int;\n\tprecision ${n.precision} sampler2D;\n\tprecision ${n.precision} samplerCube;\n\tprecision ${n.precision} sampler3D;\n\tprecision ${n.precision} sampler2DArray;\n\tprecision ${n.precision} sampler2DShadow;\n\tprecision ${n.precision} samplerCubeShadow;\n\tprecision ${n.precision} sampler2DArrayShadow;\n\tprecision ${n.precision} isampler2D;\n\tprecision ${n.precision} isampler3D;\n\tprecision ${n.precision} isamplerCube;\n\tprecision ${n.precision} isampler2DArray;\n\tprecision ${n.precision} usampler2D;\n\tprecision ${n.precision} usampler3D;\n\tprecision ${n.precision} usamplerCube;\n\tprecision ${n.precision} usampler2DArray;\n\t`;return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Whe(n,e,t,i){const r=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const c=function zhe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===MB?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Aae?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ec&&(e="SHADOWMAP_TYPE_VSM"),e}(t),d=function jhe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Yc:case cd:e="ENVMAP_TYPE_CUBE";break;case Cg:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),p=function $he(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===cd&&(e="ENVMAP_MODE_REFRACTION"),e}(t),m=function Hhe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Zv:e="ENVMAP_BLENDING_MULTIPLY";break;case Jae:e="ENVMAP_BLENDING_MIX";break;case ele:e="ENVMAP_BLENDING_ADD"}return e}(t),y=function Ghe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),v=function Ohe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Lg).join("\n")}(t),E=function khe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(o),I=r.createProgram();let D,R,j=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(D=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Lg).join("\n"),D.length>0&&(D+="\n"),R=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(Lg).join("\n"),R.length>0&&(R+="\n")):(D=[hV(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Lg).join("\n"),R=[hV(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Xc?"#define TONE_MAPPING":"",t.toneMapping!==Xc?Ci.tonemapping_pars_fragment:"",t.toneMapping!==Xc?Phe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ci.colorspace_pars_fragment,Rhe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Lg).join("\n")),s=TA(s),s=cV(s,t),s=uV(s,t),a=TA(a),a=cV(a,t),a=uV(a,t),s=dV(s),a=dV(a),!0!==t.isRawShaderMaterial&&(j="#version 300 es\n",D=[v,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+D,R=["#define varying in",t.glslVersion===p4?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===p4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+R);const Y=j+R+a,he=aV(r,r.VERTEX_SHADER,j+D+s),te=aV(r,r.FRAGMENT_SHADER,Y);function re(Ee){if(n.debug.checkShaderErrors){const $e=r.getProgramInfoLog(I).trim(),He=r.getShaderInfoLog(he).trim(),Ge=r.getShaderInfoLog(te).trim();let Ie=!0,ye=!0;if(!1===r.getProgramParameter(I,r.LINK_STATUS))if(Ie=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,I,he,te);else{const De=lV(r,he,"vertex"),Fe=lV(r,te,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(I,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+Ee.name+"\nMaterial Type: "+Ee.type+"\n\nProgram Info Log: "+$e+"\n"+De+"\n"+Fe)}else""!==$e?console.warn("THREE.WebGLProgram: Program Info Log:",$e):(""===He||""===Ge)&&(ye=!1);ye&&(Ee.diagnostics={runnable:Ie,programLog:$e,vertexShader:{log:He,prefix:D},fragmentShader:{log:Ge,prefix:R}})}r.deleteShader(he),r.deleteShader(te),be=new U0(r,I),se=function Nhe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r),s=o.name;let a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}(r,I)}let be,se;r.attachShader(I,he),r.attachShader(I,te),void 0!==t.index0AttributeName?r.bindAttribLocation(I,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(I,0,"position"),r.linkProgram(I),this.getUniforms=function(){return void 0===be&&re(this),be},this.getAttributes=function(){return void 0===se&&re(this),se};let ie=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===ie&&(ie=r.getProgramParameter(I,Ahe)),ie},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(I),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Che++,this.cacheKey=e,this.usedTimes=1,this.program=I,this.vertexShader=he,this.fragmentShader=te,this}let qhe=0;class Xhe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(o)&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Yhe(e),t.set(e,i)),i}}class Yhe{constructor(e){this.id=qhe++,this.code=e,this.usedTimes=0}}function Khe(n,e,t,i,r,o,s){const a=new sA,c=new Xhe,d=new Set,p=[],m=r.logarithmicDepthBuffer,y=r.vertexTextures;let v=r.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function I(se){return d.add(se),0===se?"uv":`uv${se}`}return{getParameters:function D(se,ie,Ee,$e,He){const Ge=$e.fog,Ie=He.geometry,De=(se.isMeshStandardMaterial?t:e).get(se.envMap||(se.isMeshStandardMaterial?$e.environment:null)),Fe=De&&De.mapping===Cg?De.image.height:null,at=E[se.type];null!==se.precision&&(v=r.getMaxPrecision(se.precision),v!==se.precision&&console.warn("THREE.WebGLProgram.getParameters:",se.precision,"not supported, using",v,"instead."));const Vt=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,jt=void 0!==Vt?Vt.length:0;let Zn,st,qt,un,In=0;if(void 0!==Ie.morphAttributes.position&&(In=1),void 0!==Ie.morphAttributes.normal&&(In=2),void 0!==Ie.morphAttributes.color&&(In=3),at){const nr=Pl[at];Zn=nr.vertexShader,st=nr.fragmentShader}else Zn=se.vertexShader,st=se.fragmentShader,c.update(se),qt=c.getVertexShaderID(se),un=c.getFragmentShaderID(se);const Nt=n.getRenderTarget(),Pn=!0===He.isInstancedMesh,Tn=!0===He.isBatchedMesh,Bn=!!se.map,kt=!!De,Ft=!!se.aoMap,Kt=!!se.lightMap,$t=!!se.bumpMap,Xt=!!se.normalMap,mn=!!se.displacementMap,gn=!!se.emissiveMap,si=!!se.metalnessMap,Se=!!se.roughnessMap,ue=se.anisotropy>0,ct=se.clearcoat>0,Lt=se.iridescence>0,Ht=se.sheen>0,Vn=se.transmission>0,sn=ue&&!!se.anisotropyMap,an=ct&&!!se.clearcoatMap,ui=ct&&!!se.clearcoatNormalMap,Qt=ct&&!!se.clearcoatRoughnessMap,An=Lt&&!!se.iridescenceMap,Fi=Lt&&!!se.iridescenceThicknessMap,oi=Ht&&!!se.sheenColorMap,_n=Ht&&!!se.sheenRoughnessMap,yi=!!se.specularMap,vi=!!se.specularColorMap,Wr=!!se.specularIntensityMap,ne=Vn&&!!se.transmissionMap,bt=Vn&&!!se.thicknessMap,wt=!!se.alphaMap,di=!!se.extensions;let qr=Xc;se.toneMapped&&(null===Nt||!0===Nt.isXRRenderTarget)&&(qr=n.toneMapping);const po={shaderID:at,shaderType:se.type,shaderName:se.name,vertexShader:Zn,fragmentShader:st,defines:se.defines,customVertexShaderID:qt,customFragmentShaderID:un,isRawShaderMaterial:!0===se.isRawShaderMaterial,glslVersion:se.glslVersion,precision:v,batching:Tn,batchingColor:Tn&&null!==He._colorsTexture,instancing:Pn,instancingColor:Pn&&null!==He.instanceColor,instancingMorph:Pn&&null!==He.morphTexture,supportsVertexTextures:y,outputColorSpace:null===Nt?n.outputColorSpace:!0===Nt.isXRRenderTarget?Nt.texture.colorSpace:Qc,alphaToCoverage:!!se.alphaToCoverage,map:Bn,matcap:!!se.matcap,envMap:kt,envMapMode:kt&&De.mapping,envMapCubeUVHeight:Fe,aoMap:Ft,lightMap:Kt,bumpMap:$t,normalMap:Xt,displacementMap:y&&mn,emissiveMap:gn,normalMapObjectSpace:Xt&&1===se.normalMapType,normalMapTangentSpace:Xt&&0===se.normalMapType,metalnessMap:si,roughnessMap:Se,anisotropy:ue,anisotropyMap:sn,clearcoat:ct,clearcoatMap:an,clearcoatNormalMap:ui,clearcoatRoughnessMap:Qt,dispersion:se.dispersion>0,iridescence:Lt,iridescenceMap:An,iridescenceThicknessMap:Fi,sheen:Ht,sheenColorMap:oi,sheenRoughnessMap:_n,specularMap:yi,specularColorMap:vi,specularIntensityMap:Wr,transmission:Vn,transmissionMap:ne,thicknessMap:bt,gradientMap:!!se.gradientMap,opaque:!1===se.transparent&&1===se.blending&&!1===se.alphaToCoverage,alphaMap:wt,alphaTest:se.alphaTest>0,alphaHash:!!se.alphaHash,combine:se.combine,mapUv:Bn&&I(se.map.channel),aoMapUv:Ft&&I(se.aoMap.channel),lightMapUv:Kt&&I(se.lightMap.channel),bumpMapUv:$t&&I(se.bumpMap.channel),normalMapUv:Xt&&I(se.normalMap.channel),displacementMapUv:mn&&I(se.displacementMap.channel),emissiveMapUv:gn&&I(se.emissiveMap.channel),metalnessMapUv:si&&I(se.metalnessMap.channel),roughnessMapUv:Se&&I(se.roughnessMap.channel),anisotropyMapUv:sn&&I(se.anisotropyMap.channel),clearcoatMapUv:an&&I(se.clearcoatMap.channel),clearcoatNormalMapUv:ui&&I(se.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Qt&&I(se.clearcoatRoughnessMap.channel),iridescenceMapUv:An&&I(se.iridescenceMap.channel),iridescenceThicknessMapUv:Fi&&I(se.iridescenceThicknessMap.channel),sheenColorMapUv:oi&&I(se.sheenColorMap.channel),sheenRoughnessMapUv:_n&&I(se.sheenRoughnessMap.channel),specularMapUv:yi&&I(se.specularMap.channel),specularColorMapUv:vi&&I(se.specularColorMap.channel),specularIntensityMapUv:Wr&&I(se.specularIntensityMap.channel),transmissionMapUv:ne&&I(se.transmissionMap.channel),thicknessMapUv:bt&&I(se.thicknessMap.channel),alphaMapUv:wt&&I(se.alphaMap.channel),vertexTangents:!!Ie.attributes.tangent&&(Xt||ue),vertexColors:se.vertexColors,vertexAlphas:!0===se.vertexColors&&!!Ie.attributes.color&&4===Ie.attributes.color.itemSize,pointsUvs:!0===He.isPoints&&!!Ie.attributes.uv&&(Bn||wt),fog:!!Ge,useFog:!0===se.fog,fogExp2:!!Ge&&Ge.isFogExp2,flatShading:!0===se.flatShading,sizeAttenuation:!0===se.sizeAttenuation,logarithmicDepthBuffer:m,skinning:!0===He.isSkinnedMesh,morphTargets:void 0!==Ie.morphAttributes.position,morphNormals:void 0!==Ie.morphAttributes.normal,morphColors:void 0!==Ie.morphAttributes.color,morphTargetsCount:jt,morphTextureStride:In,numDirLights:ie.directional.length,numPointLights:ie.point.length,numSpotLights:ie.spot.length,numSpotLightMaps:ie.spotLightMap.length,numRectAreaLights:ie.rectArea.length,numHemiLights:ie.hemi.length,numDirLightShadows:ie.directionalShadowMap.length,numPointLightShadows:ie.pointShadowMap.length,numSpotLightShadows:ie.spotShadowMap.length,numSpotLightShadowsWithMaps:ie.numSpotLightShadowsWithMaps,numLightProbes:ie.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:se.dithering,shadowMapEnabled:n.shadowMap.enabled&&Ee.length>0,shadowMapType:n.shadowMap.type,toneMapping:qr,decodeVideoTexture:Bn&&!0===se.map.isVideoTexture&&or.getTransfer(se.map.colorSpace)===Cr,premultipliedAlpha:se.premultipliedAlpha,doubleSided:2===se.side,flipSided:1===se.side,useDepthPacking:se.depthPacking>=0,depthPacking:se.depthPacking||0,index0AttributeName:se.index0AttributeName,extensionClipCullDistance:di&&!0===se.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:di&&!0===se.extensions.multiDraw&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:se.customProgramCacheKey()};return po.vertexUv1s=d.has(1),po.vertexUv2s=d.has(2),po.vertexUv3s=d.has(3),d.clear(),po},getProgramCacheKey:function R(se){const ie=[];if(se.shaderID?ie.push(se.shaderID):(ie.push(se.customVertexShaderID),ie.push(se.customFragmentShaderID)),void 0!==se.defines)for(const Ee in se.defines)ie.push(Ee),ie.push(se.defines[Ee]);return!1===se.isRawShaderMaterial&&(function j(se,ie){se.push(ie.precision),se.push(ie.outputColorSpace),se.push(ie.envMapMode),se.push(ie.envMapCubeUVHeight),se.push(ie.mapUv),se.push(ie.alphaMapUv),se.push(ie.lightMapUv),se.push(ie.aoMapUv),se.push(ie.bumpMapUv),se.push(ie.normalMapUv),se.push(ie.displacementMapUv),se.push(ie.emissiveMapUv),se.push(ie.metalnessMapUv),se.push(ie.roughnessMapUv),se.push(ie.anisotropyMapUv),se.push(ie.clearcoatMapUv),se.push(ie.clearcoatNormalMapUv),se.push(ie.clearcoatRoughnessMapUv),se.push(ie.iridescenceMapUv),se.push(ie.iridescenceThicknessMapUv),se.push(ie.sheenColorMapUv),se.push(ie.sheenRoughnessMapUv),se.push(ie.specularMapUv),se.push(ie.specularColorMapUv),se.push(ie.specularIntensityMapUv),se.push(ie.transmissionMapUv),se.push(ie.thicknessMapUv),se.push(ie.combine),se.push(ie.fogExp2),se.push(ie.sizeAttenuation),se.push(ie.morphTargetsCount),se.push(ie.morphAttributeCount),se.push(ie.numDirLights),se.push(ie.numPointLights),se.push(ie.numSpotLights),se.push(ie.numSpotLightMaps),se.push(ie.numHemiLights),se.push(ie.numRectAreaLights),se.push(ie.numDirLightShadows),se.push(ie.numPointLightShadows),se.push(ie.numSpotLightShadows),se.push(ie.numSpotLightShadowsWithMaps),se.push(ie.numLightProbes),se.push(ie.shadowMapType),se.push(ie.toneMapping),se.push(ie.numClippingPlanes),se.push(ie.numClipIntersection),se.push(ie.depthPacking)}(ie,se),function H(se,ie){a.disableAll(),ie.supportsVertexTextures&&a.enable(0),ie.instancing&&a.enable(1),ie.instancingColor&&a.enable(2),ie.instancingMorph&&a.enable(3),ie.matcap&&a.enable(4),ie.envMap&&a.enable(5),ie.normalMapObjectSpace&&a.enable(6),ie.normalMapTangentSpace&&a.enable(7),ie.clearcoat&&a.enable(8),ie.iridescence&&a.enable(9),ie.alphaTest&&a.enable(10),ie.vertexColors&&a.enable(11),ie.vertexAlphas&&a.enable(12),ie.vertexUv1s&&a.enable(13),ie.vertexUv2s&&a.enable(14),ie.vertexUv3s&&a.enable(15),ie.vertexTangents&&a.enable(16),ie.anisotropy&&a.enable(17),ie.alphaHash&&a.enable(18),ie.batching&&a.enable(19),ie.dispersion&&a.enable(20),ie.batchingColor&&a.enable(21),se.push(a.mask),a.disableAll(),ie.fog&&a.enable(0),ie.useFog&&a.enable(1),ie.flatShading&&a.enable(2),ie.logarithmicDepthBuffer&&a.enable(3),ie.skinning&&a.enable(4),ie.morphTargets&&a.enable(5),ie.morphNormals&&a.enable(6),ie.morphColors&&a.enable(7),ie.premultipliedAlpha&&a.enable(8),ie.shadowMapEnabled&&a.enable(9),ie.doubleSided&&a.enable(10),ie.flipSided&&a.enable(11),ie.useDepthPacking&&a.enable(12),ie.dithering&&a.enable(13),ie.transmission&&a.enable(14),ie.sheen&&a.enable(15),ie.opaque&&a.enable(16),ie.pointsUvs&&a.enable(17),ie.decodeVideoTexture&&a.enable(18),ie.alphaToCoverage&&a.enable(19),se.push(a.mask)}(ie,se),ie.push(n.outputColorSpace)),ie.push(se.customProgramCacheKey),ie.join()},getUniforms:function Y(se){const ie=E[se.type];let Ee;return Ee=ie?pce.clone(Pl[ie].uniforms):se.uniforms,Ee},acquireProgram:function he(se,ie){let Ee;for(let $e=0,He=p.length;$e<He;$e++){const Ge=p[$e];if(Ge.cacheKey===ie){Ee=Ge,++Ee.usedTimes;break}}return void 0===Ee&&(Ee=new Whe(n,ie,se,o),p.push(Ee)),Ee},releaseProgram:function te(se){if(0==--se.usedTimes){const ie=p.indexOf(se);p[ie]=p[p.length-1],p.pop(),se.destroy()}},releaseShaderCache:function re(se){c.remove(se)},programs:p,dispose:function be(){c.dispose()}}}function Zhe(){let n=new WeakMap;return{get:function e(o){let s=n.get(o);return void 0===s&&(s={},n.set(o,s)),s},remove:function t(o){n.delete(o)},update:function i(o,s,a){n.get(o)[s]=a},dispose:function r(){n=new WeakMap}}}function Qhe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function fV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function pV(){const n=[];let e=0;const t=[],i=[],r=[];function s(m,y,v,E,I,D){let R=n[e];return void 0===R?(R={id:m.id,object:m,geometry:y,material:v,groupOrder:E,renderOrder:m.renderOrder,z:I,group:D},n[e]=R):(R.id=m.id,R.object=m,R.geometry=y,R.material=v,R.groupOrder=E,R.renderOrder=m.renderOrder,R.z=I,R.group=D),e++,R}return{opaque:t,transmissive:i,transparent:r,init:function o(){e=0,t.length=0,i.length=0,r.length=0},push:function a(m,y,v,E,I,D){const R=s(m,y,v,E,I,D);v.transmission>0?i.push(R):!0===v.transparent?r.push(R):t.push(R)},unshift:function c(m,y,v,E,I,D){const R=s(m,y,v,E,I,D);v.transmission>0?i.unshift(R):!0===v.transparent?r.unshift(R):t.unshift(R)},finish:function p(){for(let m=e,y=n.length;m<y;m++){const v=n[m];if(null===v.id)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}},sort:function d(m,y){t.length>1&&t.sort(m||Qhe),i.length>1&&i.sort(y||fV),r.length>1&&r.sort(y||fV)}}}function Jhe(){let n=new WeakMap;return{get:function e(i,r){const o=n.get(i);let s;return void 0===o?(s=new pV,n.set(i,[s])):r>=o.length?(s=new pV,o.push(s)):s=o[r],s},dispose:function t(){n=new WeakMap}}}function efe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new xe,color:new wn};break;case"SpotLight":t={position:new xe,direction:new xe,color:new wn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new xe,color:new wn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new xe,skyColor:new wn,groundColor:new wn};break;case"RectAreaLight":t={color:new wn,position:new xe,halfWidth:new xe,halfHeight:new xe}}return n[e.id]=t,t}}}let nfe=0;function ife(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function rfe(n){const e=new efe,t=function tfe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new xe);const r=new xe,o=new Yn,s=new Yn;return{setup:function a(d){let p=0,m=0,y=0;for(let se=0;se<9;se++)i.probe[se].set(0,0,0);let v=0,E=0,I=0,D=0,R=0,j=0,H=0,Y=0,he=0,te=0,re=0;d.sort(ife);for(let se=0,ie=d.length;se<ie;se++){const Ee=d[se],$e=Ee.color,He=Ee.intensity,Ge=Ee.distance,Ie=Ee.shadow&&Ee.shadow.map?Ee.shadow.map.texture:null;if(Ee.isAmbientLight)p+=$e.r*He,m+=$e.g*He,y+=$e.b*He;else if(Ee.isLightProbe){for(let ye=0;ye<9;ye++)i.probe[ye].addScaledVector(Ee.sh.coefficients[ye],He);re++}else if(Ee.isDirectionalLight){const ye=e.get(Ee);if(ye.color.copy(Ee.color).multiplyScalar(Ee.intensity),Ee.castShadow){const De=Ee.shadow,Fe=t.get(Ee);Fe.shadowBias=De.bias,Fe.shadowNormalBias=De.normalBias,Fe.shadowRadius=De.radius,Fe.shadowMapSize=De.mapSize,i.directionalShadow[v]=Fe,i.directionalShadowMap[v]=Ie,i.directionalShadowMatrix[v]=Ee.shadow.matrix,j++}i.directional[v]=ye,v++}else if(Ee.isSpotLight){const ye=e.get(Ee);ye.position.setFromMatrixPosition(Ee.matrixWorld),ye.color.copy($e).multiplyScalar(He),ye.distance=Ge,ye.coneCos=Math.cos(Ee.angle),ye.penumbraCos=Math.cos(Ee.angle*(1-Ee.penumbra)),ye.decay=Ee.decay,i.spot[I]=ye;const De=Ee.shadow;if(Ee.map&&(i.spotLightMap[he]=Ee.map,he++,De.updateMatrices(Ee),Ee.castShadow&&te++),i.spotLightMatrix[I]=De.matrix,Ee.castShadow){const Fe=t.get(Ee);Fe.shadowBias=De.bias,Fe.shadowNormalBias=De.normalBias,Fe.shadowRadius=De.radius,Fe.shadowMapSize=De.mapSize,i.spotShadow[I]=Fe,i.spotShadowMap[I]=Ie,Y++}I++}else if(Ee.isRectAreaLight){const ye=e.get(Ee);ye.color.copy($e).multiplyScalar(He),ye.halfWidth.set(.5*Ee.width,0,0),ye.halfHeight.set(0,.5*Ee.height,0),i.rectArea[D]=ye,D++}else if(Ee.isPointLight){const ye=e.get(Ee);if(ye.color.copy(Ee.color).multiplyScalar(Ee.intensity),ye.distance=Ee.distance,ye.decay=Ee.decay,Ee.castShadow){const De=Ee.shadow,Fe=t.get(Ee);Fe.shadowBias=De.bias,Fe.shadowNormalBias=De.normalBias,Fe.shadowRadius=De.radius,Fe.shadowMapSize=De.mapSize,Fe.shadowCameraNear=De.camera.near,Fe.shadowCameraFar=De.camera.far,i.pointShadow[E]=Fe,i.pointShadowMap[E]=Ie,i.pointShadowMatrix[E]=Ee.shadow.matrix,H++}i.point[E]=ye,E++}else if(Ee.isHemisphereLight){const ye=e.get(Ee);ye.skyColor.copy(Ee.color).multiplyScalar(He),ye.groundColor.copy(Ee.groundColor).multiplyScalar(He),i.hemi[R]=ye,R++}}D>0&&(!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=fn.LTC_FLOAT_1,i.rectAreaLTC2=fn.LTC_FLOAT_2):(i.rectAreaLTC1=fn.LTC_HALF_1,i.rectAreaLTC2=fn.LTC_HALF_2)),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=y;const be=i.hash;(be.directionalLength!==v||be.pointLength!==E||be.spotLength!==I||be.rectAreaLength!==D||be.hemiLength!==R||be.numDirectionalShadows!==j||be.numPointShadows!==H||be.numSpotShadows!==Y||be.numSpotMaps!==he||be.numLightProbes!==re)&&(i.directional.length=v,i.spot.length=I,i.rectArea.length=D,i.point.length=E,i.hemi.length=R,i.directionalShadow.length=j,i.directionalShadowMap.length=j,i.pointShadow.length=H,i.pointShadowMap.length=H,i.spotShadow.length=Y,i.spotShadowMap.length=Y,i.directionalShadowMatrix.length=j,i.pointShadowMatrix.length=H,i.spotLightMatrix.length=Y+he-te,i.spotLightMap.length=he,i.numSpotLightShadowsWithMaps=te,i.numLightProbes=re,be.directionalLength=v,be.pointLength=E,be.spotLength=I,be.rectAreaLength=D,be.hemiLength=R,be.numDirectionalShadows=j,be.numPointShadows=H,be.numSpotShadows=Y,be.numSpotMaps=he,be.numLightProbes=re,i.version=nfe++)},setupView:function c(d,p){let m=0,y=0,v=0,E=0,I=0;const D=p.matrixWorldInverse;for(let R=0,j=d.length;R<j;R++){const H=d[R];if(H.isDirectionalLight){const Y=i.directional[m];Y.direction.setFromMatrixPosition(H.matrixWorld),r.setFromMatrixPosition(H.target.matrixWorld),Y.direction.sub(r),Y.direction.transformDirection(D),m++}else if(H.isSpotLight){const Y=i.spot[v];Y.position.setFromMatrixPosition(H.matrixWorld),Y.position.applyMatrix4(D),Y.direction.setFromMatrixPosition(H.matrixWorld),r.setFromMatrixPosition(H.target.matrixWorld),Y.direction.sub(r),Y.direction.transformDirection(D),v++}else if(H.isRectAreaLight){const Y=i.rectArea[E];Y.position.setFromMatrixPosition(H.matrixWorld),Y.position.applyMatrix4(D),s.identity(),o.copy(H.matrixWorld),o.premultiply(D),s.extractRotation(o),Y.halfWidth.set(.5*H.width,0,0),Y.halfHeight.set(0,.5*H.height,0),Y.halfWidth.applyMatrix4(s),Y.halfHeight.applyMatrix4(s),E++}else if(H.isPointLight){const Y=i.point[y];Y.position.setFromMatrixPosition(H.matrixWorld),Y.position.applyMatrix4(D),y++}else if(H.isHemisphereLight){const Y=i.hemi[I];Y.direction.setFromMatrixPosition(H.matrixWorld),Y.direction.transformDirection(D),I++}}},state:i}}function mV(n){const e=new rfe(n),t=[],i=[],d={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(p){d.camera=p,t.length=0,i.length=0},state:d,setupLights:function a(){e.setup(t)},setupLightsView:function c(p){e.setupView(t,p)},pushLight:function o(p){t.push(p)},pushShadow:function s(p){i.push(p)}}}function ofe(n){let e=new WeakMap;return{get:function t(r,o=0){const s=e.get(r);let a;return void 0===s?(a=new mV(n),e.set(r,[a])):o>=s.length?(a=new mV(n),s.push(a)):a=s[o],a},dispose:function i(){e=new WeakMap}}}class gV extends ps{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _V extends ps{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function lfe(n,e,t){let i=new k0;const r=new It,o=new It,s=new dr,a=new gV({depthPacking:3201}),c=new _V,d={},p=t.maxTextureSize,m={[Wc]:1,[Ls]:0,[Il]:2},y=new Rl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const E=new Pi;E.setAttribute("position",new hr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const I=new fo(E,y),D=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=MB;let R=this.type;function j(te,re){const be=e.update(I);y.defines.VSM_SAMPLES!==te.blurSamples&&(y.defines.VSM_SAMPLES=te.blurSamples,v.defines.VSM_SAMPLES=te.blurSamples,y.needsUpdate=!0,v.needsUpdate=!0),null===te.mapPass&&(te.mapPass=new Dl(r.x,r.y)),y.uniforms.shadow_pass.value=te.map.texture,y.uniforms.resolution.value=te.mapSize,y.uniforms.radius.value=te.radius,n.setRenderTarget(te.mapPass),n.clear(),n.renderBufferDirect(re,null,be,y,I,null),v.uniforms.shadow_pass.value=te.mapPass.texture,v.uniforms.resolution.value=te.mapSize,v.uniforms.radius.value=te.radius,n.setRenderTarget(te.map),n.clear(),n.renderBufferDirect(re,null,be,v,I,null)}function H(te,re,be,se){let ie=null;const Ee=!0===be.isPointLight?te.customDistanceMaterial:te.customDepthMaterial;if(void 0!==Ee)ie=Ee;else if(ie=!0===be.isPointLight?c:a,n.localClippingEnabled&&!0===re.clipShadows&&Array.isArray(re.clippingPlanes)&&0!==re.clippingPlanes.length||re.displacementMap&&0!==re.displacementScale||re.alphaMap&&re.alphaTest>0||re.map&&re.alphaTest>0){const $e=ie.uuid,He=re.uuid;let Ge=d[$e];void 0===Ge&&(Ge={},d[$e]=Ge);let Ie=Ge[He];void 0===Ie&&(Ie=ie.clone(),Ge[He]=Ie,re.addEventListener("dispose",he)),ie=Ie}return ie.visible=re.visible,ie.wireframe=re.wireframe,ie.side=se===ec?null!==re.shadowSide?re.shadowSide:re.side:null!==re.shadowSide?re.shadowSide:m[re.side],ie.alphaMap=re.alphaMap,ie.alphaTest=re.alphaTest,ie.map=re.map,ie.clipShadows=re.clipShadows,ie.clippingPlanes=re.clippingPlanes,ie.clipIntersection=re.clipIntersection,ie.displacementMap=re.displacementMap,ie.displacementScale=re.displacementScale,ie.displacementBias=re.displacementBias,ie.wireframeLinewidth=re.wireframeLinewidth,ie.linewidth=re.linewidth,!0===be.isPointLight&&!0===ie.isMeshDistanceMaterial&&(n.properties.get(ie).light=be),ie}function Y(te,re,be,se,ie){if(!1===te.visible)return;if(te.layers.test(re.layers)&&(te.isMesh||te.isLine||te.isPoints)&&(te.castShadow||te.receiveShadow&&ie===ec)&&(!te.frustumCulled||i.intersectsObject(te))){te.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,te.matrixWorld);const He=e.update(te),Ge=te.material;if(Array.isArray(Ge)){const Ie=He.groups;for(let ye=0,De=Ie.length;ye<De;ye++){const Fe=Ie[ye],at=Ge[Fe.materialIndex];if(at&&at.visible){const Vt=H(te,at,se,ie);te.onBeforeShadow(n,te,re,be,He,Vt,Fe),n.renderBufferDirect(be,null,He,Vt,te,Fe),te.onAfterShadow(n,te,re,be,He,Vt,Fe)}}}else if(Ge.visible){const Ie=H(te,Ge,se,ie);te.onBeforeShadow(n,te,re,be,He,Ie,null),n.renderBufferDirect(be,null,He,Ie,te,null),te.onAfterShadow(n,te,re,be,He,Ie,null)}}const $e=te.children;for(let He=0,Ge=$e.length;He<Ge;He++)Y($e[He],re,be,se,ie)}function he(te){te.target.removeEventListener("dispose",he);for(const be in d){const se=d[be],ie=te.target.uuid;ie in se&&(se[ie].dispose(),delete se[ie])}}this.render=function(te,re,be){if(!1===D.enabled||!1===D.autoUpdate&&!1===D.needsUpdate||0===te.length)return;const se=n.getRenderTarget(),ie=n.getActiveCubeFace(),Ee=n.getActiveMipmapLevel(),$e=n.state;$e.setBlending(0),$e.buffers.color.setClear(1,1,1,1),$e.buffers.depth.setTest(!0),$e.setScissorTest(!1);const He=R!==ec&&this.type===ec,Ge=R===ec&&this.type!==ec;for(let Ie=0,ye=te.length;Ie<ye;Ie++){const De=te[Ie],Fe=De.shadow;if(void 0===Fe){console.warn("THREE.WebGLShadowMap:",De,"has no shadow.");continue}if(!1===Fe.autoUpdate&&!1===Fe.needsUpdate)continue;r.copy(Fe.mapSize);const at=Fe.getFrameExtents();if(r.multiply(at),o.copy(Fe.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(o.x=Math.floor(p/at.x),r.x=o.x*at.x,Fe.mapSize.x=o.x),r.y>p&&(o.y=Math.floor(p/at.y),r.y=o.y*at.y,Fe.mapSize.y=o.y)),null===Fe.map||!0===He||!0===Ge){const jt=this.type!==ec?{minFilter:Lo,magFilter:Lo}:{};null!==Fe.map&&Fe.map.dispose(),Fe.map=new Dl(r.x,r.y,jt),Fe.map.texture.name=De.name+".shadowMap",Fe.camera.updateProjectionMatrix()}n.setRenderTarget(Fe.map),n.clear();const Vt=Fe.getViewportCount();for(let jt=0;jt<Vt;jt++){const In=Fe.getViewport(jt);s.set(o.x*In.x,o.y*In.y,o.x*In.z,o.y*In.w),$e.viewport(s),Fe.updateMatrices(De,jt),i=Fe.getFrustum(),Y(re,be,Fe.camera,De,this.type)}!0!==Fe.isPointLightShadow&&this.type===ec&&j(Fe,be),Fe.needsUpdate=!1}R=this.type,D.needsUpdate=!1,n.setRenderTarget(se,ie,Ee)}}function cfe(n){const r=new function e(){let ne=!1;const bt=new dr;let et=null;const wt=new dr(0,0,0,0);return{setMask:function(Gt){et!==Gt&&!ne&&(n.colorMask(Gt,Gt,Gt,Gt),et=Gt)},setLocked:function(Gt){ne=Gt},setClear:function(Gt,Hn,di,qr,po){!0===po&&(Gt*=qr,Hn*=qr,di*=qr),bt.set(Gt,Hn,di,qr),!1===wt.equals(bt)&&(n.clearColor(Gt,Hn,di,qr),wt.copy(bt))},reset:function(){ne=!1,et=null,wt.set(-1,0,0,0)}}},o=new function t(){let ne=!1,bt=null,et=null,wt=null;return{setTest:function(Gt){Gt?un(n.DEPTH_TEST):Nt(n.DEPTH_TEST)},setMask:function(Gt){bt!==Gt&&!ne&&(n.depthMask(Gt),bt=Gt)},setFunc:function(Gt){if(et!==Gt){switch(Gt){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}et=Gt}},setLocked:function(Gt){ne=Gt},setClear:function(Gt){wt!==Gt&&(n.clearDepth(Gt),wt=Gt)},reset:function(){ne=!1,bt=null,et=null,wt=null}}},s=new function i(){let ne=!1,bt=null,et=null,wt=null,Gt=null,Hn=null,di=null,qr=null,po=null;return{setTest:function(nr){ne||(nr?un(n.STENCIL_TEST):Nt(n.STENCIL_TEST))},setMask:function(nr){bt!==nr&&!ne&&(n.stencilMask(nr),bt=nr)},setFunc:function(nr,mo,go){(et!==nr||wt!==mo||Gt!==go)&&(n.stencilFunc(nr,mo,go),et=nr,wt=mo,Gt=go)},setOp:function(nr,mo,go){(Hn!==nr||di!==mo||qr!==go)&&(n.stencilOp(nr,mo,go),Hn=nr,di=mo,qr=go)},setLocked:function(nr){ne=nr},setClear:function(nr){po!==nr&&(n.clearStencil(nr),po=nr)},reset:function(){ne=!1,bt=null,et=null,wt=null,Gt=null,Hn=null,di=null,qr=null,po=null}}},a=new WeakMap,c=new WeakMap;let d={},p={},m=new WeakMap,y=[],v=null,E=!1,I=null,D=null,R=null,j=null,H=null,Y=null,he=null,te=new wn(0,0,0),re=0,be=!1,se=null,ie=null,Ee=null,$e=null,He=null;const Ge=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ie=!1,ye=0;const De=n.getParameter(n.VERSION);-1!==De.indexOf("WebGL")?(ye=parseFloat(/^WebGL (\d)/.exec(De)[1]),Ie=ye>=1):-1!==De.indexOf("OpenGL ES")&&(ye=parseFloat(/^OpenGL ES (\d)/.exec(De)[1]),Ie=ye>=2);let Fe=null,at={};const Vt=n.getParameter(n.SCISSOR_BOX),jt=n.getParameter(n.VIEWPORT),In=(new dr).fromArray(Vt),Zn=(new dr).fromArray(jt);function st(ne,bt,et,wt){const Gt=new Uint8Array(4),Hn=n.createTexture();n.bindTexture(ne,Hn),n.texParameteri(ne,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ne,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let di=0;di<et;di++)ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY?n.texImage3D(bt,0,n.RGBA,1,1,wt,0,n.RGBA,n.UNSIGNED_BYTE,Gt):n.texImage2D(bt+di,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Gt);return Hn}const qt={};function un(ne){!0!==d[ne]&&(n.enable(ne),d[ne]=!0)}function Nt(ne){!1!==d[ne]&&(n.disable(ne),d[ne]=!1)}qt[n.TEXTURE_2D]=st(n.TEXTURE_2D,n.TEXTURE_2D,1),qt[n.TEXTURE_CUBE_MAP]=st(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),qt[n.TEXTURE_2D_ARRAY]=st(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),qt[n.TEXTURE_3D]=st(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),un(n.DEPTH_TEST),o.setFunc(3),$t(!1),Xt(1),un(n.CULL_FACE),Ft(0);const Oe={[ld]:n.FUNC_ADD,[Iae]:n.FUNC_SUBTRACT,[Dae]:n.FUNC_REVERSE_SUBTRACT};Oe[103]=n.MIN,Oe[104]=n.MAX;const kt={[Oae]:n.ZERO,[kae]:n.ONE,[Nae]:n.SRC_COLOR,[FM]:n.SRC_ALPHA,[zae]:n.SRC_ALPHA_SATURATE,[Bae]:n.DST_COLOR,[Lae]:n.DST_ALPHA,[Fae]:n.ONE_MINUS_SRC_COLOR,[LM]:n.ONE_MINUS_SRC_ALPHA,[Vae]:n.ONE_MINUS_DST_COLOR,[Uae]:n.ONE_MINUS_DST_ALPHA,[jae]:n.CONSTANT_COLOR,[$ae]:n.ONE_MINUS_CONSTANT_COLOR,[Hae]:n.CONSTANT_ALPHA,[Gae]:n.ONE_MINUS_CONSTANT_ALPHA};function Ft(ne,bt,et,wt,Gt,Hn,di,qr,po,nr){if(0!==ne){if(!1===E&&(un(n.BLEND),E=!0),5===ne)Gt=Gt||bt,Hn=Hn||et,di=di||wt,(bt!==D||Gt!==H)&&(n.blendEquationSeparate(Oe[bt],Oe[Gt]),D=bt,H=Gt),(et!==R||wt!==j||Hn!==Y||di!==he)&&(n.blendFuncSeparate(kt[et],kt[wt],kt[Hn],kt[di]),R=et,j=wt,Y=Hn,he=di),(!1===qr.equals(te)||po!==re)&&(n.blendColor(qr.r,qr.g,qr.b,po),te.copy(qr),re=po),I=ne,be=!1;else if(ne!==I||nr!==be){if((100!==D||100!==H)&&(n.blendEquation(n.FUNC_ADD),D=100,H=100),nr)switch(ne){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne)}else switch(ne){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne)}R=null,j=null,Y=null,he=null,te.set(0,0,0),re=0,I=ne,be=nr}}else!0===E&&(Nt(n.BLEND),E=!1)}function $t(ne){se!==ne&&(n.frontFace(ne?n.CW:n.CCW),se=ne)}function Xt(ne){0!==ne?(un(n.CULL_FACE),ne!==ie&&n.cullFace(1===ne?n.BACK:2===ne?n.FRONT:n.FRONT_AND_BACK)):Nt(n.CULL_FACE),ie=ne}function gn(ne,bt,et){ne?(un(n.POLYGON_OFFSET_FILL),($e!==bt||He!==et)&&(n.polygonOffset(bt,et),$e=bt,He=et)):Nt(n.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:o,stencil:s},enable:un,disable:Nt,bindFramebuffer:function Pn(ne,bt){return p[ne]!==bt&&(n.bindFramebuffer(ne,bt),p[ne]=bt,ne===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=bt),ne===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=bt),!0)},drawBuffers:function Tn(ne,bt){let et=y,wt=!1;if(ne){et=m.get(bt),void 0===et&&(et=[],m.set(bt,et));const Gt=ne.textures;if(et.length!==Gt.length||et[0]!==n.COLOR_ATTACHMENT0){for(let Hn=0,di=Gt.length;Hn<di;Hn++)et[Hn]=n.COLOR_ATTACHMENT0+Hn;et.length=Gt.length,wt=!0}}else et[0]!==n.BACK&&(et[0]=n.BACK,wt=!0);wt&&n.drawBuffers(et)},useProgram:function Bn(ne){return v!==ne&&(n.useProgram(ne),v=ne,!0)},setBlending:Ft,setMaterial:function Kt(ne,bt){2===ne.side?Nt(n.CULL_FACE):un(n.CULL_FACE);let et=1===ne.side;bt&&(et=!et),$t(et),1===ne.blending&&!1===ne.transparent?Ft(0):Ft(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.blendColor,ne.blendAlpha,ne.premultipliedAlpha),o.setFunc(ne.depthFunc),o.setTest(ne.depthTest),o.setMask(ne.depthWrite),r.setMask(ne.colorWrite);const wt=ne.stencilWrite;s.setTest(wt),wt&&(s.setMask(ne.stencilWriteMask),s.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),s.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),gn(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),!0===ne.alphaToCoverage?un(n.SAMPLE_ALPHA_TO_COVERAGE):Nt(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:$t,setCullFace:Xt,setLineWidth:function mn(ne){ne!==Ee&&(Ie&&n.lineWidth(ne),Ee=ne)},setPolygonOffset:gn,setScissorTest:function si(ne){ne?un(n.SCISSOR_TEST):Nt(n.SCISSOR_TEST)},activeTexture:function Se(ne){void 0===ne&&(ne=n.TEXTURE0+Ge-1),Fe!==ne&&(n.activeTexture(ne),Fe=ne)},bindTexture:function ue(ne,bt,et){void 0===et&&(et=null===Fe?n.TEXTURE0+Ge-1:Fe);let wt=at[et];void 0===wt&&(wt={type:void 0,texture:void 0},at[et]=wt),(wt.type!==ne||wt.texture!==bt)&&(Fe!==et&&(n.activeTexture(et),Fe=et),n.bindTexture(ne,bt||qt[ne]),wt.type=ne,wt.texture=bt)},unbindTexture:function ct(){const ne=at[Fe];void 0!==ne&&void 0!==ne.type&&(n.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)},compressedTexImage2D:function Ut(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},compressedTexImage3D:function Lt(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texImage2D:function An(){try{n.texImage2D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texImage3D:function Fi(){try{n.texImage3D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},updateUBOMapping:function yi(ne,bt){let et=c.get(bt);void 0===et&&(et=new WeakMap,c.set(bt,et));let wt=et.get(ne);void 0===wt&&(wt=n.getUniformBlockIndex(bt,ne.name),et.set(ne,wt))},uniformBlockBinding:function vi(ne,bt){const wt=c.get(bt).get(ne);a.get(bt)!==wt&&(n.uniformBlockBinding(bt,wt,ne.__bindingPointIndex),a.set(bt,wt))},texStorage2D:function ui(){try{n.texStorage2D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texStorage3D:function Qt(){try{n.texStorage3D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texSubImage2D:function Ht(){try{n.texSubImage2D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},texSubImage3D:function Vn(){try{n.texSubImage3D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},compressedTexSubImage2D:function sn(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},compressedTexSubImage3D:function an(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}},scissor:function oi(ne){!1===In.equals(ne)&&(n.scissor(ne.x,ne.y,ne.z,ne.w),In.copy(ne))},viewport:function _n(ne){!1===Zn.equals(ne)&&(n.viewport(ne.x,ne.y,ne.z,ne.w),Zn.copy(ne))},reset:function Wr(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},Fe=null,at={},p={},m=new WeakMap,y=[],v=null,E=!1,I=null,D=null,R=null,j=null,H=null,Y=null,he=null,te=new wn(0,0,0),re=0,be=!1,se=null,ie=null,Ee=null,$e=null,He=null,In.set(0,0,n.canvas.width,n.canvas.height),Zn.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),s.reset()}}}function ufe(n,e,t,i,r,o,s){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),d=new It,p=new WeakMap;let m;const y=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function E(Se,ue){return v?new OffscreenCanvas(Se,ue):Rg("canvas")}function I(Se,ue,ct){let Ut=1;const Lt=si(Se);if((Lt.width>ct||Lt.height>ct)&&(Ut=ct/Math.max(Lt.width,Lt.height)),Ut<1){if(typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Se instanceof ImageBitmap||typeof VideoFrame<"u"&&Se instanceof VideoFrame){const Ht=Math.floor(Ut*Lt.width),Vn=Math.floor(Ut*Lt.height);void 0===m&&(m=E(Ht,Vn));const sn=ue?E(Ht,Vn):m;return sn.width=Ht,sn.height=Vn,sn.getContext("2d").drawImage(Se,0,0,Ht,Vn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Lt.width+"x"+Lt.height+") to ("+Ht+"x"+Vn+")."),sn}return"data"in Se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Lt.width+"x"+Lt.height+")."),Se}return Se}function D(Se){return Se.generateMipmaps&&Se.minFilter!==Lo&&Se.minFilter!==To}function R(Se){n.generateMipmap(Se)}function j(Se,ue,ct,Ut,Lt=!1){if(null!==Se){if(void 0!==n[Se])return n[Se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Se+"'")}let Ht=ue;if(ue===n.RED&&(ct===n.FLOAT&&(Ht=n.R32F),ct===n.HALF_FLOAT&&(Ht=n.R16F),ct===n.UNSIGNED_BYTE&&(Ht=n.R8)),ue===n.RED_INTEGER&&(ct===n.UNSIGNED_BYTE&&(Ht=n.R8UI),ct===n.UNSIGNED_SHORT&&(Ht=n.R16UI),ct===n.UNSIGNED_INT&&(Ht=n.R32UI),ct===n.BYTE&&(Ht=n.R8I),ct===n.SHORT&&(Ht=n.R16I),ct===n.INT&&(Ht=n.R32I)),ue===n.RG&&(ct===n.FLOAT&&(Ht=n.RG32F),ct===n.HALF_FLOAT&&(Ht=n.RG16F),ct===n.UNSIGNED_BYTE&&(Ht=n.RG8)),ue===n.RG_INTEGER&&(ct===n.UNSIGNED_BYTE&&(Ht=n.RG8UI),ct===n.UNSIGNED_SHORT&&(Ht=n.RG16UI),ct===n.UNSIGNED_INT&&(Ht=n.RG32UI),ct===n.BYTE&&(Ht=n.RG8I),ct===n.SHORT&&(Ht=n.RG16I),ct===n.INT&&(Ht=n.RG32I)),ue===n.RGB&&ct===n.UNSIGNED_INT_5_9_9_9_REV&&(Ht=n.RGB9_E5),ue===n.RGBA){const Vn=Lt?c0:or.getTransfer(Ut);ct===n.FLOAT&&(Ht=n.RGBA32F),ct===n.HALF_FLOAT&&(Ht=n.RGBA16F),ct===n.UNSIGNED_BYTE&&(Ht=Vn===Cr?n.SRGB8_ALPHA8:n.RGBA8),ct===n.UNSIGNED_SHORT_4_4_4_4&&(Ht=n.RGBA4),ct===n.UNSIGNED_SHORT_5_5_5_1&&(Ht=n.RGB5_A1)}return(Ht===n.R16F||Ht===n.R32F||Ht===n.RG16F||Ht===n.RG32F||Ht===n.RGBA16F||Ht===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ht}function H(Se,ue){let ct;return Se?null===ue||ue===wf||ue===Ef?ct=n.DEPTH24_STENCIL8:ue===Aa?ct=n.DEPTH32F_STENCIL8:1012===ue&&(ct=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===ue||ue===wf||ue===Ef?ct=n.DEPTH_COMPONENT24:ue===Aa?ct=n.DEPTH_COMPONENT32F:1012===ue&&(ct=n.DEPTH_COMPONENT16),ct}function Y(Se,ue){return!0===D(Se)||Se.isFramebufferTexture&&Se.minFilter!==Lo&&Se.minFilter!==To?Math.log2(Math.max(ue.width,ue.height))+1:void 0!==Se.mipmaps&&Se.mipmaps.length>0?Se.mipmaps.length:Se.isCompressedTexture&&Array.isArray(Se.image)?ue.mipmaps.length:1}function he(Se){const ue=Se.target;ue.removeEventListener("dispose",he),function re(Se){const ue=i.get(Se);if(void 0===ue.__webglInit)return;const ct=Se.source,Ut=y.get(ct);if(Ut){const Lt=Ut[ue.__cacheKey];Lt.usedTimes--,0===Lt.usedTimes&&be(Se),0===Object.keys(Ut).length&&y.delete(ct)}i.remove(Se)}(ue),ue.isVideoTexture&&p.delete(ue)}function te(Se){const ue=Se.target;ue.removeEventListener("dispose",te),function se(Se){const ue=i.get(Se);if(Se.depthTexture&&Se.depthTexture.dispose(),Se.isWebGLCubeRenderTarget)for(let Ut=0;Ut<6;Ut++){if(Array.isArray(ue.__webglFramebuffer[Ut]))for(let Lt=0;Lt<ue.__webglFramebuffer[Ut].length;Lt++)n.deleteFramebuffer(ue.__webglFramebuffer[Ut][Lt]);else n.deleteFramebuffer(ue.__webglFramebuffer[Ut]);ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer[Ut])}else{if(Array.isArray(ue.__webglFramebuffer))for(let Ut=0;Ut<ue.__webglFramebuffer.length;Ut++)n.deleteFramebuffer(ue.__webglFramebuffer[Ut]);else n.deleteFramebuffer(ue.__webglFramebuffer);if(ue.__webglDepthbuffer&&n.deleteRenderbuffer(ue.__webglDepthbuffer),ue.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ue.__webglMultisampledFramebuffer),ue.__webglColorRenderbuffer)for(let Ut=0;Ut<ue.__webglColorRenderbuffer.length;Ut++)ue.__webglColorRenderbuffer[Ut]&&n.deleteRenderbuffer(ue.__webglColorRenderbuffer[Ut]);ue.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ue.__webglDepthRenderbuffer)}const ct=Se.textures;for(let Ut=0,Lt=ct.length;Ut<Lt;Ut++){const Ht=i.get(ct[Ut]);Ht.__webglTexture&&(n.deleteTexture(Ht.__webglTexture),s.memory.textures--),i.remove(ct[Ut])}i.remove(Se)}(ue)}function be(Se){const ue=i.get(Se);n.deleteTexture(ue.__webglTexture),delete y.get(Se.source)[ue.__cacheKey],s.memory.textures--}let ie=0;function Ge(Se,ue){const ct=i.get(Se);if(Se.isVideoTexture&&function mn(Se){const ue=s.render.frame;p.get(Se)!==ue&&(p.set(Se,ue),Se.update())}(Se),!1===Se.isRenderTargetTexture&&Se.version>0&&ct.__version!==Se.version){const Ut=Se.image;if(null===Ut)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ut.complete)return void Zn(ct,Se,ue);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,ct.__webglTexture,n.TEXTURE0+ue)}const Fe={[e0]:n.REPEAT,[Ja]:n.CLAMP_TO_EDGE,[t0]:n.MIRRORED_REPEAT},at={[Lo]:n.NEAREST,[RB]:n.NEAREST_MIPMAP_NEAREST,[Ig]:n.NEAREST_MIPMAP_LINEAR,[To]:n.LINEAR,[n0]:n.LINEAR_MIPMAP_NEAREST,[tc]:n.LINEAR_MIPMAP_LINEAR},Vt={[Sle]:n.NEVER,[Dle]:n.ALWAYS,[Tle]:n.LESS,[f4]:n.LEQUAL,[Mle]:n.EQUAL,[Ile]:n.GEQUAL,[Ale]:n.GREATER,[Cle]:n.NOTEQUAL};function jt(Se,ue){if(ue.type===Aa&&!1===e.has("OES_texture_float_linear")&&(ue.magFilter===To||1007===ue.magFilter||1005===ue.magFilter||ue.magFilter===tc||ue.minFilter===To||1007===ue.minFilter||1005===ue.minFilter||ue.minFilter===tc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(Se,n.TEXTURE_WRAP_S,Fe[ue.wrapS]),n.texParameteri(Se,n.TEXTURE_WRAP_T,Fe[ue.wrapT]),(Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Se,n.TEXTURE_WRAP_R,Fe[ue.wrapR]),n.texParameteri(Se,n.TEXTURE_MAG_FILTER,at[ue.magFilter]),n.texParameteri(Se,n.TEXTURE_MIN_FILTER,at[ue.minFilter]),ue.compareFunction&&(n.texParameteri(Se,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Se,n.TEXTURE_COMPARE_FUNC,Vt[ue.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(ue.magFilter===Lo||1005!==ue.minFilter&&ue.minFilter!==tc||ue.type===Aa&&!1===e.has("OES_texture_float_linear"))return;if(ue.anisotropy>1||i.get(ue).__currentAnisotropy){const ct=e.get("EXT_texture_filter_anisotropic");n.texParameterf(Se,ct.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ue.anisotropy,r.getMaxAnisotropy())),i.get(ue).__currentAnisotropy=ue.anisotropy}}}function In(Se,ue){let ct=!1;void 0===Se.__webglInit&&(Se.__webglInit=!0,ue.addEventListener("dispose",he));const Ut=ue.source;let Lt=y.get(Ut);void 0===Lt&&(Lt={},y.set(Ut,Lt));const Ht=function He(Se){const ue=[];return ue.push(Se.wrapS),ue.push(Se.wrapT),ue.push(Se.wrapR||0),ue.push(Se.magFilter),ue.push(Se.minFilter),ue.push(Se.anisotropy),ue.push(Se.internalFormat),ue.push(Se.format),ue.push(Se.type),ue.push(Se.generateMipmaps),ue.push(Se.premultiplyAlpha),ue.push(Se.flipY),ue.push(Se.unpackAlignment),ue.push(Se.colorSpace),ue.join()}(ue);if(Ht!==Se.__cacheKey){void 0===Lt[Ht]&&(Lt[Ht]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,ct=!0),Lt[Ht].usedTimes++;const Vn=Lt[Se.__cacheKey];void 0!==Vn&&(Lt[Se.__cacheKey].usedTimes--,0===Vn.usedTimes&&be(ue)),Se.__cacheKey=Ht,Se.__webglTexture=Lt[Ht].texture}return ct}function Zn(Se,ue,ct){let Ut=n.TEXTURE_2D;(ue.isDataArrayTexture||ue.isCompressedArrayTexture)&&(Ut=n.TEXTURE_2D_ARRAY),ue.isData3DTexture&&(Ut=n.TEXTURE_3D);const Lt=In(Se,ue),Ht=ue.source;t.bindTexture(Ut,Se.__webglTexture,n.TEXTURE0+ct);const Vn=i.get(Ht);if(Ht.version!==Vn.__version||!0===Lt){t.activeTexture(n.TEXTURE0+ct);const sn=or.getPrimaries(or.workingColorSpace),an=""===ue.colorSpace?null:or.getPrimaries(ue.colorSpace),ui=""===ue.colorSpace||sn===an?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ue.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ue.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ui);let Qt=I(ue.image,!1,r.maxTextureSize);Qt=gn(ue,Qt);const An=o.convert(ue.format,ue.colorSpace),Fi=o.convert(ue.type);let _n,oi=j(ue.internalFormat,An,Fi,ue.colorSpace,ue.isVideoTexture);jt(Ut,ue);const yi=ue.mipmaps,vi=!0!==ue.isVideoTexture,Wr=void 0===Vn.__version||!0===Lt,ne=Ht.dataReady,bt=Y(ue,Qt);if(ue.isDepthTexture)oi=H(ue.format===Tf,ue.type),Wr&&(vi?t.texStorage2D(n.TEXTURE_2D,1,oi,Qt.width,Qt.height):t.texImage2D(n.TEXTURE_2D,0,oi,Qt.width,Qt.height,0,An,Fi,null));else if(ue.isDataTexture)if(yi.length>0){vi&&Wr&&t.texStorage2D(n.TEXTURE_2D,bt,oi,yi[0].width,yi[0].height);for(let et=0,wt=yi.length;et<wt;et++)_n=yi[et],vi?ne&&t.texSubImage2D(n.TEXTURE_2D,et,0,0,_n.width,_n.height,An,Fi,_n.data):t.texImage2D(n.TEXTURE_2D,et,oi,_n.width,_n.height,0,An,Fi,_n.data);ue.generateMipmaps=!1}else vi?(Wr&&t.texStorage2D(n.TEXTURE_2D,bt,oi,Qt.width,Qt.height),ne&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Qt.width,Qt.height,An,Fi,Qt.data)):t.texImage2D(n.TEXTURE_2D,0,oi,Qt.width,Qt.height,0,An,Fi,Qt.data);else if(ue.isCompressedTexture)if(ue.isCompressedArrayTexture){vi&&Wr&&t.texStorage3D(n.TEXTURE_2D_ARRAY,bt,oi,yi[0].width,yi[0].height,Qt.depth);for(let et=0,wt=yi.length;et<wt;et++)if(_n=yi[et],ue.format!==oa)if(null!==An)if(vi){if(ne)if(ue.layerUpdates.size>0){for(const Gt of ue.layerUpdates){const Hn=_n.width*_n.height;t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,et,0,0,Gt,_n.width,_n.height,1,An,_n.data.slice(Hn*Gt,Hn*(Gt+1)),0,0)}ue.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,et,0,0,0,_n.width,_n.height,Qt.depth,An,_n.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,et,oi,_n.width,_n.height,Qt.depth,0,_n.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else vi?ne&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,et,0,0,0,_n.width,_n.height,Qt.depth,An,Fi,_n.data):t.texImage3D(n.TEXTURE_2D_ARRAY,et,oi,_n.width,_n.height,Qt.depth,0,An,Fi,_n.data)}else{vi&&Wr&&t.texStorage2D(n.TEXTURE_2D,bt,oi,yi[0].width,yi[0].height);for(let et=0,wt=yi.length;et<wt;et++)_n=yi[et],ue.format!==oa?null!==An?vi?ne&&t.compressedTexSubImage2D(n.TEXTURE_2D,et,0,0,_n.width,_n.height,An,_n.data):t.compressedTexImage2D(n.TEXTURE_2D,et,oi,_n.width,_n.height,0,_n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):vi?ne&&t.texSubImage2D(n.TEXTURE_2D,et,0,0,_n.width,_n.height,An,Fi,_n.data):t.texImage2D(n.TEXTURE_2D,et,oi,_n.width,_n.height,0,An,Fi,_n.data)}else if(ue.isDataArrayTexture)if(vi){if(Wr&&t.texStorage3D(n.TEXTURE_2D_ARRAY,bt,oi,Qt.width,Qt.height,Qt.depth),ne)if(ue.layerUpdates.size>0){let et;switch(Fi){case n.UNSIGNED_BYTE:switch(An){case n.ALPHA:case n.LUMINANCE:et=1;break;case n.LUMINANCE_ALPHA:et=2;break;case n.RGB:et=3;break;case n.RGBA:et=4;break;default:throw new Error(`Unknown texel size for format ${An}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:et=1;break;default:throw new Error(`Unknown texel size for type ${Fi}.`)}const wt=Qt.width*Qt.height*et;for(const Gt of ue.layerUpdates)t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Gt,Qt.width,Qt.height,1,An,Fi,Qt.data.slice(wt*Gt,wt*(Gt+1)));ue.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Qt.width,Qt.height,Qt.depth,An,Fi,Qt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,oi,Qt.width,Qt.height,Qt.depth,0,An,Fi,Qt.data);else if(ue.isData3DTexture)vi?(Wr&&t.texStorage3D(n.TEXTURE_3D,bt,oi,Qt.width,Qt.height,Qt.depth),ne&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Qt.width,Qt.height,Qt.depth,An,Fi,Qt.data)):t.texImage3D(n.TEXTURE_3D,0,oi,Qt.width,Qt.height,Qt.depth,0,An,Fi,Qt.data);else if(ue.isFramebufferTexture){if(Wr)if(vi)t.texStorage2D(n.TEXTURE_2D,bt,oi,Qt.width,Qt.height);else{let et=Qt.width,wt=Qt.height;for(let Gt=0;Gt<bt;Gt++)t.texImage2D(n.TEXTURE_2D,Gt,oi,et,wt,0,An,Fi,null),et>>=1,wt>>=1}}else if(yi.length>0){if(vi&&Wr){const et=si(yi[0]);t.texStorage2D(n.TEXTURE_2D,bt,oi,et.width,et.height)}for(let et=0,wt=yi.length;et<wt;et++)_n=yi[et],vi?ne&&t.texSubImage2D(n.TEXTURE_2D,et,0,0,An,Fi,_n):t.texImage2D(n.TEXTURE_2D,et,oi,An,Fi,_n);ue.generateMipmaps=!1}else if(vi){if(Wr){const et=si(Qt);t.texStorage2D(n.TEXTURE_2D,bt,oi,et.width,et.height)}ne&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,An,Fi,Qt)}else t.texImage2D(n.TEXTURE_2D,0,oi,An,Fi,Qt);D(ue)&&R(Ut),Vn.__version=Ht.version,ue.onUpdate&&ue.onUpdate(ue)}Se.__version=ue.version}function qt(Se,ue,ct,Ut,Lt,Ht){const Vn=o.convert(ct.format,ct.colorSpace),sn=o.convert(ct.type),an=j(ct.internalFormat,Vn,sn,ct.colorSpace);if(!i.get(ue).__hasExternalTextures){const Qt=Math.max(1,ue.width>>Ht),An=Math.max(1,ue.height>>Ht);Lt===n.TEXTURE_3D||Lt===n.TEXTURE_2D_ARRAY?t.texImage3D(Lt,Ht,an,Qt,An,ue.depth,0,Vn,sn,null):t.texImage2D(Lt,Ht,an,Qt,An,0,Vn,sn,null)}t.bindFramebuffer(n.FRAMEBUFFER,Se),Xt(ue)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ut,Lt,i.get(ct).__webglTexture,0,$t(ue)):(Lt===n.TEXTURE_2D||Lt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Lt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ut,Lt,i.get(ct).__webglTexture,Ht),t.bindFramebuffer(n.FRAMEBUFFER,null)}function un(Se,ue,ct){if(n.bindRenderbuffer(n.RENDERBUFFER,Se),ue.depthBuffer){const Ut=ue.depthTexture,Ht=H(ue.stencilBuffer,Ut&&Ut.isDepthTexture?Ut.type:null),Vn=ue.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,sn=$t(ue);Xt(ue)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,sn,Ht,ue.width,ue.height):ct?n.renderbufferStorageMultisample(n.RENDERBUFFER,sn,Ht,ue.width,ue.height):n.renderbufferStorage(n.RENDERBUFFER,Ht,ue.width,ue.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Vn,n.RENDERBUFFER,Se)}else{const Ut=ue.textures;for(let Lt=0;Lt<Ut.length;Lt++){const Ht=Ut[Lt],Vn=o.convert(Ht.format,Ht.colorSpace),sn=o.convert(Ht.type),an=j(Ht.internalFormat,Vn,sn,Ht.colorSpace),ui=$t(ue);ct&&!1===Xt(ue)?n.renderbufferStorageMultisample(n.RENDERBUFFER,ui,an,ue.width,ue.height):Xt(ue)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ui,an,ue.width,ue.height):n.renderbufferStorage(n.RENDERBUFFER,an,ue.width,ue.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Pn(Se){const ue=i.get(Se),ct=!0===Se.isWebGLCubeRenderTarget;if(Se.depthTexture&&!ue.__autoAllocateDepthBuffer){if(ct)throw new Error("target.depthTexture not supported in Cube render targets");!function Nt(Se,ue){if(ue&&ue.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Se),!ue.depthTexture||!ue.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ue.depthTexture).__webglTexture||ue.depthTexture.image.width!==ue.width||ue.depthTexture.image.height!==ue.height)&&(ue.depthTexture.image.width=ue.width,ue.depthTexture.image.height=ue.height,ue.depthTexture.needsUpdate=!0),Ge(ue.depthTexture,0);const Ut=i.get(ue.depthTexture).__webglTexture,Lt=$t(ue);if(ue.depthTexture.format===Sf)Xt(ue)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ut,0,Lt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ut,0);else{if(ue.depthTexture.format!==Tf)throw new Error("Unknown depthTexture format");Xt(ue)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ut,0,Lt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ut,0)}}(ue.__webglFramebuffer,Se)}else if(ct){ue.__webglDepthbuffer=[];for(let Ut=0;Ut<6;Ut++)t.bindFramebuffer(n.FRAMEBUFFER,ue.__webglFramebuffer[Ut]),ue.__webglDepthbuffer[Ut]=n.createRenderbuffer(),un(ue.__webglDepthbuffer[Ut],Se,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,ue.__webglFramebuffer),ue.__webglDepthbuffer=n.createRenderbuffer(),un(ue.__webglDepthbuffer,Se,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}const kt=[],Ft=[];function $t(Se){return Math.min(r.maxSamples,Se.samples)}function Xt(Se){const ue=i.get(Se);return Se.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==ue.__useRenderToTexture}function gn(Se,ue){const ct=Se.colorSpace,Ut=Se.format,Lt=Se.type;return!0===Se.isCompressedTexture||!0===Se.isVideoTexture||ct!==Qc&&""!==ct&&(or.getTransfer(ct)===Cr?(Ut!==oa||Lt!==Kc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ct)),ue}function si(Se){return typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement?(d.width=Se.naturalWidth||Se.width,d.height=Se.naturalHeight||Se.height):typeof VideoFrame<"u"&&Se instanceof VideoFrame?(d.width=Se.displayWidth,d.height=Se.displayHeight):(d.width=Se.width,d.height=Se.height),d}this.allocateTextureUnit=function $e(){const Se=ie;return Se>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Se+" texture units while this GPU supports only "+r.maxTextures),ie+=1,Se},this.resetTextureUnits=function Ee(){ie=0},this.setTexture2D=Ge,this.setTexture2DArray=function Ie(Se,ue){const ct=i.get(Se);Se.version>0&&ct.__version!==Se.version?Zn(ct,Se,ue):t.bindTexture(n.TEXTURE_2D_ARRAY,ct.__webglTexture,n.TEXTURE0+ue)},this.setTexture3D=function ye(Se,ue){const ct=i.get(Se);Se.version>0&&ct.__version!==Se.version?Zn(ct,Se,ue):t.bindTexture(n.TEXTURE_3D,ct.__webglTexture,n.TEXTURE0+ue)},this.setTextureCube=function De(Se,ue){const ct=i.get(Se);Se.version>0&&ct.__version!==Se.version?function st(Se,ue,ct){if(6!==ue.image.length)return;const Ut=In(Se,ue),Lt=ue.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture,n.TEXTURE0+ct);const Ht=i.get(Lt);if(Lt.version!==Ht.__version||!0===Ut){t.activeTexture(n.TEXTURE0+ct);const Vn=or.getPrimaries(or.workingColorSpace),sn=""===ue.colorSpace?null:or.getPrimaries(ue.colorSpace),an=""===ue.colorSpace||Vn===sn?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ue.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ue.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,an);const ui=ue.isCompressedTexture||ue.image[0].isCompressedTexture,Qt=ue.image[0]&&ue.image[0].isDataTexture,An=[];for(let wt=0;wt<6;wt++)An[wt]=ui||Qt?Qt?ue.image[wt].image:ue.image[wt]:I(ue.image[wt],!0,r.maxCubemapSize),An[wt]=gn(ue,An[wt]);const Fi=An[0],oi=o.convert(ue.format,ue.colorSpace),_n=o.convert(ue.type),yi=j(ue.internalFormat,oi,_n,ue.colorSpace),vi=!0!==ue.isVideoTexture,Wr=void 0===Ht.__version||!0===Ut,ne=Lt.dataReady;let et,bt=Y(ue,Fi);if(jt(n.TEXTURE_CUBE_MAP,ue),ui){vi&&Wr&&t.texStorage2D(n.TEXTURE_CUBE_MAP,bt,yi,Fi.width,Fi.height);for(let wt=0;wt<6;wt++){et=An[wt].mipmaps;for(let Gt=0;Gt<et.length;Gt++){const Hn=et[Gt];ue.format!==oa?null!==oi?vi?ne&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt,0,0,Hn.width,Hn.height,oi,Hn.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt,yi,Hn.width,Hn.height,0,Hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vi?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt,0,0,Hn.width,Hn.height,oi,_n,Hn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt,yi,Hn.width,Hn.height,0,oi,_n,Hn.data)}}}else{if(et=ue.mipmaps,vi&&Wr){et.length>0&&bt++;const wt=si(An[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,bt,yi,wt.width,wt.height)}for(let wt=0;wt<6;wt++)if(Qt){vi?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,0,0,An[wt].width,An[wt].height,oi,_n,An[wt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,yi,An[wt].width,An[wt].height,0,oi,_n,An[wt].data);for(let Gt=0;Gt<et.length;Gt++){const di=et[Gt].image[wt].image;vi?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt+1,0,0,di.width,di.height,oi,_n,di.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt+1,yi,di.width,di.height,0,oi,_n,di.data)}}else{vi?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,0,0,oi,_n,An[wt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,0,yi,oi,_n,An[wt]);for(let Gt=0;Gt<et.length;Gt++){const Hn=et[Gt];vi?ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt+1,0,0,oi,_n,Hn.image[wt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+wt,Gt+1,yi,oi,_n,Hn.image[wt])}}}D(ue)&&R(n.TEXTURE_CUBE_MAP),Ht.__version=Lt.version,ue.onUpdate&&ue.onUpdate(ue)}Se.__version=ue.version}(ct,Se,ue):t.bindTexture(n.TEXTURE_CUBE_MAP,ct.__webglTexture,n.TEXTURE0+ue)},this.rebindTextures=function Tn(Se,ue,ct){const Ut=i.get(Se);void 0!==ue&&qt(Ut.__webglFramebuffer,Se,Se.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==ct&&Pn(Se)},this.setupRenderTarget=function Bn(Se){const ue=Se.texture,ct=i.get(Se),Ut=i.get(ue);Se.addEventListener("dispose",te);const Lt=Se.textures,Ht=!0===Se.isWebGLCubeRenderTarget,Vn=Lt.length>1;if(Vn||(void 0===Ut.__webglTexture&&(Ut.__webglTexture=n.createTexture()),Ut.__version=ue.version,s.memory.textures++),Ht){ct.__webglFramebuffer=[];for(let sn=0;sn<6;sn++)if(ue.mipmaps&&ue.mipmaps.length>0){ct.__webglFramebuffer[sn]=[];for(let an=0;an<ue.mipmaps.length;an++)ct.__webglFramebuffer[sn][an]=n.createFramebuffer()}else ct.__webglFramebuffer[sn]=n.createFramebuffer()}else{if(ue.mipmaps&&ue.mipmaps.length>0){ct.__webglFramebuffer=[];for(let sn=0;sn<ue.mipmaps.length;sn++)ct.__webglFramebuffer[sn]=n.createFramebuffer()}else ct.__webglFramebuffer=n.createFramebuffer();if(Vn)for(let sn=0,an=Lt.length;sn<an;sn++){const ui=i.get(Lt[sn]);void 0===ui.__webglTexture&&(ui.__webglTexture=n.createTexture(),s.memory.textures++)}if(Se.samples>0&&!1===Xt(Se)){ct.__webglMultisampledFramebuffer=n.createFramebuffer(),ct.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ct.__webglMultisampledFramebuffer);for(let sn=0;sn<Lt.length;sn++){const an=Lt[sn];ct.__webglColorRenderbuffer[sn]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ct.__webglColorRenderbuffer[sn]);const ui=o.convert(an.format,an.colorSpace),Qt=o.convert(an.type),An=j(an.internalFormat,ui,Qt,an.colorSpace,!0===Se.isXRRenderTarget),Fi=$t(Se);n.renderbufferStorageMultisample(n.RENDERBUFFER,Fi,An,Se.width,Se.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+sn,n.RENDERBUFFER,ct.__webglColorRenderbuffer[sn])}n.bindRenderbuffer(n.RENDERBUFFER,null),Se.depthBuffer&&(ct.__webglDepthRenderbuffer=n.createRenderbuffer(),un(ct.__webglDepthRenderbuffer,Se,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ht){t.bindTexture(n.TEXTURE_CUBE_MAP,Ut.__webglTexture),jt(n.TEXTURE_CUBE_MAP,ue);for(let sn=0;sn<6;sn++)if(ue.mipmaps&&ue.mipmaps.length>0)for(let an=0;an<ue.mipmaps.length;an++)qt(ct.__webglFramebuffer[sn][an],Se,ue,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+sn,an);else qt(ct.__webglFramebuffer[sn],Se,ue,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+sn,0);D(ue)&&R(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Vn){for(let sn=0,an=Lt.length;sn<an;sn++){const ui=Lt[sn],Qt=i.get(ui);t.bindTexture(n.TEXTURE_2D,Qt.__webglTexture),jt(n.TEXTURE_2D,ui),qt(ct.__webglFramebuffer,Se,ui,n.COLOR_ATTACHMENT0+sn,n.TEXTURE_2D,0),D(ui)&&R(n.TEXTURE_2D)}t.unbindTexture()}else{let sn=n.TEXTURE_2D;if((Se.isWebGL3DRenderTarget||Se.isWebGLArrayRenderTarget)&&(sn=Se.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(sn,Ut.__webglTexture),jt(sn,ue),ue.mipmaps&&ue.mipmaps.length>0)for(let an=0;an<ue.mipmaps.length;an++)qt(ct.__webglFramebuffer[an],Se,ue,n.COLOR_ATTACHMENT0,sn,an);else qt(ct.__webglFramebuffer,Se,ue,n.COLOR_ATTACHMENT0,sn,0);D(ue)&&R(sn),t.unbindTexture()}Se.depthBuffer&&Pn(Se)},this.updateRenderTargetMipmap=function Oe(Se){const ue=Se.textures;for(let ct=0,Ut=ue.length;ct<Ut;ct++){const Lt=ue[ct];if(D(Lt)){const Ht=Se.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Vn=i.get(Lt).__webglTexture;t.bindTexture(Ht,Vn),R(Ht),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Kt(Se){if(Se.samples>0)if(!1===Xt(Se)){const ue=Se.textures,ct=Se.width,Ut=Se.height;let Lt=n.COLOR_BUFFER_BIT;const Ht=Se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Vn=i.get(Se),sn=ue.length>1;if(sn)for(let an=0;an<ue.length;an++)t.bindFramebuffer(n.FRAMEBUFFER,Vn.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+an,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Vn.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+an,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Vn.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Vn.__webglFramebuffer);for(let an=0;an<ue.length;an++){if(Se.resolveDepthBuffer&&(Se.depthBuffer&&(Lt|=n.DEPTH_BUFFER_BIT),Se.stencilBuffer&&Se.resolveStencilBuffer&&(Lt|=n.STENCIL_BUFFER_BIT)),sn){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Vn.__webglColorRenderbuffer[an]);const ui=i.get(ue[an]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ui,0)}n.blitFramebuffer(0,0,ct,Ut,0,0,ct,Ut,Lt,n.NEAREST),!0===c&&(kt.length=0,Ft.length=0,kt.push(n.COLOR_ATTACHMENT0+an),Se.depthBuffer&&!1===Se.resolveDepthBuffer&&(kt.push(Ht),Ft.push(Ht),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ft)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,kt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),sn)for(let an=0;an<ue.length;an++){t.bindFramebuffer(n.FRAMEBUFFER,Vn.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+an,n.RENDERBUFFER,Vn.__webglColorRenderbuffer[an]);const ui=i.get(ue[an]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Vn.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+an,n.TEXTURE_2D,ui,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Vn.__webglMultisampledFramebuffer)}else Se.depthBuffer&&!1===Se.resolveDepthBuffer&&c&&n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Se.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=Pn,this.setupFrameBufferTexture=qt,this.useMultisampledRTT=Xt}function dfe(n,e){return{convert:function t(i,r=""){let o;const s=or.getTransfer(r);if(i===Kc)return n.UNSIGNED_BYTE;if(1017===i)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return n.UNSIGNED_SHORT_5_5_5_1;if(35902===i)return n.UNSIGNED_INT_5_9_9_9_REV;if(1010===i)return n.BYTE;if(1011===i)return n.SHORT;if(1012===i)return n.UNSIGNED_SHORT;if(1013===i)return n.INT;if(i===wf)return n.UNSIGNED_INT;if(i===Aa)return n.FLOAT;if(1016===i)return n.HALF_FLOAT;if(1021===i)return n.ALPHA;if(1022===i)return n.RGB;if(i===oa)return n.RGBA;if(1024===i)return n.LUMINANCE;if(1025===i)return n.LUMINANCE_ALPHA;if(i===Sf)return n.DEPTH_COMPONENT;if(i===Tf)return n.DEPTH_STENCIL;if(1028===i)return n.RED;if(1029===i)return n.RED_INTEGER;if(1030===i)return n.RG;if(1031===i)return n.RG_INTEGER;if(1033===i)return n.RGBA_INTEGER;if(33776===i||33777===i||33778===i||33779===i)if(s===Cr){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(33776===i)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===i)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===i)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===i)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(33776===i)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===i)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===i)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===i)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===i||35841===i||35842===i||35843===i){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===i)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i||37492===i||37496===i){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(36196===i||37492===i)return s===Cr?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(37496===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(37808===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===i)return s===Cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===i||36494===i||36495===i){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(36492===i)return s===Cr?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===i)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===i)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===i||36284===i||36285===i||36286===i){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(36492===i)return o.COMPRESSED_RED_RGTC1_EXT;if(36284===i)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===i)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===i)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Ef?n.UNSIGNED_INT_24_8:void 0!==n[i]?n[i]:null}}}class hfe extends Uo{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ug extends Fr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ffe={type:"move"};class MA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ug,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ug,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ug,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xe),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null;const a=this._targetRay,c=this._grip,d=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(d&&e.hand){s=!0;for(const I of e.hand.values()){const D=t.getJointPose(I,i),R=this._getHandJoint(d,I);null!==D&&(R.matrix.fromArray(D.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.matrixWorldNeedsUpdate=!0,R.jointRadius=D.radius),R.visible=null!==D}const y=d.joints["index-finger-tip"].position.distanceTo(d.joints["thumb-tip"].position),v=.02,E=.005;d.inputState.pinching&&y>v+E?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&y<=v-E&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),null!==o&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==o&&(r=o),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ffe)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==o),null!==d&&(d.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new Ug;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class gfe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){const r=new Us;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,i=new Rl({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new fo(new Zf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class _fe extends ic{constructor(e,t){super();const i=this;let r=null,o=1,s=null,a="local-floor",c=1,d=null,p=null,m=null,y=null,v=null,E=null;const I=new gfe,D=t.getContextAttributes();let R=null,j=null;const H=[],Y=[],he=new It;let te=null;const re=new Uo;re.layers.enable(1),re.viewport=new dr;const be=new Uo;be.layers.enable(2),be.viewport=new dr;const se=[re,be],ie=new hfe;ie.layers.enable(1),ie.layers.enable(2);let Ee=null,$e=null;function He(st){const qt=Y.indexOf(st.inputSource);if(-1===qt)return;const un=H[qt];void 0!==un&&(un.update(st.inputSource,st.frame,d||s),un.dispatchEvent({type:st.type,data:st.inputSource}))}function Ge(){r.removeEventListener("select",He),r.removeEventListener("selectstart",He),r.removeEventListener("selectend",He),r.removeEventListener("squeeze",He),r.removeEventListener("squeezestart",He),r.removeEventListener("squeezeend",He),r.removeEventListener("end",Ge),r.removeEventListener("inputsourceschange",Ie);for(let st=0;st<H.length;st++){const qt=Y[st];null!==qt&&(Y[st]=null,H[st].disconnect(qt))}Ee=null,$e=null,I.reset(),e.setRenderTarget(R),v=null,y=null,m=null,r=null,j=null,Zn.stop(),i.isPresenting=!1,e.setPixelRatio(te),e.setSize(he.width,he.height,!1),i.dispatchEvent({type:"sessionend"})}function Ie(st){for(let qt=0;qt<st.removed.length;qt++){const un=st.removed[qt],Nt=Y.indexOf(un);Nt>=0&&(Y[Nt]=null,H[Nt].disconnect(un))}for(let qt=0;qt<st.added.length;qt++){const un=st.added[qt];let Nt=Y.indexOf(un);if(-1===Nt){for(let Tn=0;Tn<H.length;Tn++){if(Tn>=Y.length){Y.push(un),Nt=Tn;break}if(null===Y[Tn]){Y[Tn]=un,Nt=Tn;break}}if(-1===Nt)break}const Pn=H[Nt];Pn&&Pn.connect(un)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(st){let qt=H[st];return void 0===qt&&(qt=new MA,H[st]=qt),qt.getTargetRaySpace()},this.getControllerGrip=function(st){let qt=H[st];return void 0===qt&&(qt=new MA,H[st]=qt),qt.getGripSpace()},this.getHand=function(st){let qt=H[st];return void 0===qt&&(qt=new MA,H[st]=qt),qt.getHandSpace()},this.setFramebufferScaleFactor=function(st){o=st,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(st){a=st,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(st){d=st},this.getBaseLayer=function(){return null!==y?y:v},this.getBinding=function(){return m},this.getFrame=function(){return E},this.getSession=function(){return r},this.setSession=function(){var st=(0,ke.A)(function*(qt){if(r=qt,null!==r){if(R=e.getRenderTarget(),r.addEventListener("select",He),r.addEventListener("selectstart",He),r.addEventListener("selectend",He),r.addEventListener("squeeze",He),r.addEventListener("squeezestart",He),r.addEventListener("squeezeend",He),r.addEventListener("end",Ge),r.addEventListener("inputsourceschange",Ie),!0!==D.xrCompatible&&(yield t.makeXRCompatible()),te=e.getPixelRatio(),e.getSize(he),void 0===r.renderState.layers)v=new XRWebGLLayer(r,t,{antialias:D.antialias,alpha:!0,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:o}),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),j=new Dl(v.framebufferWidth,v.framebufferHeight,{format:oa,type:Kc,colorSpace:e.outputColorSpace,stencilBuffer:D.stencil});else{let un=null,Nt=null,Pn=null;D.depth&&(Pn=D.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,un=D.stencil?Tf:Sf,Nt=D.stencil?Ef:wf);const Tn={colorFormat:t.RGBA8,depthFormat:Pn,scaleFactor:o};m=new XRWebGLBinding(r,t),y=m.createProjectionLayer(Tn),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),j=new Dl(y.textureWidth,y.textureHeight,{format:oa,type:Kc,depthTexture:new Y4(y.textureWidth,y.textureHeight,Nt,void 0,void 0,void 0,void 0,void 0,void 0,un),stencilBuffer:D.stencil,colorSpace:e.outputColorSpace,samples:D.antialias?4:0,resolveDepthBuffer:!1===y.ignoreDepthValues})}j.isXRRenderTarget=!0,this.setFoveation(c),d=null,s=yield r.requestReferenceSpace(a),Zn.setContext(r),Zn.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(qt){return st.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const ye=new xe,De=new xe;function at(st,qt){null===qt?st.matrixWorld.copy(st.matrix):st.matrixWorld.multiplyMatrices(qt.matrixWorld,st.matrix),st.matrixWorldInverse.copy(st.matrixWorld).invert()}this.updateCamera=function(st){if(null===r)return;null!==I.texture&&(st.near=I.depthNear,st.far=I.depthFar),ie.near=be.near=re.near=st.near,ie.far=be.far=re.far=st.far,(Ee!==ie.near||$e!==ie.far)&&(r.updateRenderState({depthNear:ie.near,depthFar:ie.far}),Ee=ie.near,$e=ie.far,re.near=Ee,re.far=$e,be.near=Ee,be.far=$e,re.updateProjectionMatrix(),be.updateProjectionMatrix(),st.updateProjectionMatrix());const qt=st.parent,un=ie.cameras;at(ie,qt);for(let Nt=0;Nt<un.length;Nt++)at(un[Nt],qt);2===un.length?function Fe(st,qt,un){ye.setFromMatrixPosition(qt.matrixWorld),De.setFromMatrixPosition(un.matrixWorld);const Nt=ye.distanceTo(De),Pn=qt.projectionMatrix.elements,Tn=un.projectionMatrix.elements,Bn=Pn[14]/(Pn[10]-1),Oe=Pn[14]/(Pn[10]+1),kt=(Pn[9]+1)/Pn[5],Ft=(Pn[9]-1)/Pn[5],Kt=(Pn[8]-1)/Pn[0],$t=(Tn[8]+1)/Tn[0],Xt=Bn*Kt,mn=Bn*$t,gn=Nt/(-Kt+$t),si=gn*-Kt;qt.matrixWorld.decompose(st.position,st.quaternion,st.scale),st.translateX(si),st.translateZ(gn),st.matrixWorld.compose(st.position,st.quaternion,st.scale),st.matrixWorldInverse.copy(st.matrixWorld).invert();const Se=Bn+gn,ue=Oe+gn;st.projectionMatrix.makePerspective(Xt-si,mn+(Nt-si),kt*Oe/ue*Se,Ft*Oe/ue*Se,Se,ue),st.projectionMatrixInverse.copy(st.projectionMatrix).invert()}(ie,re,be):ie.projectionMatrix.copy(re.projectionMatrix),function Vt(st,qt,un){null===un?st.matrix.copy(qt.matrixWorld):(st.matrix.copy(un.matrixWorld),st.matrix.invert(),st.matrix.multiply(qt.matrixWorld)),st.matrix.decompose(st.position,st.quaternion,st.scale),st.updateMatrixWorld(!0),st.projectionMatrix.copy(qt.projectionMatrix),st.projectionMatrixInverse.copy(qt.projectionMatrixInverse),st.isPerspectiveCamera&&(st.fov=2*If*Math.atan(1/st.projectionMatrix.elements[5]),st.zoom=1)}(st,ie,qt)},this.getCamera=function(){return ie},this.getFoveation=function(){if(null!==y||null!==v)return c},this.setFoveation=function(st){c=st,null!==y&&(y.fixedFoveation=st),null!==v&&void 0!==v.fixedFoveation&&(v.fixedFoveation=st)},this.hasDepthSensing=function(){return null!==I.texture},this.getDepthSensingMesh=function(){return I.getMesh(ie)};let jt=null;const Zn=new z4;Zn.setAnimationLoop(function In(st,qt){if(p=qt.getViewerPose(d||s),E=qt,null!==p){const un=p.views;null!==v&&(e.setRenderTargetFramebuffer(j,v.framebuffer),e.setRenderTarget(j));let Nt=!1;un.length!==ie.cameras.length&&(ie.cameras.length=0,Nt=!0);for(let Tn=0;Tn<un.length;Tn++){const Bn=un[Tn];let Oe=null;if(null!==v)Oe=v.getViewport(Bn);else{const Ft=m.getViewSubImage(y,Bn);Oe=Ft.viewport,0===Tn&&(e.setRenderTargetTextures(j,Ft.colorTexture,y.ignoreDepthValues?void 0:Ft.depthStencilTexture),e.setRenderTarget(j))}let kt=se[Tn];void 0===kt&&(kt=new Uo,kt.layers.enable(Tn),kt.viewport=new dr,se[Tn]=kt),kt.matrix.fromArray(Bn.transform.matrix),kt.matrix.decompose(kt.position,kt.quaternion,kt.scale),kt.projectionMatrix.fromArray(Bn.projectionMatrix),kt.projectionMatrixInverse.copy(kt.projectionMatrix).invert(),kt.viewport.set(Oe.x,Oe.y,Oe.width,Oe.height),0===Tn&&(ie.matrix.copy(kt.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale)),!0===Nt&&ie.cameras.push(kt)}const Pn=r.enabledFeatures;if(Pn&&Pn.includes("depth-sensing")){const Tn=m.getDepthInformation(un[0]);Tn&&Tn.isValid&&Tn.texture&&I.init(e,Tn,r.renderState)}}for(let un=0;un<H.length;un++){const Nt=Y[un],Pn=H[un];null!==Nt&&void 0!==Pn&&Pn.update(Nt,qt,d||s)}jt&&jt(st,qt),qt.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:qt}),E=null}),this.setAnimationLoop=function(st){jt=st},this.dispose=function(){}}}const vd=new sc,bfe=new Yn;function yfe(n,e){function t(D,R){!0===D.matrixAutoUpdate&&D.updateMatrix(),R.value.copy(D.matrix)}function o(D,R){D.opacity.value=R.opacity,R.color&&D.diffuse.value.copy(R.color),R.emissive&&D.emissive.value.copy(R.emissive).multiplyScalar(R.emissiveIntensity),R.map&&(D.map.value=R.map,t(R.map,D.mapTransform)),R.alphaMap&&(D.alphaMap.value=R.alphaMap,t(R.alphaMap,D.alphaMapTransform)),R.bumpMap&&(D.bumpMap.value=R.bumpMap,t(R.bumpMap,D.bumpMapTransform),D.bumpScale.value=R.bumpScale,1===R.side&&(D.bumpScale.value*=-1)),R.normalMap&&(D.normalMap.value=R.normalMap,t(R.normalMap,D.normalMapTransform),D.normalScale.value.copy(R.normalScale),1===R.side&&D.normalScale.value.negate()),R.displacementMap&&(D.displacementMap.value=R.displacementMap,t(R.displacementMap,D.displacementMapTransform),D.displacementScale.value=R.displacementScale,D.displacementBias.value=R.displacementBias),R.emissiveMap&&(D.emissiveMap.value=R.emissiveMap,t(R.emissiveMap,D.emissiveMapTransform)),R.specularMap&&(D.specularMap.value=R.specularMap,t(R.specularMap,D.specularMapTransform)),R.alphaTest>0&&(D.alphaTest.value=R.alphaTest);const j=e.get(R),H=j.envMap,Y=j.envMapRotation;H&&(D.envMap.value=H,vd.copy(Y),vd.x*=-1,vd.y*=-1,vd.z*=-1,H.isCubeTexture&&!1===H.isRenderTargetTexture&&(vd.y*=-1,vd.z*=-1),D.envMapRotation.value.setFromMatrix4(bfe.makeRotationFromEuler(vd)),D.flipEnvMap.value=H.isCubeTexture&&!1===H.isRenderTargetTexture?-1:1,D.reflectivity.value=R.reflectivity,D.ior.value=R.ior,D.refractionRatio.value=R.refractionRatio),R.lightMap&&(D.lightMap.value=R.lightMap,D.lightMapIntensity.value=R.lightMapIntensity,t(R.lightMap,D.lightMapTransform)),R.aoMap&&(D.aoMap.value=R.aoMap,D.aoMapIntensity.value=R.aoMapIntensity,t(R.aoMap,D.aoMapTransform))}return{refreshFogUniforms:function i(D,R){R.color.getRGB(D.fogColor.value,U4(n)),R.isFog?(D.fogNear.value=R.near,D.fogFar.value=R.far):R.isFogExp2&&(D.fogDensity.value=R.density)},refreshMaterialUniforms:function r(D,R,j,H,Y){R.isMeshBasicMaterial||R.isMeshLambertMaterial?o(D,R):R.isMeshToonMaterial?(o(D,R),function m(D,R){R.gradientMap&&(D.gradientMap.value=R.gradientMap)}(D,R)):R.isMeshPhongMaterial?(o(D,R),function p(D,R){D.specular.value.copy(R.specular),D.shininess.value=Math.max(R.shininess,1e-4)}(D,R)):R.isMeshStandardMaterial?(o(D,R),function y(D,R){D.metalness.value=R.metalness,R.metalnessMap&&(D.metalnessMap.value=R.metalnessMap,t(R.metalnessMap,D.metalnessMapTransform)),D.roughness.value=R.roughness,R.roughnessMap&&(D.roughnessMap.value=R.roughnessMap,t(R.roughnessMap,D.roughnessMapTransform)),R.envMap&&(D.envMapIntensity.value=R.envMapIntensity)}(D,R),R.isMeshPhysicalMaterial&&function v(D,R,j){D.ior.value=R.ior,R.sheen>0&&(D.sheenColor.value.copy(R.sheenColor).multiplyScalar(R.sheen),D.sheenRoughness.value=R.sheenRoughness,R.sheenColorMap&&(D.sheenColorMap.value=R.sheenColorMap,t(R.sheenColorMap,D.sheenColorMapTransform)),R.sheenRoughnessMap&&(D.sheenRoughnessMap.value=R.sheenRoughnessMap,t(R.sheenRoughnessMap,D.sheenRoughnessMapTransform))),R.clearcoat>0&&(D.clearcoat.value=R.clearcoat,D.clearcoatRoughness.value=R.clearcoatRoughness,R.clearcoatMap&&(D.clearcoatMap.value=R.clearcoatMap,t(R.clearcoatMap,D.clearcoatMapTransform)),R.clearcoatRoughnessMap&&(D.clearcoatRoughnessMap.value=R.clearcoatRoughnessMap,t(R.clearcoatRoughnessMap,D.clearcoatRoughnessMapTransform)),R.clearcoatNormalMap&&(D.clearcoatNormalMap.value=R.clearcoatNormalMap,t(R.clearcoatNormalMap,D.clearcoatNormalMapTransform),D.clearcoatNormalScale.value.copy(R.clearcoatNormalScale),1===R.side&&D.clearcoatNormalScale.value.negate())),R.dispersion>0&&(D.dispersion.value=R.dispersion),R.iridescence>0&&(D.iridescence.value=R.iridescence,D.iridescenceIOR.value=R.iridescenceIOR,D.iridescenceThicknessMinimum.value=R.iridescenceThicknessRange[0],D.iridescenceThicknessMaximum.value=R.iridescenceThicknessRange[1],R.iridescenceMap&&(D.iridescenceMap.value=R.iridescenceMap,t(R.iridescenceMap,D.iridescenceMapTransform)),R.iridescenceThicknessMap&&(D.iridescenceThicknessMap.value=R.iridescenceThicknessMap,t(R.iridescenceThicknessMap,D.iridescenceThicknessMapTransform))),R.transmission>0&&(D.transmission.value=R.transmission,D.transmissionSamplerMap.value=j.texture,D.transmissionSamplerSize.value.set(j.width,j.height),R.transmissionMap&&(D.transmissionMap.value=R.transmissionMap,t(R.transmissionMap,D.transmissionMapTransform)),D.thickness.value=R.thickness,R.thicknessMap&&(D.thicknessMap.value=R.thicknessMap,t(R.thicknessMap,D.thicknessMapTransform)),D.attenuationDistance.value=R.attenuationDistance,D.attenuationColor.value.copy(R.attenuationColor)),R.anisotropy>0&&(D.anisotropyVector.value.set(R.anisotropy*Math.cos(R.anisotropyRotation),R.anisotropy*Math.sin(R.anisotropyRotation)),R.anisotropyMap&&(D.anisotropyMap.value=R.anisotropyMap,t(R.anisotropyMap,D.anisotropyMapTransform))),D.specularIntensity.value=R.specularIntensity,D.specularColor.value.copy(R.specularColor),R.specularColorMap&&(D.specularColorMap.value=R.specularColorMap,t(R.specularColorMap,D.specularColorMapTransform)),R.specularIntensityMap&&(D.specularIntensityMap.value=R.specularIntensityMap,t(R.specularIntensityMap,D.specularIntensityMapTransform))}(D,R,Y)):R.isMeshMatcapMaterial?(o(D,R),function E(D,R){R.matcap&&(D.matcap.value=R.matcap)}(D,R)):R.isMeshDepthMaterial?o(D,R):R.isMeshDistanceMaterial?(o(D,R),function I(D,R){const j=e.get(R).light;D.referencePosition.value.setFromMatrixPosition(j.matrixWorld),D.nearDistance.value=j.shadow.camera.near,D.farDistance.value=j.shadow.camera.far}(D,R)):R.isMeshNormalMaterial?o(D,R):R.isLineBasicMaterial?(function s(D,R){D.diffuse.value.copy(R.color),D.opacity.value=R.opacity,R.map&&(D.map.value=R.map,t(R.map,D.mapTransform))}(D,R),R.isLineDashedMaterial&&function a(D,R){D.dashSize.value=R.dashSize,D.totalSize.value=R.dashSize+R.gapSize,D.scale.value=R.scale}(D,R)):R.isPointsMaterial?function c(D,R,j,H){D.diffuse.value.copy(R.color),D.opacity.value=R.opacity,D.size.value=R.size*j,D.scale.value=.5*H,R.map&&(D.map.value=R.map,t(R.map,D.uvTransform)),R.alphaMap&&(D.alphaMap.value=R.alphaMap,t(R.alphaMap,D.alphaMapTransform)),R.alphaTest>0&&(D.alphaTest.value=R.alphaTest)}(D,R,j,H):R.isSpriteMaterial?function d(D,R){D.diffuse.value.copy(R.color),D.opacity.value=R.opacity,D.rotation.value=R.rotation,R.map&&(D.map.value=R.map,t(R.map,D.mapTransform)),R.alphaMap&&(D.alphaMap.value=R.alphaMap,t(R.alphaMap,D.alphaMapTransform)),R.alphaTest>0&&(D.alphaTest.value=R.alphaTest)}(D,R):R.isShadowMaterial?(D.color.value.copy(R.color),D.opacity.value=R.opacity):R.isShaderMaterial&&(R.uniformsNeedUpdate=!1)}}}function vfe(n,e,t,i){let r={},o={},s=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function v(j,H,Y,he){const te=j.value,re=H+"_"+Y;if(void 0===he[re])return he[re]="number"==typeof te||"boolean"==typeof te?te:te.clone(),!0;{const be=he[re];if("number"==typeof te||"boolean"==typeof te){if(be!==te)return he[re]=te,!0}else if(!1===be.equals(te))return be.copy(te),!0}return!1}function I(j){const H={boundary:0,storage:0};return"number"==typeof j||"boolean"==typeof j?(H.boundary=4,H.storage=4):j.isVector2?(H.boundary=8,H.storage=8):j.isVector3||j.isColor?(H.boundary=16,H.storage=12):j.isVector4?(H.boundary=16,H.storage=16):j.isMatrix3?(H.boundary=48,H.storage=48):j.isMatrix4?(H.boundary=64,H.storage=64):j.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",j),H}function D(j){const H=j.target;H.removeEventListener("dispose",D);const Y=s.indexOf(H.__bindingPointIndex);s.splice(Y,1),n.deleteBuffer(r[H.id]),delete r[H.id],delete o[H.id]}return{bind:function c(j,H){i.uniformBlockBinding(j,H.program)},update:function d(j,H){let Y=r[j.id];void 0===Y&&(function E(j){const H=j.uniforms;let Y=0;for(let re=0,be=H.length;re<be;re++){const se=Array.isArray(H[re])?H[re]:[H[re]];for(let ie=0,Ee=se.length;ie<Ee;ie++){const $e=se[ie],He=Array.isArray($e.value)?$e.value:[$e.value];for(let Ge=0,Ie=He.length;Ge<Ie;Ge++){const De=I(He[Ge]),Fe=Y%16;0!==Fe&&16-Fe<De.boundary&&(Y+=16-Fe),$e.__data=new Float32Array(De.storage/Float32Array.BYTES_PER_ELEMENT),$e.__offset=Y,Y+=De.storage}}}const te=Y%16;te>0&&(Y+=16-te),j.__size=Y,j.__cache={}}(j),Y=function p(j){const H=function m(){for(let j=0;j<a;j++)if(-1===s.indexOf(j))return s.push(j),j;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();j.__bindingPointIndex=H;const Y=n.createBuffer(),he=j.__size,te=j.usage;return n.bindBuffer(n.UNIFORM_BUFFER,Y),n.bufferData(n.UNIFORM_BUFFER,he,te),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,H,Y),Y}(j),r[j.id]=Y,j.addEventListener("dispose",D)),i.updateUBOMapping(j,H.program);const te=e.render.frame;o[j.id]!==te&&(function y(j){const Y=j.uniforms,he=j.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[j.id]);for(let te=0,re=Y.length;te<re;te++){const be=Array.isArray(Y[te])?Y[te]:[Y[te]];for(let se=0,ie=be.length;se<ie;se++){const Ee=be[se];if(!0===v(Ee,te,se,he)){const $e=Ee.__offset,He=Array.isArray(Ee.value)?Ee.value:[Ee.value];let Ge=0;for(let Ie=0;Ie<He.length;Ie++){const ye=He[Ie],De=I(ye);"number"==typeof ye||"boolean"==typeof ye?(Ee.__data[0]=ye,n.bufferSubData(n.UNIFORM_BUFFER,$e+Ge,Ee.__data)):ye.isMatrix3?(Ee.__data[0]=ye.elements[0],Ee.__data[1]=ye.elements[1],Ee.__data[2]=ye.elements[2],Ee.__data[3]=0,Ee.__data[4]=ye.elements[3],Ee.__data[5]=ye.elements[4],Ee.__data[6]=ye.elements[5],Ee.__data[7]=0,Ee.__data[8]=ye.elements[6],Ee.__data[9]=ye.elements[7],Ee.__data[10]=ye.elements[8],Ee.__data[11]=0):(ye.toArray(Ee.__data,Ge),Ge+=De.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,$e,Ee.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(j),o[j.id]=te)},dispose:function R(){for(const j in r)n.deleteBuffer(r[j]);s=[],r={},o={}}}}class xfe{constructor(e={}){const{canvas:t=Yle(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1}=e;let y;if(this.isWebGLRenderer=!0,null!==i){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=i.getContextAttributes().alpha}else y=s;const v=new Uint32Array(4),E=new Int32Array(4);let I=null,D=null;const R=[],j=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ca,this.toneMapping=Xc,this.toneMappingExposure=1;const H=this;let Y=!1,he=0,te=0,re=null,be=-1,se=null;const ie=new dr,Ee=new dr;let $e=null;const He=new wn(0);let Ge=0,Ie=t.width,ye=t.height,De=1,Fe=null,at=null;const Vt=new dr(0,0,Ie,ye),jt=new dr(0,0,Ie,ye);let In=!1;const Zn=new k0;let st=!1,qt=!1;const un=new Yn,Nt=new xe,Pn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Tn=!1;function Bn(){return null===re?De:1}let Ft,Kt,$t,Xt,mn,gn,si,Se,ue,ct,Ut,Lt,Ht,Vn,sn,an,ui,Qt,An,Fi,oi,_n,yi,vi,Oe=i;function kt(_e,We){return t.getContext(_e,We)}try{const _e={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r165"),t.addEventListener("webglcontextlost",bt,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",wt,!1),null===Oe){const We="webgl2";if(Oe=kt(We,_e),null===Oe)throw kt(We)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}function Wr(){Ft=new Rde(Oe),Ft.init(),_n=new dfe(Oe,Ft),Kt=new Tde(Oe,Ft,e,_n),$t=new cfe(Oe),Xt=new kde(Oe),mn=new Zhe,gn=new ufe(Oe,Ft,$t,mn,Kt,_n,Xt),si=new Ade(H),Se=new Dde(H),ue=new xce(Oe),yi=new Ede(Oe,ue),ct=new Pde(Oe,ue,Xt,yi),Ut=new Fde(Oe,ct,ue,Xt),An=new Nde(Oe,Kt,gn),an=new Mde(mn),Lt=new Khe(H,si,Se,Ft,Kt,yi,an),Ht=new yfe(H,mn),Vn=new Jhe,sn=new ofe(Ft),Qt=new wde(H,si,Se,$t,Ut,y,c),ui=new lfe(H,Ut,Kt),vi=new vfe(Oe,Xt,Kt,$t),Fi=new Sde(Oe,Ft,Xt),oi=new Ode(Oe,Ft,Xt),Xt.programs=Lt.programs,H.capabilities=Kt,H.extensions=Ft,H.properties=mn,H.renderLists=Vn,H.shadowMap=ui,H.state=$t,H.info=Xt}Wr();const ne=new _fe(H,Oe);function bt(_e){_e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Y=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),Y=!1;const _e=Xt.autoReset,We=ui.enabled,rt=ui.autoUpdate,lt=ui.needsUpdate,Qe=ui.type;Wr(),Xt.autoReset=_e,ui.enabled=We,ui.autoUpdate=rt,ui.needsUpdate=lt,ui.type=Qe}function wt(_e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",_e.statusMessage)}function Gt(_e){const We=_e.target;We.removeEventListener("dispose",Gt),function Hn(_e){(function di(_e){const We=mn.get(_e).programs;void 0!==We&&(We.forEach(function(rt){Lt.releaseProgram(rt)}),_e.isShaderMaterial&&Lt.releaseShaderCache(_e))})(_e),mn.remove(_e)}(We)}function qr(_e,We,rt){!0===_e.transparent&&2===_e.side&&!1===_e.forceSinglePass?(_e.side=1,_e.needsUpdate=!0,ww(_e,We,rt),_e.side=0,_e.needsUpdate=!0,ww(_e,We,rt),_e.side=2):ww(_e,We,rt)}this.xr=ne,this.getContext=function(){return Oe},this.getContextAttributes=function(){return Oe.getContextAttributes()},this.forceContextLoss=function(){const _e=Ft.get("WEBGL_lose_context");_e&&_e.loseContext()},this.forceContextRestore=function(){const _e=Ft.get("WEBGL_lose_context");_e&&_e.restoreContext()},this.getPixelRatio=function(){return De},this.setPixelRatio=function(_e){void 0!==_e&&(De=_e,this.setSize(Ie,ye,!1))},this.getSize=function(_e){return _e.set(Ie,ye)},this.setSize=function(_e,We,rt=!0){ne.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ie=_e,ye=We,t.width=Math.floor(_e*De),t.height=Math.floor(We*De),!0===rt&&(t.style.width=_e+"px",t.style.height=We+"px"),this.setViewport(0,0,_e,We))},this.getDrawingBufferSize=function(_e){return _e.set(Ie*De,ye*De).floor()},this.setDrawingBufferSize=function(_e,We,rt){Ie=_e,ye=We,De=rt,t.width=Math.floor(_e*rt),t.height=Math.floor(We*rt),this.setViewport(0,0,_e,We)},this.getCurrentViewport=function(_e){return _e.copy(ie)},this.getViewport=function(_e){return _e.copy(Vt)},this.setViewport=function(_e,We,rt,lt){_e.isVector4?Vt.set(_e.x,_e.y,_e.z,_e.w):Vt.set(_e,We,rt,lt),$t.viewport(ie.copy(Vt).multiplyScalar(De).round())},this.getScissor=function(_e){return _e.copy(jt)},this.setScissor=function(_e,We,rt,lt){_e.isVector4?jt.set(_e.x,_e.y,_e.z,_e.w):jt.set(_e,We,rt,lt),$t.scissor(Ee.copy(jt).multiplyScalar(De).round())},this.getScissorTest=function(){return In},this.setScissorTest=function(_e){$t.setScissorTest(In=_e)},this.setOpaqueSort=function(_e){Fe=_e},this.setTransparentSort=function(_e){at=_e},this.getClearColor=function(_e){return _e.copy(Qt.getClearColor())},this.setClearColor=function(){Qt.setClearColor.apply(Qt,arguments)},this.getClearAlpha=function(){return Qt.getClearAlpha()},this.setClearAlpha=function(){Qt.setClearAlpha.apply(Qt,arguments)},this.clear=function(_e=!0,We=!0,rt=!0){let lt=0;if(_e){let Qe=!1;if(null!==re){const nn=re.texture.format;Qe=1033===nn||1031===nn||1029===nn}if(Qe){const nn=re.texture.type,vn=nn===Kc||nn===wf||1012===nn||nn===Ef||1017===nn||1018===nn,Dn=Qt.getClearColor(),Ln=Qt.getClearAlpha(),Qn=Dn.r,ai=Dn.g,Jn=Dn.b;vn?(v[0]=Qn,v[1]=ai,v[2]=Jn,v[3]=Ln,Oe.clearBufferuiv(Oe.COLOR,0,v)):(E[0]=Qn,E[1]=ai,E[2]=Jn,E[3]=Ln,Oe.clearBufferiv(Oe.COLOR,0,E))}else lt|=Oe.COLOR_BUFFER_BIT}We&&(lt|=Oe.DEPTH_BUFFER_BIT),rt&&(lt|=Oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Oe.clear(lt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",bt,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",wt,!1),Vn.dispose(),sn.dispose(),mn.dispose(),si.dispose(),Se.dispose(),Ut.dispose(),yi.dispose(),vi.dispose(),Lt.dispose(),ne.dispose(),ne.removeEventListener("sessionstart",mo),ne.removeEventListener("sessionend",go),fa.stop()},this.renderBufferDirect=function(_e,We,rt,lt,Qe,nn){null===We&&(We=Pn);const vn=Qe.isMesh&&Qe.matrixWorld.determinant()<0,Dn=function OMe(_e,We,rt,lt,Qe){!0!==We.isScene&&(We=Pn),gn.resetTextureUnits();const nn=We.fog,Dn=null===re?H.outputColorSpace:!0===re.isXRRenderTarget?re.texture.colorSpace:Qc,Ln=(lt.isMeshStandardMaterial?Se:si).get(lt.envMap||(lt.isMeshStandardMaterial?We.environment:null)),Qn=!0===lt.vertexColors&&!!rt.attributes.color&&4===rt.attributes.color.itemSize,ai=!!rt.attributes.tangent&&(!!lt.normalMap||lt.anisotropy>0),Jn=!!rt.morphAttributes.position,ir=!!rt.morphAttributes.normal,Rr=!!rt.morphAttributes.color;let Xr=Xc;lt.toneMapped&&(null===re||!0===re.isXRRenderTarget)&&(Xr=H.toneMapping);const ma=rt.morphAttributes.position||rt.morphAttributes.normal||rt.morphAttributes.color,cr=void 0!==ma?ma.length:0,Gn=mn.get(lt),xs=D.state.lights;!0!==st||!0!==qt&&_e===se||an.setState(lt,_e,_e===se&&lt.id===be);let fr=!1;lt.version===Gn.__version?(Gn.needsLights&&Gn.lightsStateVersion!==xs.state.version||Gn.outputColorSpace!==Dn||Qe.isBatchedMesh&&!1===Gn.batching||!Qe.isBatchedMesh&&!0===Gn.batching||Qe.isBatchedMesh&&!0===Gn.batchingColor&&null===Qe.colorTexture||Qe.isBatchedMesh&&!1===Gn.batchingColor&&null!==Qe.colorTexture||Qe.isInstancedMesh&&!1===Gn.instancing||!Qe.isInstancedMesh&&!0===Gn.instancing||Qe.isSkinnedMesh&&!1===Gn.skinning||!Qe.isSkinnedMesh&&!0===Gn.skinning||Qe.isInstancedMesh&&!0===Gn.instancingColor&&null===Qe.instanceColor||Qe.isInstancedMesh&&!1===Gn.instancingColor&&null!==Qe.instanceColor||Qe.isInstancedMesh&&!0===Gn.instancingMorph&&null===Qe.morphTexture||Qe.isInstancedMesh&&!1===Gn.instancingMorph&&null!==Qe.morphTexture||Gn.envMap!==Ln||!0===lt.fog&&Gn.fog!==nn||void 0!==Gn.numClippingPlanes&&(Gn.numClippingPlanes!==an.numPlanes||Gn.numIntersection!==an.numIntersection)||Gn.vertexAlphas!==Qn||Gn.vertexTangents!==ai||Gn.morphTargets!==Jn||Gn.morphNormals!==ir||Gn.morphColors!==Rr||Gn.toneMapping!==Xr||Gn.morphTargetsCount!==cr)&&(fr=!0):(fr=!0,Gn.__version=lt.version);let _c=Gn.currentProgram;!0===fr&&(_c=ww(lt,We,Qe));let Ew=!1,Wd=!1,qI=!1;const Oo=_c.getUniforms(),yu=Gn.uniforms;if($t.useProgram(_c.program)&&(Ew=!0,Wd=!0,qI=!0),lt.id!==be&&(be=lt.id,Wd=!0),Ew||se!==_e){Oo.setValue(Oe,"projectionMatrix",_e.projectionMatrix),Oo.setValue(Oe,"viewMatrix",_e.matrixWorldInverse);const Na=Oo.map.cameraPosition;void 0!==Na&&Na.setValue(Oe,Nt.setFromMatrixPosition(_e.matrixWorld)),Kt.logarithmicDepthBuffer&&Oo.setValue(Oe,"logDepthBufFC",2/(Math.log(_e.far+1)/Math.LN2)),(lt.isMeshPhongMaterial||lt.isMeshToonMaterial||lt.isMeshLambertMaterial||lt.isMeshBasicMaterial||lt.isMeshStandardMaterial||lt.isShaderMaterial)&&Oo.setValue(Oe,"isOrthographic",!0===_e.isOrthographicCamera),se!==_e&&(se=_e,Wd=!0,qI=!0)}if(Qe.isSkinnedMesh){Oo.setOptional(Oe,Qe,"bindMatrix"),Oo.setOptional(Oe,Qe,"bindMatrixInverse");const Na=Qe.skeleton;Na&&(null===Na.boneTexture&&Na.computeBoneTexture(),Oo.setValue(Oe,"boneTexture",Na.boneTexture,gn))}Qe.isBatchedMesh&&(Oo.setOptional(Oe,Qe,"batchingTexture"),Oo.setValue(Oe,"batchingTexture",Qe._matricesTexture,gn),Oo.setOptional(Oe,Qe,"batchingColorTexture"),null!==Qe._colorsTexture&&Oo.setValue(Oe,"batchingColorTexture",Qe._colorsTexture,gn));const XI=rt.morphAttributes;if((void 0!==XI.position||void 0!==XI.normal||void 0!==XI.color)&&An.update(Qe,rt,_c),(Wd||Gn.receiveShadow!==Qe.receiveShadow)&&(Gn.receiveShadow=Qe.receiveShadow,Oo.setValue(Oe,"receiveShadow",Qe.receiveShadow)),lt.isMeshGouraudMaterial&&null!==lt.envMap&&(yu.envMap.value=Ln,yu.flipEnvMap.value=Ln.isCubeTexture&&!1===Ln.isRenderTargetTexture?-1:1),lt.isMeshStandardMaterial&&null===lt.envMap&&null!==We.environment&&(yu.envMapIntensity.value=We.environmentIntensity),Wd&&(Oo.setValue(Oe,"toneMappingExposure",H.toneMappingExposure),Gn.needsLights&&function kMe(_e,We){_e.ambientLightColor.needsUpdate=We,_e.lightProbe.needsUpdate=We,_e.directionalLights.needsUpdate=We,_e.directionalLightShadows.needsUpdate=We,_e.pointLights.needsUpdate=We,_e.pointLightShadows.needsUpdate=We,_e.spotLights.needsUpdate=We,_e.spotLightShadows.needsUpdate=We,_e.rectAreaLights.needsUpdate=We,_e.hemisphereLights.needsUpdate=We}(yu,qI),nn&&!0===lt.fog&&Ht.refreshFogUniforms(yu,nn),Ht.refreshMaterialUniforms(yu,lt,De,ye,D.state.transmissionRenderTarget[_e.id]),U0.upload(Oe,n$(Gn),yu,gn)),lt.isShaderMaterial&&!0===lt.uniformsNeedUpdate&&(U0.upload(Oe,n$(Gn),yu,gn),lt.uniformsNeedUpdate=!1),lt.isSpriteMaterial&&Oo.setValue(Oe,"center",Qe.center),Oo.setValue(Oe,"modelViewMatrix",Qe.modelViewMatrix),Oo.setValue(Oe,"normalMatrix",Qe.normalMatrix),Oo.setValue(Oe,"modelMatrix",Qe.matrixWorld),lt.isShaderMaterial||lt.isRawShaderMaterial){const Na=lt.uniformsGroups;for(let YI=0,FMe=Na.length;YI<FMe;YI++){const r$=Na[YI];vi.update(r$,_c),vi.bind(r$,_c)}}return _c}(_e,We,rt,lt,Qe);$t.setMaterial(lt,vn);let Ln=rt.index,Qn=1;if(!0===lt.wireframe){if(Ln=ct.getWireframeAttribute(rt),void 0===Ln)return;Qn=2}const ai=rt.drawRange,Jn=rt.attributes.position;let ir=ai.start*Qn,Rr=(ai.start+ai.count)*Qn;null!==nn&&(ir=Math.max(ir,nn.start*Qn),Rr=Math.min(Rr,(nn.start+nn.count)*Qn)),null!==Ln?(ir=Math.max(ir,0),Rr=Math.min(Rr,Ln.count)):null!=Jn&&(ir=Math.max(ir,0),Rr=Math.min(Rr,Jn.count));const Xr=Rr-ir;if(Xr<0||Xr===1/0)return;yi.setup(Qe,lt,Dn,rt,Ln);let ma,cr=Fi;if(null!==Ln&&(ma=ue.get(Ln),cr=oi,cr.setIndex(ma)),Qe.isMesh)!0===lt.wireframe?($t.setLineWidth(lt.wireframeLinewidth*Bn()),cr.setMode(Oe.LINES)):cr.setMode(Oe.TRIANGLES);else if(Qe.isLine){let Gn=lt.linewidth;void 0===Gn&&(Gn=1),$t.setLineWidth(Gn*Bn()),cr.setMode(Qe.isLineSegments?Oe.LINES:Qe.isLineLoop?Oe.LINE_LOOP:Oe.LINE_STRIP)}else Qe.isPoints?cr.setMode(Oe.POINTS):Qe.isSprite&&cr.setMode(Oe.TRIANGLES);if(Qe.isBatchedMesh)null!==Qe._multiDrawInstances?cr.renderMultiDrawInstances(Qe._multiDrawStarts,Qe._multiDrawCounts,Qe._multiDrawCount,Qe._multiDrawInstances):cr.renderMultiDraw(Qe._multiDrawStarts,Qe._multiDrawCounts,Qe._multiDrawCount);else if(Qe.isInstancedMesh)cr.renderInstances(ir,Xr,Qe.count);else if(rt.isInstancedBufferGeometry){const xs=Math.min(rt.instanceCount,void 0!==rt._maxInstanceCount?rt._maxInstanceCount:1/0);cr.renderInstances(ir,Xr,xs)}else cr.render(ir,Xr)},this.compile=function(_e,We,rt=null){null===rt&&(rt=_e),D=sn.get(rt),D.init(We),j.push(D),rt.traverseVisible(function(Qe){Qe.isLight&&Qe.layers.test(We.layers)&&(D.pushLight(Qe),Qe.castShadow&&D.pushShadow(Qe))}),_e!==rt&&_e.traverseVisible(function(Qe){Qe.isLight&&Qe.layers.test(We.layers)&&(D.pushLight(Qe),Qe.castShadow&&D.pushShadow(Qe))}),D.setupLights();const lt=new Set;return _e.traverse(function(Qe){const nn=Qe.material;if(nn)if(Array.isArray(nn))for(let vn=0;vn<nn.length;vn++){const Dn=nn[vn];qr(Dn,rt,Qe),lt.add(Dn)}else qr(nn,rt,Qe),lt.add(nn)}),j.pop(),D=null,lt},this.compileAsync=function(_e,We,rt=null){const lt=this.compile(_e,We,rt);return new Promise(Qe=>{function nn(){lt.forEach(function(vn){mn.get(vn).currentProgram.isReady()&&lt.delete(vn)}),0!==lt.size?setTimeout(nn,10):Qe(_e)}null!==Ft.get("KHR_parallel_shader_compile")?nn():setTimeout(nn,10)})};let po=null;function mo(){fa.stop()}function go(){fa.start()}const fa=new z4;function pa(_e,We,rt,lt){if(!1===_e.visible)return;if(_e.layers.test(We.layers))if(_e.isGroup)rt=_e.renderOrder;else if(_e.isLOD)!0===_e.autoUpdate&&_e.update(We);else if(_e.isLight)D.pushLight(_e),_e.castShadow&&D.pushShadow(_e);else if(_e.isSprite){if(!_e.frustumCulled||Zn.intersectsSprite(_e)){lt&&Nt.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(un);const vn=Ut.update(_e),Dn=_e.material;Dn.visible&&I.push(_e,vn,Dn,rt,Nt.z,null)}}else if((_e.isMesh||_e.isLine||_e.isPoints)&&(!_e.frustumCulled||Zn.intersectsObject(_e))){const vn=Ut.update(_e),Dn=_e.material;if(lt&&(void 0!==_e.boundingSphere?(null===_e.boundingSphere&&_e.computeBoundingSphere(),Nt.copy(_e.boundingSphere.center)):(null===vn.boundingSphere&&vn.computeBoundingSphere(),Nt.copy(vn.boundingSphere.center)),Nt.applyMatrix4(_e.matrixWorld).applyMatrix4(un)),Array.isArray(Dn)){const Ln=vn.groups;for(let Qn=0,ai=Ln.length;Qn<ai;Qn++){const Jn=Ln[Qn],ir=Dn[Jn.materialIndex];ir&&ir.visible&&I.push(_e,vn,ir,rt,Nt.z,Jn)}}else Dn.visible&&I.push(_e,vn,Dn,rt,Nt.z,null)}const nn=_e.children;for(let vn=0,Dn=nn.length;vn<Dn;vn++)pa(nn[vn],We,rt,lt)}function bu(_e,We,rt,lt){const Qe=_e.opaque,nn=_e.transmissive,vn=_e.transparent;D.setupLightsView(rt),!0===st&&an.setGlobalState(H.clippingPlanes,rt),lt&&$t.viewport(ie.copy(lt)),Qe.length>0&&Gd(Qe,We,rt),nn.length>0&&Gd(nn,We,rt),vn.length>0&&Gd(vn,We,rt),$t.buffers.depth.setTest(!0),$t.buffers.depth.setMask(!0),$t.buffers.color.setMask(!0),$t.setPolygonOffset(!1)}function Hd(_e,We,rt,lt){if(null!==(!0===rt.isScene?rt.overrideMaterial:null))return;void 0===D.state.transmissionRenderTarget[lt.id]&&(D.state.transmissionRenderTarget[lt.id]=new Dl(1,1,{generateMipmaps:!0,type:Ft.has("EXT_color_buffer_half_float")||Ft.has("EXT_color_buffer_float")?1016:Kc,minFilter:tc,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:or.workingColorSpace}));const nn=D.state.transmissionRenderTarget[lt.id],vn=lt.viewport||ie;nn.setSize(vn.z,vn.w);const Dn=H.getRenderTarget();H.setRenderTarget(nn),H.getClearColor(He),Ge=H.getClearAlpha(),Ge<1&&H.setClearColor(16777215,.5),Tn?Qt.render(rt):H.clear();const Ln=H.toneMapping;H.toneMapping=Xc;const Qn=lt.viewport;if(void 0!==lt.viewport&&(lt.viewport=void 0),D.setupLightsView(lt),!0===st&&an.setGlobalState(H.clippingPlanes,lt),Gd(_e,rt,lt),gn.updateMultisampleRenderTarget(nn),gn.updateRenderTargetMipmap(nn),!1===Ft.has("WEBGL_multisampled_render_to_texture")){let ai=!1;for(let Jn=0,ir=We.length;Jn<ir;Jn++){const Rr=We[Jn],Xr=Rr.object,ma=Rr.geometry,cr=Rr.material,Gn=Rr.group;if(2===cr.side&&Xr.layers.test(lt.layers)){const xs=cr.side;cr.side=1,cr.needsUpdate=!0,t$(Xr,rt,lt,ma,cr,Gn),cr.side=xs,cr.needsUpdate=!0,ai=!0}}!0===ai&&(gn.updateMultisampleRenderTarget(nn),gn.updateRenderTargetMipmap(nn))}H.setRenderTarget(Dn),H.setClearColor(He,Ge),void 0!==Qn&&(lt.viewport=Qn),H.toneMapping=Ln}function Gd(_e,We,rt){const lt=!0===We.isScene?We.overrideMaterial:null;for(let Qe=0,nn=_e.length;Qe<nn;Qe++){const vn=_e[Qe],Dn=vn.object,Ln=vn.geometry,Qn=null===lt?vn.material:lt,ai=vn.group;Dn.layers.test(rt.layers)&&t$(Dn,We,rt,Ln,Qn,ai)}}function t$(_e,We,rt,lt,Qe,nn){_e.onBeforeRender(H,We,rt,lt,Qe,nn),_e.modelViewMatrix.multiplyMatrices(rt.matrixWorldInverse,_e.matrixWorld),_e.normalMatrix.getNormalMatrix(_e.modelViewMatrix),Qe.onBeforeRender(H,We,rt,lt,_e,nn),!0===Qe.transparent&&2===Qe.side&&!1===Qe.forceSinglePass?(Qe.side=1,Qe.needsUpdate=!0,H.renderBufferDirect(rt,We,lt,Qe,_e,nn),Qe.side=0,Qe.needsUpdate=!0,H.renderBufferDirect(rt,We,lt,Qe,_e,nn),Qe.side=2):H.renderBufferDirect(rt,We,lt,Qe,_e,nn),_e.onAfterRender(H,We,rt,lt,Qe,nn)}function ww(_e,We,rt){!0!==We.isScene&&(We=Pn);const lt=mn.get(_e),Qe=D.state.lights,vn=Qe.state.version,Dn=Lt.getParameters(_e,Qe.state,D.state.shadowsArray,We,rt),Ln=Lt.getProgramCacheKey(Dn);let Qn=lt.programs;lt.environment=_e.isMeshStandardMaterial?We.environment:null,lt.fog=We.fog,lt.envMap=(_e.isMeshStandardMaterial?Se:si).get(_e.envMap||lt.environment),lt.envMapRotation=null!==lt.environment&&null===_e.envMap?We.environmentRotation:_e.envMapRotation,void 0===Qn&&(_e.addEventListener("dispose",Gt),Qn=new Map,lt.programs=Qn);let ai=Qn.get(Ln);if(void 0!==ai){if(lt.currentProgram===ai&&lt.lightsStateVersion===vn)return i$(_e,Dn),ai}else Dn.uniforms=Lt.getUniforms(_e),_e.onBuild(rt,Dn,H),_e.onBeforeCompile(Dn,H),ai=Lt.acquireProgram(Dn,Ln),Qn.set(Ln,ai),lt.uniforms=Dn.uniforms;const Jn=lt.uniforms;return(!_e.isShaderMaterial&&!_e.isRawShaderMaterial||!0===_e.clipping)&&(Jn.clippingPlanes=an.uniform),i$(_e,Dn),lt.needsLights=function NMe(_e){return _e.isMeshLambertMaterial||_e.isMeshToonMaterial||_e.isMeshPhongMaterial||_e.isMeshStandardMaterial||_e.isShadowMaterial||_e.isShaderMaterial&&!0===_e.lights}(_e),lt.lightsStateVersion=vn,lt.needsLights&&(Jn.ambientLightColor.value=Qe.state.ambient,Jn.lightProbe.value=Qe.state.probe,Jn.directionalLights.value=Qe.state.directional,Jn.directionalLightShadows.value=Qe.state.directionalShadow,Jn.spotLights.value=Qe.state.spot,Jn.spotLightShadows.value=Qe.state.spotShadow,Jn.rectAreaLights.value=Qe.state.rectArea,Jn.ltc_1.value=Qe.state.rectAreaLTC1,Jn.ltc_2.value=Qe.state.rectAreaLTC2,Jn.pointLights.value=Qe.state.point,Jn.pointLightShadows.value=Qe.state.pointShadow,Jn.hemisphereLights.value=Qe.state.hemi,Jn.directionalShadowMap.value=Qe.state.directionalShadowMap,Jn.directionalShadowMatrix.value=Qe.state.directionalShadowMatrix,Jn.spotShadowMap.value=Qe.state.spotShadowMap,Jn.spotLightMatrix.value=Qe.state.spotLightMatrix,Jn.spotLightMap.value=Qe.state.spotLightMap,Jn.pointShadowMap.value=Qe.state.pointShadowMap,Jn.pointShadowMatrix.value=Qe.state.pointShadowMatrix),lt.currentProgram=ai,lt.uniformsList=null,ai}function n$(_e){if(null===_e.uniformsList){const We=_e.currentProgram.getUniforms();_e.uniformsList=U0.seqWithValue(We.seq,_e.uniforms)}return _e.uniformsList}function i$(_e,We){const rt=mn.get(_e);rt.outputColorSpace=We.outputColorSpace,rt.batching=We.batching,rt.batchingColor=We.batchingColor,rt.instancing=We.instancing,rt.instancingColor=We.instancingColor,rt.instancingMorph=We.instancingMorph,rt.skinning=We.skinning,rt.morphTargets=We.morphTargets,rt.morphNormals=We.morphNormals,rt.morphColors=We.morphColors,rt.morphTargetsCount=We.morphTargetsCount,rt.numClippingPlanes=We.numClippingPlanes,rt.numIntersection=We.numClipIntersection,rt.vertexAlphas=We.vertexAlphas,rt.vertexTangents=We.vertexTangents,rt.toneMapping=We.toneMapping}fa.setAnimationLoop(function nr(_e){po&&po(_e)}),typeof self<"u"&&fa.setContext(self),this.setAnimationLoop=function(_e){po=_e,ne.setAnimationLoop(_e),null===_e?fa.stop():fa.start()},ne.addEventListener("sessionstart",mo),ne.addEventListener("sessionend",go),this.render=function(_e,We){if(void 0!==We&&!0!==We.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Y)return;if(!0===_e.matrixWorldAutoUpdate&&_e.updateMatrixWorld(),null===We.parent&&!0===We.matrixWorldAutoUpdate&&We.updateMatrixWorld(),!0===ne.enabled&&!0===ne.isPresenting&&(!0===ne.cameraAutoUpdate&&ne.updateCamera(We),We=ne.getCamera()),!0===_e.isScene&&_e.onBeforeRender(H,_e,We,re),D=sn.get(_e,j.length),D.init(We),j.push(D),un.multiplyMatrices(We.projectionMatrix,We.matrixWorldInverse),Zn.setFromProjectionMatrix(un),qt=this.localClippingEnabled,st=an.init(this.clippingPlanes,qt),I=Vn.get(_e,R.length),I.init(),R.push(I),!0===ne.enabled&&!0===ne.isPresenting){const nn=H.xr.getDepthSensingMesh();null!==nn&&pa(nn,We,-1/0,H.sortObjects)}pa(_e,We,0,H.sortObjects),I.finish(),!0===H.sortObjects&&I.sort(Fe,at),Tn=!1===ne.enabled||!1===ne.isPresenting||!1===ne.hasDepthSensing(),Tn&&Qt.addToRenderList(I,_e),this.info.render.frame++,!0===st&&an.beginShadows(),ui.render(D.state.shadowsArray,_e,We),!0===st&&an.endShadows(),!0===this.info.autoReset&&this.info.reset();const lt=I.opaque,Qe=I.transmissive;if(D.setupLights(),We.isArrayCamera){const nn=We.cameras;if(Qe.length>0)for(let vn=0,Dn=nn.length;vn<Dn;vn++)Hd(lt,Qe,_e,nn[vn]);Tn&&Qt.render(_e);for(let vn=0,Dn=nn.length;vn<Dn;vn++){const Ln=nn[vn];bu(I,_e,Ln,Ln.viewport)}}else Qe.length>0&&Hd(lt,Qe,_e,We),Tn&&Qt.render(_e),bu(I,_e,We);null!==re&&(gn.updateMultisampleRenderTarget(re),gn.updateRenderTargetMipmap(re)),!0===_e.isScene&&_e.onAfterRender(H,_e,We),yi.resetDefaultState(),be=-1,se=null,j.pop(),j.length>0?(D=j[j.length-1],!0===st&&an.setGlobalState(H.clippingPlanes,D.state.camera)):D=null,R.pop(),I=R.length>0?R[R.length-1]:null},this.getActiveCubeFace=function(){return he},this.getActiveMipmapLevel=function(){return te},this.getRenderTarget=function(){return re},this.setRenderTargetTextures=function(_e,We,rt){mn.get(_e.texture).__webglTexture=We,mn.get(_e.depthTexture).__webglTexture=rt;const lt=mn.get(_e);lt.__hasExternalTextures=!0,lt.__autoAllocateDepthBuffer=void 0===rt,lt.__autoAllocateDepthBuffer||!0===Ft.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),lt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(_e,We){const rt=mn.get(_e);rt.__webglFramebuffer=We,rt.__useDefaultFramebuffer=void 0===We},this.setRenderTarget=function(_e,We=0,rt=0){re=_e,he=We,te=rt;let lt=!0,Qe=null,nn=!1,vn=!1;if(_e){const Ln=mn.get(_e);void 0!==Ln.__useDefaultFramebuffer?($t.bindFramebuffer(Oe.FRAMEBUFFER,null),lt=!1):void 0===Ln.__webglFramebuffer?gn.setupRenderTarget(_e):Ln.__hasExternalTextures&&gn.rebindTextures(_e,mn.get(_e.texture).__webglTexture,mn.get(_e.depthTexture).__webglTexture);const Qn=_e.texture;(Qn.isData3DTexture||Qn.isDataArrayTexture||Qn.isCompressedArrayTexture)&&(vn=!0);const ai=mn.get(_e).__webglFramebuffer;_e.isWebGLCubeRenderTarget?(Qe=Array.isArray(ai[We])?ai[We][rt]:ai[We],nn=!0):Qe=_e.samples>0&&!1===gn.useMultisampledRTT(_e)?mn.get(_e).__webglMultisampledFramebuffer:Array.isArray(ai)?ai[rt]:ai,ie.copy(_e.viewport),Ee.copy(_e.scissor),$e=_e.scissorTest}else ie.copy(Vt).multiplyScalar(De).floor(),Ee.copy(jt).multiplyScalar(De).floor(),$e=In;if($t.bindFramebuffer(Oe.FRAMEBUFFER,Qe)&&lt&&$t.drawBuffers(_e,Qe),$t.viewport(ie),$t.scissor(Ee),$t.setScissorTest($e),nn){const Ln=mn.get(_e.texture);Oe.framebufferTexture2D(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,Oe.TEXTURE_CUBE_MAP_POSITIVE_X+We,Ln.__webglTexture,rt)}else if(vn){const Ln=mn.get(_e.texture);Oe.framebufferTextureLayer(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,Ln.__webglTexture,rt||0,We||0)}be=-1},this.readRenderTargetPixels=function(_e,We,rt,lt,Qe,nn,vn){if(!_e||!_e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Dn=mn.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&void 0!==vn&&(Dn=Dn[vn]),Dn){$t.bindFramebuffer(Oe.FRAMEBUFFER,Dn);try{const Ln=_e.texture,Qn=Ln.format,ai=Ln.type;if(!Kt.textureFormatReadable(Qn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Kt.textureTypeReadable(ai))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");We>=0&&We<=_e.width-lt&&rt>=0&&rt<=_e.height-Qe&&Oe.readPixels(We,rt,lt,Qe,_n.convert(Qn),_n.convert(ai),nn)}finally{const Ln=null!==re?mn.get(re).__webglFramebuffer:null;$t.bindFramebuffer(Oe.FRAMEBUFFER,Ln)}}},this.readRenderTargetPixelsAsync=function(){var _e=(0,ke.A)(function*(We,rt,lt,Qe,nn,vn,Dn){if(!We||!We.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ln=mn.get(We).__webglFramebuffer;if(We.isWebGLCubeRenderTarget&&void 0!==Dn&&(Ln=Ln[Dn]),Ln){$t.bindFramebuffer(Oe.FRAMEBUFFER,Ln);try{const Qn=We.texture,ai=Qn.format,Jn=Qn.type;if(!Kt.textureFormatReadable(ai))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Kt.textureTypeReadable(Jn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(rt>=0&&rt<=We.width-Qe&&lt>=0&&lt<=We.height-nn){const ir=Oe.createBuffer();Oe.bindBuffer(Oe.PIXEL_PACK_BUFFER,ir),Oe.bufferData(Oe.PIXEL_PACK_BUFFER,vn.byteLength,Oe.STREAM_READ),Oe.readPixels(rt,lt,Qe,nn,_n.convert(ai),_n.convert(Jn),0),Oe.flush();const Rr=Oe.fenceSync(Oe.SYNC_GPU_COMMANDS_COMPLETE,0);yield function Kle(n,e,t){return new Promise(function(i,r){setTimeout(function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}},t)})}(Oe,Rr,4);try{Oe.bindBuffer(Oe.PIXEL_PACK_BUFFER,ir),Oe.getBufferSubData(Oe.PIXEL_PACK_BUFFER,0,vn)}finally{Oe.deleteBuffer(ir),Oe.deleteSync(Rr)}return vn}}finally{const Qn=null!==re?mn.get(re).__webglFramebuffer:null;$t.bindFramebuffer(Oe.FRAMEBUFFER,Qn)}}});return function(We,rt,lt,Qe,nn,vn,Dn){return _e.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(_e,We=null,rt=0){!0!==_e.isTexture&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),We=arguments[0]||null,_e=arguments[1]);const lt=Math.pow(2,-rt),Qe=Math.floor(_e.image.width*lt),nn=Math.floor(_e.image.height*lt),vn=null!==We?We.x:0,Dn=null!==We?We.y:0;gn.setTexture2D(_e,0),Oe.copyTexSubImage2D(Oe.TEXTURE_2D,rt,0,0,vn,Dn,Qe,nn),$t.unbindTexture()},this.copyTextureToTexture=function(_e,We,rt=null,lt=null,Qe=0){let nn,vn,Dn,Ln,Qn,ai;!0!==_e.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),lt=arguments[0]||null,_e=arguments[1],We=arguments[2],Qe=arguments[3]||0,rt=null),null!==rt?(nn=rt.max.x-rt.min.x,vn=rt.max.y-rt.min.y,Dn=rt.min.x,Ln=rt.min.y):(nn=_e.image.width,vn=_e.image.height,Dn=0,Ln=0),null!==lt?(Qn=lt.x,ai=lt.y):(Qn=0,ai=0);const Jn=_n.convert(We.format),ir=_n.convert(We.type);gn.setTexture2D(We,0),Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,We.flipY),Oe.pixelStorei(Oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,We.premultiplyAlpha),Oe.pixelStorei(Oe.UNPACK_ALIGNMENT,We.unpackAlignment);const Rr=Oe.getParameter(Oe.UNPACK_ROW_LENGTH),Xr=Oe.getParameter(Oe.UNPACK_IMAGE_HEIGHT),ma=Oe.getParameter(Oe.UNPACK_SKIP_PIXELS),cr=Oe.getParameter(Oe.UNPACK_SKIP_ROWS),Gn=Oe.getParameter(Oe.UNPACK_SKIP_IMAGES),xs=_e.isCompressedTexture?_e.mipmaps[Qe]:_e.image;Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,xs.width),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,xs.height),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,Dn),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,Ln),_e.isDataTexture?Oe.texSubImage2D(Oe.TEXTURE_2D,Qe,Qn,ai,nn,vn,Jn,ir,xs.data):_e.isCompressedTexture?Oe.compressedTexSubImage2D(Oe.TEXTURE_2D,Qe,Qn,ai,xs.width,xs.height,Jn,xs.data):Oe.texSubImage2D(Oe.TEXTURE_2D,Qe,Qn,ai,Jn,ir,xs),Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,Rr),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,Xr),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,ma),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,cr),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,Gn),0===Qe&&We.generateMipmaps&&Oe.generateMipmap(Oe.TEXTURE_2D),$t.unbindTexture()},this.copyTextureToTexture3D=function(_e,We,rt=null,lt=null,Qe=0){let nn,vn,Dn,Ln,Qn,ai,Jn,ir,Rr;!0!==_e.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),rt=arguments[0]||null,lt=arguments[1]||null,_e=arguments[2],We=arguments[3],Qe=arguments[4]||0);const Xr=_e.isCompressedTexture?_e.mipmaps[Qe]:_e.image;null!==rt?(nn=rt.max.x-rt.min.x,vn=rt.max.y-rt.min.y,Dn=rt.max.z-rt.min.z,Ln=rt.min.x,Qn=rt.min.y,ai=rt.min.z):(nn=Xr.width,vn=Xr.height,Dn=Xr.depth,Ln=0,Qn=0,ai=0),null!==lt?(Jn=lt.x,ir=lt.y,Rr=lt.z):(Jn=0,ir=0,Rr=0);const ma=_n.convert(We.format),cr=_n.convert(We.type);let Gn;if(We.isData3DTexture)gn.setTexture3D(We,0),Gn=Oe.TEXTURE_3D;else{if(!We.isDataArrayTexture&&!We.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");gn.setTexture2DArray(We,0),Gn=Oe.TEXTURE_2D_ARRAY}Oe.pixelStorei(Oe.UNPACK_FLIP_Y_WEBGL,We.flipY),Oe.pixelStorei(Oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,We.premultiplyAlpha),Oe.pixelStorei(Oe.UNPACK_ALIGNMENT,We.unpackAlignment);const xs=Oe.getParameter(Oe.UNPACK_ROW_LENGTH),fr=Oe.getParameter(Oe.UNPACK_IMAGE_HEIGHT),_c=Oe.getParameter(Oe.UNPACK_SKIP_PIXELS),Ew=Oe.getParameter(Oe.UNPACK_SKIP_ROWS),Wd=Oe.getParameter(Oe.UNPACK_SKIP_IMAGES);Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,Xr.width),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,Xr.height),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,Ln),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,Qn),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,ai),_e.isDataTexture||_e.isData3DTexture?Oe.texSubImage3D(Gn,Qe,Jn,ir,Rr,nn,vn,Dn,ma,cr,Xr.data):We.isCompressedArrayTexture?Oe.compressedTexSubImage3D(Gn,Qe,Jn,ir,Rr,nn,vn,Dn,ma,Xr.data):Oe.texSubImage3D(Gn,Qe,Jn,ir,Rr,nn,vn,Dn,ma,cr,Xr),Oe.pixelStorei(Oe.UNPACK_ROW_LENGTH,xs),Oe.pixelStorei(Oe.UNPACK_IMAGE_HEIGHT,fr),Oe.pixelStorei(Oe.UNPACK_SKIP_PIXELS,_c),Oe.pixelStorei(Oe.UNPACK_SKIP_ROWS,Ew),Oe.pixelStorei(Oe.UNPACK_SKIP_IMAGES,Wd),0===Qe&&We.generateMipmaps&&Oe.generateMipmap(Gn),$t.unbindTexture()},this.initRenderTarget=function(_e){void 0===mn.get(_e).__webglFramebuffer&&gn.setupRenderTarget(_e)},this.initTexture=function(_e){_e.isCubeTexture?gn.setTextureCube(_e,0):_e.isData3DTexture?gn.setTexture3D(_e,0):_e.isDataArrayTexture||_e.isCompressedArrayTexture?gn.setTexture2DArray(_e,0):gn.setTexture2D(_e,0),$t.unbindTexture()},this.resetState=function(){he=0,te=0,re=null,$t.reset(),yi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return nc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===qM?"display-p3":"srgb",t.unpackColorSpace=or.workingColorSpace===l0?"display-p3":"srgb"}}class bV extends Fr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new sc,this.environmentIntensity=1,this.environmentRotation=new sc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Bfe extends Us{constructor(e,t,i,r,o,s,a,c,d){super(e,t,i,r,o,s,a,c,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class sC extends ps{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new wn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Td(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}class dx{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(i=2,o=a);for(let c=i-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0}}for(;i<s;){const a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Rpe extends dx{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let o=e-2,s=e+1,a=r[o],c=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:o=e,a=2*t-i;break;case 2402:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:s=e,c=2*i-t;break;case 2402:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}const d=.5*(i-t),p=this.valueSize;this._weightPrev=d/(t-a),this._weightNext=d/(c-i),this._offsetPrev=o*p,this._offsetNext=s*p}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,d=c-a,p=this._offsetPrev,m=this._offsetNext,y=this._weightPrev,v=this._weightNext,E=(i-t)/(r-t),I=E*E,D=I*E,R=-y*D+2*y*I-y*E,j=(1+y)*D+(-1.5-2*y)*I+(-.5+y)*E+1,H=(-1-v)*D+(1.5+v)*I+.5*E,Y=v*D-v*I;for(let he=0;he!==a;++he)o[he]=R*s[p+he]+j*s[d+he]+H*s[c+he]+Y*s[m+he];return o}}class rz extends dx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,d=c-a,p=(i-t)/(r-t),m=1-p;for(let y=0;y!==a;++y)o[y]=s[d+y]*m+s[c+y]*p;return o}}class Ppe extends dx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class kl{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Td(t,this.TimeBufferType),this.values=Td(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Td(e.times,Array),values:Td(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Ppe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rz(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Rpe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==o||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,o=i.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==s&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),e=!1;break}s=c}if(void 0!==r&&function nz(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,c=r.length;a!==c;++a){const d=r[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),o=e.length-1;let s=1;for(let a=1;a<o;++a){let c=!1;const d=e[a];if(d!==e[a+1]&&(1!==a||d!==e[0]))if(r)c=!0;else{const m=a*i,y=m-i,v=m+i;for(let E=0;E!==i;++E){const I=t[m+E];if(I!==t[y+E]||I!==t[v+E]){c=!0;break}}}if(c){if(a!==s){e[s]=e[a];const m=a*i,y=s*i;for(let v=0;v!==i;++v)t[y+v]=t[m+v]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,c=s*i,d=0;d!==i;++d)t[c+d]=t[a+d];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}kl.prototype.TimeBufferType=Float32Array,kl.prototype.ValueBufferType=Float32Array,kl.prototype.DefaultInterpolation=2301;class up extends kl{constructor(e,t,i){super(e,t,i)}}up.prototype.ValueTypeName="bool",up.prototype.ValueBufferType=Array,up.prototype.DefaultInterpolation=2300,up.prototype.InterpolantFactoryMethodLinear=void 0,up.prototype.InterpolantFactoryMethodSmooth=void 0;(class oz extends kl{}).prototype.ValueTypeName="color";(class hx extends kl{}).prototype.ValueTypeName="number";class Ope extends dx{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let d=e*a;for(let p=d+a;d!==p;d+=4)hs.slerpFlat(o,0,s,d-a,s,d,c);return o}}class fx extends kl{InterpolantFactoryMethodLinear(e){return new Ope(this.times,this.values,this.getValueSize(),e)}}fx.prototype.ValueTypeName="quaternion",fx.prototype.InterpolantFactoryMethodSmooth=void 0;class dp extends kl{constructor(e,t,i){super(e,t,i)}}dp.prototype.ValueTypeName="string",dp.prototype.ValueBufferType=Array,dp.prototype.DefaultInterpolation=2300,dp.prototype.InterpolantFactoryMethodLinear=void 0,dp.prototype.InterpolantFactoryMethodSmooth=void 0;(class px extends kl{}).prototype.ValueTypeName="vector";const lu={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class sz{constructor(e,t,i){const r=this;let c,o=!1,s=0,a=0;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){a++,!1===o&&void 0!==r.onStart&&r.onStart(p,s,a),o=!0},this.itemEnd=function(p){s++,void 0!==r.onProgress&&r.onProgress(p,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(p){void 0!==r.onError&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,m){return d.push(p,m),this},this.removeHandler=function(p){const m=d.indexOf(p);return-1!==m&&d.splice(m,2),this},this.getHandler=function(p){for(let m=0,y=d.length;m<y;m+=2){const v=d[m],E=d[m+1];if(v.global&&(v.lastIndex=0),v.test(p))return E}return null}}}const Fpe=new sz;let Ra=(()=>{class n{constructor(t){this.manager=void 0!==t?t:Fpe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();Error;class gx extends Ra{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=lu.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=Rg("img");function c(){p(),lu.add(e,this),t&&t(this),o.manager.itemEnd(e)}function d(m){p(),r&&r(m),o.manager.itemError(e),o.manager.itemEnd(e)}function p(){a.removeEventListener("load",c,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",d,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class Upe extends Ra{constructor(e){super(e)}load(e,t,i,r){const o=new Us,s=new gx(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,void 0!==t&&t(o)},i,r),o}}class Md extends Fr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new wn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class uz extends Md{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}const fC="\\[\\]\\.:\\/",ime=new RegExp("["+fC+"]","g"),pC="[^"+fC+"]",rme="[^"+fC.replace("\\.","")+"]",cme=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",pC)+/(WCOD+)?/.source.replace("WCOD",rme)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pC)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pC)+"$"),ume=["material","materials","bones","map"];class dme{constructor(e,t,i){const r=i||Ir.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let Ir=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(ime,"")}static parseTrackName(t){const i=cme.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=r.nodeName.substring(o+1);-1!==ume.indexOf(s)&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(s){for(let a=0;a<s.length;a++){const c=s[a];if(c.name===i||c.uuid===i)return c;const d=r(c.children);if(d)return d}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,o=i.propertyName;let s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let p=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let m=0;m<t.length;m++)if(t[m].name===p){p=m;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==p){if(void 0===t[p])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[p]}}const a=t[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+o+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=dme,n})();Ir.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ir.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ir.prototype.GetterByBindingType=[Ir.prototype._getValue_direct,Ir.prototype._getValue_array,Ir.prototype._getValue_arrayElement,Ir.prototype._getValue_toArray],Ir.prototype.SetterByBindingTypeAndVersioning=[[Ir.prototype._setValue_direct,Ir.prototype._setValue_direct_setNeedsUpdate,Ir.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ir.prototype._setValue_array,Ir.prototype._setValue_array_setNeedsUpdate,Ir.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ir.prototype._setValue_arrayElement,Ir.prototype._setValue_arrayElement_setNeedsUpdate,Ir.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ir.prototype._setValue_fromArray,Ir.prototype._setValue_fromArray_setNeedsUpdate,Ir.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class Ez{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(zr(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"165"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="165");const Oz={type:"change"},bC={type:"start"},kz={type:"end"},Sx=new Lf,Nz=new ou,gme=Math.cos(70*qle_DEG2RAD);class _me extends ic{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new xe,this.cursor=new xe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(ne){ne.addEventListener("keydown",an),this._domElementKeyEvents=ne},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",an),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Oz),i.update(),o=r.NONE},this.update=function(){const ne=new xe,bt=(new hs).setFromUnitVectors(e.up,new xe(0,1,0)),et=bt.clone().invert(),wt=new xe,Gt=new hs,Hn=new xe,di=2*Math.PI;return function(po=null){const nr=i.object.position;ne.copy(nr).sub(i.target),ne.applyQuaternion(bt),a.setFromVector3(ne),i.autoRotate&&o===r.NONE&&$e(function ie(ne){return null!==ne?2*Math.PI/60*i.autoRotateSpeed*ne:2*Math.PI/60/60*i.autoRotateSpeed}(po)),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let mo=i.minAzimuthAngle,go=i.maxAzimuthAngle;isFinite(mo)&&isFinite(go)&&(mo<-Math.PI?mo+=di:mo>Math.PI&&(mo-=di),go<-Math.PI?go+=di:go>Math.PI&&(go-=di),a.theta=mo<=go?Math.max(mo,Math.min(go,a.theta)):a.theta>(mo+go)/2?Math.max(mo,a.theta):Math.min(go,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(p,i.dampingFactor):i.target.add(p),i.target.sub(i.cursor),i.target.clampLength(i.minTargetRadius,i.maxTargetRadius),i.target.add(i.cursor);let fa=!1;if(i.zoomToCursor&&te||i.object.isOrthographicCamera)a.radius=Vt(a.radius);else{const pa=a.radius;a.radius=Vt(a.radius*d),fa=pa!=a.radius}if(ne.setFromSpherical(a),ne.applyQuaternion(et),nr.copy(i.target).add(ne),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,p.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),p.set(0,0,0)),i.zoomToCursor&&te){let pa=null;if(i.object.isPerspectiveCamera){const bu=ne.length();pa=Vt(bu*d);const Hd=bu-pa;i.object.position.addScaledVector(Y,Hd),i.object.updateMatrixWorld(),fa=!!Hd}else if(i.object.isOrthographicCamera){const bu=new xe(he.x,he.y,0);bu.unproject(i.object);const Hd=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),i.object.updateProjectionMatrix(),fa=Hd!==i.object.zoom;const Gd=new xe(he.x,he.y,0);Gd.unproject(i.object),i.object.position.sub(Gd).add(bu),i.object.updateMatrixWorld(),pa=ne.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==pa&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(pa).add(i.object.position):(Sx.origin.copy(i.object.position),Sx.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Sx.direction))<gme?e.lookAt(i.target):(Nz.setFromNormalAndCoplanarPoint(i.object.up,i.target),Sx.intersectPlane(Nz,i.target))))}else if(i.object.isOrthographicCamera){const pa=i.object.zoom;i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/d)),pa!==i.object.zoom&&(i.object.updateProjectionMatrix(),fa=!0)}return d=1,te=!1,!!(fa||wt.distanceToSquared(i.object.position)>s||8*(1-Gt.dot(i.object.quaternion))>s||Hn.distanceToSquared(i.target)>s)&&(i.dispatchEvent(Oz),wt.copy(i.object.position),Gt.copy(i.object.quaternion),Hn.copy(i.target),!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",An),i.domElement.removeEventListener("pointerdown",si),i.domElement.removeEventListener("pointercancel",ue),i.domElement.removeEventListener("wheel",Lt),i.domElement.removeEventListener("pointermove",Se),i.domElement.removeEventListener("pointerup",ue),i.domElement.getRootNode().removeEventListener("keydown",Vn,{capture:!0}),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",an),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=r.NONE;const s=1e-6,a=new Ez,c=new Ez;let d=1;const p=new xe,m=new It,y=new It,v=new It,E=new It,I=new It,D=new It,R=new It,j=new It,H=new It,Y=new xe,he=new It;let te=!1;const re=[],be={};let se=!1;function Ee(ne){const bt=Math.abs(.01*ne);return Math.pow(.95,i.zoomSpeed*bt)}function $e(ne){c.theta-=ne}function He(ne){c.phi-=ne}const Ge=function(){const ne=new xe;return function(et,wt){ne.setFromMatrixColumn(wt,0),ne.multiplyScalar(-et),p.add(ne)}}(),Ie=function(){const ne=new xe;return function(et,wt){!0===i.screenSpacePanning?ne.setFromMatrixColumn(wt,1):(ne.setFromMatrixColumn(wt,0),ne.crossVectors(i.object.up,ne)),ne.multiplyScalar(et),p.add(ne)}}(),ye=function(){const ne=new xe;return function(et,wt){const Gt=i.domElement;if(i.object.isPerspectiveCamera){ne.copy(i.object.position).sub(i.target);let di=ne.length();di*=Math.tan(i.object.fov/2*Math.PI/180),Ge(2*et*di/Gt.clientHeight,i.object.matrix),Ie(2*wt*di/Gt.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(Ge(et*(i.object.right-i.object.left)/i.object.zoom/Gt.clientWidth,i.object.matrix),Ie(wt*(i.object.top-i.object.bottom)/i.object.zoom/Gt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function De(ne){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?d/=ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Fe(ne){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?d*=ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function at(ne,bt){if(!i.zoomToCursor)return;te=!0;const et=i.domElement.getBoundingClientRect(),Gt=bt-et.top,di=et.height;he.x=(ne-et.left)/et.width*2-1,he.y=-Gt/di*2+1,Y.set(he.x,he.y,1).unproject(i.object).sub(i.object.position).normalize()}function Vt(ne){return Math.max(i.minDistance,Math.min(i.maxDistance,ne))}function jt(ne){m.set(ne.clientX,ne.clientY)}function Zn(ne){E.set(ne.clientX,ne.clientY)}function Tn(ne){if(1===re.length)m.set(ne.pageX,ne.pageY);else{const bt=vi(ne);m.set(.5*(ne.pageX+bt.x),.5*(ne.pageY+bt.y))}}function Bn(ne){if(1===re.length)E.set(ne.pageX,ne.pageY);else{const bt=vi(ne);E.set(.5*(ne.pageX+bt.x),.5*(ne.pageY+bt.y))}}function Oe(ne){const bt=vi(ne),et=ne.pageX-bt.x,wt=ne.pageY-bt.y,Gt=Math.sqrt(et*et+wt*wt);R.set(0,Gt)}function Kt(ne){if(1==re.length)y.set(ne.pageX,ne.pageY);else{const et=vi(ne);y.set(.5*(ne.pageX+et.x),.5*(ne.pageY+et.y))}v.subVectors(y,m).multiplyScalar(i.rotateSpeed);const bt=i.domElement;$e(2*Math.PI*v.x/bt.clientHeight),He(2*Math.PI*v.y/bt.clientHeight),m.copy(y)}function $t(ne){if(1===re.length)I.set(ne.pageX,ne.pageY);else{const bt=vi(ne);I.set(.5*(ne.pageX+bt.x),.5*(ne.pageY+bt.y))}D.subVectors(I,E).multiplyScalar(i.panSpeed),ye(D.x,D.y),E.copy(I)}function Xt(ne){const bt=vi(ne),et=ne.pageX-bt.x,wt=ne.pageY-bt.y,Gt=Math.sqrt(et*et+wt*wt);j.set(0,Gt),H.set(0,Math.pow(j.y/R.y,i.zoomSpeed)),De(H.y),R.copy(j),at(.5*(ne.pageX+bt.x),.5*(ne.pageY+bt.y))}function si(ne){!1!==i.enabled&&(0===re.length&&(i.domElement.setPointerCapture(ne.pointerId),i.domElement.addEventListener("pointermove",Se),i.domElement.addEventListener("pointerup",ue)),!function _n(ne){for(let bt=0;bt<re.length;bt++)if(re[bt]==ne.pointerId)return!0;return!1}(ne)&&(function Fi(ne){re.push(ne.pointerId)}(ne),"touch"===ne.pointerType?ui(ne):function ct(ne){let bt;switch(ne.button){case 0:bt=i.mouseButtons.LEFT;break;case 1:bt=i.mouseButtons.MIDDLE;break;case 2:bt=i.mouseButtons.RIGHT;break;default:bt=-1}switch(bt){case 1:if(!1===i.enableZoom)return;(function In(ne){at(ne.clientX,ne.clientX),R.set(ne.clientX,ne.clientY)})(ne),o=r.DOLLY;break;case 0:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(!1===i.enablePan)return;Zn(ne),o=r.PAN}else{if(!1===i.enableRotate)return;jt(ne),o=r.ROTATE}break;case 2:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(!1===i.enableRotate)return;jt(ne),o=r.ROTATE}else{if(!1===i.enablePan)return;Zn(ne),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(bC)}(ne)))}function Se(ne){!1!==i.enabled&&("touch"===ne.pointerType?function Qt(ne){switch(yi(ne),o){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Kt(ne),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;$t(ne),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function mn(ne){i.enableZoom&&Xt(ne),i.enablePan&&$t(ne)})(ne),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function gn(ne){i.enableZoom&&Xt(ne),i.enableRotate&&Kt(ne)})(ne),i.update();break;default:o=r.NONE}}(ne):function Ut(ne){switch(o){case r.ROTATE:if(!1===i.enableRotate)return;!function st(ne){y.set(ne.clientX,ne.clientY),v.subVectors(y,m).multiplyScalar(i.rotateSpeed);const bt=i.domElement;$e(2*Math.PI*v.x/bt.clientHeight),He(2*Math.PI*v.y/bt.clientHeight),m.copy(y),i.update()}(ne);break;case r.DOLLY:if(!1===i.enableZoom)return;!function qt(ne){j.set(ne.clientX,ne.clientY),H.subVectors(j,R),H.y>0?De(Ee(H.y)):H.y<0&&Fe(Ee(H.y)),R.copy(j),i.update()}(ne);break;case r.PAN:if(!1===i.enablePan)return;!function un(ne){I.set(ne.clientX,ne.clientY),D.subVectors(I,E).multiplyScalar(i.panSpeed),ye(D.x,D.y),E.copy(I),i.update()}(ne)}}(ne))}function ue(ne){switch(function oi(ne){delete be[ne.pointerId];for(let bt=0;bt<re.length;bt++)if(re[bt]==ne.pointerId)return void re.splice(bt,1)}(ne),re.length){case 0:i.domElement.releasePointerCapture(ne.pointerId),i.domElement.removeEventListener("pointermove",Se),i.domElement.removeEventListener("pointerup",ue),i.dispatchEvent(kz),o=r.NONE;break;case 1:const bt=re[0],et=be[bt];ui({pointerId:bt,pageX:et.x,pageY:et.y})}}function Lt(ne){!1===i.enabled||!1===i.enableZoom||o!==r.NONE||(ne.preventDefault(),i.dispatchEvent(bC),function Nt(ne){at(ne.clientX,ne.clientY),ne.deltaY<0?Fe(Ee(ne.deltaY)):ne.deltaY>0&&De(Ee(ne.deltaY)),i.update()}(function Ht(ne){const et={clientX:ne.clientX,clientY:ne.clientY,deltaY:ne.deltaY};switch(ne.deltaMode){case 1:et.deltaY*=16;break;case 2:et.deltaY*=100}return ne.ctrlKey&&!se&&(et.deltaY*=10),et}(ne)),i.dispatchEvent(kz))}function Vn(ne){"Control"===ne.key&&(se=!0,i.domElement.getRootNode().addEventListener("keyup",sn,{passive:!0,capture:!0}))}function sn(ne){"Control"===ne.key&&(se=!1,i.domElement.getRootNode().removeEventListener("keyup",sn,{passive:!0,capture:!0}))}function an(ne){!1===i.enabled||!1===i.enablePan||function Pn(ne){let bt=!1;switch(ne.code){case i.keys.UP:ne.ctrlKey||ne.metaKey||ne.shiftKey?He(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ye(0,i.keyPanSpeed),bt=!0;break;case i.keys.BOTTOM:ne.ctrlKey||ne.metaKey||ne.shiftKey?He(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ye(0,-i.keyPanSpeed),bt=!0;break;case i.keys.LEFT:ne.ctrlKey||ne.metaKey||ne.shiftKey?$e(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ye(i.keyPanSpeed,0),bt=!0;break;case i.keys.RIGHT:ne.ctrlKey||ne.metaKey||ne.shiftKey?$e(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):ye(-i.keyPanSpeed,0),bt=!0}bt&&(ne.preventDefault(),i.update())}(ne)}function ui(ne){switch(yi(ne),re.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;Tn(ne),o=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;Bn(ne),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function kt(ne){i.enableZoom&&Oe(ne),i.enablePan&&Bn(ne)})(ne),o=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Ft(ne){i.enableZoom&&Oe(ne),i.enableRotate&&Tn(ne)})(ne),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(bC)}function An(ne){!1!==i.enabled&&ne.preventDefault()}function yi(ne){let bt=be[ne.pointerId];void 0===bt&&(bt=new It,be[ne.pointerId]=bt),bt.set(ne.pageX,ne.pageY)}function vi(ne){return be[ne.pointerId===re[0]?re[1]:re[0]]}i.domElement.addEventListener("contextmenu",An),i.domElement.addEventListener("pointerdown",si),i.domElement.addEventListener("pointercancel",ue),i.domElement.addEventListener("wheel",Lt,{passive:!1}),i.domElement.getRootNode().addEventListener("keydown",Vn,{passive:!0,capture:!0}),this.update()}}function hp(n,e){n&&n(e)}function Fz(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const ca=class{constructor(){let n=function(...e){return n._call(...e)};return Object.setPrototypeOf(n,new.target.prototype)}_call(...n){throw Error("Must implement _call method in subclass")}};function Lz(n){return Number.isInteger(n)||"bigint"==typeof n}function Uz(n){const e=[];let t=n;for(;Array.isArray(t);)e.push(t.length),t=t[0];return e}function Bz(n,e,t=void 0){const i=n[e];if(void 0!==i)return delete n[e],i;if(void 0===t)throw Error(`Key ${e} does not exist in object.`);return t}function Bo(...n){return Array.prototype.concat.apply([],n)}function xme(...n){return n.reduce((e,t)=>e.flatMap(i=>t.map(r=>[i,r])))}function Tx(n,e){return Math.abs((n+e)%(2*e)-e)}var Pd=q(143),yC=q(603),wme=q(9),fp=q(837),Eme=q(499),Vz=q(52),Sme=q.t(Vz,2),zz=q(941),Tme=q.t(zz,2);let pp;const Mx=["wasm"];typeof process<"u"&&"node"===process?.release?.name?(pp=Vz??Sme,Mx.unshift("cpu")):(pp=zz??Tme,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(pp.env.wasm.simd=!1));const{env:vC}=pp,Mme=typeof self<"u"&&"caches"in self,xC=!Hz(wme),Ame=!Hz(fp),Ax=xC&&Ame,Cx=Ax?fp.dirname(fp.dirname(Eme.fileURLToPath("file:///home/runner/work/depth-angular/depth-angular/node_modules/@xenova/transformers/src/env.js"))):"./",Cme=Ax?fp.join(Cx,"/.cache/"):null,$z="/models/",Ime=Ax?fp.join(Cx,$z):$z;vC?.wasm&&(vC.wasm.wasmPaths=Ax?fp.join(Cx,"/dist/"):"https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.2/dist/");const to={backends:{onnx:vC,tfjs:{}},__dirname:Cx,version:"2.17.2",allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath:Ime,useFS:xC,useBrowserCache:Mme,useFSCache:xC,cacheDir:Cme,useCustomCache:!1,customCache:null};function Hz(n){return 0===Object.keys(n).length}class Ix{_CONTENT_TYPE_MAP={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};constructor(e){if(this.filePath=e,this.headers=new Headers,this.exists=Pd.existsSync(e),this.exists){this.status=200,this.statusText="OK";let t=Pd.statSync(e);this.headers.set("content-length",t.size.toString()),this.updateContentType();let i=this;this.body=new ReadableStream({start(r){i.arrayBuffer().then(o=>{r.enqueue(new Uint8Array(o)),r.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new Ix(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}arrayBuffer(){var e=this;return(0,ke.A)(function*(){return(yield Pd.promises.readFile(e.filePath)).buffer})()}blob(){var e=this;return(0,ke.A)(function*(){const t=yield Pd.promises.readFile(e.filePath);return new Blob([t],{type:e.headers.get("content-type")})})()}text(){var e=this;return(0,ke.A)(function*(){return yield Pd.promises.readFile(e.filePath,"utf8")})()}json(){var e=this;return(0,ke.A)(function*(){return JSON.parse(yield e.text())})()}}function wC(n,e=null,t=null){let i;try{i=new URL(n)}catch{return!1}return!(e&&!e.includes(i.protocol)||t&&!t.includes(i.hostname))}function Dx(n){return EC.apply(this,arguments)}function EC(){return(EC=(0,ke.A)(function*(n){if(to.useFS&&!wC(n,["http:","https:","blob:"]))return new Ix(n);if(typeof process<"u"&&"node"===process?.release?.name){const e=!!process.env?.TESTING_REMOTELY,t=to.version,i=new Headers;if(i.set("User-Agent",`transformers.js/${t}; is_ci/${e};`),wC(n,["http:","https:"],["huggingface.co","hf.co"])){const o=process.env?.HF_TOKEN??process.env?.HF_ACCESS_TOKEN;o&&i.set("Authorization",`Bearer ${o}`)}return fetch(n,{headers:i})}return fetch(n)})).apply(this,arguments)}const Dme={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};class Gz{constructor(e){this.path=e}match(e){var t=this;return(0,ke.A)(function*(){let i=yC.join(t.path,e),r=new Ix(i);if(r.exists)return r})()}put(e,t){var i=this;return(0,ke.A)(function*(){const r=Buffer.from(yield t.arrayBuffer());let o=yC.join(i.path,e);try{yield Pd.promises.mkdir(yC.dirname(o),{recursive:!0}),yield Pd.promises.writeFile(o,r)}catch(s){console.warn("An error occurred while writing the file to cache:",s)}})()}}function SC(){return(SC=(0,ke.A)(function*(n,...e){for(let t of e)try{let i=yield n.match(t);if(i)return i}catch{continue}})).apply(this,arguments)}function Wz(n,e){return TC.apply(this,arguments)}function TC(){return TC=(0,ke.A)(function*(n,e,t=!0,i={}){if(!to.allowLocalModels){if(i.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!to.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}let r;if(hp(i.progress_callback,{status:"initiate",name:n,file:e}),!r&&to.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{r=yield caches.open("transformers-cache")}catch(R){console.warn("An error occurred while opening the browser cache:",R)}}if(!r&&to.useFSCache&&(r=new Gz(i.cache_dir??to.cacheDir)),!r&&to.useCustomCache){if(!to.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!to.customCache.match||!to.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");r=to.customCache}const o=i.revision??"main";let p,v,s=Rx(n,e),a=Rx(to.localModelPath,s),c=Rx(to.remoteHost,to.remotePathTemplate.replaceAll("{model}",n).replaceAll("{revision}",encodeURIComponent(o)),e),d="main"===o?s:Rx(n,o,e),m=r instanceof Gz?d:c,y=!1;r&&(v=yield function Pme(n){return SC.apply(this,arguments)}(r,a,m));const E=void 0!==v;if(void 0===v){if(to.allowLocalModels)if(wC(s,["http:","https:"])){if(i.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${s}.`);if(!to.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${s}.`)}else try{v=yield Dx(a),p=a}catch(j){console.warn(`Unable to load from local path "${a}": "${j}"`)}if(void 0===v||404===v.status){if(i.local_files_only||!to.allowRemoteModels){if(t)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${a}".`);return null}if(v=yield Dx(c),200!==v.status)return function Rme(n,e,t){if(!t)return null;throw Error(`${Dme[n]??`Error (${n}) occurred while trying to load file`}: "${e}".`)}(v.status,c,t);p=m}y=r&&typeof Response<"u"&&v instanceof Response&&200===v.status}hp(i.progress_callback,{status:"download",name:n,file:e});const I={status:"progress",name:n,file:e};let D;return i.progress_callback?E&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(D=new Uint8Array(yield v.arrayBuffer()),hp(i.progress_callback,{...I,progress:100,loaded:D.length,total:D.length})):D=yield function Ome(n,e){return AC.apply(this,arguments)}(v,R=>{hp(i.progress_callback,{...I,...R})}):D=new Uint8Array(yield v.arrayBuffer()),y&&p&&void 0===(yield r.match(p))&&(yield r.put(p,new Response(D,{headers:v.headers})).catch(R=>{console.warn(`Unable to add response to browser cache: ${R}.`)})),hp(i.progress_callback,{status:"done",name:n,file:e}),D}),TC.apply(this,arguments)}function mp(n,e){return MC.apply(this,arguments)}function MC(){return(MC=(0,ke.A)(function*(n,e,t=!0,i={}){let r=yield Wz(n,e,t,i);if(null===r)return{};let s=new TextDecoder("utf-8").decode(r);return JSON.parse(s)})).apply(this,arguments)}function AC(){return AC=(0,ke.A)(function*(n,e){const t=n.headers.get("Content-Length");null===t&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let i=parseInt(t??"0"),r=new Uint8Array(i),o=0;const s=n.body.getReader();function a(){return c.apply(this,arguments)}function c(){return(c=(0,ke.A)(function*(){const{done:d,value:p}=yield s.read();if(d)return;let m=o+p.length;if(m>i){i=m;let v=new Uint8Array(i);v.set(r),r=v}return r.set(p,o),o=m,e({progress:o/i*100,loaded:o,total:i}),a()})).apply(this,arguments)}return yield a(),r}),AC.apply(this,arguments)}function Rx(...n){return(n=n.map((e,t)=>(t&&(e=e.replace(new RegExp("^/"),"")),t!==n.length-1&&(e=e.replace(new RegExp("/$"),"")),e))).join("/")}function Yo(n){const e=Pa(n)[0],t=n.map(o=>Math.exp(o-e)),i=t.reduce((o,s)=>o+s,0);return t.map(o=>o/i)}function gp(n,e=0){return n=Array.from(n).map((t,i)=>[i,t]).sort((t,i)=>i[1]-t[1]),null!==e&&e>0&&(n=n.slice(0,e)),n}function Xz(n){if(0===n.length)throw Error("Array must not be empty");let e=n[0],t=0;for(let i=1;i<n.length;++i)n[i]<e&&(e=n[i],t=i);return[e,t]}function Pa(n){if(0===n.length)throw Error("Array must not be empty");let e=n[0],t=0;for(let i=1;i<n.length;++i)n[i]>e&&(e=n[i],t=i);return[Number(e),t]}function Yz(n){return n>0&&!(n&n-1)}class Kz{constructor(e){if(this.size=0|e,this.size<=1||!Yz(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(2*this.size);for(let i=0;i<this.table.length;i+=2){const r=Math.PI*i/this.size;this.table[i]=Math.cos(r),this.table[i+1]=-Math.sin(r)}let t=0;for(let i=1;this.size>i;i<<=1)++t;this._width=t%2==0?t-1:t,this._bitrev=new Int32Array(1<<this._width);for(let i=0;i<this._bitrev.length;++i){this._bitrev[i]=0;for(let r=0;r<this._width;r+=2)this._bitrev[i]|=(i>>>r&3)<<this._width-r-2}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,t){const i=t||new Array(e.length>>>1);for(let r=0;r<e.length;r+=2)i[r>>>1]=e[r];return i}toComplexArray(e,t){const i=t||this.createComplexArray();for(let r=0;r<i.length;r+=2)i[r]=e[r>>>1],i[r+1]=0;return i}transform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,1)}realTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._realTransform4(e,t,1)}inverseTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,-1);for(let i=0;i<e.length;++i)e[i]/=this.size}_transform4(e,t,i){const r=this._csize;let c,d,s=1<<this._width,a=r/s<<1;const p=this._bitrev;if(4===a)for(c=0,d=0;c<r;c+=a,++d)this._singleTransform2(t,e,c,p[d],s);else for(c=0,d=0;c<r;c+=a,++d)this._singleTransform4(t,e,c,p[d],s,i);const m=this.table;for(s>>=2;s>=2;s>>=2){a=r/s<<1;const y=a>>>2;for(c=0;c<r;c+=a){const v=c+y-1;for(let E=c,I=0;E<v;E+=2,I+=s){const D=E,R=D+y,j=R+y,H=j+y,Y=e[D],he=e[D+1],te=e[R],re=e[R+1],be=e[j],se=e[j+1],ie=e[H],Ee=e[H+1],$e=m[I],He=i*m[I+1],Ge=te*$e-re*He,Ie=te*He+re*$e,ye=m[2*I],De=i*m[2*I+1],Fe=be*ye-se*De,at=be*De+se*ye,Vt=m[3*I],jt=i*m[3*I+1],In=ie*Vt-Ee*jt,Zn=ie*jt+Ee*Vt,st=Y+Fe,qt=he+at,un=Y-Fe,Nt=he-at,Pn=Ge+In,Tn=Ie+Zn,Bn=i*(Ge-In),Oe=i*(Ie-Zn);e[D]=st+Pn,e[D+1]=qt+Tn,e[R]=un+Oe,e[R+1]=Nt-Bn,e[j]=st-Pn,e[j+1]=qt-Tn,e[H]=un-Oe,e[H+1]=Nt+Bn}}}}_singleTransform2(e,t,i,r,o){const s=e[r],a=e[r+1],c=e[r+o],d=e[r+o+1];t[i]=s+c,t[i+1]=a+d,t[i+2]=s-c,t[i+3]=a-d}_singleTransform4(e,t,i,r,o,s){const a=2*o,c=3*o,d=e[r],p=e[r+1],m=e[r+o],y=e[r+o+1],v=e[r+a],E=e[r+a+1],I=e[r+c],D=e[r+c+1],R=d+v,j=p+E,H=d-v,Y=p-E,he=m+I,te=y+D,re=s*(m-I),be=s*(y-D);t[i]=R+he,t[i+1]=j+te,t[i+2]=H+be,t[i+3]=Y-re,t[i+4]=R-he,t[i+5]=j-te,t[i+6]=H-be,t[i+7]=Y+re}_realTransform4(e,t,i){const r=this._csize;let c,d,s=1<<this._width,a=r/s<<1;const p=this._bitrev;if(4===a)for(c=0,d=0;c<r;c+=a,++d)this._singleRealTransform2(t,e,c,p[d]>>>1,s>>>1);else for(c=0,d=0;c<r;c+=a,++d)this._singleRealTransform4(t,e,c,p[d]>>>1,s>>>1,i);const m=this.table;for(s>>=2;s>=2;s>>=2){a=r/s<<1;const v=a>>>1,E=v>>>1,I=E>>>1;for(c=0;c<r;c+=a)for(let D=0,R=0;D<=I;D+=2,R+=s){const j=c+D,H=j+E,Y=H+E,he=Y+E,te=e[j],re=e[j+1],be=e[H],se=e[H+1],ie=e[Y],Ee=e[Y+1],$e=e[he],He=e[he+1],ye=m[R],De=i*m[R+1],Fe=be*ye-se*De,at=be*De+se*ye,Vt=m[2*R],jt=i*m[2*R+1],In=ie*Vt-Ee*jt,Zn=ie*jt+Ee*Vt,st=m[3*R],qt=i*m[3*R+1],un=$e*st-He*qt,Nt=$e*qt+He*st,Pn=te+In,Tn=re+Zn,Bn=te-In,Oe=re-Zn,kt=Fe+un,Ft=at+Nt,Kt=i*(Fe-un),$t=i*(at-Nt);if(e[j]=Pn+kt,e[j+1]=Tn+Ft,e[H]=Bn+$t,e[H+1]=Oe-Kt,0===D){e[Y]=Pn-kt,e[Y+1]=Tn-Ft;continue}if(D===I)continue;const Xt=c+E-D,mn=c+v-D;e[Xt]=Bn-i*$t,e[Xt+1]=-Oe-i*Kt,e[mn]=Pn-i*kt,e[mn+1]=i*Ft-Tn}}const y=r>>>1;for(let v=2;v<y;v+=2)e[r-v]=e[v],e[r-v+1]=-e[v+1]}_singleRealTransform2(e,t,i,r,o){const s=e[r],a=e[r+o];t[i]=s+a,t[i+1]=0,t[i+2]=s-a,t[i+3]=0}_singleRealTransform4(e,t,i,r,o,s){const d=e[r],p=e[r+o],m=e[r+2*o],y=e[r+3*o],v=d+m,E=d-m,I=p+y,D=s*(p-y);t[i]=v+I,t[i+1]=0,t[i+2]=E,t[i+3]=-D,t[i+4]=v-I,t[i+5]=0,t[i+6]=E,t[i+7]=D}}class Ume{constructor(e){const t=2*(e-1),i=2*(2*e-1),r=2**Math.ceil(Math.log2(i));this.bufferSize=r,this._a=t;const o=new Float64Array(i),s=new Float64Array(r);this._chirpBuffer=new Float64Array(r),this._buffer1=new Float64Array(r),this._buffer2=new Float64Array(r),this._outBuffer1=new Float64Array(r),this._outBuffer2=new Float64Array(r);const a=-2*Math.PI/e,c=Math.cos(a),d=Math.sin(a);for(let p=0;p<i>>1;++p){const m=(p+1-e)**2/2,y=Math.sqrt(c**2+d**2)**m,v=m*Math.atan2(d,c),E=2*p;o[E]=y*Math.cos(v),o[E+1]=y*Math.sin(v),s[E]=o[E],s[E+1]=-o[E+1]}this._slicedChirpBuffer=o.subarray(t,i),this._f=new Kz(r>>1),this._f.transform(this._chirpBuffer,s)}_transform(e,t,i){const r=this._buffer1,o=this._buffer2,s=this._outBuffer1,a=this._outBuffer2,c=this._chirpBuffer,d=this._slicedChirpBuffer,p=this._a;if(i)for(let m=0;m<d.length;m+=2){const y=m+1,E=t[m>>1];r[m]=E*d[m],r[y]=E*d[y]}else for(let m=0;m<d.length;m+=2){const y=m+1;r[m]=t[m]*d[m]-t[y]*d[y],r[y]=t[m]*d[y]+t[y]*d[m]}this._f.transform(s,r);for(let m=0;m<c.length;m+=2){const y=m+1;o[m]=s[m]*c[m]-s[y]*c[y],o[y]=s[m]*c[y]+s[y]*c[m]}this._f.inverseTransform(a,o);for(let m=0;m<a.length;m+=2){const y=a[m+p],v=a[m+p+1],E=d[m],I=d[m+1];e[m]=y*E-v*I,e[m+1]=y*I+v*E}}transform(e,t){this._transform(e,t,!1)}realTransform(e,t){this._transform(e,t,!0)}}class Bme{constructor(e){this.fft_length=e,this.isPowerOfTwo=Yz(e),this.isPowerOfTwo?(this.fft=new Kz(e),this.outputBufferSize=2*e):(this.fft=new Ume(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,t){this.fft.realTransform(e,t)}transform(e,t){this.fft.transform(e,t)}}function Vme(n,e){if(e%2==0||e<=0)throw new Error("Window size must be a positive odd number");const t=new n.constructor(n.length),i=new n.constructor(e),r=Math.floor(e/2);for(let o=0;o<n.length;++o){let s=0;for(let a=-r;a<=r;++a){let c=o+a;c<0?c=Math.abs(c):c>=n.length&&(c=2*(n.length-1)-c),i[s++]=n[c]}i.sort(),t[o]=i[r]}return t}function e_(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}const Zz=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),Qz=pp.Tensor;class cn{dims;type;data;size;constructor(...e){return Object.assign(this,e[0]instanceof Qz?e[0]:new Qz(e[0],e[1],e[2])),new Proxy(this,{get:(t,i)=>{if("string"==typeof i){let r=Number(i);if(Number.isInteger(r))return t._getitem(r)}return t[i]},set:(t,i,r)=>t[i]=r})}*[Symbol.iterator](){const[e,...t]=this.dims;if(t.length>0){const i=t.reduce((r,o)=>r*o);for(let r=0;r<e;++r)yield this._subarray(r,i,t)}else yield*this.data}_getitem(e){const[t,...i]=this.dims;if(e=du(e,t),i.length>0){const r=i.reduce((o,s)=>o*s);return this._subarray(e,r,i)}return new cn(this.type,[this.data[e]],i)}indexOf(e){for(let t=0;t<this.data.length;++t)if(this.data[t]==e)return t;return-1}_subarray(e,t,i){const r=e*t,o=(e+1)*t,s="subarray"in this.data?this.data.subarray(r,o):this.data.slice(r,o);return new cn(this.type,s,i)}item(){if(1!==this.data.length)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return function jme(n,e){const t=n.length;if(t!==e.reduce((o,s)=>o*s))throw Error(`cannot reshape array of size ${t} into shape (${e})`);let r=n;for(let o=e.length-1;o>=0;o--)r=r.reduce((s,a)=>{let c=s[s.length-1];return c.length<e[o]?c.push(a):s.push([a]),s},[[]]);return r[0]}(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let t=0;t<this.data.length;++t)this.data[t]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let t=0;t<this.data.length;++t)this.data[t]+=e;return this}clone(){return new cn(this.type,this.data.slice(),this.dims.slice())}slice(...e){let t=[],i=[];for(let c=0;c<this.dims.length;++c){let d=e[c];if(null==d)i.push([0,this.dims[c]]),t.push(this.dims[c]);else if("number"==typeof d)d=du(d,this.dims[c],c),i.push([d,d+1]);else{if(!Array.isArray(d)||2!==d.length)throw new Error(`Invalid slice: ${d}`);{if(d[0]>d[1])throw new Error(`Invalid slice: ${d}`);let p=[Math.max(d[0],0),Math.min(d[1],this.dims[c])];i.push(p),t.push(p[1]-p[0])}}}let r=i.map(([c,d])=>d-c),o=r.reduce((c,d)=>c*d),s=new this.data.constructor(o);const a=this.stride();for(let c=0;c<o;++c){let d=0;for(let p=r.length-1,m=c;p>=0;--p){const y=r[p];d+=(m%y+i[p][0])*a[p],m=Math.floor(m/y)}s[c]=this.data[d]}return new cn(this.type,s,t)}permute(...e){return function $me(n,e){const[t,i]=function Nme(n,e,t){const i=new Array(t.length),r=new Array(t.length);for(let a=t.length-1,c=1;a>=0;--a)r[a]=c,i[a]=e[t[a]],c*=i[a];const o=t.map((a,c)=>r[t.indexOf(c)]),s=new n.constructor(n.length);for(let a=0;a<n.length;++a){let c=0;for(let d=e.length-1,p=a;d>=0;--d)c+=p%e[d]*o[d],p=Math.floor(p/e[d]);s[c]=n[a]}return[s,i]}(n.data,n.dims,e);return new cn(n.type,t,i)}(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,t=!1){return this.norm(1,e,t)}norm(e="fro",t=null,i=!1){if("fro"===e)e=2;else if("string"==typeof e)throw Error(`Unsupported norm: ${e}`);if(null===t){let s=this.data.reduce((a,c)=>a+c**e,0)**(1/e);return new cn(this.type,[s],[])}t=du(t,this.dims.length);const r=this.dims.slice();r[t]=1;const o=new this.data.constructor(this.data.length/this.dims[t]);for(let s=0;s<this.data.length;++s){let a=0;for(let c=this.dims.length-1,d=s,p=1;c>=0;--c){const m=this.dims[c];c!==t&&(a+=d%m*p,p*=r[c]),d=Math.floor(d/m)}o[a]+=this.data[s]**e}if(1!==e)for(let s=0;s<o.length;++s)o[s]=o[s]**(1/e);return i||r.splice(t,1),new cn(this.type,o,r)}normalize_(e=2,t=1){t=du(t,this.dims.length);const i=this.norm(e,t,!0);for(let r=0;r<this.data.length;++r){let o=0;for(let s=this.dims.length-1,a=r,c=1;s>=0;--s){const d=this.dims[s];s!==t&&(o+=a%d*c,c*=this.dims[s]),a=Math.floor(a/d)}this.data[r]/=i.data[o]}return this}normalize(e=2,t=1){return this.clone().normalize_(e,t)}stride(){return function Wme(n){const e=new Array(n.length);for(let t=n.length-1,i=1;t>=0;--t)e[t]=i,i*=n[t];return e}(this.dims)}squeeze(e=null){return new cn(this.type,this.data,Jz(this.dims,e))}squeeze_(e=null){return this.dims=Jz(this.dims,e),this}unsqueeze(e=null){return new cn(this.type,this.data,e5(this.dims,e))}unsqueeze_(e=null){return this.dims=e5(this.dims,e),this}flatten_(e=0,t=-1){t=(t+this.dims.length)%this.dims.length;let i=this.dims.slice(0,e),r=this.dims.slice(e,t+1),o=this.dims.slice(t+1);return this.dims=[...i,r.reduce((s,a)=>s*a,1),...o],this}flatten(e=0,t=-1){return this.clone().flatten_(e,t)}view(...e){let t=-1;for(let i=0;i<e.length;++i)if(-1===e[i]){if(-1!==t)throw new Error("Only one dimension can be inferred");t=i}if(-1!==t){const i=e.reduce((r,o,s)=>s!==t?r*o:r,1);e[t]=this.data.length/i}return new cn(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,t){for(let i=0;i<this.data.length;++i)this.data[i]=Math.min(Math.max(this.data[i],e),t);return this}clamp(e,t){return this.clone().clamp_(e,t)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!Zz.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new cn(e,Zz[e].from(this.data),this.dims)}}function t_(n,[e,t],i="bilinear",r=!1){const o=n.dims.at(-3)??1,s=n.dims.at(-2),a=n.dims.at(-1);let c=function kme(n,[e,t,i],[r,o],s="bilinear",a=!1){const c=o/i,d=r/t,p=new n.constructor(r*o*e),m=t*i,y=r*o;for(let v=0;v<r;++v)for(let E=0;E<o;++E){const I=v*o+E,D=(E+.5)/c-.5,R=(v+.5)/d-.5;let j=Math.floor(D),H=Math.floor(R);const Y=Math.min(j+1,i-1),he=Math.min(H+1,t-1);j=Math.max(j,0),H=Math.max(H,0);const te=D-j,re=R-H,be=(1-te)*(1-re),se=te*(1-re),ie=(1-te)*re,Ee=te*re,$e=H*i,He=he*i,Ge=$e+j,Ie=$e+Y,ye=He+j,De=He+Y;for(let Fe=0;Fe<e;++Fe){const at=Fe*m;p[Fe*y+I]=be*n[at+Ge]+se*n[at+Ie]+ie*n[at+ye]+Ee*n[at+De]}}return p}(n.data,[o,s,a],[e,t],i,r);return new cn(n.type,c,[o,e,t])}function Jz(n,e){return n=n.slice(),null===e?n=n.filter(t=>1!==t):"number"==typeof e?1===n[e]&&n.splice(e,1):Array.isArray(e)&&(n=n.filter((t,i)=>1!==t||!e.includes(i))),n}function e5(n,e){return e=du(e,n.length+1),(n=n.slice()).splice(e,0,1),n}function du(n,e,t=null){if(n<-e||n>=e)throw new Error(`IndexError: index ${n} is out of bounds for dimension${null===t?"":" "+t} with size ${e}`);return n<0&&(n=(n%e+e)%e),n}function Px(n,e=0){e=du(e,n[0].dims.length);const t=n[0].dims.slice();t[e]=n.reduce((s,a)=>s+a.dims[e],0);const i=t.reduce((s,a)=>s*a,1),r=new n[0].data.constructor(i),o=n[0].type;if(0===e){let s=0;for(let a of n)r.set(a.data,s),s+=a.data.length}else{let s=0;for(let a=0;a<n.length;++a){let c=n[a];for(let d=0;d<c.data.length;++d){let p=0;for(let m=c.dims.length-1,y=d,v=1;m>=0;--m){const E=c.dims[m];let I=y%E;m===e&&(I+=s),p+=I*v,v*=t[m],y=Math.floor(y/E)}r[p]=c.data[d]}s+=c.dims[e]}}return new cn(o,r,t)}function Ox(n,e=0){return Px(n.map(t=>t.unsqueeze(e)),e)}function n5(n,e=null,t=!1){if(null===e){let o=n.data.reduce((s,a)=>s+a,0);return new cn(n.type,[o/n.data.length],[])}e=du(e,n.dims.length);const i=n.dims.slice();i[e]=1;const r=new n.data.constructor(n.data.length/n.dims[e]);for(let o=0;o<n.data.length;++o){let s=0;for(let a=n.dims.length-1,c=o,d=1;a>=0;--a){const p=n.dims[a];a!==e&&(s+=c%p*d,d*=i[a]),c=Math.floor(c/p)}r[s]+=n.data[o]}if(1!==n.dims[e])for(let o=0;o<r.length;++o)r[o]=r[o]/n.dims[e];return t||i.splice(e,1),new cn(n.type,r,i)}function Gme(n){const[e,t]=n.dims,i=[e+1,t+1],r=new cn("float32",new Float32Array(i[0]*i[1]).fill(1/0),i),o=new cn("float32",new Float32Array(i[0]*i[1]).fill(-1),i);r[0].data[0]=0;for(let p=1;p<t+1;++p)for(let m=1;m<e+1;++m){const y=r[m-1][p-1].item(),v=r[m-1][p].item(),E=r[m][p-1].item();let I,D;y<v&&y<E?(I=y,D=0):v<y&&v<E?(I=v,D=1):(I=E,D=2),r[m].data[p]=n[m-1][p-1].item()+I,o[m].data[p]=D}let s=e,a=t;o.data.fill(2,0,i[1]);for(let p=0;p<i[0];++p)o[p].data[0]=1;let c=[],d=[];for(;s>0||a>0;)switch(c.push(s-1),d.push(a-1),o[s][a].item()){case 0:--s,--a;break;case 1:--s;break;case 2:--a;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${s}, ${a}]. Please file a bug report.`)}return c.reverse(),d.reverse(),[c,d]}class Kme{constructor(e=((t,i)=>t>i)){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return 0===this.size}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const t of e)this._heap.push(t),this._siftUp();return this.size}pop(){const e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}replace(e){const t=this.peek();return this._heap[0]=e,this._siftDown(),t}_parent(e){return(e+1>>>1)-1}_left(e){return 1+(e<<1)}_right(e){return e+1<<1}_greater(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){const i=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=i}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const t=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,t),e=t}}}class Zme{constructor(){this.root=kx.default()}extend(e){for(let t of e)this.push(t)}push(e){let t=this.root;for(let i of e){let r=t.children.get(i);void 0===r&&(r=kx.default(),t.children.set(i,r)),t=r}t.isLeaf=!0}*commonPrefixSearch(e){let t=this.root,i="";for(let r=0;r<e.length&&void 0!==t;++r){const o=e[r];i+=o,t=t.children.get(o),void 0!==t&&t.isLeaf&&(yield i)}}}class kx{constructor(e,t){this.isLeaf=e,this.children=t}static default(){return new kx(!1,new Map)}}class Qme{constructor(e,t,i){this.sentence=e,this.len=e.length,this.bosTokenId=t,this.eosTokenId=i,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const r=new n_(this.bosTokenId,0,0,0,0),o=new n_(this.eosTokenId,1,this.len,0,0);this.nodes.push(r.clone()),this.nodes.push(o.clone()),this.beginNodes[this.len].push(o),this.endNodes[0].push(r)}insert(e,t,i,r){const s=new n_(r,this.nodes.length,e,t,i);this.beginNodes[e].push(s),this.endNodes[e+t].push(s),this.nodes.push(s)}viterbi(){const e=this.len;let t=0;for(;t<=e;){if(0==this.beginNodes[t].length)return[];for(let a of this.beginNodes[t]){a.prev=null;let c=0,d=null;for(let p of this.endNodes[t]){const m=p.backtraceScore+a.score;(null===d||m>c)&&(d=p.clone(),c=m)}if(null===d)return[];a.prev=d,a.backtraceScore=c}++t}const i=[],o=this.beginNodes[e][0].prev;if(null===o)return[];let s=o.clone();for(;null!==s.prev;)i.push(s.clone()),s=s.clone().prev.clone();return i.reverse(),i}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(t=>this.piece(t))}tokenIds(){return this.viterbi().map(t=>t.tokenId)}}class n_{constructor(e,t,i,r,o){this.tokenId=e,this.nodeId=t,this.pos=i,this.length=r,this.score=o,this.prev=null,this.backtraceScore=0}clone(){const e=new n_(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var mt=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),i5=Object.freeze({set:mt.Set,for:mt.For,in:mt.In,is:mt.Is,if:mt.If,else:mt.Else,endif:mt.EndIf,elif:mt.ElseIf,endfor:mt.EndFor,and:mt.And,or:mt.Or,not:mt.Not,"not in":mt.NotIn,true:mt.BooleanLiteral,false:mt.BooleanLiteral}),Od=class{constructor(n,e){this.value=n,this.type=e}};function r5(n){return/\w/.test(n)}function CC(n){return/[0-9]/.test(n)}var Jme=[["{%",mt.OpenStatement],["%}",mt.CloseStatement],["{{",mt.OpenExpression],["}}",mt.CloseExpression],["(",mt.OpenParen],[")",mt.CloseParen],["{",mt.OpenCurlyBracket],["}",mt.CloseCurlyBracket],["[",mt.OpenSquareBracket],["]",mt.CloseSquareBracket],[",",mt.Comma],[".",mt.Dot],[":",mt.Colon],["|",mt.Pipe],["<=",mt.ComparisonBinaryOperator],[">=",mt.ComparisonBinaryOperator],["==",mt.ComparisonBinaryOperator],["!=",mt.ComparisonBinaryOperator],["<",mt.ComparisonBinaryOperator],[">",mt.ComparisonBinaryOperator],["+",mt.AdditiveBinaryOperator],["-",mt.AdditiveBinaryOperator],["*",mt.MultiplicativeBinaryOperator],["/",mt.MultiplicativeBinaryOperator],["%",mt.MultiplicativeBinaryOperator],["=",mt.Equals]],ege=new Map([["n","\n"],["t","\t"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]),i_=class{type="Statement"},ige=class extends i_{constructor(n){super(),this.body=n}type="Program"},o5=class extends i_{constructor(n,e,t){super(),this.test=n,this.body=e,this.alternate=t}type="If"},rge=class extends i_{constructor(n,e,t){super(),this.loopvar=n,this.iterable=e,this.body=t}type="For"},oge=class extends i_{constructor(n,e){super(),this.assignee=n,this.value=e}type="Set"},Nl=class extends i_{type="Expression"},sge=class extends Nl{constructor(n,e,t){super(),this.object=n,this.property=e,this.computed=t}type="MemberExpression"},age=class extends Nl{constructor(n,e){super(),this.callee=n,this.args=e}type="CallExpression"},_p=class extends Nl{constructor(n){super(),this.value=n}type="Identifier"},bp=class extends Nl{constructor(n){super(),this.value=n}type="Literal"},lge=class extends bp{type="NumericLiteral"},s5=class extends bp{type="StringLiteral"},a5=class extends bp{type="BooleanLiteral"},cge=class extends bp{type="ArrayLiteral"},l5=class extends bp{type="TupleLiteral"},uge=class extends bp{type="ObjectLiteral"},r_=class extends Nl{constructor(n,e,t){super(),this.operator=n,this.left=e,this.right=t}type="BinaryExpression"},dge=class extends Nl{constructor(n,e){super(),this.operand=n,this.filter=e}type="FilterExpression"},hge=class extends Nl{constructor(n,e,t){super(),this.operand=n,this.negate=e,this.test=t}type="TestExpression"},fge=class extends Nl{constructor(n,e){super(),this.operator=n,this.argument=e}type="UnaryExpression"},pge=class extends Nl{constructor(n=void 0,e=void 0,t=void 0){super(),this.start=n,this.stop=e,this.step=t}type="SliceExpression"},mge=class extends Nl{constructor(n,e){super(),this.key=n,this.value=e}type="KeywordArgumentExpression"};function gge(n){const e=new ige([]);let t=0;function i(Ie,ye){const De=n[t++];if(!De||De.type!==Ie)throw new Error(`Parser Error: ${ye}. ${De.type} !== ${Ie}.`);return De}function r(){switch(n[t].type){case mt.Text:return function a(){return new s5(i(mt.Text,"Expected text token").value)}();case mt.OpenStatement:return function c(){let Ie;switch(i(mt.OpenStatement,"Expected opening statement token"),n[t].type){case mt.Set:++t,Ie=p(),i(mt.CloseStatement,"Expected closing statement token");break;case mt.If:++t,Ie=m(),i(mt.OpenStatement,"Expected {% token"),i(mt.EndIf,"Expected endif token"),i(mt.CloseStatement,"Expected %} token");break;case mt.For:++t,Ie=function v(){const Ie=y(!0);if(!(Ie instanceof _p||Ie instanceof l5))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Ie.type} instead`);i(mt.In,"Expected `in` keyword following loop variable");const ye=E();i(mt.CloseStatement,"Expected closing statement token");const De=[];for(;o(mt.OpenStatement,mt.EndFor);)De.push(r());return new rge(Ie,ye,De)}(),i(mt.OpenStatement,"Expected {% token"),i(mt.EndFor,"Expected endfor token"),i(mt.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${n[t].type}`)}return Ie}();case mt.OpenExpression:return function d(){i(mt.OpenExpression,"Expected opening expression token");const Ie=E();return i(mt.CloseExpression,"Expected closing expression token"),Ie}();default:throw new SyntaxError(`Unexpected token type: ${n[t].type}`)}}function o(...Ie){return t+Ie.length<=n.length&&Ie.some((ye,De)=>ye!==n[t+De].type)}function s(...Ie){return t+Ie.length<=n.length&&Ie.every((ye,De)=>ye===n[t+De].type)}function p(){const Ie=E();if(s(mt.Equals)){++t;const ye=p();return new oge(Ie,ye)}return Ie}function m(){const Ie=E();i(mt.CloseStatement,"Expected closing statement token");const ye=[],De=[];for(;n[t]?.type!==mt.OpenStatement||n[t+1]?.type!==mt.ElseIf&&n[t+1]?.type!==mt.Else&&n[t+1]?.type!==mt.EndIf;)ye.push(r());if(n[t]?.type===mt.OpenStatement&&n[t+1]?.type!==mt.EndIf)if(++t,s(mt.ElseIf))i(mt.ElseIf,"Expected elseif token"),De.push(m());else for(i(mt.Else,"Expected else token"),i(mt.CloseStatement,"Expected closing statement token");n[t]?.type!==mt.OpenStatement||n[t+1]?.type!==mt.EndIf;)De.push(r());return new o5(Ie,ye,De)}function y(Ie=!1){const ye=Ie?Ge:E,De=[ye()],Fe=s(mt.Comma);for(;Fe&&(++t,De.push(ye()),s(mt.Comma)););return Fe?new l5(De):De[0]}function E(){return function I(){const Ie=D();if(s(mt.If)){++t;const ye=D();i(mt.Else,"Expected else token");const De=D();return new o5(ye,[Ie],[De])}return Ie}()}function D(){let Ie=R();for(;s(mt.Or);){const ye=n[t];++t;const De=R();Ie=new r_(ye,Ie,De)}return Ie}function R(){let Ie=j();for(;s(mt.And);){const ye=n[t];++t;const De=j();Ie=new r_(ye,Ie,De)}return Ie}function j(){let Ie;for(;s(mt.Not);){const ye=n[t];++t;const De=j();Ie=new fge(ye,De)}return Ie??function H(){let Ie=Y();for(;s(mt.ComparisonBinaryOperator)||s(mt.In)||s(mt.NotIn);){const ye=n[t];++t;const De=Y();Ie=new r_(ye,Ie,De)}return Ie}()}function Y(){let Ie=Ee();for(;s(mt.AdditiveBinaryOperator);){const ye=n[t];++t;const De=Ee();Ie=new r_(ye,Ie,De)}return Ie}function te(Ie){let ye=new age(Ie,function re(){i(mt.OpenParen,"Expected opening parenthesis for arguments list");const Ie=function be(){const Ie=[];for(;!s(mt.CloseParen);){let ye=E();if(s(mt.Equals)){if(++t,!(ye instanceof _p))throw new SyntaxError("Expected identifier for keyword argument");const De=E();ye=new mge(ye,De)}Ie.push(ye),s(mt.Comma)&&++t}return Ie}();return i(mt.CloseParen,"Expected closing parenthesis for arguments list"),Ie}());return s(mt.OpenParen)&&(ye=te(ye)),ye}function se(){const Ie=[];let ye=!1;for(;!s(mt.CloseSquareBracket);)s(mt.Colon)?(Ie.push(void 0),++t,ye=!0):(Ie.push(E()),s(mt.Colon)&&(++t,ye=!0));if(0===Ie.length)throw new SyntaxError("Expected at least one argument for member/slice expression");if(ye){if(Ie.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new pge(...Ie)}return Ie[0]}function Ee(){let Ie=$e();for(;s(mt.MultiplicativeBinaryOperator);){const ye=n[t];++t;const De=$e();Ie=new r_(ye,Ie,De)}return Ie}function $e(){let Ie=function He(){let Ie=function he(){const Ie=function ie(){let Ie=Ge();for(;s(mt.Dot)||s(mt.OpenSquareBracket);){const ye=n[t];let De;++t;const Fe=ye.type!==mt.Dot;if(Fe)De=se(),i(mt.CloseSquareBracket,"Expected closing square bracket");else if(De=Ge(),"Identifier"!==De.type)throw new SyntaxError("Expected identifier following dot operator");Ie=new sge(Ie,De,Fe)}return Ie}();return s(mt.OpenParen)?te(Ie):Ie}();for(;s(mt.Pipe);){++t;let ye=Ge();if(!(ye instanceof _p))throw new SyntaxError("Expected identifier for the filter");s(mt.OpenParen)&&(ye=te(ye)),Ie=new dge(Ie,ye)}return Ie}();for(;s(mt.Is);){++t;const ye=s(mt.Not);ye&&++t;let De=Ge();if(De instanceof a5&&(De=new _p(De.value.toString())),!(De instanceof _p))throw new SyntaxError("Expected identifier for the test");Ie=new hge(Ie,ye,De)}return Ie}function Ge(){const Ie=n[t];switch(Ie.type){case mt.NumericLiteral:return++t,new lge(Number(Ie.value));case mt.StringLiteral:return++t,new s5(Ie.value);case mt.BooleanLiteral:return++t,new a5("true"===Ie.value);case mt.Identifier:return++t,new _p(Ie.value);case mt.OpenParen:{++t;const ye=y();if(n[t].type!==mt.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${n[t].type} instead`);return++t,ye}case mt.OpenSquareBracket:{++t;const ye=[];for(;!s(mt.CloseSquareBracket);)ye.push(E()),s(mt.Comma)&&++t;return++t,new cge(ye)}case mt.OpenCurlyBracket:{++t;const ye=new Map;for(;!s(mt.CloseCurlyBracket);){const De=E();i(mt.Colon,"Expected colon between key and value in object literal");const Fe=E();ye.set(De,Fe),s(mt.Comma)&&++t}return++t,new uge(ye)}default:throw new SyntaxError(`Unexpected token: ${Ie.type}`)}}for(;t<n.length;)e.body.push(r());return e}function _ge(n,e,t=1){void 0===e&&(e=n,n=0);const i=[];for(let r=n;r<e;r+=t)i.push(r);return i}function c5(n,e,t,i=1){const r=Math.sign(i);r>=0?(e=(e??=0)<0?Math.max(n.length+e,0):Math.min(e,n.length),t=(t??=n.length)<0?Math.max(n.length+t,0):Math.min(t,n.length)):(e=(e??=n.length-1)<0?Math.max(n.length+e,-1):Math.min(e,n.length-1),t=(t??=-1)<-1?Math.max(n.length+t,-1):Math.min(t,n.length-1));const o=[];for(let s=e;r*s<r*t;s+=i)o.push(n[s]);return o}function u5(n){return n.replace(/\b\w/g,e=>e.toUpperCase())}var pc=class{type="RuntimeValue";value;builtins=new Map;constructor(n=void 0){this.value=n}__bool__(){return new no(!!this.value)}},Dr=class extends pc{type="NumericValue"},qi=class extends pc{type="StringValue";builtins=new Map([["upper",new mc(()=>new qi(this.value.toUpperCase()))],["lower",new mc(()=>new qi(this.value.toLowerCase()))],["strip",new mc(()=>new qi(this.value.trim()))],["title",new mc(()=>new qi(u5(this.value)))],["length",new Dr(this.value.length)]])},no=class extends pc{type="BooleanValue"},il=class extends pc{type="ObjectValue";__bool__(){return new no(this.value.size>0)}builtins=new Map([["get",new mc(([n,e])=>{if(!(n instanceof qi))throw new Error(`Object key must be a string: got ${n.type}`);return this.value.get(n.value)??e??new o_})],["items",new mc(()=>new $r(Array.from(this.value.entries()).map(([n,e])=>new $r([new qi(n),e]))))]])},$r=class extends pc{type="ArrayValue";builtins=new Map([["length",new Dr(this.value.length)]]);__bool__(){return new no(this.value.length>0)}},bge=class extends $r{type="TupleValue"},mc=class extends pc{type="FunctionValue"},o_=class extends pc{type="NullValue"},rl=class extends pc{type="UndefinedValue"},IC=class{constructor(n){this.parent=n}variables=new Map([["namespace",new mc(n=>{if(0===n.length)return new il(new Map);if(1!==n.length||!(n[0]instanceof il))throw new Error("`namespace` expects either zero arguments or a single object argument");return n[0]})]]);tests=new Map([["boolean",n=>"BooleanValue"===n.type],["callable",n=>n instanceof mc],["odd",n=>{if("NumericValue"!==n.type)throw new Error(`Cannot apply test "odd" to type: ${n.type}`);return n.value%2!=0}],["even",n=>{if("NumericValue"!==n.type)throw new Error(`Cannot apply test "even" to type: ${n.type}`);return n.value%2==0}],["false",n=>"BooleanValue"===n.type&&!n.value],["true",n=>"BooleanValue"===n.type&&n.value],["number",n=>"NumericValue"===n.type],["integer",n=>"NumericValue"===n.type&&Number.isInteger(n.value)],["iterable",n=>n instanceof $r||n instanceof qi],["lower",n=>{const e=n.value;return"StringValue"===n.type&&e===e.toLowerCase()}],["upper",n=>{const e=n.value;return"StringValue"===n.type&&e===e.toUpperCase()}],["none",n=>"NullValue"===n.type],["defined",n=>"UndefinedValue"!==n.type],["undefined",n=>"UndefinedValue"===n.type],["equalto",(n,e)=>n.value===e.value]]);set(n,e){return this.declareVariable(n,Nx(e))}declareVariable(n,e){if(this.variables.has(n))throw new SyntaxError(`Variable already declared: ${n}`);return this.variables.set(n,e),e}setVariable(n,e){return this.variables.set(n,e),e}resolve(n){if(this.variables.has(n))return this;if(this.parent)return this.parent.resolve(n);throw new Error(`Unknown variable: ${n}`)}lookupVariable(n){try{return this.resolve(n).variables.get(n)??new rl}catch{return new rl}}},yge=class{global;constructor(n){this.global=n??new IC}run(n){return this.evaluate(n,this.global)}evaluateBinaryExpression(n,e){const t=this.evaluate(n.left,e);switch(n.operator.value){case"and":return t.__bool__().value?this.evaluate(n.right,e):t;case"or":return t.__bool__().value?t:this.evaluate(n.right,e)}const i=this.evaluate(n.right,e);switch(n.operator.value){case"==":return new no(t.value==i.value);case"!=":return new no(t.value!=i.value)}if(t instanceof rl||i instanceof rl)throw new Error("Cannot perform operation on undefined values");if(t instanceof o_||i instanceof o_)throw new Error("Cannot perform operation on null values");if(t instanceof Dr&&i instanceof Dr)switch(n.operator.value){case"+":return new Dr(t.value+i.value);case"-":return new Dr(t.value-i.value);case"*":return new Dr(t.value*i.value);case"/":return new Dr(t.value/i.value);case"%":return new Dr(t.value%i.value);case"<":return new no(t.value<i.value);case">":return new no(t.value>i.value);case">=":return new no(t.value>=i.value);case"<=":return new no(t.value<=i.value)}else if(t instanceof $r&&i instanceof $r){if("+"===n.operator.value)return new $r(t.value.concat(i.value))}else if(i instanceof $r){const r=void 0!==i.value.find(o=>o.value===t.value);switch(n.operator.value){case"in":return new no(r);case"not in":return new no(!r)}}if((t instanceof qi||i instanceof qi)&&"+"===n.operator.value)return new qi(t.value.toString()+i.value.toString());if(t instanceof qi&&i instanceof qi)switch(n.operator.value){case"in":return new no(i.value.includes(t.value));case"not in":return new no(!i.value.includes(t.value))}if(t instanceof qi&&i instanceof il)switch(n.operator.value){case"in":return new no(i.value.has(t.value));case"not in":return new no(!i.value.has(t.value))}throw new SyntaxError(`Unknown operator "${n.operator.value}" between ${t.type} and ${i.type}`)}evaluateFilterExpression(n,e){const t=this.evaluate(n.operand,e);if("Identifier"===n.filter.type){const i=n.filter;if(t instanceof $r)switch(i.value){case"list":return t;case"first":return t.value[0];case"last":return t.value[t.value.length-1];case"length":return new Dr(t.value.length);case"reverse":return new $r(t.value.reverse());case"sort":return new $r(t.value.sort((r,o)=>{if(r.type!==o.type)throw new Error(`Cannot compare different types: ${r.type} and ${o.type}`);switch(r.type){case"NumericValue":return r.value-o.value;case"StringValue":return r.value.localeCompare(o.value);default:throw new Error(`Cannot compare type: ${r.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${i.value}`)}else if(t instanceof qi)switch(i.value){case"length":return new Dr(t.value.length);case"upper":return new qi(t.value.toUpperCase());case"lower":return new qi(t.value.toLowerCase());case"title":return new qi(u5(t.value));case"capitalize":return new qi(t.value.charAt(0).toUpperCase()+t.value.slice(1));case"trim":return new qi(t.value.trim());default:throw new Error(`Unknown StringValue filter: ${i.value}`)}else{if(t instanceof Dr){if("abs"===i.value)return new Dr(Math.abs(t.value));throw new Error(`Unknown NumericValue filter: ${i.value}`)}if(t instanceof il)switch(i.value){case"items":return new $r(Array.from(t.value.entries()).map(([r,o])=>new $r([new qi(r),o])));case"length":return new Dr(t.value.size);default:throw new Error(`Unknown ObjectValue filter: ${i.value}`)}}throw new Error(`Cannot apply filter "${i.value}" to type: ${t.type}`)}if("CallExpression"===n.filter.type){const i=n.filter;if("Identifier"!==i.callee.type)throw new Error(`Unknown filter: ${i.callee.type}`);const r=i.callee.value;if(t instanceof $r){if("selectattr"===r){if(t.value.some(p=>!(p instanceof il)))throw new Error("`selectattr` can only be applied to array of objects");if(i.args.some(p=>"StringLiteral"!==p.type))throw new Error("arguments of `selectattr` must be strings");const[o,s,a]=i.args.map(p=>this.evaluate(p,e));let c;if(s){const p=e.tests.get(s.value);if(!p)throw new Error(`Unknown test: ${s.value}`);c=p}else c=(...p)=>p[0].__bool__().value;const d=t.value.filter(p=>{const m=p.value.get(o.value);return!!m&&c(m,a)});return new $r(d)}throw new Error(`Unknown ArrayValue filter: ${r}`)}throw new Error(`Cannot apply filter "${r}" to type: ${t.type}`)}throw new Error(`Unknown filter: ${n.filter.type}`)}evaluateTestExpression(n,e){const t=this.evaluate(n.operand,e),i=e.tests.get(n.test.value);if(!i)throw new Error(`Unknown test: ${n.test.value}`);const r=i(t);return new no(n.negate?!r:r)}evaluateUnaryExpression(n,e){const t=this.evaluate(n.argument,e);if("not"===n.operator.value)return new no(!t.value);throw new SyntaxError(`Unknown operator: ${n.operator.value}`)}evalProgram(n,e){return this.evaluateBlock(n.body,e)}evaluateBlock(n,e){let t="";for(const i of n){const r=this.evaluate(i,e);"NullValue"!==r.type&&"UndefinedValue"!==r.type&&(t+=r.value)}return new qi(t)}evaluateIdentifier(n,e){return e.lookupVariable(n.value)}evaluateCallExpression(n,e){const t=[],i=new Map;for(const o of n.args)"KeywordArgumentExpression"===o.type?i.set(o.key.value,this.evaluate(o.value,e)):t.push(this.evaluate(o,e));i.size>0&&t.push(new il(i));const r=this.evaluate(n.callee,e);if("FunctionValue"!==r.type)throw new Error(`Cannot call something that is not a function: got ${r.type}`);return r.value(t,e)}evaluateSliceExpression(n,e,t){if(!(n instanceof $r||n instanceof qi))throw new Error("Slice object must be an array or string");const i=this.evaluate(e.start,t),r=this.evaluate(e.stop,t),o=this.evaluate(e.step,t);if(!(i instanceof Dr||i instanceof rl))throw new Error("Slice start must be numeric or undefined");if(!(r instanceof Dr||r instanceof rl))throw new Error("Slice stop must be numeric or undefined");if(!(o instanceof Dr||o instanceof rl))throw new Error("Slice step must be numeric or undefined");return n instanceof $r?new $r(c5(n.value,i.value,r.value,o.value)):new qi(c5(Array.from(n.value),i.value,r.value,o.value).join(""))}evaluateMemberExpression(n,e){const t=this.evaluate(n.object,e);let i,r;if(n.computed){if("SliceExpression"===n.property.type)return this.evaluateSliceExpression(t,n.property,e);i=this.evaluate(n.property,e)}else i=new qi(n.property.value);if(t instanceof il){if(!(i instanceof qi))throw new Error(`Cannot access property with non-string: got ${i.type}`);r=t.value.get(i.value)??t.builtins.get(i.value)}else if(t instanceof $r||t instanceof qi)if(i instanceof Dr)r=t.value.at(i.value),t instanceof qi&&(r=new qi(t.value.at(i.value)));else{if(!(i instanceof qi))throw new Error(`Cannot access property with non-string/non-number: got ${i.type}`);r=t.builtins.get(i.value)}else{if(!(i instanceof qi))throw new Error(`Cannot access property with non-string: got ${i.type}`);r=t.builtins.get(i.value)}return r instanceof pc?r:new rl}evaluateSet(n,e){const t=this.evaluate(n.value,e);if("Identifier"===n.assignee.type)e.setVariable(n.assignee.value,t);else{if("MemberExpression"!==n.assignee.type)throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(n.assignee)}`);{const i=n.assignee,r=this.evaluate(i.object,e);if(!(r instanceof il))throw new Error("Cannot assign to member of non-object");if("Identifier"!==i.property.type)throw new Error("Cannot assign to member with non-identifier property");r.value.set(i.property.value,t)}}return new o_}evaluateIf(n,e){const t=this.evaluate(n.test,e);return this.evaluateBlock(t.__bool__().value?n.body:n.alternate,e)}evaluateFor(n,e){const t=new IC(e),i=this.evaluate(n.iterable,t);if(!(i instanceof $r))throw new Error(`Expected iterable type in for loop: got ${i.type}`);let r="";for(let o=0;o<i.value.length;++o){const s=new Map([["index",new Dr(o+1)],["index0",new Dr(o)],["revindex",new Dr(i.value.length-o)],["revindex0",new Dr(i.value.length-o-1)],["first",new no(0===o)],["last",new no(o===i.value.length-1)],["length",new Dr(i.value.length)],["previtem",o>0?i.value[o-1]:new rl],["nextitem",o<i.value.length-1?i.value[o+1]:new rl]]);t.setVariable("loop",new il(s));const a=i.value[o];if("Identifier"===n.loopvar.type)t.setVariable(n.loopvar.value,a);else if("TupleLiteral"===n.loopvar.type){const d=n.loopvar;if("ArrayValue"!==a.type)throw new Error(`Cannot unpack non-iterable type: ${a.type}`);const p=a;if(d.value.length!==p.value.length)throw new Error(`Too ${d.value.length>p.value.length?"few":"many"} items to unpack`);for(let m=0;m<d.value.length;++m){if("Identifier"!==d.value[m].type)throw new Error(`Cannot unpack non-identifier type: ${d.value[m].type}`);t.setVariable(d.value[m].value,p.value[m])}}r+=this.evaluateBlock(n.body,t).value}return new qi(r)}evaluate(n,e){if(void 0===n)return new rl;switch(n.type){case"Program":return this.evalProgram(n,e);case"Set":return this.evaluateSet(n,e);case"If":return this.evaluateIf(n,e);case"For":return this.evaluateFor(n,e);case"NumericLiteral":return new Dr(Number(n.value));case"StringLiteral":return new qi(n.value);case"BooleanLiteral":return new no(n.value);case"ArrayLiteral":return new $r(n.value.map(t=>this.evaluate(t,e)));case"TupleLiteral":return new bge(n.value.map(t=>this.evaluate(t,e)));case"ObjectLiteral":{const t=new Map;for(const[i,r]of n.value){const o=this.evaluate(i,e);if(!(o instanceof qi))throw new Error(`Object keys must be strings: got ${o.type}`);t.set(o.value,this.evaluate(r,e))}return new il(t)}case"Identifier":return this.evaluateIdentifier(n,e);case"CallExpression":return this.evaluateCallExpression(n,e);case"MemberExpression":return this.evaluateMemberExpression(n,e);case"UnaryExpression":return this.evaluateUnaryExpression(n,e);case"BinaryExpression":return this.evaluateBinaryExpression(n,e);case"FilterExpression":return this.evaluateFilterExpression(n,e);case"TestExpression":return this.evaluateTestExpression(n,e);default:throw new SyntaxError(`Unknown node type: ${n.type}`)}}};function Nx(n){switch(typeof n){case"number":return new Dr(n);case"string":return new qi(n);case"boolean":return new no(n);case"object":return null===n?new o_:Array.isArray(n)?new $r(n.map(Nx)):new il(new Map(Object.entries(n).map(([e,t])=>[e,Nx(t)])));case"function":return new mc((e,t)=>Nx(n(...e.map(r=>r.value))??null));default:throw new Error(`Cannot convert to runtime value: ${n}`)}}var vge=class{parsed;constructor(n){const e=function nge(n,e={}){const t=[],i=function tge(n,e={}){return n.endsWith("\n")&&(n=n.slice(0,-1)),n=n.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(n=n.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(n=n.replace(/([#%]})\n/g,"$1")),n.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}(n,e);let r=0;const o=s=>{let a="";for(;s(i[r]);)if("\\"!==i[r]){if(a+=i[r++],r>=i.length)throw new SyntaxError("Unexpected end of input")}else{if(++r,r>=i.length)throw new SyntaxError("Unexpected end of input");const c=i[r++],d=ege.get(c);if(void 0===d)throw new SyntaxError(`Unexpected escaped character: ${c}`);a+=d}return a};e:for(;r<i.length;){const s=t.at(-1)?.type;if(void 0===s||s===mt.CloseStatement||s===mt.CloseExpression){let c="";for(;r<i.length&&("{"!==i[r]||"%"!==i[r+1]&&"{"!==i[r+1]);)c+=i[r++];if(c.length>0){t.push(new Od(c,mt.Text));continue}}o(c=>/\s/.test(c));const a=i[r];if("-"===a||"+"===a){const c=t.at(-1)?.type;if(c===mt.Text||void 0===c)throw new SyntaxError(`Unexpected character: ${a}`);switch(c){case mt.Identifier:case mt.NumericLiteral:case mt.BooleanLiteral:case mt.StringLiteral:case mt.CloseParen:case mt.CloseSquareBracket:break;default:{++r;const d=o(CC);t.push(new Od(`${a}${d}`,d.length>0?mt.NumericLiteral:mt.UnaryOperator));continue}}}for(const[c,d]of Jme)if(i.slice(r,r+c.length)===c){t.push(new Od(c,d)),r+=c.length;continue e}if("'"!==a&&'"'!==a)if(CC(a)){const c=o(CC);t.push(new Od(c,mt.NumericLiteral))}else{if(!r5(a))throw new SyntaxError(`Unexpected character: ${a}`);{const c=o(r5),d=Object.hasOwn(i5,c)?i5[c]:mt.Identifier;d===mt.In&&t.at(-1)?.type===mt.Not?(t.pop(),t.push(new Od("not in",mt.NotIn))):t.push(new Od(c,d))}}else{++r;const c=o(d=>d!==a);t.push(new Od(c,mt.StringLiteral)),++r}}return t}(n,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=gge(e)}render(n){const e=new IC;e.set("false",!1),e.set("true",!0),e.set("raise_exception",r=>{throw new Error(r)}),e.set("range",_ge);for(const[r,o]of Object.entries(n))e.set(r,o);return new yge(e).run(this.parsed).value}};function d5(n,e){return DC.apply(this,arguments)}function DC(){return(DC=(0,ke.A)(function*(n,e){const t=yield Promise.all([mp(n,"tokenizer.json",!0,e),mp(n,"tokenizer_config.json",!0,e)]);return null!==e.legacy&&(t[1].legacy=e.legacy),t})).apply(this,arguments)}function Fx(n,e=!0){if(void 0!==n.Regex){let t=n.Regex.replace(/\\([#&~])/g,"$1");for(const[i,r]of Tge)t=t.replaceAll(i,r);return new RegExp(t,"gu")}if(void 0!==n.String){const t=Fz(n.String);return new RegExp(e?t:`(${t})`,"gu")}return console.warn("Unknown pattern type:",n),null}function RC(n){return new Map(Object.entries(n))}function h5(n){const e=n.dims;switch(e.length){case 1:return n.tolist();case 2:if(1!==e[0])throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return n.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function PC(n){return n.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function f5(n){return n.replace(/[\u0300-\u036f]/g,"")}const s_="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",Tge=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class Mge{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class a_ extends ca{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...t){switch(e.type){case"WordPiece":return new Age(e);case"Unigram":return new Cge(e,...t);case"BPE":return new Dge(e);default:if(e.vocab)return new Rge(e,...t);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let t=this.encode(e);return this.fuse_unk&&(t=function Ege(n,e,t){const i=[];let r=0;for(;r<n.length;)if(i.push(n[r]),(t.get(n[r])??e)===e)for(;r<n.length&&(t.get(n[r])??e)===e;)++r;else++r;return i}(t,this.unk_token_id,this.tokens_to_ids)),t}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(t=>this.tokens_to_ids.get(t)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(t=>this.vocab[t]??this.unk_token)}}class Age extends a_{constructor(e){super(e),this.tokens_to_ids=RC(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,i]of this.tokens_to_ids)this.vocab[i]=t}encode(e){const t=[];for(const i of e){const r=[...i];if(r.length>this.max_input_chars_per_word){t.push(this.unk_token);continue}let o=!1,s=0;const a=[];for(;s<r.length;){let c=r.length,d=null;for(;s<c;){let p=r.slice(s,c).join("");if(s>0&&(p=this.config.continuing_subword_prefix+p),this.tokens_to_ids.has(p)){d=p;break}--c}if(null===d){o=!0;break}a.push(d),s=c}o?t.push(this.unk_token):t.push(...a)}return t}}class Cge extends a_{constructor(e,t){super(e);const i=e.vocab.length;this.vocab=new Array(i),this.scores=new Array(i);for(let r=0;r<i;++r){const o=e.vocab[r];this.vocab[r]=o[0],this.scores[r]=o[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((r,o)=>[r,o])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=t.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=Xz(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new Zme,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const t=e.sentence,i=t.length;let r=0;for(;r<i;){let s=!1;const a=[];for(let c of this.trie.commonPrefixSearch(t.slice(r))){a.push(c);const d=this.tokens_to_ids.get(c),m=c.length;e.insert(r,m,this.scores[d],d),!s&&1===m&&(s=!0)}s||e.insert(r,1,this.unkScore,this.unk_token_id),r+=1}}tokenize(e){const t=new Qme(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(t),t.tokens()}encode(e){const t=[];for(const i of e){const r=this.tokenize(i);t.push(...r)}return t}}const p5=(()=>{const n=[...Array.from({length:94},(r,o)=>o+33),...Array.from({length:12},(r,o)=>o+161),...Array.from({length:82},(r,o)=>o+174)],e=n.slice();let t=0;for(let r=0;r<256;++r)n.includes(r)||(n.push(r),e.push(256+t),t+=1);const i=e.map(r=>String.fromCharCode(r));return Object.fromEntries(n.map((r,o)=>[r,i[o]]))})(),Ige=function bme(n){return Object.fromEntries(Object.entries(n).map(([e,t])=>[t,e]))}(p5);class Dge extends a_{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=RC(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,i]of this.tokens_to_ids)this.vocab[i]=t;this.bpe_ranks=new Map(e.merges.map((t,i)=>[t,i])),this.merges=e.merges.map(t=>t.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(0===e.length)return[];const t=this.cache.get(e);if(void 0!==t)return t;const i=Array.from(e);this.end_of_word_suffix&&(i[i.length-1]+=this.end_of_word_suffix);let r=[];if(i.length>1){const o=new Kme((c,d)=>c.score<d.score);let s={token:i[0],bias:0,prev:null,next:null},a=s;for(let c=1;c<i.length;++c){const d={bias:c/i.length,token:i[c],prev:a,next:null};a.next=d,this._add_node(o,a),a=d}for(;!o.isEmpty();){const c=o.pop();if(c.deleted||!c.next||c.next.deleted)continue;if(c.deleted=!0,c.next.deleted=!0,c.prev){const p={...c.prev};c.prev.deleted=!0,c.prev=p,p.prev?p.prev.next=p:s=p}const d={token:c.token+c.next.token,bias:c.bias,prev:c.prev,next:c.next.next};d.prev?(d.prev.next=d,this._add_node(o,d.prev)):s=d,d.next&&(d.next.prev=d,this._add_node(o,d))}for(let c=s;null!==c;c=c.next)r.push(c.token)}else r=i;if(this.continuing_subword_suffix)for(let o=0;o<r.length-1;++o)r[o]+=this.continuing_subword_suffix;return this.cache.set(e,r),r}_add_node(e,t){const i=this.bpe_ranks.get(t.token+this.BPE_SPLIT_TOKEN+t.next.token);void 0!==i&&(t.score=i+t.bias,e.push(t))}encode(e){const t=[];for(const i of e){if(this.ignore_merges&&this.tokens_to_ids.has(i)){t.push(i);continue}const r=this.bpe(i);for(const o of r)this.tokens_to_ids.has(o)?t.push(o):this.byte_fallback?t.push(...Array.from(this.text_encoder.encode(o)).map(s=>`<0x${s.toString(16).toUpperCase().padStart(2,"0")}>`)):t.push(this.unk_token)}return t}}class Rge extends a_{constructor(e,t){super(e),this.tokens_to_ids=RC(t.target_lang?e.vocab[t.target_lang]:e.vocab),this.bos_token=t.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=t.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=t.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[i,r]of this.tokens_to_ids)this.vocab[r]=i}encode(e){return e}}class ua extends ca{constructor(e){super(),this.config=e}static fromConfig(e){if(null===e)return null;switch(e.type){case"BertNormalizer":return new zge(e);case"Precompiled":return new s_e(e);case"Sequence":return new Vge(e);case"Replace":return new Pge(e);case"NFC":return new Oge(e);case"NFKC":return new kge(e);case"NFKD":return new Nge(e);case"Strip":return new Fge(e);case"StripAccents":return new Lge(e);case"Lowercase":return new Uge(e);case"Prepend":return new Bge(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Pge extends ua{normalize(e){const t=Fx(this.config.pattern);return null===t?e:e.replaceAll(t,this.config.content)}}class Oge extends ua{normalize(e){return e.normalize("NFC")}}class kge extends ua{normalize(e){return e.normalize("NFKC")}}class Nge extends ua{normalize(e){return e.normalize("NFKD")}}class Fge extends ua{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class Lge extends ua{normalize(e){return f5(e)}}class Uge extends ua{normalize(e){return e.toLowerCase()}}class Bge extends ua{normalize(e){return this.config.prepend+e}}class Vge extends ua{constructor(e){super(e),this.normalizers=e.normalizers.map(t=>ua.fromConfig(t))}normalize(e){return this.normalizers.reduce((t,i)=>i.normalize(t),e)}}class zge extends ua{_tokenize_chinese_chars(e){const t=[];for(let i=0;i<e.length;++i){const r=e[i],o=r.charCodeAt(0);this._is_chinese_char(o)?(t.push(" "),t.push(r),t.push(" ")):t.push(r)}return t.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"\t":case"\n":case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const t=[];for(const i of e){const r=i.charCodeAt(0);0===r||65533===r||this._is_control(i)||(/^\s$/.test(i)?t.push(" "):t.push(i))}return t.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),!1!==this.config.strip_accents&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class Oa extends ca{static fromConfig(e){if(null===e)return null;switch(e.type){case"BertPreTokenizer":return new jge(e);case"Sequence":return new a_e(e);case"Whitespace":return new l_e(e);case"WhitespaceSplit":return new c_e(e);case"Metaspace":return new b5(e);case"ByteLevel":return new $ge(e);case"Split":return new Hge(e);case"Punctuation":return new Gge(e);case"Digits":return new Wge(e);case"Replace":return new u_e(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,t){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,t){return(Array.isArray(e)?e.map(i=>this.pre_tokenize_text(i,t)):this.pre_tokenize_text(e,t)).flat()}_call(e,t){return this.pre_tokenize(e,t)}}class jge extends Oa{constructor(e){super(),this.pattern=new RegExp(`[^\\s${s_}]+|[${s_}]`,"gu")}pre_tokenize_text(e,t){return e.trim().match(this.pattern)||[]}}class $ge extends Oa{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=p5,this.text_encoder=new TextEncoder}pre_tokenize_text(e,t){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(r=>Array.from(this.text_encoder.encode(r),o=>this.byte_encoder[o]).join(""))}}class Hge extends Oa{constructor(e){super(),this.config=e,this.pattern=Fx(this.config.pattern,this.config.invert)}pre_tokenize_text(e,t){return null===this.pattern?[]:this.config.invert?e.match(this.pattern)||[]:function xge(n,e){const t=[];let i=0;for(const r of n.matchAll(e)){const o=r[0];i<r.index&&t.push(n.slice(i,r.index)),o.length>0&&t.push(o),i=r.index+o.length}return i<n.length&&t.push(n.slice(i)),t}(e,this.pattern)}}class Gge extends Oa{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${s_}]+|[${s_}]+`,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class Wge extends Oa{constructor(e){super(),this.config=e,this.pattern=new RegExp("[^\\d]+|\\d"+(this.config.individual_digits?"":"+"),"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class yp extends ca{constructor(e){super(),this.config=e}static fromConfig(e){if(null===e)return null;switch(e.type){case"TemplateProcessing":return new qge(e);case"ByteLevel":return new _5(e);case"RobertaProcessing":return new g5(e);case"BertProcessing":return new m5(e);case"Sequence":return new Xge(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...t){throw Error("post_process should be implemented in subclass.")}_call(e,...t){return this.post_process(e,...t)}}class m5 extends yp{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,t=null,{add_special_tokens:i=!0}={}){i&&(e=Bo([this.cls],e,[this.sep]));let r=new Array(e.length).fill(0);if(null!==t){const o=i&&this instanceof g5?[this.sep]:[],s=i?[this.sep]:[];e=Bo(e,o,t,s),r=Bo(r,new Array(t.length+o.length+s.length).fill(1))}return{tokens:e,token_type_ids:r}}}class g5 extends m5{}class qge extends yp{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,t=null,{add_special_tokens:i=!0}={}){const r=null===t?this.single:this.pair;let o=[],s=[];for(const a of r)"SpecialToken"in a?i&&(o.push(a.SpecialToken.id),s.push(a.SpecialToken.type_id)):"Sequence"in a&&("A"===a.Sequence.id?(o=Bo(o,e),s=Bo(s,new Array(e.length).fill(a.Sequence.type_id))):"B"===a.Sequence.id&&(o=Bo(o,t),s=Bo(s,new Array(t.length).fill(a.Sequence.type_id))));return{tokens:o,token_type_ids:s}}}class _5 extends yp{post_process(e,t=null){return t&&(e=Bo(e,t)),{tokens:e}}}class Xge extends yp{constructor(e){super(e),this.processors=e.processors.map(t=>yp.fromConfig(t))}post_process(e,t=null,i={}){let r;for(const o of this.processors)if(o instanceof _5)e=o.post_process(e).tokens,t&&(t=o.post_process(t).tokens);else{const s=o.post_process(e,t,i);e=s.tokens,r=s.token_type_ids}return{tokens:e,token_type_ids:r}}}class da extends ca{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(null===e)return null;switch(e.type){case"WordPiece":return new Jge(e);case"Metaspace":return new o_e(e);case"ByteLevel":return new e_e(e);case"Replace":return new Yge(e);case"ByteFallback":return new Kge(e);case"Fuse":return new Zge(e);case"Strip":return new Qge(e);case"Sequence":return new n_e(e);case"CTC":return new t_e(e);case"BPEDecoder":return new i_e(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class Yge extends da{decode_chain(e){const t=Fx(this.config.pattern);return null===t?e:e.map(i=>i.replaceAll(t,this.config.content))}}class Kge extends da{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const t=[];let i=[];for(const r of e){let o=null;if(6===r.length&&r.startsWith("<0x")&&r.endsWith(">")){const s=parseInt(r.slice(3,5),16);isNaN(s)||(o=s)}if(null!==o)i.push(o);else{if(i.length>0){const s=this.text_decoder.decode(Uint8Array.from(i));t.push(s),i=[]}t.push(r)}}if(i.length>0){const r=this.text_decoder.decode(Uint8Array.from(i));t.push(r),i=[]}return t}}class Zge extends da{decode_chain(e){return[e.join("")]}}class Qge extends da{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(t=>{let i=0;for(let o=0;o<this.start&&t[o]===this.content;++o)i=o+1;let r=t.length;for(let o=0;o<this.stop;++o){const s=t.length-o-1;if(t[s]!==this.content)break;r=s}return t.slice(i,r)})}}class Jge extends da{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((t,i)=>(0!==i&&(t=t.startsWith(this.config.prefix)?t.replace(this.config.prefix,""):" "+t),this.cleanup&&(t=PC(t)),t))}}class e_e extends da{constructor(e){super(e),this.byte_decoder=Ige,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const t=e.join(""),i=new Uint8Array([...t].map(o=>this.byte_decoder[o]));return this.text_decoder.decode(i)}decode_chain(e){const t=[];let i=[];for(const r of e)void 0!==this.added_tokens.find(o=>o.content===r)?(i.length>0&&(t.push(this.convert_tokens_to_string(i)),i=[]),t.push(r)):i.push(r);return i.length>0&&t.push(this.convert_tokens_to_string(i)),t}}class t_e extends da{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(0===e.length)return"";const t=[e[0]];for(let o=1;o<e.length;++o)e[o]!==t.at(-1)&&t.push(e[o]);let r=t.filter(o=>o!==this.pad_token).join("");return this.cleanup&&(r=PC(r).replaceAll(this.word_delimiter_token," ").trim()),r}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class n_e extends da{constructor(e){super(e),this.decoders=e.decoders.map(t=>da.fromConfig(t))}decode_chain(e){return this.decoders.reduce((t,i)=>i.decode_chain(t),e)}}class i_e extends da{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((t,i)=>t.replaceAll(this.suffix,i===e.length-1?"":" "))}}class r_e extends da{decode_chain(e){let t="";for(let i=1;i<e.length;i+=2)t+=e[i];return[t]}}class b5 extends Oa{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:t}={}){let i=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!i.startsWith(this.replacement)&&("always"===this.prepend_scheme||"first"===this.prepend_scheme&&0===t)&&(i=this.strRep+i),[i]}}class o_e extends da{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const t=[];for(let i=0;i<e.length;++i){let r=e[i].replaceAll(this.replacement," ");this.addPrefixSpace&&0==i&&r.startsWith(" ")&&(r=r.substring(1)),t.push(r)}return t}}class s_e extends ua{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return(e=(e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,"")).replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," ")).includes("\uff5e")?e.split("\uff5e").map(i=>i.normalize("NFKC")).join("\uff5e"):e.normalize("NFKC")}}class a_e extends Oa{constructor(e){super(),this.tokenizers=e.pretokenizers.map(t=>Oa.fromConfig(t))}pre_tokenize_text(e,t){return this.tokenizers.reduce((i,r)=>r.pre_tokenize(i,t),[e])}}class l_e extends Oa{constructor(e){super()}pre_tokenize_text(e,t){return e.match(/\w+|[^\w\s]+/g)||[]}}class c_e extends Oa{constructor(e){super()}pre_tokenize_text(e,t){return function Sge(n){return n.match(/\S+/g)||[]}(e)}}class u_e extends Oa{constructor(e){super(),this.config=e,this.pattern=Fx(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,t){return null===this.pattern?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const d_e=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function h_e(n,e,t,i){for(const r of Object.keys(n)){const o=e-n[r].length,s=t(r),a=new Array(o).fill(s);n[r]="right"===i?Bo(n[r],a):Bo(a,n[r])}}function f_e(n,e){for(const t of Object.keys(n))n[t].length=e}class bi extends ca{return_token_type_ids=!1;_default_chat_template="{% for message in messages %}{{'<|im_start|>' + message['role'] + '\n' + message['content'] + '<|im_end|>' + '\n'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant\n' }}{% endif %}";constructor(e,t){super(),this._tokenizer_config=t,this.normalizer=ua.fromConfig(e.normalizer),this.pre_tokenizer=Oa.fromConfig(e.pre_tokenizer),this.model=a_.fromConfig(e.model,t),this.post_processor=yp.fromConfig(e.post_processor),this.decoder=da.fromConfig(e.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const i of e.added_tokens){const r=new Mge(i);this.added_tokens.push(r),this.model.tokens_to_ids.set(r.content,r.id),this.model.vocab[r.id]=r.content,r.special&&(this.special_tokens.push(r.content),this.all_special_ids.push(r.id))}if(this.additional_special_tokens=t.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(i=>`${i.lstrip?"\\s*":""}(${Fz(i.content)})${i.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=t.model_max_length,this.remove_space=t.remove_space,this.clean_up_tokenization_spaces=t.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=t.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=t.chat_template??null,Array.isArray(this.chat_template)){const i=Object.create(null);for(const{name:r,template:o}of this.chat_template){if("string"!=typeof r||"string"!=typeof o)throw new Error('Chat template must be a list of objects with "name" and "template" properties');i[r]=o}this.chat_template=i}this._compiled_template_cache=new Map}getToken(...e){for(const t of e){const i=this._tokenizer_config[t];if(i){if("object"==typeof i){if("AddedToken"===i.__type)return i.content;throw Error(`Unknown token: ${i}`)}return i}}return null}static from_pretrained(e,{progress_callback:t=null,config:i=null,cache_dir:r=null,local_files_only:o=!1,revision:s="main",legacy:a=null}={}){var c=this;return(0,ke.A)(function*(){const d=yield d5(e,{progress_callback:t,config:i,cache_dir:r,local_files_only:o,revision:s,legacy:a});return new c(...d)})()}_call(e,{text_pair:t=null,add_special_tokens:i=!0,padding:r=!1,truncation:o=null,max_length:s=null,return_tensor:a=!0,return_token_type_ids:c=null}={}){const d=Array.isArray(e);let p;if(d){if(0===e.length)throw Error("text array must be non-empty");if(null!==t){if(!Array.isArray(t))throw Error("text_pair must also be an array");if(e.length!==t.length)throw Error("text and text_pair must have the same length");p=e.map((y,v)=>this._encode_plus(y,t[v],{add_special_tokens:i,return_token_type_ids:c}))}else p=e.map(y=>this._encode_plus(y,null,{add_special_tokens:i,return_token_type_ids:c}))}else{if(null==e)throw Error("text may not be null or undefined");if(Array.isArray(t))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");p=[this._encode_plus(e,t,{add_special_tokens:i,return_token_type_ids:c})]}if(null===s?s="max_length"===r?this.model_max_length:Pa(p.map(y=>y.input_ids.length))[0]:o||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),s=Math.min(s,this.model_max_length),r||o)for(let y=0;y<p.length;++y)p[y].input_ids.length!==s&&(p[y].input_ids.length>s?o&&f_e(p[y],s):r&&h_e(p[y],s,v=>"input_ids"===v?this.pad_token_id:0,this.padding_side));const m={};if(a){if((!r||!o)&&p.some(v=>{for(const E of Object.keys(v))if(v[E].length!==p[0][E]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const y=[p.length,p[0].input_ids.length];for(const v of Object.keys(p[0]))m[v]=new cn("int64",BigInt64Array.from(p.flatMap(E=>E[v]).map(BigInt)),y)}else{for(const y of Object.keys(p[0]))m[y]=p.map(v=>v[y]);if(!d)for(const y of Object.keys(m))m[y]=m[y][0]}return m}_encode_text(e){return null===e?null:(this.added_tokens_regex?e.split(this.added_tokens_regex).filter(r=>r):[e]).map((r,o)=>{if(void 0!==this.added_tokens.find(a=>a.content===r))return r;{if(!0===this.remove_space&&(r=r.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(r=function wge(n){return f5(n.toLowerCase())}(r)),null!==this.normalizer&&(r=this.normalizer(r)),0===r.length)return[];const a=null!==this.pre_tokenizer?this.pre_tokenizer(r,{section_index:o}):[r];return this.model(a)}}).flat()}_encode_plus(e,t=null,{add_special_tokens:i=!0,return_token_type_ids:r=null}={}){const o=this._encode_text(e),s=this._encode_text(t),a=this.post_processor?this.post_processor(o,s,{add_special_tokens:i}):{tokens:Bo(o??[],s??[])},c=this.model.convert_tokens_to_ids(a.tokens),d={input_ids:c,attention_mask:new Array(c.length).fill(1)};return(r??this.return_token_type_ids)&&a.token_type_ids&&(d.token_type_ids=a.token_type_ids),d}encode(e,t=null,{add_special_tokens:i=!0,return_token_type_ids:r=null}={}){const{input_ids:o}=this._encode_plus(e,t,{add_special_tokens:i,return_token_type_ids:r});return o}batch_decode(e,t={}){return e instanceof cn&&(e=e.tolist()),e.map(i=>this.decode(i,t))}decode(e,t={}){if(e instanceof cn&&(e=h5(e)),!Array.isArray(e)||0===e.length||!Lz(e[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(e,t)}decode_single(e,{skip_special_tokens:t=!1,clean_up_tokenization_spaces:i=null}){let r=this.model.convert_ids_to_tokens(e);t&&(r=r.filter(s=>!this.special_tokens.includes(s)));let o=this.decoder?this.decoder(r):r.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(o=o.replaceAll(this.decoder.end_of_word_suffix," "),t&&(o=o.trim())),(i??this.clean_up_tokenization_spaces)&&(o=PC(o)),o}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(e,{chat_template:t=null,add_generation_prompt:i=!1,tokenize:r=!0,padding:o=!1,truncation:s=!1,max_length:a=null,return_tensor:c=!0,tokenizer_kwargs:d={},...p}={}){if(this.chat_template&&"object"==typeof this.chat_template||null===this.chat_template&&this.default_chat_template&&"object"==typeof this.default_chat_template){const E=this.chat_template??this.default_chat_template;if(null!==t&&Object.hasOwn(E,t))t=E[t];else if(null===t&&"default"in E)t=E.default;else if(null===t)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(E).sort()}.`)}else t??=this.chat_template??this.default_chat_template;if("string"!=typeof t)throw Error("chat_template must be a string, but got "+typeof t);let m=this._compiled_template_cache.get(t);void 0===m&&(m=new vge(t),this._compiled_template_cache.set(t,m));const y=Object.create(null);for(const E of d_e){const I=this.getToken(E);I&&(y[E]=I)}const v=m.render({messages:e,add_generation_prompt:i,...y,...p});return r?this._call(v,{add_special_tokens:!1,padding:o,truncation:s,max_length:a,return_tensor:c,...d}).input_ids:v}}class p_e extends bi{return_token_type_ids=!0}class m_e extends bi{return_token_type_ids=!0}class g_e extends bi{return_token_type_ids=!0}class __e extends bi{return_token_type_ids=!0}class b_e extends bi{return_token_type_ids=!0}class y_e extends bi{return_token_type_ids=!0}class v_e extends bi{return_token_type_ids=!0}class x_e extends bi{return_token_type_ids=!0}class w_e extends bi{return_token_type_ids=!0}class E_e extends bi{}class S_e extends bi{}class T_e extends bi{return_token_type_ids=!0;constructor(e,t){super(e,t),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class M_e extends bi{return_token_type_ids=!0}class A_e extends bi{}class y5 extends bi{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}'}class C_e extends bi{}class v5 extends bi{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)),this.lang_to_token=i=>i}_build_translation_inputs(e,t,i){return OC(this,e,t,i)}}class I_e extends v5{}class D_e extends bi{}class R_e extends y5{constructor(e,t){const i=".,!?\u2026\u3002\uff0c\u3001\u0964\u06d4\u060c",r=e.pre_tokenizer?.pretokenizers[0]?.pattern;r&&r.Regex===` ?[^(\\s|[${i}])]+`&&(r.Regex=` ?[^\\s${i}]+`),super(e,t)}}class x5 extends bi{_default_chat_template="{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>\n' + system_message + '\n<</SYS>>\n\n' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>\n' + content.strip() + '\n<</SYS>>\n\n' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}";DEFAULT_SYSTEM_PROMPT="You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.\n\nIf a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.";constructor(e,t){super(e,t),this.use_default_system_prompt=t.use_default_system_prompt??!1,this.legacy=t.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new b5({replacement:"\u2581",add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(e){if(null===e)return null;if(this.legacy||0===e.length)return super._encode_text(e);let t=super._encode_text("\u2581"+e.replaceAll("\u2581"," "));return t.length>1&&"\u2581"===t[0]&&this.special_tokens.includes(t[1])&&(t=t.slice(1)),t}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll("\n","\\n").replaceAll("'","\\'"))}}class P_e extends x5{}class O_e extends bi{}class k_e extends bi{}class N_e extends bi{}class F_e extends bi{}class L_e extends bi{}class U_e extends bi{}class B_e extends bi{_default_chat_template="{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '\n' + message['content'] | trim + '<end_of_turn>\n' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model\n'}}{% endif %}"}class V_e extends bi{}function OC(n,e,t,i){if(!("language_codes"in n)||!Array.isArray(n.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in n&&n.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in n)||"function"!=typeof n.lang_to_token)throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const r=i.src_lang,o=i.tgt_lang;if(!n.language_codes.includes(o))throw new Error(`Target language code "${o}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);if(void 0!==r){if(!n.language_codes.includes(r))throw new Error(`Source language code "${r}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);for(const s of n.post_processor.config.single)if("SpecialToken"in s&&n.languageRegex.test(s.SpecialToken.id)){s.SpecialToken.id=n.lang_to_token(r);break}}return i.forced_bos_token_id=n.model.convert_tokens_to_ids([n.lang_to_token(o)])[0],n._call(e,t)}class z_e extends bi{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)),this.lang_to_token=i=>i}_build_translation_inputs(e,t,i){return OC(this,e,t,i)}}class j_e extends bi{constructor(e,t){super(e,t),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)).map(i=>i.slice(2,-2)),this.lang_to_token=i=>`__${i}__`}_build_translation_inputs(e,t,i){return OC(this,e,t,i)}}const w5=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],Ux=new Map(w5),$_e=new Map([...w5.map(([n,e])=>[e,n]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class H_e extends bi{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}';_decode_asr(e,{return_timestamps:t=!1,return_language:i=!1,time_precision:r=null,force_full_sequences:o=!0}={}){if(null===r)throw Error("Must specify time_precision");let s=null;const a="word"===t;function c(){return{language:s,timestamp:[null,null],text:""}}const d=[];let p=c(),m=0;const y=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let v=[],E=[],I=!1,D=null;const R=new Set(this.all_special_ids);for(const Y of e){const he=Y.tokens,te=a?Y.token_timestamps:null;let re=null,be=y;if("stride"in Y){const[Ee,$e,He]=Y.stride;if(m-=$e,D=Ee-He,$e&&(be=$e/r+y),He)for(let Ge=he.length-1;Ge>=0;--Ge){const Ie=he[Ge];if(Ie>=y){if(null!==re&&(Ie-y)*r<D)break;re=Ie}}}let se=[],ie=[];for(let Ee=0;Ee<he.length;++Ee){const $e=he[Ee];if(R.has($e)){const He=this.decode([$e]),Ge=Ux.get(He.slice(2,-2));if(void 0!==Ge){if(null!==s&&Ge!==s&&!t){v.push(se);const Ie=this.findLongestCommonSequence(v)[0],ye=this.decode(Ie);p.text=ye,d.push(p),v=[],se=[],p=c()}s=p.language=Ge}}else if($e>=y){const Ge=e_(($e-y)*r+m,2);if(null!==re&&$e>=re)I=!0;else if(I||v.length>0&&$e<be)I=!1;else if(null===p.timestamp[0])p.timestamp[0]=Ge;else if(Ge!==p.timestamp[0]){p.timestamp[1]=Ge,v.push(se),a&&E.push(ie);const[Ie,ye]=this.findLongestCommonSequence(v,E),De=this.decode(Ie);p.text=De,a&&(p.words=this.collateWordTimestamps(Ie,ye,s)),d.push(p),v=[],se=[],E=[],ie=[],p=c()}}else if(se.push($e),a){let Ge,He=e_(te[Ee]+m,2);Ge=Ee+1<te.length?e_(te[Ee+1]+m,2):null,ie.push([He,Ge])}}if("stride"in Y){const[Ee,$e,He]=Y.stride;m+=Ee-He}se.length>0?(v.push(se),a&&E.push(ie)):v.every(Ee=>0===Ee.length)&&(p=c(),v=[],se=[],E=[],ie=[])}if(v.length>0){if(o&&t)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Y,he]=this.findLongestCommonSequence(v,E),te=this.decode(Y);p.text=te,a&&(p.words=this.collateWordTimestamps(Y,he,s)),d.push(p)}let j=Object.create(null);const H=d.map(Y=>Y.text).join("");if(t||i){for(let Y=0;Y<d.length;++Y){const he=d[Y];t||delete he.timestamp,i||delete he.language}if(a){const Y=[];for(const he of d)for(const te of he.words)Y.push(te);j={chunks:Y}}else j={chunks:d}}return[H,j]}findLongestCommonSequence(e,t=null){let i=e[0],r=i.length,o=[];const s=Array.isArray(t)&&t.length>0;let a=s?[]:null,c=s?t[0]:null;for(let d=1;d<e.length;++d){const p=e[d];let m=0,y=[r,r,0,0];const v=p.length;for(let Y=1;Y<r+v;++Y){const he=Y/1e4,te=Math.max(0,r-Y),re=Math.min(r,r+v-Y),be=i.slice(te,re),se=Math.max(0,Y-r),ie=Math.min(v,Y),Ee=p.slice(se,ie);if(be.length!==Ee.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const $e=be.filter((Ge,Ie)=>Ge===Ee[Ie]).length,He=$e/Y+he;$e>1&&He>m&&(m=He,y=[te,re,se,ie])}const[E,I,D,R]=y,j=Math.floor((I+E)/2),H=Math.floor((R+D)/2);o.push(...i.slice(0,j)),i=p.slice(H),r=i.length,s&&(a.push(...c.slice(0,j)),c=t[d].slice(H))}return o.push(...i),s?(a.push(...c),[o,a]):[o,[]]}collateWordTimestamps(e,t,i){const[r,o,s]=this.combineTokensIntoWords(e,i),a=[];for(let c=0;c<r.length;++c){const d=s[c];a.push({text:r[c],timestamp:[t[d.at(0)][0],t[d.at(-1)][1]]})}return a}combineTokensIntoWords(e,t,i="\"'\u201c\xa1\xbf([{-",r="\"'.\u3002,\uff0c!\uff01?\uff1f:\uff1a\u201d)]}\u3001"){let o,s,a;return["chinese","japanese","thai","lao","myanmar"].includes(t=t??"english")?[o,s,a]=this.splitTokensOnUnicode(e):[o,s,a]=this.splitTokensOnSpaces(e),this.mergePunctuations(o,s,a,i,r)}decode(e,t){let i;return t&&t.decode_with_timestamps?(e instanceof cn&&(e=h5(e)),i=this.decodeWithTimestamps(e,t)):i=super.decode(e,t),i}decodeWithTimestamps(e,t){const i=t?.time_precision??.02,r=Array.from(this.all_special_ids).at(-1)+1;let o=[[]];for(const s of e)if(s>=r){const a=e_((s-r)*i,2);o.push(`<|${a}|>`),o.push([])}else o[o.length-1].push(s);return o=o.map(s=>"string"==typeof s?s:super.decode(s,t)),o.join("")}splitTokensOnUnicode(e){const t=this.decode(e,{decode_with_timestamps:!0}),r=[],o=[],s=[];let a=[],c=[],d=0;for(let p=0;p<e.length;++p){a.push(e[p]),c.push(p);const y=this.decode(a,{decode_with_timestamps:!0});(!y.includes("\ufffd")||"\ufffd"===t[d+y.indexOf("\ufffd")])&&(r.push(y),o.push(a),s.push(c),a=[],c=[],d+=y.length)}return[r,o,s]}splitTokensOnSpaces(e){const[t,i,r]=this.splitTokensOnUnicode(e),o=[],s=[],a=[],c=new RegExp(`^[${s_}]$`,"gu");for(let d=0;d<t.length;++d){const p=t[d],m=i[d],y=r[d],v=m[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),E=p.startsWith(" "),I=p.trim(),D=c.test(I);if(v||E||D||0===o.length)o.push(p),s.push(m),a.push(y);else{const R=o.length-1;o[R]+=p,s[R].push(...m),a[R].push(...y)}}return[o,s,a]}mergePunctuations(e,t,i,r,o){const s=structuredClone(e),a=structuredClone(t),c=structuredClone(i);let d=s.length-2,p=s.length-1;for(;d>=0;)s[d].startsWith(" ")&&r.includes(s[d].trim())?(s[p]=s[d]+s[p],a[p]=Bo(a[d],a[p]),c[p]=Bo(c[d],c[p]),s[d]="",a[d]=[],c[d]=[]):p=d,--d;for(d=0,p=1;p<s.length;)!s[d].endsWith(" ")&&o.includes(s[p])?(s[d]+=s[p],a[d]=Bo(a[d],a[p]),c[d]=Bo(c[d],c[p]),s[p]="",a[p]=[],c[p]=[]):d=p,++p;return[s.filter(m=>m),a.filter(m=>m.length>0),c.filter(m=>m.length>0)]}get_decoder_prompt_ids({language:e=null,task:t=null,no_timestamps:i=!0}={}){const r=[];if(e){e=e.toLowerCase();let o=$_e.get(e);if(void 0===o){if(!Ux.has(e)){const c=2===e.length?Ux.keys():Ux.values();throw new Error(`Language "${e}" is not supported. Must be one of: ${JSON.stringify(c)}`)}o=e}const s=this.model.tokens_to_ids.get(`<|${o}|>`);if(void 0===s)throw new Error(`Unable to find language "${o}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);r.push(s)}else r.push(null);if(t){if("transcribe"!==(t=t.toLowerCase())&&"translate"!==t)throw new Error(`Task "${t}" is not supported. Must be one of: ["transcribe", "translate"]`);const o=this.model.tokens_to_ids.get(`<|${t}|>`);if(void 0===o)throw new Error(`Unable to find task "${t}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);r.push(o)}else r.push(null);if(i){const o=this.model.tokens_to_ids.get("<|notimestamps|>");if(void 0===o)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');r.push(o)}return r.map((o,s)=>[s+1,o]).filter(o=>null!==o[1])}}class G_e extends bi{}class W_e extends bi{}class q_e extends bi{}class X_e extends bi{constructor(e,t){super(e,t),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(i=>this.languageRegex.test(i)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(null===e)return null;const[t,...i]=e.trim().split(this.languageRegex);if(0===i.length)return super._encode_text(t);if(2===i.length){const[r,o]=i;return this.supported_language_codes.includes(r)||console.warn(`Unsupported language code "${r}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),Bo([r],super._encode_text(o))}}}class Y_e extends bi{}class E5 extends bi{_default_chat_template="{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}"}class K_e extends E5{}class Z_e extends bi{}class Q_e extends bi{}class J_e extends bi{constructor(e,t){super(e,t),this.decoder=new r_e({})}}class ebe extends bi{}let Vo=(()=>class n{static TOKENIZER_CLASS_MAPPING={T5Tokenizer:A_e,DistilBertTokenizer:E_e,CamembertTokenizer:S_e,DebertaTokenizer:b_e,DebertaV2Tokenizer:y_e,BertTokenizer:p_e,HerbertTokenizer:v_e,ConvBertTokenizer:x_e,RoFormerTokenizer:w_e,XLMTokenizer:T_e,ElectraTokenizer:M_e,MobileBertTokenizer:g_e,SqueezeBertTokenizer:__e,AlbertTokenizer:m_e,GPT2Tokenizer:y5,BartTokenizer:C_e,MBartTokenizer:v5,MBart50Tokenizer:I_e,RobertaTokenizer:D_e,WhisperTokenizer:H_e,CodeGenTokenizer:G_e,CLIPTokenizer:W_e,SiglipTokenizer:q_e,MarianTokenizer:X_e,BloomTokenizer:R_e,NllbTokenizer:z_e,M2M100Tokenizer:j_e,LlamaTokenizer:x5,CodeLlamaTokenizer:P_e,XLMRobertaTokenizer:O_e,MPNetTokenizer:k_e,FalconTokenizer:N_e,GPTNeoXTokenizer:F_e,EsmTokenizer:L_e,Wav2Vec2CTCTokenizer:Y_e,BlenderbotTokenizer:E5,BlenderbotSmallTokenizer:K_e,SpeechT5Tokenizer:Z_e,NougatTokenizer:Q_e,VitsTokenizer:J_e,Qwen2Tokenizer:U_e,GemmaTokenizer:B_e,Grok1Tokenizer:V_e,CohereTokenizer:ebe,PreTrainedTokenizer:bi};static from_pretrained(t,{quantized:i=!0,progress_callback:r=null,config:o=null,cache_dir:s=null,local_files_only:a=!1,revision:c="main",legacy:d=null}={}){var p=this;return(0,ke.A)(function*(){const[m,y]=yield d5(t,{quantized:i,progress_callback:r,config:o,cache_dir:s,local_files_only:a,revision:c,legacy:d}),v=y.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let E=p.TOKENIZER_CLASS_MAPPING[v];return E||(console.warn(`Unknown tokenizer class "${v}", attempting to construct from base class.`),E=bi),new E(m,y)})()}})();function kC(){return(kC=(0,ke.A)(function*(n,e){return yield mp(n,"config.json",!0,e)})).apply(this,arguments)}class nbe{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static from_pretrained(e,{progress_callback:t=null,config:i=null,cache_dir:r=null,local_files_only:o=!1,revision:s="main"}={}){var a=this;return(0,ke.A)(function*(){let c=i??(yield function tbe(n,e){return kC.apply(this,arguments)}(e,{progress_callback:t,config:i,cache_dir:r,local_files_only:o,revision:s}));return new a(c)})()}}class vp{static from_pretrained(...e){return(0,ke.A)(function*(){return nbe.from_pretrained(...e)})()}}class S5 extends ca{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,t){for(let i of t)this.processors.forEach(r=>r(e,i))}[Symbol.iterator](){return this.processors.values()}}class Fl extends ca{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class ibe extends Fl{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,t){let i=this.force_token_map[e.length];return function vme(n){return null!=n}(i)&&(t.data.fill(-1/0),t.data[i]=0),t}}class rbe extends Fl{constructor(e){super(),this.bos_token_id=e}_call(e,t){return 1===e.length&&(t.data.fill(-1/0),t.data[this.bos_token_id]=0),t}}class obe extends Fl{constructor(e,t){super(),this.max_length=e,this.forced_eos_token_id=t}_call(e,t){}}class sbe extends Fl{constructor(e,t){super(),this.begin_suppress_tokens=e,this.begin_index=t}_call(e,t){if(e.length===this.begin_index)for(let i of this.begin_suppress_tokens)t.data[i]=-1/0;return t}}class abe extends Fl{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,t){const i=t.data;if(i[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return i.fill(-1/0),i[this.timestamp_begin]=0,t;const r=e.slice(this.begin_index);r.length>=1&&r[r.length-1]>=this.timestamp_begin&&(r.length<2||r[r.length-2]>=this.timestamp_begin?i.subarray(this.timestamp_begin).fill(-1/0):i.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&null!==this.max_initial_timestamp_index&&i.subarray(this.timestamp_begin+this.max_initial_timestamp_index+1).fill(-1/0);const a=function Fme(n){return Yo(n).map(i=>Math.log(i))}(i);return Math.log(a.subarray(this.timestamp_begin).map(Math.exp).reduce((p,m)=>p+m))>Pa(a.subarray(0,this.timestamp_begin))[0]&&i.subarray(0,this.timestamp_begin).fill(-1/0),t}}class lbe extends Fl{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const t=e.length,i=[];for(let o=0;o<t+1-this.no_repeat_ngram_size;++o){const s=[];for(let a=0;a<this.no_repeat_ngram_size;++a)s.push(e[o+a]);i.push(s)}const r=new Map;for(const o of i){const s=o.slice(0,o.length-1),a=JSON.stringify(s),c=r.get(a)??[];c.push(o[o.length-1]),r.set(a,c)}return r}getGeneratedNgrams(e,t){const i=t.slice(t.length+1-this.no_repeat_ngram_size,t.length);return e.get(JSON.stringify(i))??[]}calcBannedNgramTokens(e){if(e.length+1<this.no_repeat_ngram_size)return[];{const i=this.getNgrams(e);return this.getGeneratedNgrams(i,e)}}_call(e,t){const i=this.calcBannedNgramTokens(e);for(const r of i)t.data[r]=-1/0;return t}}class cbe extends Fl{constructor(e){super(),this.penalty=e}_call(e,t){for(const i of e)t.data[i]<0?t.data[i]*=this.penalty:t.data[i]/=this.penalty;return t}}class ube extends Fl{constructor(e,t){super(),this.min_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){if(e.length<this.min_length)for(const i of this.eos_token_id)t.data[i]=-1/0;return t}}class dbe extends Fl{constructor(e,t,i){super(),this.prompt_length_to_skip=e,this.min_new_tokens=t,this.eos_token_id=Array.isArray(i)?i:[i]}_call(e,t){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const r of this.eos_token_id)t.data[r]=-1/0;return t}}class hbe extends Fl{constructor(e,t){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(const i of this.bad_words_ids){let r=!0;for(let o=1;o<=i.length-1&&i.length<e.length;++o)if(i.at(-o-1)!==e.at(-o)){r=!1;break}r&&(t.data[i.at(-1)]=-1/0)}return t}}const fbe=class{constructor(n={}){this.max_length=n.max_length??20,this.max_new_tokens=n.max_new_tokens??null,this.min_length=n.min_length??0,this.min_new_tokens=n.min_new_tokens??null,this.early_stopping=n.early_stopping??!1,this.max_time=n.max_time??null,this.do_sample=n.do_sample??!1,this.num_beams=n.num_beams??1,this.num_beam_groups=n.num_beam_groups??1,this.penalty_alpha=n.penalty_alpha??null,this.use_cache=n.use_cache??!0,this.temperature=n.temperature??1,this.top_k=n.top_k??50,this.top_p=n.top_p??1,this.typical_p=n.typical_p??1,this.epsilon_cutoff=n.epsilon_cutoff??0,this.eta_cutoff=n.eta_cutoff??0,this.diversity_penalty=n.diversity_penalty??0,this.repetition_penalty=n.repetition_penalty??1,this.encoder_repetition_penalty=n.encoder_repetition_penalty??1,this.length_penalty=n.length_penalty??1,this.no_repeat_ngram_size=n.no_repeat_ngram_size??0,this.bad_words_ids=n.bad_words_ids??null,this.force_words_ids=n.force_words_ids??null,this.renormalize_logits=n.renormalize_logits??!1,this.constraints=n.constraints??null,this.forced_bos_token_id=n.forced_bos_token_id??null,this.forced_eos_token_id=n.forced_eos_token_id??null,this.remove_invalid_values=n.remove_invalid_values??!1,this.exponential_decay_length_penalty=n.exponential_decay_length_penalty??null,this.suppress_tokens=n.suppress_tokens??null,this.begin_suppress_tokens=n.begin_suppress_tokens??null,this.forced_decoder_ids=n.forced_decoder_ids??null,this.num_return_sequences=n.num_return_sequences??1,this.output_attentions=n.output_attentions??!1,this.output_hidden_states=n.output_hidden_states??!1,this.output_scores=n.output_scores??!1,this.return_dict_in_generate=n.return_dict_in_generate??!1,this.pad_token_id=n.pad_token_id??null,this.bos_token_id=n.bos_token_id??null,this.eos_token_id=n.eos_token_id??null,this.encoder_no_repeat_ngram_size=n.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=n.decoder_start_token_id??null,this.generation_kwargs=n.generation_kwargs??{}}};class Bx extends ca{constructor(e){super(),this.generation_config=e}_call(e,t=-1){return this.sample(e,t)}sample(e,t){throw Error("sample should be implemented in subclasses.")}getLogits(e,t){let i=e.dims.at(-1),r=e.data;if(-1===t)r=r.slice(-i);else{let o=t*i;r=r.slice(o,o+i)}return this.generation_config.temperature>0&&(r=r.map(o=>o/this.generation_config.temperature)),r}randomSelect(e){let t=e.reduce((r,o)=>r+o,0),i=Math.random()*t;for(let r=0;r<e.length;++r)if(i-=e[r],i<=0)return r;return 0}static getSampler(e){if(e.do_sample)return new mbe(e);if(e.num_beams>1)return new gbe(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new pbe(e)}}class pbe extends Bx{sample(e,t=-1){return[[Pa(this.getLogits(e,t))[1],0]]}}class mbe extends Bx{sample(e,t=-1){let i=e.dims.at(-1);this.generation_config.top_k>0&&(i=Math.min(this.generation_config.top_k,i));const o=gp(this.getLogits(e,t),i),s=Yo(o.map(a=>a[1]));return Array.from({length:this.generation_config.num_beams},()=>{const a=this.randomSelect(s);return[o[a][0],Math.log(s[a])]})}}class gbe extends Bx{sample(e,t=-1){let i=e.dims.at(-1);this.generation_config.top_k>0&&(i=Math.min(this.generation_config.top_k,i));const o=gp(this.getLogits(e,t),i),s=Yo(o.map(a=>a[1]));return Array.from({length:this.generation_config.num_beams},(a,c)=>[o[c][0],Math.log(s[c])])}}const{InferenceSession:NC,Tensor:_be,env:bbe}=pp,Vx=new Map,T5=new Map,l_=new Map;function hu(n,e,t){return FC.apply(this,arguments)}function FC(){return(FC=(0,ke.A)(function*(n,e,t){let i=`onnx/${e}${t.quantized?"_quantized":""}.onnx`,r=yield Wz(n,i,!0,t);try{return yield NC.create(r,{executionProviders:Mx})}catch(o){if(1===Mx.length&&"wasm"===Mx[0])throw o;return console.warn(o),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),yield NC.create(r,{executionProviders:["wasm"]})}})).apply(this,arguments)}function xp(n,e){return LC.apply(this,arguments)}function LC(){return(LC=(0,ke.A)(function*(n,e){const t=function ybe(n,e){const t=Object.create(null),i=[];for(const s of n.inputNames){const a=e[s];a instanceof cn?t[s]=bbe.wasm.proxy?a.clone():a:i.push(s)}if(i.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${i.join(", ")}.`);const r=Object.keys(e).length,o=n.inputNames.length;if(r>o){let s=Object.keys(e).filter(a=>!n.inputNames.includes(a));console.warn(`WARNING: Too many inputs were provided (${r} > ${o}). The following inputs will be ignored: "${s.join(", ")}".`)}return t}(n,e);try{let i=yield n.run(t);return i=M5(i),i}catch(i){throw console.error(`An error occurred during model execution: "${i}".`),console.error("Inputs given to model:",t),i}})).apply(this,arguments)}function M5(n){for(let e in n)n[e]instanceof _be?n[e]=new cn(n[e]):"object"==typeof n[e]&&M5(n[e]);return n}function vbe(n){if(n instanceof cn)return n;if(0===n.length)throw Error("items must be non-empty");if(Array.isArray(n[0])){if(n.some(e=>e.length!==n[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new cn("int64",BigInt64Array.from(n.flat().map(e=>BigInt(e))),[n.length,n[0].length])}return new cn("int64",BigInt64Array.from(n.map(e=>BigInt(e))),[1,n.length])}function UC(n,e){let t=n.config.pad_token_id??null,i=n.config.eos_token_id??null;Lz(i)&&(i=[i]);let r=-1!==e.indexOf(t),o=null===i||!i.includes(t);if(r&&o){let s=BigInt64Array.from(e.data.map(a=>a!=t));return new cn("int64",s,e.dims)}return function Xme(n){return function qme(n){const e=n.reduce((t,i)=>t*i,1);return new cn("int64",new BigInt64Array(e).fill(1n),n)}(n.dims)}(e)}function A5(n,e,t){if(!n.inputNames.includes("position_ids"))return;const i=new BigInt64Array(e.attention_mask.data.length);for(let r=0;r<e.attention_mask.dims[0];++r){let o=r*e.attention_mask.dims[1],s=BigInt(0);for(let a=0;a<e.attention_mask.dims[1];++a){const c=o+a;0n===e.attention_mask.data[c]?i[c]=BigInt(1):(i[c]=s,s+=e.attention_mask.data[c])}}e.position_ids=new cn("int64",i,e.attention_mask.dims),t&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function BC(n){return new cn("bool",[n],[1])}function xbe(n,e){return VC.apply(this,arguments)}function VC(){return(VC=(0,ke.A)(function*(n,e){let{encoder_outputs:t,past_key_values:i}=e;t||(t=(yield c_(n,e)).last_hidden_state);let r={input_ids:e.decoder_input_ids,encoder_hidden_states:t};const o=!!i;n.decoder_merged_session.inputNames.includes("use_cache_branch")&&(r.use_cache_branch=BC(o)),n.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(r.encoder_attention_mask=e.attention_mask),A5(n.decoder_merged_session,r,o),n.addPastKeyValues(r,i);const s=yield xp(n.decoder_merged_session,r);let a=s.logits;i=n.getPastKeyValues(s,i);const c=n.getAttentions(s);return new gwe({logits:a,past_key_values:i,encoder_outputs:t,...c})})).apply(this,arguments)}function wbe(n,e,t,i){let r=[],o=0;const s=n.requires_attention_mask??!0;let a=t.decoder_input_ids??t.decoder_start_token_id??t.bos_token_id??t.eos_token_id;a instanceof cn?a=a.tolist().flat():Array.isArray(a)||(a=[a]);for(let c of e){c.dims=[1,...c.dims];let d={inputs:c,encoder_outputs:null,prev_model_outputs:null,output_token_ids:a,done:!1,score:0,id:o++};s&&(d.attention_mask=UC(n,c)),r.push(d)}return r}function Ebe(n,e){return zC.apply(this,arguments)}function zC(){return(zC=(0,ke.A)(function*(n,e){const t=n.main_input_name;let i=e.output_token_ids;e.prev_model_outputs&&(i=i.slice(-1));let r={[t]:e.inputs,decoder_input_ids:vbe(i),encoder_outputs:e.encoder_outputs,past_key_values:e.prev_model_outputs?.past_key_values};e.attention_mask&&(r.attention_mask=e.attention_mask);let o=yield n.forward(r);return e.prev_model_outputs=o,e.encoder_outputs=o.encoder_outputs,o})).apply(this,arguments)}function Sbe(n,e){n.output_token_ids=[...n.output_token_ids,e]}function c_(n,e){return jC.apply(this,arguments)}function jC(){return(jC=(0,ke.A)(function*(n,e){const t=Object.create(null);for(const i of n.session.inputNames)t[i]=e[i];return n.session.inputNames.includes("token_type_ids")&&!t.token_type_ids&&(t.token_type_ids=new cn("int64",new BigInt64Array(t.input_ids.data.length),t.input_ids.dims)),yield xp(n.session,t)})).apply(this,arguments)}function Tbe(n,e){return $C.apply(this,arguments)}function $C(){return($C=(0,ke.A)(function*(n,e){let{input_ids:t,past_key_values:i,attention_mask:r}=e,o={input_ids:t,attention_mask:r??UC(n,t)};const s=!!i;n.session.inputNames.includes("use_cache_branch")&&(o.use_cache_branch=BC(s)),A5(n.session,o,s),n.addPastKeyValues(o,i);let a=yield xp(n.session,o),c=a.logits;return i=n.getPastKeyValues(a,i),{logits:c,past_key_values:i}})).apply(this,arguments)}function Mbe(n,e,t,i,r){let o=[],s=0;for(let a of e){let d,c=a.tolist().map(Number);a.dims=[1,...a.dims],r?(d=r[s],d.dims=[1,...d.dims]):d=UC(n,a);let p={input:a,model_input_ids:a,attention_mask:d,prev_model_outputs:null,output_token_ids:c,num_output_tokens:i,done:!1,score:0,id:s++};o.push(p)}return o}function Abe(n,e){return HC.apply(this,arguments)}function HC(){return(HC=(0,ke.A)(function*(n,e){let t=new BigInt64Array(e.output_token_ids.length).fill(1n),i={input_ids:e.model_input_ids,attention_mask:new cn("int64",t,[1,t.length]),past_key_values:e.prev_model_outputs?.past_key_values},r=yield n.forward(i);return e.prev_model_outputs=r,r})).apply(this,arguments)}function Cbe(n,e){n.output_token_ids=[...n.output_token_ids,e],n.model_input_ids=new cn("int64",[BigInt(e)],[1,1])}class tn extends ca{main_input_name="input_ids";constructor(e,t){super(),this.config=e,this.session=t;const i=l_.get(this.constructor),r=Vx.get(i);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,4===r?(this.can_generate=!0,this._runBeam=Abe,this._getStartBeams=Mbe,this._updateBeam=Cbe,this._forward=Tbe):2===r||3===r?(this.can_generate=!0,this._runBeam=Ebe,this._getStartBeams=wbe,this._updateBeam=Sbe,this._forward=xbe):this._forward=c_}dispose(){var e=this;return(0,ke.A)(function*(){const t=[];for(let i of Object.keys(e)){const r=e[i];r instanceof NC&&t.push(r.handler.dispose())}return yield Promise.all(t)})()}static from_pretrained(e,{quantized:t=!0,progress_callback:i=null,config:r=null,cache_dir:o=null,local_files_only:s=!1,revision:a="main",model_file_name:c=null}={}){var d=this;return(0,ke.A)(function*(){let p={quantized:t,progress_callback:i,config:r,cache_dir:o,local_files_only:s,revision:a,model_file_name:c};const m=l_.get(d),y=Vx.get(m);let v;return 4===y?v=yield Promise.all([vp.from_pretrained(e,p),hu(e,p.model_file_name??"decoder_model_merged",p),mp(e,"generation_config.json",!1,p)]):2===y||3===y?v=yield Promise.all([vp.from_pretrained(e,p),hu(e,"encoder_model",p),hu(e,"decoder_model_merged",p),mp(e,"generation_config.json",!1,p)]):5===y?v=yield Promise.all([vp.from_pretrained(e,p),hu(e,"vision_encoder",p),hu(e,"prompt_encoder_mask_decoder",p)]):1===y?v=yield Promise.all([vp.from_pretrained(e,p),hu(e,"encoder_model",p),hu(e,"decoder_model_merged",p)]):(0!==y&&console.warn(`Model type for '${m??r?.model_type}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),v=yield Promise.all([vp.from_pretrained(e,p),hu(e,p.model_file_name??"model",p)])),new d(...v)})()}_call(e){var t=this;return(0,ke.A)(function*(){return yield t.forward(e)})()}forward(e){var t=this;return(0,ke.A)(function*(){return yield t._forward(t,e)})()}_get_logits_processor(e,t,i=null){const r=new S5;if(null!==e.repetition_penalty&&1!==e.repetition_penalty&&r.push(new cbe(e.repetition_penalty)),null!==e.no_repeat_ngram_size&&e.no_repeat_ngram_size>0&&r.push(new lbe(e.no_repeat_ngram_size)),null!==e.bad_words_ids&&r.push(new hbe(e.bad_words_ids,e.eos_token_id)),null!==e.min_length&&null!==e.eos_token_id&&e.min_length>0&&r.push(new ube(e.min_length,e.eos_token_id)),null!==e.min_new_tokens&&null!==e.eos_token_id&&e.min_new_tokens>0&&r.push(new dbe(t,e.min_new_tokens,e.eos_token_id)),null!==e.forced_bos_token_id&&r.push(new rbe(e.forced_bos_token_id)),null!==e.forced_eos_token_id&&r.push(new obe(e.max_length,e.forced_eos_token_id)),null!==e.begin_suppress_tokens){let o=t>1||null===e.forced_bos_token_id?t:t+1;null!==e.forced_decoder_ids&&(o+=e.forced_decoder_ids[e.forced_decoder_ids.length-1][0]),r.push(new sbe(e.begin_suppress_tokens,o))}return null!==e.forced_decoder_ids&&r.push(new ibe(e.forced_decoder_ids)),null!==i&&r.extend(i),r}_get_generation_config(e){let t=new fbe(this.config);return"generation_config"in this&&Object.assign(t,this.generation_config),null!==e&&Object.assign(t,e),t}generate(e,t=null,i=null,{inputs_attention_mask:r=null}={}){var o=this;return(0,ke.A)(function*(){if(!o.can_generate){let R=`The current model class (${l_.get(o.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const j=o.config.model_type,H=Xx.get(j)??ZC.get(j)??KC.get(j)??QC.get(j);throw H&&(R+=` Please use the following class instead: '${H[0]}'`),Error(R)}if(!(e instanceof cn||function yme(n){return"TypedArray"===n?.prototype?.__proto__?.constructor?.name}(e)||Array.isArray(e)))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${e.constructor.name}".`);let s;if(o.config.is_encoder_decoder)s=0;else if(s=e instanceof cn?e.dims.at(-1):e.length,0===s)throw Error("Must supply a non-empty array of input token ids.");t=o._get_generation_config(t),i=i??new S5,i=o._get_logits_processor(t,s,i);let a=t.eos_token_id;null!==a&&!Array.isArray(a)&&(a=[a]);let c=1;const d=c+(t.max_new_tokens??1/0),p=Number.isInteger(t.max_length)&&null===(t.max_new_tokens??null);let m=Bx.getSampler(t),y=o.getStartBeams(e,t,c,r);for(;y.some(D=>!D.done)&&c<d;){let D=[];for(let R of y){if(R.done){D.push(R);continue}if(p&&R.output_token_ids.length>=t.max_length){R.done=!0,D.push(R);continue}let j=yield o.runBeam(R);t.output_attentions&&o.addAttentionsToBeam(R,j);let H=j.logits.slice(null,-1,null);i(R.output_token_ids,H);let Y=m(H);for(let[he,te]of Y){let re={...R};o.updateBeam(re,he),re.score+=te,a&&a.includes(he)&&(re.done=!0),D.push(re)}}++c,D=o.groupBeams(D).map(R=>R.sort((j,H)=>H.score-j.score).slice(0,t.num_beams)),y=D.flat(),t.callback_function&&t.callback_function(y)}const v=o.groupBeams(y),E=D=>v.map(R=>t.num_return_sequences>1?R.slice(0,t.num_return_sequences).map(j=>j[D]):[R[0][D]]).flat(),I=E("output_token_ids");return t.return_dict_in_generate?{sequences:I,decoder_attentions:E("decoder_attentions"),cross_attentions:E("cross_attentions")}:I})()}addAttentionsToBeam(e,t){if(this.config.is_encoder_decoder){if(!t.cross_attentions||0===t.cross_attentions.length)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.cross_attentions||(e.cross_attentions=[]),e.cross_attentions.push(t.cross_attentions)}if(!t.decoder_attentions||0===t.decoder_attentions.length)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.decoder_attentions||(e.decoder_attentions=[]),e.decoder_attentions.push(t.decoder_attentions)}groupBeams(e){const t=Object.create(null);for(const i of e)void 0===t[i.id]?t[i.id]=[i]:t[i.id].push(i);return Object.values(t)}getPastKeyValues(e,t){const i=Object.create(null);for(const r in e)if(r.startsWith("present")){let o=r.replace("present","past_key_values");i[o]=t&&r.includes("encoder")?t[o]:e[r]}return i}getAttentions(e){const t=Object.create(null);for(const i of["cross_attentions","decoder_attentions"]){const r=[];for(const o in e)o.startsWith(i)&&(r[o.split(".").pop()]=e[o]);t[i]=r}return t}addPastKeyValues(e,t){if(t)Object.assign(e,t);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??1)){let r=[1,this.num_encoder_heads,0,this.encoder_dim_kv],o=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let s=0;s<this.num_decoder_layers;++s)e[`past_key_values.${s}.encoder.key`]=new cn("float32",[],r),e[`past_key_values.${s}.encoder.value`]=new cn("float32",[],r),e[`past_key_values.${s}.decoder.key`]=new cn("float32",[],o),e[`past_key_values.${s}.decoder.value`]=new cn("float32",[],o)}else if("falcon"===this.config.model_type){let r=[1*this.num_heads,0,this.dim_kv];for(let o=0;o<this.num_layers;++o)e[`past_key_values.${o}.key`]=new cn("float32",[],r),e[`past_key_values.${o}.value`]=new cn("float32",[],r)}else if(this.config.multi_query){let r=[1*this.num_heads,0,2*this.dim_kv];for(let o=0;o<this.num_layers;++o)e[`past_key_values.${o}.key_value`]=new cn("float32",[],r)}else if("bloom"===this.config.model_type){let r=[1*this.num_heads,this.dim_kv,0],o=[1*this.num_heads,0,this.dim_kv];for(let s=0;s<this.num_layers;++s)e[`past_key_values.${s}.key`]=new cn("float32",[],r),e[`past_key_values.${s}.value`]=new cn("float32",[],o)}else{let r=[1,this.num_heads,0,this.dim_kv];for(let o=0;o<this.num_layers;++o)e[`past_key_values.${o}.key`]=new cn("float32",[],r),e[`past_key_values.${o}.value`]=new cn("float32",[],r)}}getStartBeams(e,t,i,r){return this._getStartBeams(this,e,t,i,r)}runBeam(e){var t=this;return(0,ke.A)(function*(){return yield t._runBeam(t,e)})()}updateBeam(e,t){return this._updateBeam(e,t)}}class _s{}class u_ extends tn{}class kbe extends tn{}class d_ extends tn{}class h_ extends tn{}class f_ extends tn{}class p_ extends tn{}class m_ extends tn{}class g_ extends tn{}class __ extends tn{}class zx extends tn{}class jx extends tn{}class b_ extends tn{}class $x extends tn{}class Hx extends tn{}class C5 extends tn{}class I5 extends tn{}class D5 extends tn{}class GC extends tn{}class Gx extends tn{}class R5 extends tn{}class P5 extends tn{}class y_ extends tn{}class v_ extends tn{}class x_ extends tn{}class O5 extends tn{}class k5 extends tn{}class N5 extends tn{main_input_name="pixel_values";constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r;const s=this.config.decoder,a=this.config.encoder.model_type;(S6.get(a)??T6.get(a))||console.warn(`Model type for encoder '${a}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const d=Xx.get(s.model_type);if(!d)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const m=new(0,d[1])(s,i,r);this.add_encoder_pkv="num_decoder_layers"in m,this.add_encoder_pkv?(this.num_decoder_layers=m.num_decoder_layers,this.num_decoder_heads=m.num_decoder_heads,this.decoder_dim_kv=m.decoder_dim_kv,this.num_encoder_layers=m.num_encoder_layers,this.num_encoder_heads=m.num_encoder_heads,this.encoder_dim_kv=m.encoder_dim_kv):(this.num_layers=m.num_layers,this.num_heads=m.num_heads,this.dim_kv=m.dim_kv)}}class Wx extends tn{}class F5 extends tn{}class Mve extends tn{}class L5 extends tn{}class U5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class B5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class V5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class z5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class j5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class $5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class H5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class G5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class W5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class q5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class X5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class Y5 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class K5 extends tn{}class Z5 extends tn{}class r0e extends tn{}class Q5 extends tn{}class J5 extends tn{}class e6 extends tn{}class t6 extends tn{}class n6 extends tn{}class WC extends tn{}class i6 extends _s{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class y0e extends _s{constructor({logits:e,pred_boxes:t,pred_masks:i}){super(),this.logits=e,this.pred_boxes=t,this.pred_masks=i}}class r6 extends tn{}class w0e extends i6{}class o6 extends tn{}class s6 extends tn{}class a6 extends tn{}class l6 extends tn{}class c6 extends tn{}class O0e extends tn{}class u6 extends tn{}class L0e extends tn{}class d6 extends tn{}class h6 extends tn{}class f6 extends tn{}class p6 extends tn{}class q0e extends _s{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class X0e extends tn{}class K0e extends _s{constructor({iou_scores:e,pred_masks:t}){super(),this.iou_scores=e,this.pred_masks=t}}class m6 extends tn{}class g6 extends tn{}class kd extends tn{}class qC extends tn{}class qx extends tn{}class XC extends tn{}class w_ extends tn{}class _6 extends tn{}class Mxe extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class b6 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class y6 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class v6 extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class YC extends tn{}class Lxe extends tn{}class x6 extends Lxe{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new ywe(yield t().call(i,e))})()}}class w6 extends tn{}class Vxe extends tn{constructor(e,t,i){super(e,t),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class E6 extends tn{}let Hr=(()=>class n{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static from_pretrained(t,{quantized:i=!0,progress_callback:r=null,config:o=null,cache_dir:s=null,local_files_only:a=!1,revision:c="main",model_file_name:d=null}={}){var p=this;return(0,ke.A)(function*(){let m={quantized:i,progress_callback:r,config:o,cache_dir:s,local_files_only:a,revision:c,model_file_name:d};if(o=yield vp.from_pretrained(t,m),m.config||(m.config=o),!p.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+p.name);for(let y of p.MODEL_CLASS_MAPPINGS){const v=y.get(o.model_type);if(v)return yield v[1].from_pretrained(t,m)}if(p.BASE_IF_FAIL)return console.warn(`Unknown model class "${o.model_type}", attempting to construct from base class.`),yield tn.from_pretrained(t,m);throw Error(`Unsupported model type: ${o.model_type}`)})()}})();const S6=new Map([["bert",["BertModel",class Ibe extends u_{}]],["nomic_bert",["NomicBertModel",class Nbe extends kbe{}]],["roformer",["RoFormerModel",class Fbe extends d_{}]],["electra",["ElectraModel",class Wbe extends f_{}]],["esm",["EsmModel",class _ye extends zx{}]],["convbert",["ConvBertModel",class zbe extends h_{}]],["camembert",["CamembertModel",class Zbe extends p_{}]],["deberta",["DebertaModel",class nye extends m_{}]],["deberta-v2",["DebertaV2Model",class aye extends g_{}]],["mpnet",["MPNetModel",class Tye extends b_{}]],["albert",["AlbertModel",class kye extends Hx{}]],["distilbert",["DistilBertModel",class hye extends __{}]],["roberta",["RobertaModel",class tve extends y_{}]],["xlm",["XLMModel",class sve extends v_{}]],["xlm-roberta",["XLMRobertaModel",class dve extends x_{}]],["clap",["ClapModel",class kxe extends YC{}]],["clip",["CLIPModel",class vve extends Wx{}]],["clipseg",["CLIPSegModel",class Cve extends L5{}]],["chinese_clip",["ChineseCLIPModel",class Ave extends Mve{}]],["siglip",["SiglipModel",class Eve extends F5{}]],["mobilebert",["MobileBertModel",class xye extends jx{}]],["squeezebert",["SqueezeBertModel",class Dye extends $x{}]],["wav2vec2",["Wav2Vec2Model",class txe extends kd{}]],["wav2vec2-bert",["Wav2Vec2BertModel",class hxe extends XC{}]],["unispeech",["UniSpeechModel",class oxe extends qC{}]],["unispeech-sat",["UniSpeechSatModel",class lxe extends qx{}]],["hubert",["HubertModel",class mxe extends kd{}]],["wavlm",["WavLMModel",class bxe extends w_{}]],["audio-spectrogram-transformer",["ASTModel",class gve extends O5{}]],["vits",["VitsModel",x6]],["detr",["DetrModel",class g0e extends WC{}]],["table-transformer",["TableTransformerModel",class v0e extends r6{}]],["vit",["ViTModel",class e0e extends K5{}]],["fastvit",["FastViTModel",class n0e extends Z5{}]],["mobilevit",["MobileViTModel",class s0e extends Q5{}]],["mobilevitv2",["MobileViTV2Model",class l0e extends J5{}]],["owlvit",["OwlViTModel",class u0e extends e6{}]],["owlv2",["Owlv2Model",class h0e extends t6{}]],["beit",["BeitModel",class p0e extends n6{}]],["deit",["DeiTModel",class E0e extends o6{}]],["convnext",["ConvNextModel",class B0e extends d6{}]],["convnextv2",["ConvNextV2Model",class z0e extends h6{}]],["dinov2",["Dinov2Model",class $0e extends f6{}]],["resnet",["ResNetModel",class T0e extends s6{}]],["swin",["SwinModel",class A0e extends a6{}]],["swin2sr",["Swin2SRModel",class I0e extends l6{}]],["donut-swin",["DonutSwinModel",class U0e extends L0e{}]],["yolos",["YolosModel",class G0e extends p6{}]],["dpt",["DPTModel",class R0e extends c6{}]],["glpn",["GLPNModel",class N0e extends u6{}]],["hifigan",["SpeechT5HifiGan",class Txe extends tn{main_input_name="spectrogram"}]],["efficientnet",["EfficientNetModel",class jxe extends E6{}]]]),T6=new Map([["t5",["T5Model",class Uye extends C5{}]],["longt5",["LongT5Model",class Vye extends I5{}]],["mt5",["MT5Model",class jye extends D5{}]],["bart",["BartModel",class Hye extends GC{}]],["mbart",["MBartModel",class qye extends Gx{}]],["marian",["MarianModel",class Z0e extends m6{}]],["whisper",["WhisperModel",class bve extends k5{}]],["m2m_100",["M2M100Model",class J0e extends g6{}]],["blenderbot",["BlenderbotModel",class Zye extends R5{}]],["blenderbot-small",["BlenderbotSmallModel",class Jye extends P5{}]]]),Hxe=new Map([["bloom",["BloomModel",class Xve extends q5{}]],["gpt2",["GPT2Model",class Dve extends U5{}]],["gptj",["GPTJModel",class Fve extends z5{}]],["gpt_bigcode",["GPTBigCodeModel",class Uve extends j5{}]],["gpt_neo",["GPTNeoModel",class Pve extends B5{}]],["gpt_neox",["GPTNeoXModel",class kve extends V5{}]],["codegen",["CodeGenModel",class Vve extends $5{}]],["llama",["LlamaModel",class jve extends H5{}]],["qwen2",["Qwen2Model",class Hve extends G5{}]],["phi",["PhiModel",class Wve extends W5{}]],["mpt",["MptModel",class Kve extends X5{}]],["opt",["OPTModel",class Qve extends Y5{}]],["mistral",["MistralModel",class Cxe extends b6{}]],["starcoder2",["Starcoder2Model",class Dxe extends y6{}]],["falcon",["FalconModel",class Pxe extends v6{}]]]),KC=new Map([["speecht5",["SpeechT5ForSpeechToText",class Exe extends _6{}]],["whisper",["WhisperForConditionalGeneration",class yve extends k5{requires_attention_mask=!1;main_input_name="input_features";constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}generate(e,t=null,i=null){var r=()=>super.generate,o=this;return(0,ke.A)(function*(){if(t=o._get_generation_config(t),t.return_timestamps??=!1,t.return_timestamps&&(i=[new abe(t)]),t.return_token_timestamps&&(t.output_attentions=!0,t.return_dict_in_generate=!0,"translate"===t.task&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!t.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const s=yield r().call(o,e,t,i);return t.return_token_timestamps&&t.alignment_heads&&(s.token_timestamps=o._extract_token_timestamps(s,t.alignment_heads,t.num_frames)),s})()}_extract_token_timestamps(e,t,i=null,r=.02){if(!e.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let o=this.config.median_filter_width;void 0===o&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),o=7);const s=e.cross_attentions.map(d=>{let p=Array.from({length:this.config.decoder_layers},(D,R)=>Px(d.map(j=>j[R]),2)),m=Ox(t.map(([D,R])=>i?p[D].slice(null,R,null,[0,i]):p[D].slice(null,R)));m=m.transpose(1,0,2,3);let[y,v]=function t5(n,e=null,t=1,i=!1){if(null===e){const d=n.data.reduce((v,E)=>v+E,0)/n.data.length,p=Math.sqrt(n.data.reduce((v,E)=>v+(E-d)**2,0)/(n.data.length-t)),m=new cn(n.type,[d],[]);return[new cn(n.type,[p],[]),m]}const r=n5(n,e=du(e,n.dims.length),i),o=n.dims.slice();o[e]=1;const s=new n.data.constructor(n.data.length/n.dims[e]);for(let c=0;c<n.data.length;++c){let d=0;for(let p=n.dims.length-1,m=c,y=1;p>=0;--p){const v=n.dims[p];p!==e&&(d+=m%v*y,y*=o[p]),m=Math.floor(m/v)}s[d]+=(n.data[c]-r.data[d])**2}for(let c=0;c<s.length;++c)s[c]=Math.sqrt(s[c]/(n.dims[e]-t));return i||o.splice(e,1),[new cn(n.type,s,o),r]}(m,-2,0,!0),E=m.clone();for(let D=0;D<E.dims[0];++D){let R=E[D];for(let j=0;j<R.dims[0];++j){let H=R[j];const Y=y[D][j][0],he=v[D][j][0];for(let te=0;te<H.dims[0];++te){let re=H[te];for(let be=0;be<re.data.length;++be)re.data[be]=(re.data[be]-he.data[be])/Y.data[be];re.data.set(Vme(re.data,o))}}}return n5(E,1)}),a=[e.sequences.length,e.sequences[0].length],c=new cn("float32",new Float32Array(a[0]*a[1]),a);for(let d=0;d<a[0];++d){const p=s[d].neg().squeeze_(0);let[m,y]=Gme(p),E=Bo([1],Array.from({length:m.length-1},(D,R)=>m[R+1]-m[R])).map(D=>!!D),I=[];for(let D=0;D<E.length;++D)E[D]&&I.push(y[D]*r);c[d].data.set(I,1)}return c}}]]]),M6=new Map([["speecht5",["SpeechT5ForTextToSpeech",class Sxe extends _6{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}generate_speech(e,t,{threshold:i=.5,minlenratio:r=0,maxlenratio:o=20,vocoder:s=null}={}){var a=this;return(0,ke.A)(function*(){const c={input_ids:e},{encoder_outputs:d,encoder_attention_mask:p}=yield c_(a,c),m=d.dims[1]/a.config.reduction_factor,y=Math.floor(m*o),v=Math.floor(m*r),E=a.config.num_mel_bins;let I=[],D=null,R=null,j=0;for(;;){++j;const he=BC(!!R);let te;te=R?R.output_sequence_out:new cn("float32",new Float32Array(E),[1,1,E]);let re={use_cache_branch:he,output_sequence:te,encoder_attention_mask:p,speaker_embeddings:t,encoder_hidden_states:d};a.addPastKeyValues(re,D),R=yield xp(a.decoder_merged_session,re),D=a.getPastKeyValues(R,D);const{prob:be,spectrum:se}=R;if(I.push(se),j>=v&&(Array.from(be.data).filter(ie=>ie>=i).length>0||j>=y))break}const H=Px(I),{waveform:Y}=yield xp(s.session,{spectrogram:H});return{spectrogram:H,waveform:Y}})()}}]]]),A6=new Map([["vits",["VitsModel",x6]]]),C6=new Map([["bert",["BertForSequenceClassification",class Rbe extends u_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["roformer",["RoFormerForSequenceClassification",class Ube extends d_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["electra",["ElectraForSequenceClassification",class Xbe extends f_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["esm",["EsmForSequenceClassification",class yye extends zx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["convbert",["ConvBertForSequenceClassification",class $be extends h_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["camembert",["CamembertForSequenceClassification",class Jbe extends p_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["deberta",["DebertaForSequenceClassification",class rye extends m_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["deberta-v2",["DebertaV2ForSequenceClassification",class cye extends g_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["mpnet",["MPNetForSequenceClassification",class Aye extends b_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["albert",["AlbertForSequenceClassification",class Nye extends Hx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["distilbert",["DistilBertForSequenceClassification",class fye extends __{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["roberta",["RobertaForSequenceClassification",class ive extends y_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["xlm",["XLMForSequenceClassification",class lve extends v_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["xlm-roberta",["XLMRobertaForSequenceClassification",class fve extends x_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["bart",["BartForSequenceClassification",class Wye extends GC{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["mbart",["MBartForSequenceClassification",class Yye extends Gx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["mobilebert",["MobileBertForSequenceClassification",class Eye extends jx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["squeezebert",["SqueezeBertForSequenceClassification",class Pye extends $x{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]]]),I6=new Map([["bert",["BertForTokenClassification",class Pbe extends u_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["roformer",["RoFormerForTokenClassification",class Bbe extends d_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["electra",["ElectraForTokenClassification",class Ybe extends f_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["esm",["EsmForTokenClassification",class vye extends zx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["convbert",["ConvBertForTokenClassification",class Hbe extends h_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["camembert",["CamembertForTokenClassification",class eye extends p_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["deberta",["DebertaForTokenClassification",class oye extends m_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["deberta-v2",["DebertaV2ForTokenClassification",class uye extends g_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["mpnet",["MPNetForTokenClassification",class Cye extends b_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["distilbert",["DistilBertForTokenClassification",class pye extends __{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["roberta",["RobertaForTokenClassification",class rve extends y_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["xlm",["XLMForTokenClassification",class cve extends v_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["xlm-roberta",["XLMRobertaForTokenClassification",class pve extends x_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]]]),ZC=new Map([["t5",["T5ForConditionalGeneration",class Bye extends C5{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}]],["longt5",["LongT5ForConditionalGeneration",class zye extends I5{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}]],["mt5",["MT5ForConditionalGeneration",class $ye extends D5{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}]],["bart",["BartForConditionalGeneration",class Gye extends GC{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["mbart",["MBartForConditionalGeneration",class Xye extends Gx{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["marian",["MarianMTModel",class Q0e extends m6{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["m2m_100",["M2M100ForConditionalGeneration",class exe extends g6{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["blenderbot",["BlenderbotForConditionalGeneration",class Qye extends R5{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",class eve extends P5{constructor(e,t,i,r){super(e,t),this.decoder_merged_session=i,this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]]]),Xx=new Map([["bloom",["BloomForCausalLM",class Yve extends q5{}]],["gpt2",["GPT2LMHeadModel",class Rve extends U5{}]],["gptj",["GPTJForCausalLM",class Lve extends z5{}]],["gpt_bigcode",["GPTBigCodeForCausalLM",class Bve extends j5{}]],["gpt_neo",["GPTNeoForCausalLM",class Ove extends B5{}]],["gpt_neox",["GPTNeoXForCausalLM",class Nve extends V5{}]],["codegen",["CodeGenForCausalLM",class zve extends $5{}]],["llama",["LlamaForCausalLM",class $ve extends H5{}]],["qwen2",["Qwen2ForCausalLM",class Gve extends G5{}]],["phi",["PhiForCausalLM",class qve extends W5{}]],["mpt",["MptForCausalLM",class Zve extends X5{}]],["opt",["OPTForCausalLM",class Jve extends Y5{}]],["mbart",["MBartForCausalLM",class Kye extends Gx{constructor(e,t,i){super(e,t),this.generation_config=i,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}]],["mistral",["MistralForCausalLM",class Ixe extends b6{}]],["starcoder2",["Starcoder2ForCausalLM",class Rxe extends y6{}]],["falcon",["FalconForCausalLM",class Oxe extends v6{}]],["trocr",["TrOCRForCausalLM",class Axe extends Mxe{}]],["stablelm",["StableLmForCausalLM",class zxe extends Vxe{}]]]),D6=new Map([["bert",["BertForMaskedLM",class Dbe extends u_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["roformer",["RoFormerForMaskedLM",class Lbe extends d_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["electra",["ElectraForMaskedLM",class qbe extends f_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["esm",["EsmForMaskedLM",class bye extends zx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["convbert",["ConvBertForMaskedLM",class jbe extends h_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["camembert",["CamembertForMaskedLM",class Qbe extends p_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["deberta",["DebertaForMaskedLM",class iye extends m_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["deberta-v2",["DebertaV2ForMaskedLM",class lye extends g_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["mpnet",["MPNetForMaskedLM",class Mye extends b_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["albert",["AlbertForMaskedLM",class Lye extends Hx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["distilbert",["DistilBertForMaskedLM",class gye extends __{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["roberta",["RobertaForMaskedLM",class nve extends y_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["xlm",["XLMWithLMHeadModel",class ave extends v_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["xlm-roberta",["XLMRobertaForMaskedLM",class hve extends x_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["mobilebert",["MobileBertForMaskedLM",class wye extends jx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]],["squeezebert",["SqueezeBertForMaskedLM",class Rye extends $x{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Zo(yield t().call(i,e))})()}}]]]),R6=new Map([["bert",["BertForQuestionAnswering",class Obe extends u_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["roformer",["RoFormerForQuestionAnswering",class Vbe extends d_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["electra",["ElectraForQuestionAnswering",class Kbe extends f_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["convbert",["ConvBertForQuestionAnswering",class Gbe extends h_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["camembert",["CamembertForQuestionAnswering",class tye extends p_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["deberta",["DebertaForQuestionAnswering",class sye extends m_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["deberta-v2",["DebertaV2ForQuestionAnswering",class dye extends g_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["mpnet",["MPNetForQuestionAnswering",class Iye extends b_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["albert",["AlbertForQuestionAnswering",class Fye extends Hx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["distilbert",["DistilBertForQuestionAnswering",class mye extends __{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["roberta",["RobertaForQuestionAnswering",class ove extends y_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["xlm",["XLMForQuestionAnswering",class uve extends v_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["xlm-roberta",["XLMRobertaForQuestionAnswering",class mve extends x_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["mobilebert",["MobileBertForQuestionAnswering",class Sye extends jx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]],["squeezebert",["SqueezeBertForQuestionAnswering",class Oye extends $x{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bs(yield t().call(i,e))})()}}]]]),QC=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",N5]]]),Gxe=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",N5]]]),P6=new Map([["vit",["ViTForImageClassification",class t0e extends K5{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["fastvit",["FastViTForImageClassification",class i0e extends Z5{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["mobilevit",["MobileViTForImageClassification",class a0e extends Q5{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["mobilevitv2",["MobileViTV2ForImageClassification",class c0e extends J5{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["beit",["BeitForImageClassification",class m0e extends n6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["deit",["DeiTForImageClassification",class S0e extends o6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["convnext",["ConvNextForImageClassification",class V0e extends d6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["convnextv2",["ConvNextV2ForImageClassification",class j0e extends h6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["dinov2",["Dinov2ForImageClassification",class H0e extends f6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["resnet",["ResNetForImageClassification",class M0e extends s6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["swin",["SwinForImageClassification",class C0e extends a6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["segformer",["SegformerForImageClassification",class Uxe extends w6{}]],["efficientnet",["EfficientNetForImageClassification",class $xe extends E6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]]]),O6=new Map([["detr",["DetrForObjectDetection",class _0e extends WC{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new i6(yield t().call(i,e))})()}}]],["table-transformer",["TableTransformerForObjectDetection",class x0e extends r6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new w0e(yield t().call(i,e))})()}}]],["yolos",["YolosForObjectDetection",class W0e extends p6{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new q0e(yield t().call(i,e))})()}}]]]),k6=new Map([["owlvit",["OwlViTForObjectDetection",class d0e extends e6{}]],["owlv2",["Owlv2ForObjectDetection",class f0e extends t6{}]]]),N6=new Map([["detr",["DetrForSegmentation",class b0e extends WC{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new y0e(yield t().call(i,e))})()}}]],["clipseg",["CLIPSegForImageSegmentation",class Ive extends L5{}]]]),F6=new Map([["segformer",["SegformerForSemanticSegmentation",class Bxe extends w6{}]]]),Wxe=new Map([["sam",["SamModel",class Y0e extends X0e{constructor(e,t,i){super(e,t),this.prompt_encoder_mask_decoder=i}get_image_embeddings({pixel_values:e}){var t=this;return(0,ke.A)(function*(){return yield c_(t,{pixel_values:e})})()}forward(e){var t=this;return(0,ke.A)(function*(){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...yield t.get_image_embeddings(e)}),!e.input_labels){const i=e.input_points.dims.slice(0,-1),r=i.reduce((o,s)=>o*s,1);e.input_labels=new cn("int64",new BigInt64Array(r).fill(1n),i)}return yield xp(t.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})})()}_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new K0e(yield t().call(i,e))})()}}]]]),L6=new Map([["wav2vec2",["Wav2Vec2ForCTC",class nxe extends kd{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new wp(yield t().call(i,e))})()}}]],["wav2vec2-bert",["Wav2Vec2BertForCTC",class fxe extends XC{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new wp(yield t().call(i,e))})()}}]],["unispeech",["UniSpeechForCTC",class sxe extends qC{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new wp(yield t().call(i,e))})()}}]],["unispeech-sat",["UniSpeechSatForCTC",class cxe extends qx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new wp(yield t().call(i,e))})()}}]],["wavlm",["WavLMForCTC",class yxe extends w_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new wp(yield t().call(i,e))})()}}]],["hubert",["HubertForCTC",class gxe extends kd{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new wp(yield t().call(i,e))})()}}]]]),U6=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",class ixe extends kd{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",class pxe extends XC{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["unispeech",["UniSpeechForSequenceClassification",class axe extends qC{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["unispeech-sat",["UniSpeechSatForSequenceClassification",class uxe extends qx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["wavlm",["WavLMForSequenceClassification",class vxe extends w_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["hubert",["HubertForSequenceClassification",class _xe extends kd{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new zi(yield t().call(i,e))})()}}]],["audio-spectrogram-transformer",["ASTForAudioClassification",class _ve extends O5{}]]]),qxe=new Map([["wavlm",["WavLMForXVector",class xxe extends w_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new _we(yield t().call(i,e))})()}}]]]),Xxe=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",class dxe extends qx{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["wavlm",["WavLMForAudioFrameClassification",class wxe extends w_{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",class rxe extends kd{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new Ko(yield t().call(i,e))})()}}]]]),Yxe=new Map([["vitmatte",["VitMatteForImageMatting",class o0e extends r0e{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){return new bwe(yield t().call(i,e))})()}}]]]),B6=new Map([["swin2sr",["Swin2SRForImageSuperResolution",class D0e extends l6{}]]]),V6=new Map([["dpt",["DPTForDepthEstimation",class P0e extends c6{}]],["depth_anything",["DepthAnythingForDepthEstimation",class k0e extends O0e{}]],["glpn",["GLPNForDepthEstimation",class F0e extends u6{}]]]),z6=new Map([["clip",["CLIPVisionModelWithProjection",class wve extends Wx{static from_pretrained(e,t={}){var i=()=>super.from_pretrained,r=this;return(0,ke.A)(function*(){return t.model_file_name??="vision_model",i().call(r,e,t)})()}}]],["siglip",["SiglipVisionModel",class Tve extends Wx{static from_pretrained(e,t={}){var i=()=>super.from_pretrained,r=this;return(0,ke.A)(function*(){return t.model_file_name??="vision_model",i().call(r,e,t)})()}}]]]),j6=[[S6,0],[T6,1],[Hxe,4],[C6,0],[I6,0],[ZC,2],[KC,2],[Xx,4],[D6,0],[R6,0],[QC,3],[P6,0],[N6,0],[F6,0],[Yxe,0],[B6,0],[V6,0],[O6,0],[k6,0],[Wxe,5],[L6,0],[U6,0],[M6,2],[A6,0],[qxe,0],[Xxe,0],[z6,0]];for(const[n,e]of j6)for(const[t,i]of n.values())Vx.set(t,e),l_.set(i,t),T5.set(t,i);const Kxe=[["CLIPTextModelWithProjection",class xve extends Wx{static from_pretrained(e,t={}){var i=()=>super.from_pretrained,r=this;return(0,ke.A)(function*(){return t.model_file_name??="text_model",i().call(r,e,t)})()}},0],["SiglipTextModel",class Sve extends F5{static from_pretrained(e,t={}){var i=()=>super.from_pretrained,r=this;return(0,ke.A)(function*(){return t.model_file_name??="text_model",i().call(r,e,t)})()}},0],["ClapTextModelWithProjection",class Nxe extends YC{static from_pretrained(e,t={}){var i=()=>super.from_pretrained,r=this;return(0,ke.A)(function*(){return t.model_file_name??="text_model",i().call(r,e,t)})()}},0],["ClapAudioModelWithProjection",class Fxe extends YC{static from_pretrained(e,t={}){var i=()=>super.from_pretrained,r=this;return(0,ke.A)(function*(){return t.model_file_name??="audio_model",i().call(r,e,t)})()}},0]];for(const[n,e,t]of Kxe)Vx.set(n,t),l_.set(e,n),T5.set(n,e);class E_ extends Hr{static MODEL_CLASS_MAPPINGS=j6.map(e=>e[0]);static BASE_IF_FAIL=!0}let $6=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[C6]})(),Zxe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[I6]})(),JC=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[ZC]})(),Qxe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[KC]})(),Jxe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[M6]})(),ewe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[A6]})(),twe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[Xx]})(),nwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[D6]})(),iwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[R6]})(),rwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[QC]})(),owe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[P6]})(),swe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[N6]})(),awe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[F6]})(),lwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[O6]})(),cwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[k6]})(),uwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[L6]})(),dwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[U6]})(),hwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[Gxe]})(),fwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[B6]})(),pwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[V6]})(),mwe=(()=>class n extends Hr{static MODEL_CLASS_MAPPINGS=[z6]})();class gwe extends _s{constructor({logits:e,past_key_values:t,encoder_outputs:i,decoder_attentions:r=null,cross_attentions:o=null}){super(),this.logits=e,this.past_key_values=t,this.encoder_outputs=i,this.decoder_attentions=r,this.cross_attentions=o}}class zi extends _s{constructor({logits:e}){super(),this.logits=e}}class _we extends _s{constructor({logits:e,embeddings:t}){super(),this.logits=e,this.embeddings=t}}class Ko extends _s{constructor({logits:e}){super(),this.logits=e}}class Zo extends _s{constructor({logits:e}){super(),this.logits=e}}class bs extends _s{constructor({start_logits:e,end_logits:t}){super(),this.start_logits=e,this.end_logits=t}}class wp extends _s{constructor({logits:e}){super(),this.logits=e}}class bwe extends _s{constructor({alphas:e}){super(),this.alphas=e}}class ywe extends _s{constructor({waveform:e,spectrogram:t}){super(),this.waveform=e,this.spectrogram=t}}var eI=q(806);const ol=typeof self<"u",vwe=ol&&"DedicatedWorkerGlobalScope"===self.constructor.name;let Nd,H6,fu;if(ol)Nd=(n,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(n,e)},fu=self.createImageBitmap,H6=self.ImageData;else{if(!eI)throw new Error("Unable to load image processing library.");fu=function(){var n=(0,ke.A)(function*(e){const i=(yield e.metadata()).channels;let{data:r,info:o}=yield e.rotate().raw().toBuffer({resolveWithObject:!0});const s=new ys(new Uint8ClampedArray(r),o.width,o.height,o.channels);return void 0!==i&&i!==o.channels&&s.convert(i),s});return function(t){return n.apply(this,arguments)}}()}const xwe={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},wwe=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class ys{constructor(e,t,i,r){this.data=e,this.width=t,this.height=i,this.channels=r}get size(){return[this.width,this.height]}static read(e){var t=this;return(0,ke.A)(function*(){if(e instanceof ys)return e;if("string"==typeof e||e instanceof URL)return yield t.fromURL(e);throw new Error("Unsupported input type: "+typeof e)})()}static fromURL(e){var t=this;return(0,ke.A)(function*(){let i=yield Dx(e);if(200!==i.status)throw new Error(`Unable to read image from "${e}" (${i.status} ${i.statusText})`);let r=yield i.blob();return t.fromBlob(r)})()}static fromBlob(e){var t=this;return(0,ke.A)(function*(){if(ol){let i=yield fu(e);const r=Nd(i.width,i.height).getContext("2d");return r.drawImage(i,0,0),new t(r.getImageData(0,0,i.width,i.height).data,i.width,i.height,4)}{let i=eI(yield e.arrayBuffer());return yield fu(i)}})()}static fromTensor(e,t="CHW"){if(3!==e.dims.length)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if("CHW"===t)e=e.transpose(1,2,0);else if("HWC"!==t)throw new Error(`Unsupported channel format: ${t}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new ys(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(1===this.channels)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let t=0,i=0;t<this.data.length;t+=this.channels)e[i++]=Math.round(.2989*this.data[t]+.587*this.data[t+1]+.114*this.data[t+2]);break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(3===this.channels)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let t=0,i=0;t<this.data.length;++t)e[i++]=this.data[t],e[i++]=this.data[t],e[i++]=this.data[t];break;case 4:for(let t=0,i=0;t<this.data.length;t+=4)e[i++]=this.data[t],e[i++]=this.data[t+1],e[i++]=this.data[t+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(4===this.channels)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let t=0,i=0;t<this.data.length;++t)e[i++]=this.data[t],e[i++]=this.data[t],e[i++]=this.data[t],e[i++]=255;break;case 3:for(let t=0,i=0;t<this.data.length;t+=3)e[i++]=this.data[t],e[i++]=this.data[t+1],e[i++]=this.data[t+2],e[i++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}resize(e,t,{resample:i=2}={}){var r=this;return(0,ke.A)(function*(){let o=xwe[i]??i;if(ol){let s=r.channels,a=r.toCanvas();const c=Nd(e,t).getContext("2d");return c.drawImage(a,0,0,e,t),new ys(c.getImageData(0,0,e,t).data,e,t,4).convert(s)}{let s=r.toSharp();switch(o){case"box":case"hamming":("box"===o||"hamming"===o)&&(console.warn(`Resampling method ${o} is not yet supported. Using bilinear instead.`),o="bilinear");case"nearest":case"bilinear":case"bicubic":s=s.affine([e/r.width,0,0,t/r.height],{interpolator:o});break;case"lanczos":s=s.resize({width:e,height:t,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${o} is not supported.`)}return yield fu(s)}})()}pad([e,t,i,r]){var o=this;return(0,ke.A)(function*(){if(e=Math.max(e,0),t=Math.max(t,0),i=Math.max(i,0),r=Math.max(r,0),0===e&&0===t&&0===i&&0===r)return o;if(ol){let s=o.channels,a=o.toCanvas(),c=o.width+e+t,d=o.height+i+r;const p=Nd(c,d).getContext("2d");return p.drawImage(a,0,0,o.width,o.height,e,i,c,d),new ys(p.getImageData(0,0,c,d).data,c,d,4).convert(s)}{let s=o.toSharp().extend({left:e,right:t,top:i,bottom:r});return yield fu(s)}})()}crop([e,t,i,r]){var o=this;return(0,ke.A)(function*(){if(e=Math.max(e,0),t=Math.max(t,0),i=Math.min(i,o.width-1),r=Math.min(r,o.height-1),0===e&&0===t&&i===o.width-1&&r===o.height-1)return o;const s=i-e+1,a=r-t+1;if(ol){const c=o.channels,d=o.toCanvas(),p=Nd(s,a).getContext("2d");return p.drawImage(d,e,t,s,a,0,0,s,a),new ys(p.getImageData(0,0,s,a).data,s,a,4).convert(c)}{const c=o.toSharp().extract({left:e,top:t,width:s,height:a});return yield fu(c)}})()}center_crop(e,t){var i=this;return(0,ke.A)(function*(){if(i.width===e&&i.height===t)return i;let r=(i.width-e)/2,o=(i.height-t)/2;if(ol){let s=i.channels,a=i.toCanvas();const c=Nd(e,t).getContext("2d");let d=0,p=0,m=0,y=0;return r>=0?d=r:m=-r,o>=0?p=o:y=-o,c.drawImage(a,d,p,e,t,m,y,e,t),new ys(c.getImageData(0,0,e,t).data,e,t,4).convert(s)}{let s=i.toSharp();if(r>=0&&o>=0)s=s.extract({left:Math.floor(r),top:Math.floor(o),width:e,height:t});else if(r<=0&&o<=0){let a=Math.floor(-o),c=Math.floor(-r);s=s.extend({top:a,left:c,right:e-i.width-c,bottom:t-i.height-a})}else{let a=[0,0],c=0;o<0?(a[0]=Math.floor(-o),a[1]=t-i.height-a[0]):c=Math.floor(o);let d=[0,0],p=0;r<0?(d[0]=Math.floor(-r),d[1]=e-i.width-d[0]):p=Math.floor(r),s=s.extend({top:a[0],bottom:a[1],left:d[0],right:d[1]}).extract({left:p,top:c,width:e,height:t})}return yield fu(s)}})()}toBlob(e="image/png",t=1){var i=this;return(0,ke.A)(function*(){if(!ol)throw new Error("toBlob() is only supported in browser environments.");return yield i.toCanvas().convertToBlob({type:e,quality:t})})()}toTensor(e="CHW"){let t=new cn("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if("HWC"!==e){if("CHW"!==e)throw new Error(`Unsupported channel format: ${e}`);t=t.permute(2,0,1)}return t}toCanvas(){if(!ol)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),t=Nd(e.width,e.height),i=new H6(e.data,e.width,e.height);return t.getContext("2d").putImageData(i,0,0),t}_update(e,t,i,r=null){return this.data=e,this.width=t,this.height=i,null!==r&&(this.channels=r),this}clone(){return new ys(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}save(e){var t=this;return(0,ke.A)(function*(){if(!ol){if(to.useFS)return yield t.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}{if(vwe)throw new Error("Unable to save an image from a Web Worker.");const i=e.split(".").pop().toLowerCase(),r=wwe.get(i)??"image/png",o=yield t.toBlob(r),s=URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download=e,a.click(),a.remove()}})()}toSharp(){if(ol)throw new Error("toSharp() is only supported in server-side environments.");return eI(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}function tI(){return(tI=(0,ke.A)(function*(n,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const t=yield(yield Dx(n)).arrayBuffer(),i=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${i.sampleRate}Hz.`);const r=yield i.decodeAudioData(t);let o;if(2===r.numberOfChannels){const s=Math.sqrt(2),a=r.getChannelData(0),c=r.getChannelData(1);o=new Float32Array(a.length);for(let d=0;d<r.length;++d)o[d]=s*(a[d]+c[d])/2}else o=r.getChannelData(0);return o})).apply(this,arguments)}function G6(n){if(n<1)return new Float64Array;if(1===n)return new Float64Array([1]);const e=n-1,t=Math.PI/e,i=new Float64Array(n);for(let r=0;r<n;++r)i[r]=.5+.5*Math.cos(t*(2*r-e));return i}const Swe={htk:n=>2595*Math.log10(1+n/700),kaldi:n=>1127*Math.log(1+n/700),slaney:(n,e=1e3,t=15,i=27/Math.log(6.4))=>n>=e?t+Math.log(n/e)*i:3*n/200};function nI(n,e="htk"){const t=Swe[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"==typeof n?t(n):n.map(i=>t(i))}const Twe={htk:n=>700*(10**(n/2595)-1),kaldi:n=>700*(Math.exp(n/1127)-1),slaney:(n,e=1e3,t=15,i=Math.log(6.4)/27)=>n>=t?e*Math.exp(i*(n-t)):200*n/3};function W6(n,e,t){const i=(e-n)/(t-1);return Float64Array.from({length:t},(r,o)=>n+i*o)}function S_(n,e,t,i,r,o=null,s="htk",a=!1){if(null!==o&&"slaney"!==o)throw new Error('norm must be one of null or "slaney"');const p=W6(nI(t,s),nI(i,s),e+2);let y,m=function Mwe(n,e="htk"){const t=Twe[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return"number"==typeof n?t(n):n.map(i=>t(i))}(p,s);if(a){const E=r/(2*n);y=nI(Float64Array.from({length:n},(I,D)=>D*E),s),m=p}else y=W6(0,Math.floor(r/2),n);const v=function Awe(n,e){const t=Float64Array.from({length:e.length-1},(s,a)=>e[a+1]-e[a]),i=Array.from({length:n.length},()=>new Array(e.length));for(let s=0;s<n.length;++s){const a=i[s];for(let c=0;c<e.length;++c)a[c]=e[c]-n[s]}const r=e.length-2,o=Array.from({length:r},()=>new Array(n.length));for(let s=0;s<n.length;++s){const a=i[s];for(let c=0;c<r;++c)o[c][s]=Math.max(0,Math.min(-a[c]/t[c],a[c+2]/t[c+1]))}return o}(y,m);if(null!==o&&"slaney"===o)for(let E=0;E<e;++E){const I=v[E],D=2/(m[E+2]-m[E]);for(let R=0;R<n;++R)I[R]*=D}return v}function q6(n,e,t,i,r){if(t<=0)throw new Error("reference must be greater than zero");if(i<=0)throw new Error("min_value must be greater than zero");t=Math.max(i,t);const o=Math.log10(t);for(let s=0;s<n.length;++s)n[s]=e*Math.log10(Math.max(i,n[s])-o);if(null!==r){if(r<=0)throw new Error("db_range must be greater than zero");const s=Pa(n)[0]-r;for(let a=0;a<n.length;++a)n[a]=Math.max(n[a],s)}return n}function Yx(n,e,t,i,{fft_length:r=null,power:o=1,center:s=!0,pad_mode:a="reflect",onesided:c=!0,preemphasis:d=null,mel_filters:p=null,mel_floor:m=1e-10,log_mel:y=null,reference:v=1,min_value:E=1e-10,db_range:I=null,remove_dc_offset:D=null,max_num_frames:R=null,do_pad:j=!0,transpose:H=!1}={}){const Y=e.length;if(null===r&&(r=t),t>r)throw Error(`frame_length (${t}) may not be larger than fft_length (${r})`);if(Y!==t)throw new Error(`Length of the window (${Y}) must equal frame_length (${t})`);if(i<=0)throw new Error("hop_length must be greater than zero");if(null===o&&null!==p)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(s){if("reflect"!==a)throw new Error(`pad_mode="${a}" not implemented yet.`);const ye=Math.floor((r-1)/2)+1;n=function Cwe(n,e,t){const i=new n.constructor(n.length+e+t),r=n.length-1;for(let o=0;o<n.length;++o)i[e+o]=n[o];for(let o=1;o<=e;++o)i[e-o]=n[Tx(o,r)];for(let o=1;o<=t;++o)i[r+e+o]=n[Tx(r-o,r)];return i}(n,ye,ye)}const he=Math.floor(1+Math.floor((n.length-t)/i)),te=c?Math.floor(r/2)+1:r;let re=he,be=he;null!==R&&(R>he?j&&(be=R):be=re=R);const se=new Bme(r),ie=new Float64Array(r),Ee=new Float64Array(se.outputBufferSize),$e=new Array(re);for(let ye=0;ye<re;++ye){const De=ye*i;for(let at=0;at<t;++at)ie[at]=n[De+at];if(D){let at=0;for(let jt=0;jt<t;++jt)at+=ie[jt];const Vt=at/t;for(let jt=0;jt<t;++jt)ie[jt]-=Vt}if(null!==d){for(let at=t-1;at>=1;--at)ie[at]-=d*ie[at-1];ie[0]*=1-d}for(let at=0;at<e.length;++at)ie[at]*=e[at];se.realTransform(Ee,ie);const Fe=new Array(te);for(let at=0;at<Fe.length;++at){const Vt=at<<1;Fe[at]=Ee[Vt]**2+Ee[Vt+1]**2}$e[ye]=Fe}if(null!==o&&2!==o){const ye=2/o;for(let De=0;De<$e.length;++De){const Fe=$e[De];for(let at=0;at<Fe.length;++at)Fe[at]**=ye}}const He=p.length,Ge=new Float32Array(He*be),Ie=H?[be,He]:[He,be];for(let ye=0;ye<He;++ye){const De=p[ye];for(let Fe=0;Fe<re;++Fe){const at=$e[Fe];let Vt=0;for(let jt=0;jt<te;++jt)Vt+=De[jt]*at[jt];Ge[H?Fe*He+ye:ye*re+Fe]=Math.max(m,Vt)}}if(null!==o&&null!==y){const ye=Math.min(Ge.length,re*He);switch(y){case"log":for(let De=0;De<ye;++De)Ge[De]=Math.log(Ge[De]);break;case"log10":for(let De=0;De<ye;++De)Ge[De]=Math.log10(Ge[De]);break;case"dB":if(1===o)!function Iwe(n,e=1,t=1e-5,i=null){q6(n,20,e,t,i)}(Ge,v,E,I);else{if(2!==o)throw new Error(`Cannot use log_mel option '${y}' with power ${o}`);!function Dwe(n,e=1,t=1e-10,i=null){q6(n,10,e,t,i)}(Ge,v,E,I)}break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${y}'`)}}return{data:Ge,dims:Ie}}function Kx(n,e,{periodic:t=!0,frame_length:i=null,center:r=!0}={}){const o=t?n+1:n;let s;switch(e){case"boxcar":s=new Float64Array(o).fill(1);break;case"hann":case"hann_window":s=G6(o);break;case"povey":s=G6(o).map(a=>Math.pow(a,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(t&&(s=s.subarray(0,n)),null===i)return s;if(n>i)throw new Error(`Length of the window (${n}) may not be larger than frame_length (${i})`);return s}function Rwe([n,e,t,i]){return[n-t/2,e-i/2,n+t/2,e+i/2]}function iI(n,e=.5,t=null,i=!1){const r=n.logits,o=n.pred_boxes,[s,a,c]=r.dims;if(null!==t&&t.length!==s)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let d=[];for(let p=0;p<s;++p){let m=null!==t?t[p]:null,y={boxes:[],classes:[],scores:[]},v=r[p],E=o[p];for(let I=0;I<a;++I){let j,D=v[I],R=[];if(i){j=D.sigmoid().data;for(let H=0;H<j.length;++H)j[H]>e&&R.push(H)}else{let H=Pa(D.data)[1];if(H===c-1)continue;R.push(H),j=Yo(D.data)}for(const H of R){let Y=E[I].data;Y=Rwe(Y),null!==m&&(Y=Y.map((he,te)=>he*m[(te+1)%2])),y.boxes.push(Y),y.classes.push(H),y.scores.push(j[H])}}d.push(y)}return d}function T_(n,e){if(!(n instanceof Float32Array||n instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${n?.constructor?.name??typeof n} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function X6(n,e,t=0,i=null){const r=n/e;let o=function zme(n){const e=Math.round(n);return Math.abs(n)%1==.5?e%2==0?e:e-1:e}(r)*e;return null!==i&&o>i&&(o=Math.floor(r)*e),o<t&&(o=Math.ceil(r)*e),o}function rI([n,e],t){return[Math.max(Math.floor(n/t),1)*t,Math.max(Math.floor(e/t),1)*t]}class Fd extends ca{constructor(e){super(),this.config=e}}class Vr extends Fd{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&void 0!==this.size.width&&void 0!==this.size.height&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}thumbnail(e,t,i=2){return(0,ke.A)(function*(){const r=e.height,o=e.width,a=t.width;let c=Math.min(r,t.height),d=Math.min(o,a);return c===r&&d===o?e:(r>o?d=Math.floor(o*c/r):o>r&&(c=Math.floor(r*d/o)),yield e.resize(d,c,{resample:i}))})()}crop_margin(e,t=200){return(0,ke.A)(function*(){const i=e.clone().grayscale(),r=Xz(i.data)[0],s=Pa(i.data)[0]-r;if(0===s)return e;const a=t/255;let c=i.width,d=i.height,p=0,m=0;for(let y=0;y<i.height;++y){const v=y*i.width;for(let E=0;E<i.width;++E)(i.data[v+E]-r)/s<a&&(c=Math.min(c,E),d=Math.min(d,y),p=Math.max(p,E),m=Math.max(m,y))}return e=yield e.crop([c,d,p,m])})()}pad_image(e,t,i,{mode:r="constant",center:o=!1,constant_values:s=0}={}){const[a,c,d]=t;let p,m;if("number"==typeof i?(p=i,m=i):(p=i.width,m=i.height),p!==c||m!==a){const y=new Float32Array(p*m*d);if(Array.isArray(s))for(let I=0;I<y.length;++I)y[I]=s[I%d];else 0!==s&&y.fill(s);const[v,E]=o?[Math.floor((p-c)/2),Math.floor((m-a)/2)]:[0,0];for(let I=0;I<a;++I){const D=(I+E)*p,R=I*c;for(let j=0;j<c;++j){const H=(D+j+v)*d,Y=(R+j)*d;for(let he=0;he<d;++he)y[H+he]=e[Y+he]}}if("symmetric"===r){if(o)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const I=a-1,D=c-1;for(let R=0;R<m;++R){const j=R*p,H=Tx(R,I)*c;for(let Y=0;Y<p;++Y){if(R<a&&Y<c)continue;const he=(j+Y)*d,te=(H+Tx(Y,D))*d;for(let re=0;re<d;++re)y[he+re]=e[te+re]}}}e=y,t=[m,p,d]}return[e,t]}rescale(e){for(let t=0;t<e.length;++t)e[t]=this.rescale_factor*e[t]}get_resize_output_image_size(e,t){const[i,r]=e.size;let o,s;if(this.do_thumbnail){const{height:a,width:c}=t;o=Math.min(a,c)}else Number.isInteger(t)?(o=t,s=this.config.max_size??o):void 0!==t&&(o=t.shortest_edge,s=t.longest_edge);if(void 0!==o||void 0!==s){const a=void 0===o?1:Math.max(o/i,o/r),c=i*a,d=r*a,p=void 0===s?1:Math.min(s/c,s/d);let m=Math.floor(Number((c*p).toFixed(2))),y=Math.floor(Number((d*p).toFixed(2)));return void 0!==this.size_divisibility&&([m,y]=rI([m,y],this.size_divisibility)),[m,y]}if(void 0!==t&&void 0!==t.width&&void 0!==t.height){let a=t.width,c=t.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let d=c/r,p=a/i;Math.abs(1-p)<Math.abs(1-d)?d=p:p=d,c=X6(d*r,this.config.ensure_multiple_of),a=X6(p*i,this.config.ensure_multiple_of)}return[a,c]}if(void 0!==this.size_divisibility)return rI([i,r],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(t)}`)}resize(e){var t=this;return(0,ke.A)(function*(){const[i,r]=t.get_resize_output_image_size(e,t.size);return yield e.resize(i,r,{resample:t.resample})})()}preprocess(e,{do_normalize:t=null,do_pad:i=null,do_convert_rgb:r=null,do_convert_grayscale:o=null,do_flip_channel_order:s=null}={}){var a=this;return(0,ke.A)(function*(){a.do_crop_margin&&(e=yield a.crop_margin(e));const[c,d]=e.size;if(r??a.do_convert_rgb?e=e.rgb():o&&(e=e.grayscale()),a.do_resize&&(e=yield a.resize(e)),a.do_thumbnail&&(e=yield a.thumbnail(e,a.size,a.resample)),a.do_center_crop){let E,I;Number.isInteger(a.crop_size)?(E=a.crop_size,I=a.crop_size):(E=a.crop_size.width,I=a.crop_size.height),e=yield e.center_crop(E,I)}const p=[e.height,e.width];let m=Float32Array.from(e.data),y=[e.height,e.width,e.channels];if(a.do_rescale&&a.rescale(m),t??a.do_normalize){let E=a.image_mean;Array.isArray(a.image_mean)||(E=new Array(e.channels).fill(E));let I=a.image_std;if(Array.isArray(a.image_std)||(I=new Array(e.channels).fill(E)),E.length!==e.channels||I.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${E.length}) and \`image_std\` (${I.length}) must match the number of channels in the image (${e.channels}).`);for(let D=0;D<m.length;D+=e.channels)for(let R=0;R<e.channels;++R)m[D+R]=(m[D+R]-E[R])/I[R]}if(i??a.do_pad)if(a.pad_size)[m,y]=a.pad_image(m,[e.height,e.width,e.channels],a.pad_size);else if(a.size_divisibility){const[E,I]=rI([y[1],y[0]],a.size_divisibility);[m,y]=a.pad_image(m,y,{width:E,height:I})}if(s??a.do_flip_channel_order){if(3!==y[2])throw new Error("Flipping channel order is only supported for RGB images.");for(let E=0;E<m.length;E+=3){const I=m[E];m[E]=m[E+2],m[E+2]=I}}return{original_size:[d,c],reshaped_input_size:p,pixel_values:new cn("float32",m,y).permute(2,0,1)}})()}_call(e,...t){var i=this;return(0,ke.A)(function*(){Array.isArray(e)||(e=[e]);const r=yield Promise.all(e.map(s=>i.preprocess(s)));return{pixel_values:Ox(r.map(s=>s.pixel_values),0),original_sizes:r.map(s=>s.original_size),reshaped_input_sizes:r.map(s=>s.reshaped_input_size)}})()}}class Pwe extends Vr{post_process_semantic_segmentation(e,t=null){const i=e.logits,r=i.dims[0];if(null!==t&&t.length!==r)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const o=[];for(let s=0;s<r;++s){const a=null!==t?t[s]:null;let c=i[s];null!==a&&(c=t_(c,a,"bilinear",!1));const[d,p]=a??c.dims.slice(-2),m=new cn("int32",new Int32Array(d*p),[d,p]),y=c[0].data;for(let D=1;D<c.dims[0];++D){const R=c[D].data;for(let j=0;j<R.length;++j)R[j]>y[j]&&(y[j]=R[j],m.data[j]=D)}const v=new Array(c.dims[0]),E=m.data;for(let D=0;D<E.length;++D){const R=E[D];v[R]=R}const I=v.filter(D=>void 0!==D);o.push({segmentation:m,labels:I})}return o}}class Y6 extends Vr{}class Owe extends Y6{}class kwe extends Vr{}class Nwe extends Vr{}class Fwe extends Vr{}class Lwe extends Vr{}class Uwe extends Vr{}class K6 extends Vr{constructor(e){super(e),this.crop_pct=this.config.crop_pct??.875}resize(e){var t=this;return(0,ke.A)(function*(){const i=t.size?.shortest_edge;if(void 0===i)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(i<384){const r=Math.floor(i/t.crop_pct),[o,s]=t.get_resize_output_image_size(e,{shortest_edge:r});e=yield e.resize(o,s,{resample:t.resample}),e=yield e.center_crop(i,i)}else e=yield e.resize(i,i,{resample:t.resample});return e})()}}class Bwe extends K6{}class Vwe extends Vr{}class zwe extends Vr{}class jwe extends Vr{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(t=>t*t))}}class Z6 extends Vr{}class $we extends Z6{}class Q6 extends Vr{post_process_object_detection(...e){return iI(...e)}}class Hwe extends Q6{}class Gwe extends Vr{}class Wwe extends Vr{}class J6 extends Vr{pad_image(e,t,i,r={}){const[o,s,a]=t;let c=this.image_mean;Array.isArray(this.image_mean)||(c=new Array(a).fill(c));let d=this.image_std;Array.isArray(d)||(d=new Array(a).fill(c));const p=c.map((m,y)=>-m/d[y]);return super.pad_image(e,t,i,{center:!0,constant_values:p,...r})}}class qwe extends J6{}class Xwe extends Vr{_call(e){var t=()=>super._call,i=this;return(0,ke.A)(function*(){const r=yield t().call(i,e),o=[r.pixel_values.dims[0],64,64],s=new cn("int64",new BigInt64Array(o.reduce((a,c)=>a*c)).fill(1n),o);return{...r,pixel_mask:s}})()}post_process_object_detection(...e){return iI(...e)}remove_low_and_no_objects(e,t,i,r){let o=[],s=[],a=[];for(let c=0;c<e.dims[0];++c){let d=e[c],p=t[c],m=Pa(d.data)[1];if(m===r)continue;let v=Yo(d.data)[m];v>i&&(o.push(p),s.push(v),a.push(m))}return[o,s,a]}check_segment_validity(e,t,i,r=.5,o=.8){let s=[],a=0,c=0;for(let p=0;p<e.length;++p)e[p]===i&&(s.push(p),++a),t[i].data[p]>=r&&++c;let d=a>0&&c>0;return d&&(d=a/c>o),[d,s]}compute_segments(e,t,i,r,o,s=null,a=null){let[c,d]=a??e[0].dims,p=new cn("int32",new Int32Array(c*d),[c,d]),m=[];if(null!==a)for(let I=0;I<e.length;++I)e[I]=t_(e[I],a,"bilinear",!1);let y=new Int32Array(e[0].data.length),v=new Float32Array(e[0].data.length);for(let I=0;I<e.length;++I){let D=t[I];for(let R=0;R<e[I].data.length;++R)e[I].data[R]*=D,e[I].data[R]>v[R]&&(y[R]=I,v[R]=e[I].data[R])}let E=0;for(let I=0;I<i.length;++I){let D=i[I],[R,j]=this.check_segment_validity(y,e,I,r,o);if(R){++E;for(let H of j)p.data[H]=E;m.push({id:E,label_id:D,score:t[I]})}}return[p,m]}post_process_panoptic_segmentation(e,t=.5,i=.5,r=.8,o=null,s=null){null===o&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),o=new Set);const a=e.logits,d=e.pred_masks.sigmoid();let[p,m,y]=a.dims;if(y-=1,null!==s&&s.length!==p)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let v=[];for(let E=0;E<p;++E){let I=null!==s?s[E]:null,D=a[E],R=d[E],[j,H,Y]=this.remove_low_and_no_objects(D,R,t,y);if(0===Y.length){let[re,be]=I??R.dims.slice(-2),se=new cn("int32",new Int32Array(re*be).fill(-1),[re,be]);v.push({segmentation:se,segments_info:[]});continue}let[he,te]=this.compute_segments(j,H,Y,i,r,o,I);v.push({segmentation:he,segments_info:te})}return v}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class Ywe extends Vr{post_process_object_detection(...e){return iI(...e)}}class Kwe extends Vr{reshape_input_points(e,t,i){let r=Uz(e=structuredClone(e));if(3===r.length)r=[1,...r],e=[e];else if(4!==r.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let o=0;o<e.length;++o){let s=t[o],a=i[o],c=[a[0]/s[0],a[1]/s[1]];for(let d=0;d<e[o].length;++d)for(let p=0;p<e[o][d].length;++p)for(let m=0;m<e[o][d][p].length;++m)e[o][d][p][m]*=c[m]}return new cn("float32",Float32Array.from(e.flat(1/0)),r)}add_input_labels(e,t){let i=Uz(e);if(2===i.length)i=[1,...i],e=[e];else if(3!==i.length)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(i.some((r,o)=>r!==t.dims[o]))throw Error(`The first ${i.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new cn("int64",e.flat(1/0).map(BigInt),i)}_call(e,t=null,i=null){var r=()=>super._call,o=this;return(0,ke.A)(function*(){const s=yield r().call(o,e);if(t&&(s.input_points=o.reshape_input_points(t,s.original_sizes,s.reshaped_input_sizes)),i){if(!s.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");s.input_labels=o.add_input_labels(i,s.input_points)}return s})()}post_process_masks(e,t,i,{mask_threshold:r=0,binarize:o=!0,pad_size:s=null}={}){const a=[],c=[(s=s??this.pad_size).height,s.width];for(let d=0;d<t.length;++d){const p=t[d],m=i[d],y=e[d],v=[];for(let E=0;E<y.dims[0];++E){let D=t_(y[E],c,"bilinear",!1);if(D=D.slice(null,[0,m[0]],[0,m[1]]),D=t_(D,p,"bilinear",!1),o){const R=new Uint8Array(D.data.length);for(let j=0;j<D.data.length;++j)D.data[j]>r&&(R[j]=1);D=new cn("bool",R,D.dims)}v.push(D)}a.push(Ox(v))}return a}}class Zwe extends Vr{pad_image(e,t,i,r={}){const[o,s,a]=t;return super.pad_image(e,t,{width:s+(i-s%i)%i,height:o+(i-o%i)%i},{mode:"symmetric",center:!1,constant_values:-1,...r})}}class Qwe extends Vr{_call(e,t){var i=this;return(0,ke.A)(function*(){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const r=yield Promise.all(e.map(a=>i.preprocess(a))),o=yield Promise.all(t.map(a=>i.preprocess(a,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:Ox(r.map((a,c)=>Px([a.pixel_values,o[c].pixel_values],0)),0),original_sizes:r.map(a=>a.original_size),reshaped_input_sizes:r.map(a=>a.reshaped_input_size)}})()}}class Jwe extends Fd{constructor(e){super(e),this.config.mel_filters??=S_(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=Kx(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:t,dims:i}=Yx(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),r=Pa(t)[0];for(let o=0;o<t.length;++o)t[o]=(Math.max(t[o],r-8)+4)/4;return{data:t,dims:i}}_call(e){var t=this;return(0,ke.A)(function*(){let i;T_(e,"WhisperFeatureExtractor"),e.length>t.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),i=e.slice(0,t.config.n_samples)):(i=new Float32Array(t.config.n_samples),i.set(e));const{data:r,dims:o}=t._extract_fbank_features(i);return{input_features:new cn("float32",r,[1,...o])}})()}}class eEe extends Fd{_zero_mean_unit_var_norm(e){const i=e.reduce((o,s)=>o+s,0)/e.length,r=e.reduce((o,s)=>o+(s-i)**2,0)/e.length;return e.map(o=>(o-i)/Math.sqrt(r+1e-7))}_call(e){var t=this;return(0,ke.A)(function*(){T_(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let i=e;t.config.do_normalize&&(i=t._zero_mean_unit_var_norm(i));const r=[1,i.length];return{input_values:new cn("float32",i,r),attention_mask:new cn("int64",new BigInt64Array(i.length).fill(1n),r)}})()}}class tEe extends Fd{constructor(e){super(e);const t=this.config.sampling_rate,i=S_(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let r=0;r<i.length;++r)i[r].push(0);this.mel_filters=i,this.window=Kx(400,"povey",{periodic:!1})}_extract_fbank_features(e,t){return Yx(e=e.map(i=>32768*i),this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1.192092955078125e-7,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}_call(e,{padding:t=!0,pad_to_multiple_of:i=2,do_normalize_per_mel_bins:r=!0,return_attention_mask:o=!0}={}){var s=this;return(0,ke.A)(function*(){T_(e,"SeamlessM4TFeatureExtractor");let c,a=s._extract_fbank_features(e,s.config.max_length);if(r){const[I,D]=a.dims;for(let R=0;R<D;++R){let j=0;for(let te=0;te<I;++te)j+=a.data[te*D+R];const H=j/I;let Y=0;for(let te=0;te<I;++te)Y+=(a.data[te*D+R]-H)**2;Y/=I-1;const he=Math.sqrt(Y+1e-7);for(let te=0;te<I;++te){const re=te*D+R;a.data[re]=(a.data[re]-H)/he}}}if(t){const[I,D]=a.dims,R=I%i;if(R>0){const j=new Float32Array(D*(I+R));j.set(a.data),j.fill(s.config.padding_value,a.data.length);const H=I+R;a={data:j,dims:[H,D]},o&&(c=new cn("int64",new BigInt64Array(H),[1,H]),c.data.fill(1n,0,I))}}const[d,p]=a.dims,m=s.config.stride;if(d%m!=0)throw new Error(`The number of frames (${d}) must be a multiple of the stride (${m}).`);const v=new cn("float32",a.data,a.dims).view(1,Math.floor(d/m),p*m),E={input_features:v};if(o){const I=v.dims[1],D=new cn("int64",new BigInt64Array(I),[1,I]);if(c)for(let R=1,j=0;R<d;R+=m,++j)D.data[j]=c.data[R];else D.data.fill(1n);E.attention_mask=D}return E})()}}class nEe extends Fd{constructor(e){super(e);const t=this.config.sampling_rate,i=S_(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let r=0;r<i.length;++r)i[r].push(0);this.mel_filters=i,this.window=Kx(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,t){return Yx(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1.192092955078125e-7,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}_call(e){var t=this;return(0,ke.A)(function*(){T_(e,"ASTFeatureExtractor");const i=t._extract_fbank_features(e,t.config.max_length);if(t.config.do_normalize){const r=2*t.std;for(let o=0;o<i.data.length;++o)i.data[o]=(i.data[o]-t.mean)/r}return{input_values:new cn("float32",i.data,[1,...i.dims])}})()}}class iEe extends Fd{constructor(e){super(e),this.mel_filters=S_(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=S_(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=Kx(this.config.fft_window_size,"hann")}_get_input_mel(e,t,i,r){let o,s=!1;const a=e.length-t;if(a>0){if("rand_trunc"!==i)throw new Error(`Truncation strategy "${i}" not implemented`);{s=!0;const c=Math.floor(Math.random()*(a+1));e=e.subarray(c,c+t),o=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),o.dims=[1,...o.dims]}}else{if(a<0){let c=new Float64Array(t);if(c.set(e),"repeat"===r)for(let d=e.length;d<t;d+=e.length)c.set(e.subarray(0,Math.min(e.length,t-d)),d);else if("repeatpad"===r)for(let d=e.length;d<-a;d+=e.length)c.set(e,d);e=c}if("fusion"===i)throw new Error(`Truncation strategy "${i}" not implemented`);o=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),o.dims=[1,...o.dims]}return{...o,longer:s}}_extract_fbank_features(e,t,i=null){return Yx(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:t,log_mel:"dB",max_num_frames:i,do_pad:!1,transpose:!0})}_call(e,{max_length:t=null}={}){var i=this;return(0,ke.A)(function*(){T_(e,"ClapFeatureExtractor");const r=i._get_input_mel(e,t??i.config.nb_max_samples,i.config.truncation,i.config.padding);return{input_features:new cn("float32",r.data,[1,...r.dims])}})()}}class rEe extends Fd{}class Ep extends ca{constructor(e){super(),this.feature_extractor=e}_call(e,...t){var i=this;return(0,ke.A)(function*(){return yield i.feature_extractor(e,...t)})()}}class oEe extends Ep{_call(...e){var t=this;return(0,ke.A)(function*(){return yield t.feature_extractor(...e)})()}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class sEe extends Ep{_call(e){var t=this;return(0,ke.A)(function*(){return yield t.feature_extractor(e)})()}}class aEe extends Ep{_call(e){var t=this;return(0,ke.A)(function*(){return yield t.feature_extractor(e)})()}}class lEe extends Ep{_call(e){var t=this;return(0,ke.A)(function*(){return yield t.feature_extractor(e)})()}}class cEe extends Ep{}let js=(()=>class n{static FEATURE_EXTRACTOR_CLASS_MAPPING={ImageFeatureExtractor:Vr,WhisperFeatureExtractor:Jwe,ViTFeatureExtractor:Vwe,MobileViTFeatureExtractor:Z6,MobileViTImageProcessor:$we,OwlViTFeatureExtractor:Q6,Owlv2ImageProcessor:Hwe,CLIPFeatureExtractor:Fwe,ChineseCLIPFeatureExtractor:Lwe,SiglipImageProcessor:Uwe,ConvNextFeatureExtractor:K6,ConvNextImageProcessor:Bwe,SegformerFeatureExtractor:Pwe,BitImageProcessor:kwe,DPTImageProcessor:Owe,DPTFeatureExtractor:Y6,GLPNFeatureExtractor:Nwe,BeitFeatureExtractor:Wwe,DeiTFeatureExtractor:Gwe,DetrFeatureExtractor:Xwe,YolosFeatureExtractor:Ywe,DonutFeatureExtractor:J6,NougatImageProcessor:qwe,EfficientNetImageProcessor:jwe,ViTImageProcessor:zwe,VitMatteImageProcessor:Qwe,SamImageProcessor:Kwe,Swin2SRImageProcessor:Zwe,Wav2Vec2FeatureExtractor:eEe,SeamlessM4TFeatureExtractor:tEe,SpeechT5FeatureExtractor:rEe,ASTFeatureExtractor:nEe,ClapFeatureExtractor:iEe};static PROCESSOR_CLASS_MAPPING={WhisperProcessor:sEe,Wav2Vec2ProcessorWithLM:aEe,SamProcessor:oEe,SpeechT5Processor:lEe,OwlViTProcessor:cEe};static from_pretrained(t,{progress_callback:i=null,config:r=null,cache_dir:o=null,local_files_only:s=!1,revision:a="main"}={}){var c=this;return(0,ke.A)(function*(){let d=r??(yield mp(t,"preprocessor_config.json",!0,{progress_callback:i,config:r,cache_dir:o,local_files_only:s,revision:a})),p=d.feature_extractor_type??d.image_processor_type,m=c.FEATURE_EXTRACTOR_CLASS_MAPPING[p];if(!m){if(void 0===d.size)throw new Error(`Unknown Feature Extractor type: ${p}`);console.warn(`Feature extractor type "${p}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),m=Vr}return new(c.PROCESSOR_CLASS_MAPPING[d.processor_class]??Ep)(new m(d))})()}})();function Ll(n){return oI.apply(this,arguments)}function oI(){return(oI=(0,ke.A)(function*(n){return Array.isArray(n)||(n=[n]),yield Promise.all(n.map(e=>ys.read(e)))})).apply(this,arguments)}function Zx(n,e){return sI.apply(this,arguments)}function sI(){return sI=(0,ke.A)(function*(n,e){return Array.isArray(n)||(n=[n]),yield Promise.all(n.map(t=>"string"==typeof t||t instanceof URL?function Ewe(n,e){return tI.apply(this,arguments)}(t,e):t instanceof Float64Array?new Float32Array(t):t))}),sI.apply(this,arguments)}function ej(n,e){e&&(n=n.map(s=>0|s));const[t,i,r,o]=n;return{xmin:t,ymin:i,xmax:r,ymax:o}}class Gr extends ca{constructor({task:e,model:t,tokenizer:i=null,processor:r=null}){super(),this.task=e,this.model=t,this.tokenizer=i,this.processor=r}dispose(){var e=this;return(0,ke.A)(function*(){yield e.model.dispose()})()}}class aI extends Gr{_key="generated_text";constructor(e){super(e)}_call(e,t={}){var i=this;return(0,ke.A)(function*(){Array.isArray(e)||(e=[e]),i.model.config.prefix&&(e=e.map(d=>i.model.config.prefix+d));const r=i.model.config.task_specific_params;r&&r[i.task]&&r[i.task].prefix&&(e=e.map(d=>r[i.task].prefix+d));const o=i.tokenizer,s={padding:!0,truncation:!0};let a;a=i instanceof tj&&"_build_translation_inputs"in o?o._build_translation_inputs(e,s,t).input_ids:o(e,s).input_ids;const c=yield i.model.generate(a,t);return o.batch_decode(c,{skip_special_tokens:!0}).map(d=>({[i._key]:d}))})()}}class tj extends aI{_key="translation_text";constructor(e){super(e)}}function nj(n){return Array.isArray(n)&&n.every(e=>"role"in e&&"content"in e)}const ij=Object.freeze({"text-classification":{tokenizer:Vo,pipeline:class uEe extends Gr{constructor(e){super(e)}_call(e,{topk:t=1}={}){var i=this;return(0,ke.A)(function*(){const r=i.tokenizer(e,{padding:!0,truncation:!0}),o=yield i.model(r),s="multi_label_classification"===i.model.config.problem_type?d=>d.sigmoid().data:d=>Yo(d.data),a=i.model.config.id2label,c=[];for(const d of o.logits){const y=gp(s(d),t).map(v=>({label:a[v[0]],score:v[1]}));1===t?c.push(...y):c.push(y)}return Array.isArray(e)||1===t?c:c[0]})()}},model:$6,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:Vo,pipeline:class dEe extends Gr{constructor(e){super(e)}_call(e,{ignore_labels:t=["O"]}={}){var i=this;return(0,ke.A)(function*(){const r=Array.isArray(e),o=i.tokenizer(r?e:[e],{padding:!0,truncation:!0}),a=(yield i.model(o)).logits,c=i.model.config.id2label,d=[];for(let p=0;p<a.dims[0];++p){const m=o.input_ids[p],y=a[p],v=[];for(let E=0;E<y.dims[0];++E){const I=y[E],D=Pa(I.data)[1],R=c?c[D]:`LABEL_${D}`;if(t.includes(R))continue;const j=i.tokenizer.decode([m[E].item()],{skip_special_tokens:!0});if(""===j)continue;const H=Yo(I.data);v.push({entity:R,score:H[D],index:E,word:j,start:null,end:null})}d.push(v)}return r?d:d[0]})()}},model:Zxe,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:Vo,pipeline:class hEe extends Gr{constructor(e){super(e)}_call(e,t,{topk:i=1}={}){var r=this;return(0,ke.A)(function*(){const o=r.tokenizer(e,{text_pair:t,padding:!0,truncation:!0}),s=yield r.model(o),a=[];for(let c=0;c<s.start_logits.dims[0];++c){const d=o.input_ids[c],p=d.indexOf(r.tokenizer.sep_token_id),v=xme(Array.from(Yo(s.start_logits[c].data)).map((E,I)=>[E,I]).filter(E=>E[1]>p),Array.from(Yo(s.end_logits[c].data)).map((E,I)=>[E,I]).filter(E=>E[1]>p)).filter(E=>E[0][1]<=E[1][1]).map(E=>[E[0][1],E[1][1],E[0][0]*E[1][0]]).sort((E,I)=>I[2]-E[2]);for(let E=0;E<Math.min(v.length,i);++E){const[I,D,R]=v[E],j=[...d].slice(I,D+1),H=r.tokenizer.decode(j,{skip_special_tokens:!0});a.push({answer:H,score:R})}}return 1===i?a[0]:a})()}},model:iwe,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:Vo,pipeline:class fEe extends Gr{constructor(e){super(e)}_call(e,{topk:t=5}={}){var i=this;return(0,ke.A)(function*(){const r=i.tokenizer(e,{padding:!0,truncation:!0}),o=yield i.model(r),s=[];for(let a=0;a<r.input_ids.dims[0];++a){const c=r.input_ids[a],d=c.indexOf(i.tokenizer.mask_token_id);if(-1===d)throw Error(`Mask token (${i.tokenizer.mask_token}) not found in text.`);const y=gp(Yo(o.logits[a][d].data),t);s.push(y.map(v=>{const E=[...c];return E[d]=v[0],{score:v[1],token:v[0],token_str:i.tokenizer.model.vocab[v[0]],sequence:i.tokenizer.decode(E,{skip_special_tokens:!0})}}))}return Array.isArray(e)?s:s[0]})()}},model:nwe,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:Vo,pipeline:class pEe extends aI{_key="summary_text";constructor(e){super(e)}},model:JC,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:Vo,pipeline:tj,model:JC,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:Vo,pipeline:aI,model:JC,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:Vo,pipeline:class mEe extends Gr{constructor(e){super(e)}_call(e,t={}){var i=this;return(0,ke.A)(function*(){let s,r=!1,o=!1;if("string"==typeof e)s=e=[e];else if(Array.isArray(e)&&e.every(I=>"string"==typeof I))r=!0,s=e;else{if(nj(e))e=[e];else{if(!Array.isArray(e)||!e.every(nj))throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");r=!0}o=!0,s=e.map(I=>i.tokenizer.apply_chat_template(I,{tokenize:!1,add_generation_prompt:!0}))}const a=t.add_special_tokens??!1,c=!o&&(t.return_full_text??!0);i.tokenizer.padding_side="left";const{input_ids:d,attention_mask:p}=i.tokenizer(s,{add_special_tokens:a,padding:!0,truncation:!0}),m=yield i.model.generate(d,t,null,{inputs_attention_mask:p});let v,y=i.tokenizer.batch_decode(m,{skip_special_tokens:!0});!c&&d.dims.at(-1)>0&&(v=i.tokenizer.batch_decode(d,{skip_special_tokens:!0}).map(I=>I.length));const E=Array.from({length:e.length},I=>[]);for(let I=0;I<y.length;++I){const D=Math.floor(I/m.length*e.length);v&&(y[I]=y[I].slice(v[D])),E[D].push({generated_text:o?[...e[D],{role:"assistant",content:y[I]}]:y[I]})}return r||1!==E.length?E:E[0]})()}},model:twe,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:Vo,pipeline:class gEe extends Gr{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([t,i])=>[t.toLowerCase(),i])),this.entailment_id=this.label2id.entailment,void 0===this.entailment_id&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,void 0===this.contradiction_id&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}_call(e,t,{hypothesis_template:i="This example is {}.",multi_label:r=!1}={}){var o=this;return(0,ke.A)(function*(){const s=Array.isArray(e);s||(e=[e]),Array.isArray(t)||(t=[t]);const a=t.map(p=>i.replace("{}",p)),c=r||1===t.length,d=[];for(const p of e){const m=[];for(const E of a){const I=o.tokenizer(p,{text_pair:E,padding:!0,truncation:!0}),D=yield o.model(I);m.push(c?[D.logits.data[o.contradiction_id],D.logits.data[o.entailment_id]]:D.logits.data[o.entailment_id])}const v=(c?m.map(E=>Yo(E)[1]):Yo(m)).map((E,I)=>[E,I]).sort((E,I)=>I[0]-E[0]);d.push({sequence:p,labels:v.map(E=>t[E[1]]),scores:v.map(E=>E[0])})}return s?d:d[0]})()}},model:$6,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:class yEe extends Gr{constructor(e){super(e)}_call(e,{topk:t=null}={}){var i=this;return(0,ke.A)(function*(){const r=!Array.isArray(e),o=i.processor.feature_extractor.config.sampling_rate,s=yield Zx(e,o),a=i.model.config.id2label,c=[];for(const d of s){const p=yield i.processor(d),E=gp(Yo((yield i.model(p)).logits[0].data),t).map(I=>({label:a[I[0]],score:I[1]}));1===t?c.push(...E):c.push(E)}return r&&1!==t?c[0]:c})()}},model:dwe,processor:js,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:Vo,pipeline:class vEe extends Gr{constructor(e){super(e)}_call(e,t,{hypothesis_template:i="This is a sound of {}."}={}){var r=this;return(0,ke.A)(function*(){const o=!Array.isArray(e);o&&(e=[e]);const s=t.map(m=>i.replace("{}",m)),a=r.tokenizer(s,{padding:!0,truncation:!0}),c=r.processor.feature_extractor.config.sampling_rate,d=yield Zx(e,c),p=[];for(const m of d){const y=yield r.processor(m),E=Yo((yield r.model({...a,...y})).logits_per_audio.data);p.push([...E].map((I,D)=>({score:I,label:t[D]})))}return o?p[0]:p})()}},model:E_,processor:js,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:Vo,pipeline:class xEe extends Gr{constructor(e){super(e)}_call(e,t={}){var i=this;return(0,ke.A)(function*(){switch(i.model.config.model_type){case"whisper":return i._call_whisper(e,t);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return i._call_wav2vec2(e,t);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${i.model.config.model_type}'.`)}})()}_call_wav2vec2(e,t={}){var i=this;return(0,ke.A)(function*(){t.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),t.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const r=!Array.isArray(e);r&&(e=[e]);const o=i.processor.feature_extractor.config.sampling_rate,s=yield Zx(e,o),a=[];for(const c of s){const d=yield i.processor(c),m=(yield i.model(d)).logits[0],y=[];for(const E of m)y.push(Pa(E.data)[1]);const v=i.tokenizer.decode(y);a.push({text:v})}return r?a[0]:a})()}_call_whisper(e,t={}){var i=this;return(0,ke.A)(function*(){const r=t.return_timestamps??!1,o=t.chunk_length_s??0,s=t.chunk_callback??null,a=t.force_full_sequences??!1;let c=t.stride_length_s??null;"word"===r&&(t.return_token_timestamps=!0);const d=Bz(t,"language",null),p=Bz(t,"task",null);if(d||p||r){if(t.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const R=i.tokenizer.get_decoder_prompt_ids({language:d,task:p,no_timestamps:!r});R.length>0&&(t.forced_decoder_ids=R)}const m=!Array.isArray(e);m&&(e=[e]);const y=i.processor.feature_extractor.config.chunk_length/i.model.config.max_source_positions,v=i.processor.feature_extractor.config.hop_length,E=i.processor.feature_extractor.config.sampling_rate,I=yield Zx(e,E),D=[];for(const R of I){let j=[];if(o>0){if(null===c)c=o/6;else if(o<=c)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const he=E*o,te=E*c,re=he-2*te;let be=0;for(;be<R.length;){const se=R.subarray(be,be+he),ie=yield i.processor(se),$e=be+re>=R.length;j.push({stride:[se.length,0===be?0:te,$e?0:te],input_features:ie.input_features,is_last:$e}),be+=re}}else j=[{stride:[R.length,0,0],input_features:(yield i.processor(R)).input_features,is_last:!0}];for(const he of j){t.num_frames=Math.floor(he.stride[0]/v);const te=yield i.model.generate(he.input_features,t);"word"===r?(he.tokens=te.sequences[0],he.token_timestamps=te.token_timestamps.tolist()[0].map(re=>e_(re,2))):he.tokens=te[0],he.stride=he.stride.map(re=>re/E),null!==s&&s(he)}const[H,Y]=i.tokenizer._decode_asr(j,{time_precision:y,return_timestamps:r,force_full_sequences:a});D.push({text:H,...Y})}return m?D[0]:D})()}},model:[Qxe,uwe],processor:js,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:Vo,pipeline:class IEe extends Gr{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(e){super(e),this.vocoder=e.vocoder??null}_call(e,{speaker_embeddings:t=null}={}){var i=this;return(0,ke.A)(function*(){return i.processor?i._call_text_to_spectrogram(e,{speaker_embeddings:t}):i._call_text_to_waveform(e)})()}_call_text_to_waveform(e){var t=this;return(0,ke.A)(function*(){const i=t.tokenizer(e,{padding:!0,truncation:!0}),{waveform:r}=yield t.model(i);return{audio:r.data,sampling_rate:t.model.config.sampling_rate}})()}_call_text_to_spectrogram(e,{speaker_embeddings:t}){var i=this;return(0,ke.A)(function*(){if(i.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),i.vocoder=yield E_.from_pretrained(i.DEFAULT_VOCODER_ID,{quantized:!1})),("string"==typeof t||t instanceof URL)&&(t=new Float32Array(yield(yield fetch(t)).arrayBuffer())),t instanceof Float32Array)t=new cn("float32",t,[1,t.length]);else if(!(t instanceof cn))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:r}=i.tokenizer(e,{padding:!0,truncation:!0}),{waveform:o}=yield i.model.generate_speech(r,t,{vocoder:i.vocoder});return{audio:o.data,sampling_rate:i.processor.feature_extractor.config.sampling_rate}})()}},model:[ewe,Jxe],processor:[js,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:Vo,pipeline:class wEe extends Gr{constructor(e){super(e)}_call(e,t={}){var i=this;return(0,ke.A)(function*(){const r=Array.isArray(e),o=yield Ll(e),{pixel_values:s}=yield i.processor(o),a=[];for(const c of s){c.dims=[1,...c.dims];const d=yield i.model.generate(c,t),p=i.tokenizer.batch_decode(d,{skip_special_tokens:!0}).map(m=>({generated_text:m.trim()}));a.push(p)}return r?a:a[0]})()}},model:rwe,processor:js,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:class EEe extends Gr{constructor(e){super(e)}_call(e,{topk:t=1}={}){var i=this;return(0,ke.A)(function*(){const r=Array.isArray(e),o=yield Ll(e),{pixel_values:s}=yield i.processor(o),a=yield i.model({pixel_values:s}),c=i.model.config.id2label,d=[];for(const p of a.logits){const y=gp(Yo(p.data),t).map(v=>({label:c[v[0]],score:v[1]}));1===t?d.push(...y):d.push(y)}return r||1===t?d:d[0]})()}},model:owe,processor:js,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:class SEe extends Gr{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}_call(e,{threshold:t=.5,mask_threshold:i=.5,overlap_mask_area_threshold:r=.8,label_ids_to_fuse:o=null,target_sizes:s=null,subtask:a=null}={}){var c=this;return(0,ke.A)(function*(){if(Array.isArray(e)&&1!==e.length)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const p=yield Ll(e),m=p.map(j=>[j.height,j.width]),{pixel_values:y,pixel_mask:v}=yield c.processor(p),E=yield c.model({pixel_values:y,pixel_mask:v});let I=null;if(null!==a)I=c.subtasks_mapping[a];else for(let[j,H]of Object.entries(c.subtasks_mapping))if(H in c.processor.feature_extractor){I=c.processor.feature_extractor[H].bind(c.processor.feature_extractor),a=j;break}const D=c.model.config.id2label,R=[];if("panoptic"===a||"instance"===a){const j=I(E,t,i,r,o,s??m)[0],H=j.segmentation;for(const Y of j.segments_info){const he=new Uint8ClampedArray(H.data.length);for(let re=0;re<H.data.length;++re)H.data[re]===Y.id&&(he[re]=255);const te=new ys(he,H.dims[1],H.dims[0],1);R.push({score:Y.score,label:D[Y.label_id],mask:te})}}else{if("semantic"!==a)throw Error(`Subtask ${a} not supported.`);{const{segmentation:j,labels:H}=I(E,s??m)[0];for(const Y of H){const he=new Uint8ClampedArray(j.data.length);for(let re=0;re<j.data.length;++re)j.data[re]===Y&&(he[re]=255);const te=new ys(he,j.dims[1],j.dims[0],1);R.push({score:null,label:D[Y],mask:te})}}}return R})()}},model:[swe,awe],processor:js,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:Vo,pipeline:class TEe extends Gr{constructor(e){super(e)}_call(e,t,{hypothesis_template:i="This is a photo of {}"}={}){var r=this;return(0,ke.A)(function*(){const o=Array.isArray(e),s=yield Ll(e),a=t.map(v=>i.replace("{}",v)),c=r.tokenizer(a,{padding:"siglip"!==r.model.config.model_type||"max_length",truncation:!0}),{pixel_values:d}=yield r.processor(s),p=yield r.model({...c,pixel_values:d}),m="siglip"===r.model.config.model_type?v=>v.sigmoid().data:v=>Yo(v.data),y=[];for(const v of p.logits_per_image){const I=[...m(v)].map((D,R)=>({score:D,label:t[R]}));I.sort((D,R)=>R.score-D.score),y.push(I)}return o?y:y[0]})()}},model:E_,processor:js,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:class MEe extends Gr{constructor(e){super(e)}_call(e,{threshold:t=.9,percentage:i=!1}={}){var r=this;return(0,ke.A)(function*(){const o=Array.isArray(e);if(o&&1!==e.length)throw Error("Object detection pipeline currently only supports a batch size of 1.");const s=yield Ll(e),a=i?null:s.map(E=>[E.height,E.width]),{pixel_values:c,pixel_mask:d}=yield r.processor(s),p=yield r.model({pixel_values:c,pixel_mask:d}),m=r.processor.feature_extractor.post_process_object_detection(p,t,a),y=r.model.config.id2label,v=m.map(E=>E.boxes.map((I,D)=>({score:E.scores[D],label:y[E.classes[D]],box:ej(I,!i)})));return o?v:v[0]})()}},model:lwe,processor:js,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:Vo,pipeline:class AEe extends Gr{constructor(e){super(e)}_call(e,t,{threshold:i=.1,topk:r=null,percentage:o=!1}={}){var s=this;return(0,ke.A)(function*(){const a=Array.isArray(e),c=yield Ll(e),d=s.tokenizer(t,{padding:!0,truncation:!0}),p=yield s.processor(c),m=[];for(let y=0;y<c.length;++y){const v=c[y],E=o?null:[[v.height,v.width]],I=p.pixel_values[y].unsqueeze_(0),D=yield s.model({...d,pixel_values:I}),R=s.processor.feature_extractor.post_process_object_detection(D,i,E,!0)[0];let j=R.boxes.map((H,Y)=>({score:R.scores[Y],label:t[R.classes[Y]],box:ej(H,!o)})).sort((H,Y)=>Y.score-H.score);null!==r&&(j=j.slice(0,r)),m.push(j)}return a?m:m[0]})()}},model:cwe,processor:js,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:Vo,pipeline:class CEe extends Gr{constructor(e){super(e)}_call(e,t,i={}){var r=this;return(0,ke.A)(function*(){const o=(yield Ll(e))[0],{pixel_values:s}=yield r.processor(o),c=r.tokenizer(`<s_docvqa><s_question>${t}</s_question><s_answer>`,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,d=yield r.model.generate(s,{...i,decoder_input_ids:c,max_length:r.model.config.decoder.max_position_embeddings}),m=r.tokenizer.batch_decode(d)[0].match(/<s_answer>(.*?)<\/s_answer>/);let y=null;return m&&m.length>=2&&(y=m[1].trim()),[{answer:y}]})()}},model:hwe,processor:js,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:class DEe extends Gr{constructor(e){super(e)}_call(e){var t=this;return(0,ke.A)(function*(){const i=yield Ll(e),r=yield t.processor(i),o=yield t.model(r),s=[];for(const a of o.reconstruction){const c=a.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");s.push(ys.fromTensor(c))}return s.length>1?s:s[0]})()}},model:fwe,processor:js,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:class REe extends Gr{constructor(e){super(e)}_call(e){var t=this;return(0,ke.A)(function*(){const i=yield Ll(e),r=yield t.processor(i),{predicted_depth:o}=yield t.model(r),s=[];for(let a=0;a<i.length;++a){const c=t_(o[a],i[a].size.reverse(),"bilinear",!1),d=c.mul_(255/Pa(c.data)[0]).to("uint8");s.push({predicted_depth:o[a],depth:ys.fromTensor(d)})}return s.length>1?s:s[0]})()}},model:pwe,processor:js,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:Vo,pipeline:class _Ee extends Gr{constructor(e){super(e)}_call(e,{pooling:t="none",normalize:i=!1,quantize:r=!1,precision:o="binary"}={}){var s=this;return(0,ke.A)(function*(){const a=s.tokenizer(e,{padding:!0,truncation:!0}),c=yield s.model(a);let d=c.last_hidden_state??c.logits??c.token_embeddings;if("none"!==t)if("mean"===t)d=function Hme(n,e){let t=[n.dims[0],n.dims[2]],i=new n.data.constructor(t[0]*t[1]),[r,o,s]=n.dims,a=0;for(let c=0;c<r;++c){let d=c*s*o;for(let p=0;p<s;++p){let m=0,y=0,v=c*o,E=d+p;for(let D=0;D<o;++D){let R=Number(e.data[v+D]);y+=R,m+=n.data[E+D*s]*R}i[a++]=m/y}}return new cn(n.type,i,t)}(d,a.attention_mask);else{if("cls"!==t)throw Error(`Pooling method '${t}' not supported.`);d=d.slice(null,0)}return i&&(d=d.normalize(2,-1)),r&&(d=function Yme(n,e){if(2!==n.dims.length)throw new Error("The tensor must have 2 dimensions");if(n.dims.at(-1)%8!=0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const t="binary"===e,i=t?"int8":"uint8",r=t?Int8Array:Uint8Array,o=n.data,s=new r(o.length/8);for(let a=0;a<o.length;++a){const c=o[a]>0?1:0,d=Math.floor(a/8),p=a%8;s[d]|=c<<7-p,t&&0===p&&(s[d]-=128)}return new cn(i,s,[n.dims[0],n.dims[1]/8])}(d,o)),d})()}},model:E_,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:js,pipeline:class bEe extends Gr{constructor(e){super(e)}_call(e,{pool:t=null}={}){var i=this;return(0,ke.A)(function*(){const r=yield Ll(e),{pixel_values:o}=yield i.processor(r),s=yield i.model({pixel_values:o});let a;if(t){if(!("pooler_output"in s))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");a=s.pooler_output}else a=s.last_hidden_state??s.logits??s.image_embeds;return a})()}},model:[mwe,E_],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),PEe=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});function lI(){return lI=(0,ke.A)(function*(n,e=null,{quantized:t=!0,progress_callback:i=null,config:r=null,cache_dir:o=null,local_files_only:s=!1,revision:a="main",model_file_name:c=null}={}){const d=ij[(n=PEe[n]??n).split("_",1)[0]];if(!d)throw Error(`Unsupported pipeline: ${n}. Must be one of [${Object.keys(ij)}]`);e||(e=d.default.model,console.log(`No model specified. Using default model: "${e}".`));const p={quantized:t,progress_callback:i,config:r,cache_dir:o,local_files_only:s,revision:a,model_file_name:c},m=new Map([["tokenizer",d.tokenizer],["model",d.model],["processor",d.processor]]),y=yield function kEe(n,e,t){return cI.apply(this,arguments)}(m,e,p);return y.task=n,hp(i,{status:"ready",task:n,model:e}),new(0,d.pipeline)(y)}),lI.apply(this,arguments)}function cI(){return cI=(0,ke.A)(function*(n,e,t){const i=Object.create(null),r=[];for(let[o,s]of n.entries()){if(!s)continue;let a;a=Array.isArray(s)?new Promise(function(){var c=(0,ke.A)(function*(d,p){let m;for(let y of s){if(null===y)return void d(null);try{return void d(yield y.from_pretrained(e,t))}catch(v){m=v}}p(m)});return function(d,p){return c.apply(this,arguments)}}()):s.from_pretrained(e,t),i[o]=a,r.push(a)}yield Promise.all(r);for(let[o,s]of Object.entries(i))i[o]=yield s;return i}),cI.apply(this,arguments)}var $s=q(957);let Qx=(()=>{class n{constructor(){this.statusSubject=new Ui(""),this.status$=this.statusSubject.asObservable(),this.isProcessingSubject=new Ui(!1),this.isProcessing$=this.isProcessingSubject.asObservable(),this.animationId=null,this.motionAmount=40,this.animationLength=4,this.focusPoint=50,this.edgeDilation=0,this.imageDimensionsSource=new Ui({width:0,height:0}),this.imageDimensions$=this.imageDimensionsSource.asObservable(),this.recording=!1,this.upDownMotion=t=>{this.camera.position.y=.5*Math.sin(.1*t),this.camera.updateProjectionMatrix(),this.controls.update()},this.leftRightMotion=t=>{this.camera.position.x=.5*Math.sin(.1*t),this.camera.updateProjectionMatrix(),this.controls.update()},this.circularMotion=t=>{this.camera.position.x=.5*Math.sin(.1*t),this.camera.position.z=.5*Math.cos(.1*t),this.camera.updateProjectionMatrix(),this.controls.update()},this.dollyMotion=t=>{this.camera.position.z=.5*Math.sin(.1*t)+2,this.camera.updateProjectionMatrix(),this.controls.update()},to.allowLocalModels=!1,to.backends.onnx.wasm.proxy=!0,this.onAnimationLengthChange=this.setAnimationLength.bind(this)}predictFromUrl(t){var i=this;return(0,ke.A)(function*(){i.displayImage(t),i.setStatus("Loading model...");const r=yield function OEe(n){return lI.apply(this,arguments)}("depth-estimation","Xenova/depth-anything-small-hf");i.setStatus("Ready"),i.setProcessing(!0);const o=yield ys.fromURL(t);yield i.setupScene(t,o.width,o.height,r,o)})()}predictFromFile(t){var i=this;const r=new FileReader;r.onload=function(){var o=(0,ke.A)(function*(s){const a=s.target.result;yield i.predictFromUrl(a)});return function(s){return o.apply(this,arguments)}}(),r.readAsDataURL(t)}updateImageDimensions(t){this.imageDimensionsSource.next(t)}setStatus(t){this.statusSubject.next(t)}setProcessing(t){this.isProcessingSubject.next(t)}displayImage(t){const i=document.getElementById("container");if(!i)return;i.innerHTML="";const r=document.createElement("img");r.src=t,r.style.width="100%",r.style.height="100%",r.style.objectFit="contain",i.appendChild(r)}setupScene(t,i,r,o,s){var a=this;return(0,ke.A)(function*(){const c=document.getElementById("container");if(!c)return;c.innerHTML="";const d=document.createElement("canvas"),p=c.offsetWidth,m=c.offsetHeight,y=new bV;a.camera=new Uo(30,p/m,.01,10),a.camera.position.z=2,y.add(a.camera),a.renderer=new xfe({canvas:d,antialias:!0}),a.renderer.setSize(p,m),a.renderer.setPixelRatio(window.devicePixelRatio);const v=new uz(16777215,3);y.add(v);const E=(new Upe).load(t);E.colorSpace=Ca;const I=new sC({map:E,side:2});I.displacementScale=.75,a.onDisplacementScaleChange=re=>{I.displacementScale=re,I.needsUpdate=!0};const[j,H]=i>r?[1,r/i]:[i/r,1],Y=new Zf(j,H,i,r),he=new fo(Y,I);y.add(he),a.controls=new _me(a.camera,a.renderer.domElement),a.controls.enableDamping=!0,a.renderer.setAnimationLoop(()=>{a.renderer.render(y,a.camera),a.controls.update(),$s.CanvasCapture.checkHotkeys(),$s.CanvasCapture.isRecording()&&$s.CanvasCapture.recordFrame()}),window.addEventListener("resize",()=>{const re=c.offsetWidth,be=c.offsetHeight;a.camera.aspect=re/be,a.camera.updateProjectionMatrix(),a.renderer.setSize(re,be)},!1),a.setStatus("Analysing...");const{depth:te}=yield o(s);var re;re=te.toCanvas(),I.displacementMap=new Bfe(re),I.needsUpdate=!0,a.setStatus(""),c.appendChild(a.renderer.domElement),$s.CanvasCapture.init(a.renderer.domElement,{showRecDot:!0}),$s.CanvasCapture.bindKeyToVideoRecord("v",{format:$s.CanvasCapture.MP4,name:"myVideo",quality:.6}),$s.CanvasCapture.bindKeyToGIFRecord("g"),$s.CanvasCapture.bindKeyToPNGSnapshot("p"),$s.CanvasCapture.bindKeyToJPEGSnapshot("j",{name:"myJpeg",quality:.8})})()}startCameraMovement(t){switch(this.stopCurrentAnimation(),t){case"upDown":this.animateCamera(this.upDownMotion);break;case"leftRight":this.animateCamera(this.leftRightMotion);break;case"circular":this.animateCamera(this.circularMotion);break;case"dolly":this.animateCamera(this.dollyMotion);break;default:console.warn("Unknown preset:",t)}}stopCurrentAnimation(){null!==this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}animateCamera(t){let i=null;const r=o=>{i||(i=o);const s=(o-i)/(1e3*Math.log10(this.animationLength+1));t(s),this.animationId=requestAnimationFrame(r)};this.animationId=requestAnimationFrame(r)}setMotionAmount(t){this.motionAmount=t}setAnimationLength(t){this.animationLength=t}setFocusPoint(t){this.focusPoint=t}setEdgeDilation(t){this.edgeDilation=t}startRecording(){$s.CanvasCapture.beginVideoRecord({format:$s.CanvasCapture.MP4,name:"myVideo",quality:.6}),this.recording=!0}stopRecording(){this.recording&&$s.CanvasCapture.stopRecord().then(()=>{this.recording=!1})}startGIFRecording(){try{$s.CanvasCapture.beginGIFRecord({name:"myGif",fps:10}),this.recording=!0}catch(t){console.error("Error starting GIF recording:",t)}}stopGIFRecording(){this.recording&&$s.CanvasCapture.stopRecord().then(()=>{this.recording=!1}).catch(t=>{console.error("Error stopping GIF recording:",t)})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const NEe=["uploadContainer"];let FEe=(()=>{class n{constructor(t){this.depthEstimationService=t}onFileChange(t){const i=t.target.files[0];if(i){const r=new FileReader;r.onload=o=>{if(o.target&&o.target.result){const s=new Image;s.onload=()=>{this.depthEstimationService.updateImageDimensions({width:s.width,height:s.height}),this.container.nativeElement.style.backgroundImage=`url(${s.src})`},s.src=o.target.result}},r.readAsDataURL(i),this.depthEstimationService.predictFromFile(i)}}onExampleClick(){const t="https://huggingface.co/datasets/Xenova/transformers.js-docs/resolve/main/bread_small.png",i=new Image;i.onload=()=>{this.depthEstimationService.updateImageDimensions({width:i.width,height:i.height}),this.container.nativeElement.style.backgroundImage=`url(${i.src})`},i.src=t,this.depthEstimationService.predictFromUrl(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Qx))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["app-image-upload"]],viewQuery:function(i,r){if(1&i&&vl(NEe,7),2&i){let o;ss(o=as())&&(r.container=o.first)}},standalone:!0,features:[Ns],decls:9,vars:0,consts:[["uploadContainer",""],["id","upload-container"],["id","upload-button","for","upload"],["width","25","height","25","viewBox","0 0 25 25","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill","#000","d","M3.5 24.3a3 3 0 0 1-1.9-.8c-.5-.5-.8-1.2-.8-1.9V2.9c0-.7.3-1.3.8-1.9.6-.5 1.2-.7 2-.7h18.6c.7 0 1.3.2 1.9.7.5.6.7 1.2.7 2v18.6c0 .7-.2 1.4-.7 1.9a3 3 0 0 1-2 .8H3.6Zm0-2.7h18.7V2.9H3.5v18.7Zm2.7-2.7h13.3c.3 0 .5 0 .6-.3v-.7l-3.7-5a.6.6 0 0 0-.6-.2c-.2 0-.4 0-.5.3l-3.5 4.6-2.4-3.3a.6.6 0 0 0-.6-.3c-.2 0-.4.1-.5.3l-2.7 3.6c-.1.2-.2.4 0 .7.1.2.3.3.6.3Z"],["id","example",3,"click"],["id","upload","type","file","accept","image/*",3,"change"]],template:function(i,r){if(1&i){const o=wy();Mn(0,"div",1,0)(2,"label",2),bb(),Mn(3,"svg",3),Ai(4,"path",4),xn(),Ar(5," Click to upload image "),function a2(){!function aG(){ti.lFrame.currentNamespace=null}()}(),Mn(6,"label",5),Yi("click",function(){return Iu(o),Du(r.onExampleClick())}),Ar(7,"(or try example)"),xn()(),Mn(8,"input",6),Yi("change",function(a){return Iu(o),Du(r.onFileChange(a))}),xn()()}},styles:["#upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:640px;height:420px;max-width:100%;max-height:100%;border:2px dashed #D1D5DB;border-radius:.75rem;overflow:hidden;margin-top:1rem;background-size:100% 100%;background-position:center;background-repeat:no-repeat;position:relative}#upload-button[_ngcontent-%COMP%]{gap:.4rem;font-size:18px;cursor:pointer}#upload[_ngcontent-%COMP%]{display:none}#example[_ngcontent-%COMP%]{font-size:14px;text-decoration:underline;cursor:pointer}#example[_ngcontent-%COMP%]:hover{color:#2563eb}svg[_ngcontent-%COMP%]{pointer-events:none}"]})}return n})();const LEe=new Pt("cdk-dir-doc",{providedIn:"root",factory:function UEe(){return St(Nr)}}),BEe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let uI,zEe=(()=>{class n{constructor(t){this.value="ltr",this.change=new $i,t&&(this.value=function VEe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?BEe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(ln(LEe,8))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({})}return n})();try{uI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{uI=!1}let M_,dI,Ul=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Nee(n){return n===AL}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!uI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Ic))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jx(n){return function jEe(){if(null==M_&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>M_=!0}))}finally{M_=M_||!1}return M_}()?n:!!n.capture}function Ud(n){return n.composedPath?n.composedPath()[0]:n.target}function sj(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class hSe extends dn{constructor(e,t){super()}schedule(e,t=0){return this}}const tw={setInterval(n,e,...t){const{delegate:i}=tw;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=tw;return(e?.clearInterval||clearInterval)(n)},delegate:void 0},aj={now:()=>(aj.delegate||Date).now(),delegate:void 0};class C_{constructor(e,t=C_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}C_.now=aj.now;const mSe=new class pSe extends C_{constructor(e,t=C_.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}(class fSe extends hSe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return tw.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&tw.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,rn(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});function lj(n,e=mSe){return pi((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const d=o;o=null,i.next(d)}};function c(){const d=s+n,p=e.now();if(p<d)return r=this.schedule(void 0,d-p),void i.add(r);a()}t.subscribe(on(i,d=>{o=d,s=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function cj(n){return Fs((e,t)=>n<=t)}function _Se(n,e){return n===e}function uj(n){return Array.isArray(n)?n:[n]}function I_(n){return n instanceof Mr?n.nativeElement:n}const dj=new Set;let Bd,ySe=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xSe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function vSe(n,e){if(!dj.has(n))try{Bd||(Bd=document.createElement("style"),e&&Bd.setAttribute("nonce",e),Bd.setAttribute("type","text/css"),document.head.appendChild(Bd)),Bd.sheet&&(Bd.sheet.insertRule(`@media ${n} {body{ }}`,0),dj.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Ul),ln(FE,8))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xSe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let wSe=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new zn}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return hj(uj(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=TT(hj(uj(t)).map(s=>this._registerQuery(s).observable));return o=hv(o.pipe(Sl(1)),o.pipe(cj(1),lj(0))),o.pipe(Jt(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:d})=>{a.matches=a.matches||c,a.breakpoints[d]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Ot(s=>{const a=c=>this._zone.run(()=>s.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(fv(i),Jt(({matches:s})=>({query:t,matches:s})),CT(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(i){return new(i||n)(ln(ySe),ln(wi))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hj(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class TSe{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new zn,this._typeaheadSubscription=dn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this._pressedLetters=[],this.tabOut=new zn,this.change=new zn,e instanceof wh?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):ly(e)&&(this._effectRef=rL(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(So(t=>this._pressedLetters.push(t)),lj(e),Fs(()=>this._pressedLetters.length>0),Jt(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const o=(this._activeItemIndex+r)%i.length,s=i[o];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}return;default:return void((r||sj(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return ly(this._items)?this._items():this._items instanceof wh?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){const t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}}}class MSe extends TSe{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function gj(n){return 0===n.buttons||0===n.detail}function _j(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const OSe=new Pt("cdk-input-modality-detector-options"),kSe={ignoreKeys:[18,17,224,91,16]},Tp=Jx({passive:!0,capture:!0});let NSe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Ui(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ud(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(gj(s)?"keyboard":"mouse"),this._mostRecentTarget=Ud(s))},this._onTouchstart=s=>{_j(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ud(s))},this._options={...kSe,...o},this.modalityDetected=this._modality.pipe(cj(1)),this.modalityChanged=this.modalityDetected.pipe(function gSe(n,e=Bt){return n=n??_Se,pi((t,i)=>{let r,o=!0;t.subscribe(on(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Tp),r.addEventListener("mousedown",this._onMousedown,Tp),r.addEventListener("touchstart",this._onTouchstart,Tp)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Tp),document.removeEventListener("mousedown",this._onMousedown,Tp),document.removeEventListener("touchstart",this._onTouchstart,Tp))}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Ul),ln(wi),ln(Nr),ln(OSe,8))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nw=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(nw||{});const LSe=new Pt("cdk-focus-monitor-default-options"),iw=Jx({passive:!0,capture:!0});let hI=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new zn,this._rootNodeFocusAndBlurListener=a=>{for(let d=Ud(a);d;d=d.parentElement)"focus"===a.type?this._onFocus(a,d):this._onBlur(a,d)},this._document=o,this._detectionMode=s?.detectionMode||nw.IMMEDIATE}monitor(t,i=!1){const r=I_(t);if(!this._platform.isBrowser||1!==r.nodeType)return qn();const o=function HEe(n){if(function $Ee(){if(null==dI){const n=typeof document<"u"?document.head:null;dI=!(!n||!n.createShadowRoot&&!n.attachShadow)}return dI}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new zn,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=I_(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=I_(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===nw.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,this._detectionMode===nw.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=Ud(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,iw),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,iw)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(CT(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,iw),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,iw),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(ln(wi),ln(Ul),ln(NSe),ln(Nr,8),ln(LSe,8))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vd=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Vd||{});const yj="cdk-high-contrast-black-on-white",vj="cdk-high-contrast-white-on-black",fI="cdk-high-contrast-active";let USe=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=St(wSe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Vd.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Vd.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Vd.BLACK_ON_WHITE}return Vd.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(fI,yj,vj),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();i===Vd.BLACK_ON_WHITE?t.add(fI,yj):i===Vd.WHITE_ON_BLACK&&t.add(fI,vj)}}static#e=this.\u0275fac=function(i){return new(i||n)(ln(Ul),ln(Nr))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const BSe=["mat-internal-form-field",""],VSe=["*"],jSe=new Pt("mat-sanity-checks",{providedIn:"root",factory:function zSe(){return!0}});let ka=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function GEe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(ln(USe),ln(jSe,8),ln(Nr))};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[rj,rj]})}return n})();var Hs=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Hs||{});class YSe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Hs.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ej=Jx({passive:!0,capture:!0});class KSe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Ud(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Ej)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Ej)))}}const Sj={enterDuration:225,exitDuration:150},Tj=Jx({passive:!0,capture:!0}),Mj=["mousedown","touchstart"],Aj=["mouseup","mouseleave","touchend","touchcancel"];class rw{static#e=this._eventManager=new KSe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=I_(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...Sj,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=i.radius||function QSe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,d=o.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=a-s+"px",p.style.top=c-s+"px",p.style.height=2*s+"px",p.style.width=2*s+"px",null!=i.color&&(p.style.backgroundColor=i.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);const m=window.getComputedStyle(p),v=m.transitionDuration,E="none"===m.transitionProperty||"0s"===v||"0s, 0s"===v||0===r.width&&0===r.height,I=new YSe(this,p,i,E);p.style.transform="scale3d(1, 1, 1)",I.state=Hs.FADING_IN,i.persistent||(this._mostRecentTransientRipple=I);let D=null;return!E&&(d||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const R=()=>this._finishRippleTransition(I),j=()=>this._destroyRipple(I);p.addEventListener("transitionend",R),p.addEventListener("transitioncancel",j),D={onTransitionEnd:R,onTransitionCancel:j}}),this._activeRipples.set(I,D),(E||!d)&&this._finishRippleTransition(I),I}fadeOutRipple(e){if(e.state===Hs.FADING_OUT||e.state===Hs.HIDDEN)return;const t=e.element,i={...Sj,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=Hs.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=I_(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Mj.forEach(i=>{rw._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Aj.forEach(t=>{this._triggerElement.addEventListener(t,this,Tj)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Hs.FADING_IN?this._startFadeOutTransition(e):e.state===Hs.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Hs.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Hs.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=gj(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!_j(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Hs.VISIBLE||e.config.terminateOnPointerUp&&e.state===Hs.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Mj.forEach(t=>rw._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(Aj.forEach(t=>e.removeEventListener(t,this,Tj)),this._pointerUpEventsRegistered=!1))}}const pI=new Pt("mat-ripple-global-options");let ow=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new rw(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Mr),Je(wi),Je(Ul),Je(pI,8),Je(Gl,8))};static#t=this.\u0275dir=Fn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Go("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),Cj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[ka,ka]})}return n})();const Ij={capture:!0},Dj=["focus","mousedown","mouseenter","touchstart"],mI="mat-ripple-loader-uninitialized",gI="mat-ripple-loader-class-name",Rj="mat-ripple-loader-centered",sw="mat-ripple-loader-disabled";let JSe=(()=>{class n{constructor(){this._document=St(Nr,{optional:!0}),this._animationMode=St(Gl,{optional:!0}),this._globalRippleOptions=St(pI,{optional:!0}),this._platform=St(Ul),this._ngZone=St(wi),this._hosts=new Map,this._onInteraction=t=>{const i=Ud(t);if(i instanceof HTMLElement){const r=i.closest(`[${mI}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}},this._ngZone.runOutsideAngular(()=>{for(const t of Dj)this._document?.addEventListener(t,this._onInteraction,Ij)})}ngOnDestroy(){const t=this._hosts.keys();for(const i of t)this.destroyRipple(i);for(const i of Dj)this._document?.removeEventListener(i,this._onInteraction,Ij)}configureRipple(t,i){t.setAttribute(mI,this._globalRippleOptions?.namespace??""),(i.className||!t.hasAttribute(gI))&&t.setAttribute(gI,i.className||""),i.centered&&t.setAttribute(Rj,""),i.disabled&&t.setAttribute(sw,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,i){const r=this._hosts.get(t);r?r.disabled=i:i?t.setAttribute(sw,""):t.removeAttribute(sw)}_createRipple(t){if(!this._document)return;const i=this._hosts.get(t);if(i)return i;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(gI)),t.append(r);const o=new ow(new Mr(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=t,o.centered=t.hasAttribute(Rj),o.disabled=t.hasAttribute(sw),this.attachRipple(t,o),o}attachRipple(t,i){t.removeAttribute(mI),this._hosts.set(t,i)}destroyRipple(t){const i=this._hosts.get(t);i&&(i.ngOnDestroy(),this._hosts.delete(t))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e1e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ms({type:n,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){2&i&&Go("mdc-form-field--align-end","before"===r.labelPosition)},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Ns],attrs:BSe,ngContentSelectors:VSe,decls:1,vars:0,template:function(i,r){1&i&&(Nc(),ks(0))},styles:[".mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}"],encapsulation:2,changeDetection:0})}return n})();function Pj(...n){const e=m3(n),{args:t,keys:i}=g3(n),r=new Ot(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,d=s;for(let p=0;p<s;p++){let m=!1;ta(t[p]).subscribe(on(o,y=>{m||(m=!0,d--),a[p]=y},()=>c--,void 0,()=>{(!c||!m)&&(d||o.next(i?b3(i,a):a),o.complete())}))}});return e?r.pipe(_3(e)):r}let Oj=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Xl),Je(Mr))};static#t=this.\u0275dir=Fn({type:n})}return n})(),zd=(()=>{class n extends Oj{static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ao(n)))(r||n)}})();static#t=this.\u0275dir=Fn({type:n,features:[Hi]})}return n})();const ha=new Pt(""),n1e={provide:ha,useExisting:rr(()=>aw),multi:!0},r1e=new Pt("");let aw=(()=>{class n extends Oj{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function i1e(){const n=Lc()?Lc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Xl),Je(Mr),Je(r1e,8))};static#t=this.\u0275dir=Fn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Yi("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Wi([n1e]),Hi]})}return n})();const Po=new Pt(""),mu=new Pt("");function Hj(n){return null!=n}function Gj(n){return Hm(n)?Do(n):n}function Wj(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function qj(n,e){return e.map(t=>t(n))}function Xj(n){return n.map(e=>function s1e(n){return!n.validate}(e)?e:t=>e.validate(t))}function _I(n){return null!=n?function Yj(n){if(!n)return null;const e=n.filter(Hj);return 0==e.length?null:function(t){return Wj(qj(t,e))}}(Xj(n)):null}function bI(n){return null!=n?function Kj(n){if(!n)return null;const e=n.filter(Hj);return 0==e.length?null:function(t){return Pj(qj(t,e).map(Gj)).pipe(Jt(Wj))}}(Xj(n)):null}function Zj(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yI(n){return n?Array.isArray(n)?n:[n]:[]}function cw(n,e){return Array.isArray(n)?n.includes(e):n===e}function e8(n,e){const t=yI(e);return yI(n).forEach(r=>{cw(t,r)||t.push(r)}),t}function t8(n,e){return yI(e).filter(t=>!cw(n,t))}class n8{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_I(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vs extends n8{get formDirective(){return null}get path(){return null}}class gu extends n8{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class i8{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let r8=(()=>{class n extends i8{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(gu,2))};static#t=this.\u0275dir=Fn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Go("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Hi]})}return n})();const R_="VALID",dw="INVALID",Mp="PENDING",P_="DISABLED";class Ap{}class s8 extends Ap{constructor(e,t){super(),this.value=e,this.source=t}}class wI extends Ap{constructor(e,t){super(),this.pristine=e,this.source=t}}class EI extends Ap{constructor(e,t){super(),this.touched=e,this.source=t}}class hw extends Ap{constructor(e,t){super(),this.status=e,this.source=t}}function fw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class MI{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new zn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===R_}get invalid(){return this.status===dw}get pending(){return this.status==Mp}get disabled(){return this.status===P_}get enabled(){return this.status!==P_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(e8(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(e8(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(t8(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(t8(e,this._rawAsyncValidators))}hasValidator(e){return cw(this._rawValidators,e)}hasAsyncValidator(e){return cw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new EI(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&!1!==e.emitEvent&&this._events.next(new EI(!1,i))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new wI(!1,i))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&!1!==e.emitEvent&&this._events.next(new wI(!0,i))}markAsPending(e={}){this.status=Mp;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new hw(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=P_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue();const i=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new s8(this.value,i)),this._events.next(new hw(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=R_,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===R_||this.status===Mp)&&this._runAsyncValidator(i,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new s8(this.value,t)),this._events.next(new hw(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P_:R_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Mp,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const i=Gj(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new hw(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new $i,this.statusChanges=new $i}_calculateStatus(){return this._allControlsDisabled()?P_:this.errors?dw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mp)?Mp:this._anyControlsHaveStatus(dw)?dw:R_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new wI(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new EI(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function p1e(n){return Array.isArray(n)?_I(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function m1e(n){return Array.isArray(n)?bI(n):n||null}(this._rawAsyncValidators)}}const Cp=new Pt("CallSetDisabledState",{providedIn:"root",factory:()=>pw}),pw="always";function O_(n,e,t=pw){(function CI(n,e){const t=function Qj(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Zj(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function Jj(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Zj(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();_w(e._rawValidators,r),_w(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function b1e(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&c8(n,e)})}(n,e),function v1e(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function y1e(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&c8(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function _1e(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _w(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function c8(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function h8(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function f8(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const p8=class extends MI{constructor(e=null,t,i){super(function SI(n){return(fw(n)?n.validators:n)||null}(t),function TI(n,e){return(fw(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=f8(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){h8(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){h8(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){f8(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},C1e={provide:gu,useExisting:rr(()=>OI)},_8=Promise.resolve();let OI=(()=>{class n extends gu{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new p8,this._registered=!1,this.name="",this.update=new $i,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function RI(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===aw?t=o:function E1e(n){return Object.getPrototypeOf(n.constructor)===zd}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function DI(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){O_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_8.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&xr(i);_8.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function mw(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(Je(vs,9),Je(Po,10),Je(mu,10),Je(ha,10),Je(Js,8),Je(Cp,8))};static#t=this.\u0275dir=Fn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Wi([C1e]),Hi,ts]})}return n})(),J1e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({})}return n})(),tTe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Cp,useValue:t.callSetDisabledState??pw}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[J1e]})}return n})();const nTe=["knob"],iTe=["valueIndicatorContainer"];function rTe(n,e){if(1&n&&(Mn(0,"div",2,1)(2,"div",5)(3,"span",6),Ar(4),xn()()()),2&n){const t=Gu();Ni(4),My(t.valueIndicatorText)}}const oTe=["trackActive"],sTe=["*"];function aTe(n,e){if(1&n&&Ai(0,"div"),2&n){const t=e.$implicit,i=e.$index,r=Gu(3);Jh(0===t?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),yy("transform",r._calcTickMarkTransform(i))}}function lTe(n,e){1&n&&function Mk(n,e,t,i,r,o,s,a,c,d,p,m,y){Ps("NgControlFlow");const v=Et(),E=ki(),I=void 0!==c,D=Et(),R=a?s.bind(D[kr][br]):s,j=new hY(I,R);D[$n+n]=j,Dm(v,E,n+1,e,t,i,r,ba(E.consts,o)),I&&Dm(v,E,n+2,c,d,p,m,ba(E.consts,y))}(0,aTe,1,4,"div",8,Tk),2&n&&function Ak(n){const e=C(null),t=$o();try{const i=Et(),r=i[Zt],o=i[t],s=t+1,a=xy(i,s);if(void 0===o.liveCollection){const d=_1(r,s);o.liveCollection=new fY(a,i,d)}else o.liveCollection.reset();const c=o.liveCollection;if(function cY(n,e,t){let i,r,o=0,s=n.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){const d=n.at(o),p=e[o],m=m1(o,d,o,p,t);if(0!==m){m<0&&n.updateValue(o,p),o++;continue}const y=n.at(s),v=e[c],E=m1(s,y,c,v,t);if(0!==E){E<0&&n.updateValue(s,v),s--,c--;continue}const I=t(o,d),D=t(s,y),R=t(o,p);if(Object.is(R,D)){const j=t(c,v);Object.is(j,I)?(n.swap(o,s),n.updateValue(s,v),c--,s--):n.move(s,o),n.updateValue(o,p),o++}else if(i??=new Sk,r??=Ek(n,o,s,t),g1(n,i,o,R))n.updateValue(o,p),o++,s++;else if(r.has(R))i.set(I,n.detach(o)),s--;else{const j=n.create(o,e[o]);n.attach(o,j),o++,s++}}for(;o<=c;)wk(n,i,t,o,e[o]),o++}else if(null!=e){const c=e[Symbol.iterator]();let d=c.next();for(;!d.done&&o<=s;){const p=n.at(o),m=d.value,y=m1(o,p,o,m,t);if(0!==y)y<0&&n.updateValue(o,m),o++,d=c.next();else{i??=new Sk,r??=Ek(n,o,s,t);const v=t(o,m);if(g1(n,i,o,v))n.updateValue(o,m),o++,s++,d=c.next();else if(r.has(v)){const E=t(o,p);i.set(E,n.detach(o)),s--}else n.attach(o,n.create(o,m)),o++,s++,d=c.next()}}for(;!d.done;)wk(n,i,t,n.length,d.value),d=c.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(c=>{n.destroy(c)})}(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){const d=Ha(),p=0===c.length;if(Zr(i,d,p)){const m=t+2,y=xy(i,m);if(p){const v=_1(r,m),E=Lu(y,v.tView.ssrId);Ph(y,Rh(i,v,void 0,{dehydratedView:E}),0,Nu(v,E))}else ES(y,0)}}}finally{C(e)}}(Gu(2)._tickMarks)}function cTe(n,e){if(1&n&&(Mn(0,"div",6,1),xa(2,lTe,2,0),xn()),2&n){const t=Gu();Ni(2),$u(t._cachedWidth?2:-1)}}function uTe(n,e){if(1&n&&Ai(0,"mat-slider-visual-thumb",7),2&n){const t=Gu();lr("discrete",t.discrete)("thumbPosition",1)("valueIndicatorText",t.startValueIndicatorText)}}var Kn=function(n){return n[n.START=1]="START",n[n.END=2]="END",n}(Kn||{}),Ip=function(n){return n[n.ACTIVE=0]="ACTIVE",n[n.INACTIVE=1]="INACTIVE",n}(Ip||{});const yw=new Pt("_MatSlider"),N8=new Pt("_MatSliderThumb"),F8=new Pt("_MatSliderRangeThumb"),L8=new Pt("_MatSliderVisualThumb");let dTe=(()=>{class n{constructor(t,i,r,o){this._cdr=t,this._ngZone=i,this._slider=o,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=St(Ul),this._onPointerMove=s=>{if(this._sliderInput._isFocused)return;const a=this._hostElement.getBoundingClientRect(),c=this._slider._isCursorOnSliderThumb(s,a);this._isHovered=c,c?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=s=>{0===s.button&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=r.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const t=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{t.addEventListener("pointermove",this._onPointerMove),t.addEventListener("pointerdown",this._onDragStart),t.addEventListener("pointerup",this._onDragEnd),t.addEventListener("pointerleave",this._onMouseLeave),t.addEventListener("focus",this._onFocus),t.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const t=this._sliderInputEl;t&&(t.removeEventListener("pointermove",this._onPointerMove),t.removeEventListener("pointerdown",this._onDragStart),t.removeEventListener("pointerup",this._onDragEnd),t.removeEventListener("pointerleave",this._onMouseLeave),t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(t){return t?.state===Hs.FADING_IN||t?.state===Hs.VISIBLE}_showRipple(t,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===Kn.START?Kn.END:Kn.START)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||i))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:t,centered:!0,persistent:!0})}_hideRipple(t){if(t?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===Kn.START?Kn.END:Kn.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Js),Je(wi),Je(Mr),Je(yw))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,r){if(1&i&&(vl(ow,5),vl(nTe,5),vl(iTe,5)),2&i){let o;ss(o=as())&&(r._ripple=o.first),ss(o=as())&&(r._knob=o.first),ss(o=as())&&(r._valueIndicatorContainer=o.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[Wi([{provide:L8,useExisting:n}]),Ns],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,r){1&i&&(xa(0,rTe,5,1,"div",2),Ai(1,"div",3,0)(3,"div",4)),2&i&&($u(r.discrete?0:-1),Ni(3),lr("matRippleDisabled",!0))},dependencies:[ow],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0})}return n})(),hTe=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=t;const i=this._getInput(Kn.END),r=this._getInput(Kn.START);i&&(i.disabled=this._disabled),r&&(r.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(t){this._discrete=t,this._updateValueIndicatorUIs()}get min(){return this._min}set min(t){const i=isNaN(t)?this._min:t;this._min!==i&&this._updateMin(i)}_updateMin(t){const i=this._min;this._min=t,this._isRange?this._updateMinRange({old:i,new:t}):this._updateMinNonRange(t),this._onMinMaxOrStepChange()}_updateMinRange(t){const i=this._getInput(Kn.END),r=this._getInput(Kn.START),o=i.value,s=r.value;r.min=t.new,i.min=Math.max(t.new,r.value),r.max=Math.min(i.max,i.value),r._updateWidthInactive(),i._updateWidthInactive(),t.new<t.old?this._onTranslateXChangeBySideEffect(i,r):this._onTranslateXChangeBySideEffect(r,i),o!==i.value&&this._onValueChange(i),s!==r.value&&this._onValueChange(r)}_updateMinNonRange(t){const i=this._getInput(Kn.END);if(i){const r=i.value;i.min=t,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(t){const i=isNaN(t)?this._max:t;this._max!==i&&this._updateMax(i)}_updateMax(t){const i=this._max;this._max=t,this._isRange?this._updateMaxRange({old:i,new:t}):this._updateMaxNonRange(t),this._onMinMaxOrStepChange()}_updateMaxRange(t){const i=this._getInput(Kn.END),r=this._getInput(Kn.START),o=i.value,s=r.value;i.max=t.new,r.max=Math.min(t.new,i.value),i.min=r.value,i._updateWidthInactive(),r._updateWidthInactive(),t.new>t.old?this._onTranslateXChangeBySideEffect(r,i):this._onTranslateXChangeBySideEffect(i,r),o!==i.value&&this._onValueChange(i),s!==r.value&&this._onValueChange(r)}_updateMaxNonRange(t){const i=this._getInput(Kn.END);if(i){const r=i.value;i.max=t,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(t){const i=isNaN(t)?this._step:t;this._step!==i&&this._updateStep(i)}_updateStep(t){this._step=t,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const t=this._getInput(Kn.END),i=this._getInput(Kn.START),r=t.value,o=i.value,s=i.value;t.min=this._min,i.max=this._max,t.step=this._step,i.step=this._step,this._platform.SAFARI&&(t.value=t.value,i.value=i.value),t.min=Math.max(this._min,i.value),i.max=Math.min(this._max,t.value),i._updateWidthInactive(),t._updateWidthInactive(),t.value<s?this._onTranslateXChangeBySideEffect(i,t):this._onTranslateXChangeBySideEffect(t,i),r!==t.value&&this._onValueChange(t),o!==i.value&&this._onValueChange(i)}_updateStepNonRange(){const t=this._getInput(Kn.END);if(t){const i=t.value;t.step=this._step,this._platform.SAFARI&&(t.value=t.value),t._updateThumbUIByValue(),i!==t.value&&this._onValueChange(t)}}constructor(t,i,r,o,s,a){this._ngZone=t,this._cdr=i,this._elementRef=r,this._dir=o,this._globalRippleOptions=s,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=c=>`${c}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=St(Ul),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===a,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const t=this._getInput(Kn.END),i=this._getInput(Kn.START);this._isRange=!!t&&!!i,this._cdr.detectChanges();const r=this._getThumb(Kn.END);this._rippleRadius=r._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(t,i):this._initUINonRange(t),this._updateTrackUI(t),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(t){t.initProps(),t.initUI(),this._updateValueIndicatorUI(t),this._hasViewInitialized=!0,t._updateThumbUIByValue()}_initUIRange(t,i){t.initProps(),t.initUI(),i.initProps(),i.initUI(),t._updateMinMax(),i._updateMinMax(),t._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,t._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const t=this._getInput(Kn.END),i=this._getInput(Kn.START);t._setIsLeftThumb(),i._setIsLeftThumb(),t.translateX=t._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),t._updateStaticStyles(),i._updateStaticStyles(),t._updateWidthInactive(),i._updateWidthInactive(),t._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(Kn.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(Kn.START)._isActive||this._getThumb(Kn.END)._isActive}_getValue(t=Kn.END){const i=this._getInput(t);return i?i.value:this.min}_skipUpdate(){return!(!this._getInput(Kn.START)?._skipUIUpdate&&!this._getInput(Kn.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(t){const i=this._trackActive.nativeElement.style;i.left=t.left,i.right=t.right,i.transformOrigin=t.transformOrigin,i.transform=t.transform}_calcTickMarkTransform(t){return`translateX(${t*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(t){this._hasViewInitialized&&(this._updateThumbUI(t),this._updateTrackUI(t),this._updateOverlappingThumbUI(t))}_onTranslateXChangeBySideEffect(t,i){this._hasViewInitialized&&(t._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(t){this._hasViewInitialized&&(this._updateValueIndicatorUI(t),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const t=this._getInput(Kn.END),i=this._getInput(Kn.START);t._updateThumbUIByValue(),i._updateThumbUIByValue(),t._updateStaticStyles(),i._updateStaticStyles(),t._updateMinMax(),i._updateMinMax(),t._updateWidthInactive(),i._updateWidthInactive()}else{const t=this._getInput(Kn.END);t&&t._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const t=this._getInput(Kn.START),i=this._getInput(Kn.END);return!(!t||!i)&&i.translateX-t.translateX<20}_updateOverlappingThumbClassNames(t){const i=t.getSibling(),r=this._getThumb(t.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),r._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(t){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(t))}_updateThumbUI(t){this._skipUpdate()||(this._getThumb(t.thumbPosition===Kn.END?Kn.END:Kn.START)._hostElement.style.transform=`translateX(${t.translateX}px)`)}_updateValueIndicatorUI(t){if(this._skipUpdate())return;const i=this.displayWith(t.value);if(this._hasViewInitialized?t._valuetext.set(i):t._hostElement.setAttribute("aria-valuetext",i),this.discrete){t.thumbPosition===Kn.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;const r=this._getThumb(t.thumbPosition);i.length<3?r._hostElement.classList.add("mdc-slider__thumb--short-value"):r._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const t=this._getInput(Kn.END),i=this._getInput(Kn.START);t&&this._updateValueIndicatorUI(t),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const t=this._step&&this._step>0?this._step:1,r=(Math.floor(this.max/t)*t-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*r-6}_updateTrackUI(t){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(t):this._updateTrackUINonRange(t))}_updateTrackUIRange(t){const i=t.getSibling();if(!i||!this._cachedWidth)return;const r=Math.abs(i.translateX-t.translateX)/this._cachedWidth;this._setTrackActiveStyles(t._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-i.translateX+"px",transformOrigin:"right",transform:`scaleX(${r})`}:{left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${r})`})}_updateTrackUINonRange(t){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-t.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${t.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const t=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(t):this._updateTickMarkUINonRange(t),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(t){const i=this._getValue();let r=Math.max(Math.round((i-this.min)/t),0),o=Math.max(Math.round((this.max-i)/t),0);this._isRtl?r++:o++,this._tickMarks=Array(r).fill(Ip.ACTIVE).concat(Array(o).fill(Ip.INACTIVE))}_updateTickMarkUIRange(t){const i=this._getValue(),r=this._getValue(Kn.START),o=Math.max(Math.round((r-this.min)/t),0),s=Math.max(Math.round((i-r)/t)+1,0),a=Math.max(Math.round((this.max-i)/t),0);this._tickMarks=Array(o).fill(Ip.INACTIVE).concat(Array(s).fill(Ip.ACTIVE),Array(a).fill(Ip.INACTIVE))}_getInput(t){return t===Kn.END&&this._input?this._input:this._inputs?.length?t===Kn.START?this._inputs.first:this._inputs.last:void 0}_getThumb(t){return t===Kn.END?this._thumbs?.last:this._thumbs?.first}_setTransition(t){this._hasAnimation=!this._platform.IOS&&t&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(t,i){const r=i.width/2,c=t.clientY-(i.y+r);return Math.pow(t.clientX-(i.x+r),2)+Math.pow(c,2)<Math.pow(r,2)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(wi),Je(Js),Je(Mr),Je(zEe,8),Je(pI,8),Je(Gl,8))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["mat-slider"]],contentQueries:function(i,r,o){if(1&i&&(nf(o,N8,5),nf(o,F8,4)),2&i){let s;ss(s=as())&&(r._input=s.first),ss(s=as())&&(r._inputs=s)}},viewQuery:function(i,r){if(1&i&&(vl(oTe,5),vl(L8,5)),2&i){let o;ss(o=as())&&(r._trackActive=o.first),ss(o=as())&&(r._thumbs=o)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,r){2&i&&(Jh("mat-"+(r.color||"primary")),Go("mdc-slider--range",r._isRange)("mdc-slider--disabled",r.disabled)("mdc-slider--discrete",r.discrete)("mdc-slider--tick-marks",r.showTickMarks)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",xr],discrete:[2,"discrete","discrete",xr],showTickMarks:[2,"showTickMarks","showTickMarks",xr],min:[2,"min","min",wl],color:"color",disableRipple:[2,"disableRipple","disableRipple",xr],max:[2,"max","max",wl],step:[2,"step","step",wl],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[Wi([{provide:yw,useExisting:n}]),ya,Ns],ngContentSelectors:sTe,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,r){1&i&&(Nc(),ks(0),Mn(1,"div",2),Ai(2,"div",3),Mn(3,"div",4),Ai(4,"div",5,0),xn(),xa(6,cTe,3,1,"div",6),xn(),xa(7,uTe,1,3,"mat-slider-visual-thumb",7),Ai(8,"mat-slider-visual-thumb",7)),2&i&&(Ni(6),$u(r.showTickMarks?6:-1),Ni(),$u(r._isRange?7:-1),Ni(),lr("discrete",r.discrete)("thumbPosition",2)("valueIndicatorText",r.endValueIndicatorText))},dependencies:[dTe],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden}.mdc-slider .mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:50%;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:translateX(-50%);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:translateX(-50%);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;pointer-events:none;position:absolute;top:2px;width:44px}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color);border-color:var(--mdc-slider-handle-color)}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color);border-color:var(--mdc-slider-disabled-handle-color)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color)}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color)}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color);opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color);opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color);opacity:var(--mdc-slider-with-tick-marks-active-container-opacity)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color);opacity:var(--mdc-slider-with-tick-marks-active-container-opacity)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color);opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color);opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color)}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height)) / 2)}.mat-mdc-slider .mdc-slider__track--active_fill{border-top-width:var(--mdc-slider-active-track-height)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size);width:var(--mdc-slider-with-tick-marks-container-size)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking);font-size:var(--mdc-slider-label-label-text-size);font-family:var(--mdc-slider-label-label-text-font);font-weight:var(--mdc-slider-label-label-text-weight);line-height:var(--mdc-slider-label-label-text-line-height)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape);width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-style:solid;border-width:calc(var(--mdc-slider-handle-height) / 2) calc(var(--mdc-slider-handle-width) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape)}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color);border-color:var(--mdc-slider-hover-handle-color)}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color);border-color:var(--mdc-slider-focus-handle-color)}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color);border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation)}.mat-mdc-slider .mdc-slider__input{box-sizing:content-box;pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator-container{transform:var(--mat-slider-value-indicator-container-transform)}.mat-mdc-slider .mdc-slider__value-indicator{width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mat-mdc-slider .mdc-slider__value-indicator::before{display:var(--mat-slider-value-indicator-caret-display)}.mat-mdc-slider .mdc-slider__value-indicator-text{width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slider .mdc-slider__value-indicator{word-break:normal}.mat-mdc-slider .mdc-slider__value-indicator-text{text-align:center}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})();const pTe={provide:ha,useExisting:rr(()=>zI),multi:!0};let zI=(()=>{class n{get value(){return wl(this._hostElement.value,0)}set value(t){const i=(t=isNaN(t)?0:t)+"";this._hasSetInitialValue?this._isActive||this._setValue(i):this._initialValue=i}_setValue(t){this._hostElement.value=t,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(t){this._translateX=t}get min(){return wl(this._hostElement.min,0)}set min(t){this._hostElement.min=t+"",this._cdr.detectChanges()}get max(){return wl(this._hostElement.max,0)}set max(t){this._hostElement.max=t+"",this._cdr.detectChanges()}get step(){return wl(this._hostElement.step,0)}set step(t){this._hostElement.step=t+"",this._cdr.detectChanges()}get disabled(){return xr(this._hostElement.disabled)}set disabled(t){this._hostElement.disabled=t,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(t){this._isFocused=t}constructor(t,i,r,o){this._ngZone=t,this._elementRef=i,this._cdr=r,this._slider=o,this.valueChange=new $i,this.dragStart=new $i,this.dragEnd=new $i,this.thumbPosition=Kn.END,this._valuetext=hO(""),this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new zn,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=St(Ul),this._hostElement=i.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(t){if(!this.disabled&&0===t.button){if(this._platform.IOS){const i=this._slider._isCursorOnSliderThumb(t,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());return this._isActive=i,this._updateWidthActive(),void this._slider._updateDimensions()}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(t,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(t),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(t){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(t)},0)}_fixValue(t){const i=t.clientX-this._slider._cachedLeft,r=this._slider._cachedWidth,o=0===this._slider.step?1:this._slider.step,s=Math.floor((this._slider.max-this._slider.min)/o),d=Math.round((this._slider._isRtl?1-i/r:i/r)*s)/s*(this._slider.max-this._slider.min)+this._slider.min,p=Math.round(d/o)*o;if(p===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation}));this.value=p,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation})}_onPointerMove(t){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(t)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(t){const i=this._tickMarkOffset;return Math.max(Math.min(t,this._slider._cachedWidth-this._tickMarkOffset),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-2*this._tickMarkOffset)+this._tickMarkOffset}_calcTranslateXByPointerEvent(t){return t.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-2*this._tickMarkOffset}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(t){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(t)}_updateThumbUIByPointerEvent(t,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(t)),this._updateThumbUI(i)}_updateThumbUI(t){this._slider._setTransition(!!t?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(t){(this._isControlInitialized||null!==t)&&(this.value=t)}registerOnChange(t){this._onChangeFn=t,this._isControlInitialized=!0}registerOnTouched(t){this._onTouchedFn=t}setDisabledState(t){this.disabled=t}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static#e=this.\u0275fac=function(i){return new(i||n)(Je(wi),Je(Mr),Je(Js),Je(yw))};static#t=this.\u0275dir=Fn({type:n,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,r){1&i&&Yi("change",function(){return r._onChange()})("input",function(){return r._onInput()})("blur",function(){return r._onBlur()})("focus",function(){return r._onFocus()}),2&i&&Io("aria-valuetext",r._valuetext())},inputs:{value:[2,"value","value",wl]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[Wi([pTe,{provide:N8,useExisting:n}]),ya]})}return n})(),U8=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[ka,Cj]})}return n})();const _Te=["depthEstimationContainer"];let bTe=(()=>{class n{constructor(t){this.depthEstimationService=t,this.status=""}ngOnInit(){this.depthEstimationService.status$.subscribe(t=>{this.status=t}),this.depthEstimationService.imageDimensions$.subscribe(t=>{this.adjustContainerDimensions(t.width,t.height)})}adjustContainerDimensions(t,i){const r=.95*window.innerWidth,o=.95*window.innerHeight;let s,a;const p=Math.min(r/t,o/i);s=t*p,a=i*p,this.depthEstimationContainer.nativeElement.style.width=`${s}px`,this.depthEstimationContainer.nativeElement.style.height=`${a}px`}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Qx))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["app-depth-estimation"]],viewQuery:function(i,r){if(1&i&&vl(_Te,7),2&i){let o;ss(o=as())&&(r.depthEstimationContainer=o.first)}},standalone:!0,features:[Ns],decls:4,vars:1,consts:[["depthEstimationContainer",""],["id","container"]],template:function(i,r){1&i&&(Ai(0,"div",1,0),Mn(2,"label"),Ar(3),xn()),2&i&&(Ni(3),My(r.status))},dependencies:[U8],styles:["#container[_ngcontent-%COMP%]{position:relative;width:640px;height:420px;max-width:100%;max-height:100%;border:2px dashed #D1D5DB;border-radius:.75rem;overflow:hidden;margin-top:1rem;background-size:100% 100%;background-position:center;background-repeat:no-repeat}canvas[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}"]})}return n})(),B8=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vTe=0;const jI=new Pt("CdkAccordion");let xTe=(()=>{class n{constructor(){this._stateChanges=new zn,this._openCloseAllActions=new zn,this.id="cdk-accordion-"+vTe++,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Fn({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[2,"multi","multi",xr]},exportAs:["cdkAccordion"],standalone:!0,features:[Wi([{provide:jI,useExisting:n}]),ya,ts]})}return n})(),wTe=0,ETe=(()=>{class n{get expanded(){return this._expanded}set expanded(t){this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=dn.EMPTY,this.closed=new $i,this.opened=new $i,this.destroyed=new $i,this.expandedChange=new $i,this.id="cdk-accordion-child-"+wTe++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(Je(jI,12),Je(Js),Je(B8))};static#t=this.\u0275dir=Fn({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",xr],disabled:[2,"disabled","disabled",xr]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[Wi([{provide:jI,useValue:void 0}]),ya]})}return n})(),STe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({})}return n})();class $I{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class TTe extends $I{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class V8 extends $I{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class MTe extends $I{constructor(e){super(),this.element=e instanceof Mr?e.nativeElement:e}}class z8{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof TTe?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof V8?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof MTe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}let ATe=(()=>{class n extends z8{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new $i,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Em),Je(Zs),Je(Nr))};static#t=this.\u0275dir=Fn({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Hi]})}return n})(),CTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({})}return n})();const DTe=["body"],RTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],PTe=["mat-expansion-panel-header","*","mat-action-row"];function OTe(n,e){}const kTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],NTe=["mat-panel-title","mat-panel-description","*"];function FTe(n,e){1&n&&(Mn(0,"span",1),bb(),Mn(1,"svg",2),Ai(2,"path",3),xn()()),2&n&&lr("@indicatorRotate",Gu()._getExpandedState())}const HI=new Pt("MAT_ACCORDION"),j8="225ms cubic-bezier(0.4,0.0,0.2,1)",$8={indicatorRotate:sM("indicatorRotate",[xg("collapsed, void",Hc({transform:"rotate(0deg)"})),xg("expanded",Hc({transform:"rotate(180deg)"})),lM("expanded <=> collapsed, void => collapsed",aM(j8))]),bodyExpansion:sM("bodyExpansion",[xg("collapsed, void",Hc({height:"0px",visibility:"hidden"})),xg("expanded",Hc({height:"*",visibility:""})),lM("expanded <=> collapsed, void => collapsed",aM(j8))])},H8=new Pt("MAT_EXPANSION_PANEL");let LTe=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(Je(gl),Je(H8,8))};static#t=this.\u0275dir=Fn({type:n,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}return n})(),UTe=0;const G8=new Pt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let W8=(()=>{class n extends ETe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=t}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,o,s,a,c){super(t,i,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new $i,this.afterCollapse=new $i,this._inputChanges=new zn,this._headerId="mat-expansion-panel-header-"+UTe++,this.accordion=t,this._document=s,this._animationsDisabled="NoopAnimations"===a,c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(fv(null),Fs(()=>this.expanded&&!this._portal),Sl(1)).subscribe(()=>{this._portal=new V8(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}_animationStarted(t){!q8(t)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(t){q8(t)||("expanded"===t.toState?this.afterExpand.emit():"collapsed"===t.toState&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static#e=this.\u0275fac=function(i){return new(i||n)(Je(HI,12),Je(Js),Je(B8),Je(Zs),Je(Nr),Je(Gl,8),Je(G8,8))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,o){if(1&i&&nf(o,LTe,5),2&i){let s;ss(s=as())&&(r._lazyContent=s.first)}},viewQuery:function(i,r){if(1&i&&vl(DTe,5),2&i){let o;ss(o=as())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Go("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",xr],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[Wi([{provide:HI,useValue:void 0},{provide:H8,useExisting:n}]),ya,Hi,ts,Ns],ngContentSelectors:PTe,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(1&i){const o=wy();Nc(RTe),ks(0),Mn(1,"div",1,0),Yi("@bodyExpansion.start",function(a){return Iu(o),Du(r._animationStarted(a))})("@bodyExpansion.done",function(a){return Iu(o),Du(r._animationDone(a))}),Mn(3,"div",2),ks(4,1),xa(5,OTe,0,0,"ng-template",3),xn(),ks(6,2),xn()}2&i&&(Ni(),lr("@bodyExpansion",r._getExpandedState())("id",r.id),Io("aria-labelledby",r._headerId),Ni(4),lr("cdkPortalOutlet",r._portal))},dependencies:[ATe],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[$8.bodyExpansion]},changeDetection:0})}return n})();function q8(n){return"void"===n.fromState}let X8=(()=>{class n{constructor(t,i,r,o,s,a,c){this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=dn.EMPTY,this.tabIndex=0;const d=t.accordion?t.accordion._stateChanges.pipe(Fs(p=>!(!p.hideToggle&&!p.togglePosition))):Sa;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=function ITe(...n){const e=Jm(n),t=function vne(n,e){return"number"==typeof ST(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?ta(i[0]):dv(t)(Do(i,e)):Sa}(t.opened,t.closed,d,t._inputChanges.pipe(Fs(p=>!!(p.hideToggle||p.disabled||p.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Fs(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:sj(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(W8,1),Je(Mr),Je(hI),Je(Js),Je(G8,8),Je(Gl,8),Mc("tabindex"))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&Yi("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),2&i&&(Io("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),yy("height",r._getHeaderHeight()),Go("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",t=>null==t?0:wl(t)]},standalone:!0,features:[ya,Ns],ngContentSelectors:NTe,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){1&i&&(Nc(kTe),Mn(0,"span",0),ks(1),ks(2,1),ks(3,2),xn(),xa(4,FTe,3,1,"span",1)),2&i&&(Go("mat-content-hide-toggle",!r._showToggle()),Ni(4),$u(r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[$8.indicatorRotate]},changeDetection:0})}return n})(),BTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Fn({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}return n})(),VTe=(()=>{class n extends xTe{constructor(){super(...arguments),this._ownHeaders=new wh,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(fv(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new MSe(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ao(n)))(r||n)}})();static#t=this.\u0275dir=Fn({type:n,selectors:[["mat-accordion"]],contentQueries:function(i,r,o){if(1&i&&nf(o,X8,5),2&i){let s;ss(s=as())&&(r._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(i,r){2&i&&Go("mat-accordion-multi",r.multi)},inputs:{hideToggle:[2,"hideToggle","hideToggle",xr],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[Wi([{provide:HI,useExisting:n}]),ya,Hi]})}return n})(),zTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[ka,STe,CTe]})}return n})();const jTe=["mat-button",""],$Te=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],HTe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],GTe=new Pt("MAT_BUTTON_CONFIG"),WTe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let qTe=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,i,r,o){this._elementRef=t,this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=St(hI),this._rippleLoader=St(JSe),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const s=St(GTe,{optional:!0}),a=t.nativeElement,c=a.classList;this.disabledInteractive=s?.disabledInteractive??!1,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(const{attribute:d,mdcClasses:p}of WTe)a.hasAttribute(d)&&c.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){!function qR(){throw new Error("invalid")}()};static#t=this.\u0275dir=Fn({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",xr],disabled:[2,"disabled","disabled",xr],ariaDisabled:[2,"aria-disabled","ariaDisabled",xr],disabledInteractive:[2,"disabledInteractive","disabledInteractive",xr]},features:[ya]})}return n})(),XTe=(()=>{class n extends qTe{constructor(t,i,r,o){super(t,i,r,o)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Mr),Je(Ul),Je(wi),Je(Gl,8))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){2&i&&(Io("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Jh(r.color?"mat-"+r.color:""),Go("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Hi,Ns],attrs:jTe,ngContentSelectors:HTe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(Nc($Te),Ai(0,"span",0),ks(1),Mn(2,"span",1),ks(3,1),xn(),ks(4,2),Ai(5,"span",2)(6,"span",3)),2&i&&Go("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),KTe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[ka,Cj,ka]})}return n})();const ZTe=["switch"],QTe=["*"];function JTe(n,e){1&n&&(Mn(0,"div",10),bb(),Mn(1,"svg",12),Ai(2,"path",13),xn(),Mn(3,"svg",14),Ai(4,"path",15),xn()())}const eMe=new Pt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),tMe={provide:ha,useExisting:rr(()=>GI),multi:!0};class Y8{constructor(e,t){this.source=e,this.checked=t}}let nMe=0,GI=(()=>{class n{_createChangeEvent(t){return new Y8(this,t)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(t){this._checked=t,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,o,s,a){this._elementRef=t,this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=s,this._onChange=c=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new $i,this.toggleChange=new $i,this.tabIndex=parseInt(o)||0,this.color=s.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++nMe,this.hideIcon=s.hideIcon??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(t){t.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}validate(t){return this.required&&!0!==t.value?{required:!0}:null}registerOnValidatorChange(t){this._validatorOnChange=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new Y8(this,this.checked)))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Mr),Je(hI),Je(Js),Mc("tabindex"),Je(eMe),Je(Gl,8))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&vl(ZTe,5),2&i){let o;ss(o=as())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){2&i&&(v1("id",r.id),Io("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Jh(r.color?"mat-"+r.color:""),Go("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",xr],color:"color",disabled:[2,"disabled","disabled",xr],disableRipple:[2,"disableRipple","disableRipple",xr],tabIndex:[2,"tabIndex","tabIndex",t=>null==t?0:wl(t)],checked:[2,"checked","checked",xr],hideIcon:[2,"hideIcon","hideIcon",xr]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[Wi([tMe,{provide:Po,useExisting:n,multi:!0}]),ya,ts,Ns],ngContentSelectors:QTe,decls:13,vars:24,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i){const o=wy();Nc(),Mn(0,"div",1)(1,"button",2,0),Yi("click",function(){return Iu(o),Du(r._handleClick())}),Ai(3,"div",3),Mn(4,"div",4)(5,"div",5)(6,"div",6),Ai(7,"div",7),xn(),Mn(8,"div",8),Ai(9,"div",9),xn(),xa(10,JTe,5,0,"div",10),xn()()(),Mn(11,"label",11),Yi("click",function(a){return Iu(o),Du(a.stopPropagation())}),ks(12),xn()()}if(2&i){const o=function fN(n){return gh(function eG(){return ti.lFrame.contextLView}(),$n+n)}(2);lr("labelPosition",r.labelPosition),Ni(),Go("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),lr("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled),Io("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Ni(8),lr("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Ni(),$u(r.hideIcon?-1:10),Ni(),lr("for",r.buttonId),Io("id",r._labelId)}},dependencies:[ow,e1e],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color);font-family:var(--mat-switch-label-text-font);line-height:var(--mat-switch-label-text-line-height);font-size:var(--mat-switch-label-text-size);letter-spacing:var(--mat-switch-label-text-tracking);font-weight:var(--mat-switch-label-text-weight)}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}.mdc-switch{width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mdc-switch__handle{transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle:active .mdc-switch:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--selected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--unselected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch__track::after,.mdc-switch__track::before{border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color)}.mdc-switch--selected .mdc-switch__track::after,.mdc-switch--selected .mdc-switch__track::before{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::after,.mdc-switch--disabled .mdc-switch__track::before{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}'],encapsulation:2,changeDetection:0})}return n})(),oMe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[GI,ka,ka]})}return n})();function WI(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Cn({next:()=>{i.unsubscribe(),n()}});return ta(e(...t)).subscribe(i)}const aMe=["*"];let vw;function N_(n){return function lMe(){if(void 0===vw&&(vw=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(vw=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return vw}()?.createHTML(n)||n}function K8(n){return Error(`Unable to find icon with the name "${n}"`)}function Z8(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Q8(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class $d{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let F_=(()=>{class n{constructor(t,i,r,o){this._httpClient=t,this._sanitizer=i,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,o){return this._addSvgIconConfig(t,i,new $d(r,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,o){const s=this._sanitizer.sanitize(Fo.HTML,r);if(!s)throw Q8(r);const a=N_(s);return this._addSvgIconConfig(t,i,new $d("",a,o))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new $d(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const o=this._sanitizer.sanitize(Fo.HTML,i);if(!o)throw Q8(i);const s=N_(o);return this._addSvgIconSetConfig(t,new $d("",s,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(Fo.RESOURCE_URL,t);if(!i)throw Z8(t);const r=this._cachedIconsByUrl.get(i);return r?qn(xw(r)):this._loadSvgIconFromConfig(new $d(t,null)).pipe(So(o=>this._cachedIconsByUrl.set(i,o)),Jt(o=>xw(o)))}getNamedSvgIcon(t,i=""){const r=J8(i,t);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,t),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(t,s):eg(K8(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?qn(xw(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Jt(i=>xw(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?qn(r):Pj(i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Ju(a=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(Fo.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),qn(null)})))).pipe(Jt(()=>{const s=this._extractIconWithNameFromAnySet(t,i);if(!s)throw K8(t);return s}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const o=i[r];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(So(i=>t.svgText=i),Jt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?qn(null):this._fetchIcon(t).pipe(So(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const o=t.querySelector(`[id="${i}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(N_("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(N_("<svg></svg>")),r=t.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&i.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,o=r?.withCredentials??!1;if(!this._httpClient)throw function cMe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const s=this._sanitizer.sanitize(Fo.RESOURCE_URL,i);if(!s)throw Z8(i);const a=this._inProgressUrlFetches.get(s);if(a)return a;const c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Jt(d=>N_(d)),ng(()=>this._inProgressUrlFetches.delete(s)),function sMe(n={}){const{connector:e=(()=>new zn),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,d=0,p=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},v=()=>{y(),s=c=void 0,p=m=!1},E=()=>{const I=s;v(),I?.unsubscribe()};return pi((I,D)=>{d++,!m&&!p&&y();const R=c=c??e();D.add(()=>{d--,0===d&&!m&&!p&&(a=WI(E,r))}),R.subscribe(D),!s&&d>0&&(s=new Cn({next:j=>R.next(j),error:j=>{m=!0,y(),a=WI(v,t,j),R.error(j)},complete:()=>{p=!0,y(),a=WI(v,i),R.complete()}}),ta(I).subscribe(s))})(o)}}());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(J8(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](i,t);if(o)return dMe(o)?new $d(o.url,null,o.options):new $d(o,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(ln(nM,8),ln(lv),ln(Nr,8),ln(rs))};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xw(n){return n.cloneNode(!0)}function J8(n,e){return n+":"+e}function dMe(n){return!(!n.url||!n.options)}const hMe=new Pt("MAT_ICON_DEFAULT_OPTIONS"),fMe=new Pt("mat-icon-location",{providedIn:"root",factory:function pMe(){const n=St(Nr),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),e$=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],mMe=e$.map(n=>`[${n}]`).join(", "),gMe=/^url\(['"]?#(.*?)['"]?\)$/;let _Me=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,o,s,a){this._elementRef=t,this._iconRegistry=i,this._location=o,this._errorHandler=s,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=dn.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(mMe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)e$.forEach(s=>{const a=i[o],c=a.getAttribute(s),d=c?c.match(gMe):null;if(d){let p=r.get(a);p||(p=[],r.set(a,p)),p.push({name:s,value:d[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Sl(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${o.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Mr),Je(F_),Mc("aria-hidden"),Je(fMe),Je(rs),Je(hMe,8))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){2&i&&(Io("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Jh(r.color?"mat-"+r.color:""),Go("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:[2,"inline","inline",xr],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[ya,Ns],ngContentSelectors:aMe,decls:1,vars:0,template:function(i,r){1&i&&(Nc(),ks(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),bMe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[ka,ka]})}return n})(),yMe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vMe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({providers:[yMe]})}return n})(),AMe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=bo({type:n});static#n=this.\u0275inj=ro({imports:[ka,uT,vMe,ka]})}return n})();const CMe=[{svg:"animationStyle",path:"assets/icons/animationStyle.svg"},{svg:"vertical",path:"assets/icons/vertical.svg"},{svg:"horizontal",path:"assets/icons/horizontal.svg"},{svg:"circular",path:"assets/icons/circular.svg"},{svg:"perspective",path:"assets/icons/perspective.svg"},{svg:"zoom",path:"assets/icons/zoom.svg"},{svg:"dolly",path:"assets/icons/dolly.svg"},{svg:"zoomLeft",path:"assets/icons/zoomLeft.svg"},{svg:"zoomCenter",path:"assets/icons/zoomCenter.svg"},{svg:"zoomRight",path:"assets/icons/zoomRight.svg"},{svg:"custom",path:"assets/icons/custom.svg"},{svg:"amountOfMotion",path:"assets/icons/amountOfMotion.svg"},{svg:"animationLength",path:"assets/icons/animationLength.svg"},{svg:"focusPoint",path:"assets/icons/focusPoint.svg"},{svg:"edgeDilation",path:"assets/icons/edgeDilation.svg"},{svg:"depthMap",path:"assets/icons/depthMap.svg"}];let IMe=(()=>{class n{constructor(t,i,r){this.depthEstimationService=t,this.motionAmount=40,this.focusPoint=50,this.edgeDilation=0,this.displacementScale=.75,this.animationLength=4,this.recording=!1,CMe.forEach(o=>{i.addSvgIcon(o.svg,r.bypassSecurityTrustResourceUrl(o.path))})}toggleGIFRecording(){this.recording?this.depthEstimationService.stopGIFRecording():this.depthEstimationService.startGIFRecording(),this.recording=!this.recording}startMovement(t){this.depthEstimationService.startCameraMovement(t)}onDisplacementScaleChange(t){this.depthEstimationService.onDisplacementScaleChange(t)}onMotionAmountChange(t){this.depthEstimationService.setMotionAmount(t)}onAnimationLengthChange(t){this.depthEstimationService.onAnimationLengthChange(t)}onFocusPointChange(t){this.depthEstimationService.setFocusPoint(t)}onEdgeDilationChange(t){this.depthEstimationService.setEdgeDilation(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Qx),Je(F_),Je(lv))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["app-preset-menu"]],standalone:!0,features:[Ns],decls:103,vars:20,consts:[["mat-raised-button","","color","primary",1,"recording-button",3,"click"],["svgIcon","animationStyle"],[1,"toggle-buttons"],[1,"toggle-container"],[3,"disabled"],[1,"preset-buttons"],["mat-button","",3,"click"],["svgIcon","vertical"],["svgIcon","horizontal"],["mat-button","",3,"click","disabled"],["svgIcon","circular"],["svgIcon","perspective"],["svgIcon","zoom"],["svgIcon","dolly"],["svgIcon","zoomLeft"],["svgIcon","zoomCenter"],["svgIcon","zoomRight"],["svgIcon","custom"],["min","0","max","2","step","0.01"],["matSliderThumb","","name","displacementScale",3,"ngModelChange","ngModel"],["svgIcon","amountOfMotion"],["min","0","max","100","step","1",3,"disabled"],["matSliderThumb","","name","motionAmount",3,"ngModelChange","ngModel"],["svgIcon","animationLength"],["min","0.1","max","5","step","0.1"],["matSliderThumb","","name","animationLength",3,"ngModelChange","ngModel"],["svgIcon","focusPoint"],["mat-button","",3,"disabled"],["matSliderThumb","","name","focusPoint",3,"ngModelChange","ngModel"],["svgIcon","edgeDilation"],["matSliderThumb","","name","edgeDilation",3,"ngModelChange","ngModel"]],template:function(i,r){1&i&&(Mn(0,"div")(1,"button",0),Yi("click",function(){return r.toggleGIFRecording()}),Ar(2),xn()(),Mn(3,"mat-accordion")(4,"mat-expansion-panel")(5,"mat-expansion-panel-header")(6,"mat-panel-title")(7,"span"),Ai(8,"mat-icon",1),xn(),Ar(9," Animation Style "),xn()(),Mn(10,"div",2)(11,"div",3)(12,"span"),Ar(13,"Loop"),xn(),Ai(14,"mat-slide-toggle",4),xn(),Mn(15,"div",3)(16,"span"),Ar(17,"Reverse"),xn(),Ai(18,"mat-slide-toggle",4),xn()(),Mn(19,"div",5)(20,"button",6),Yi("click",function(){return r.startMovement("upDown")}),Mn(21,"span"),Ai(22,"mat-icon",7),xn(),Ar(23,"Vertical "),xn(),Mn(24,"button",6),Yi("click",function(){return r.startMovement("leftRight")}),Mn(25,"span"),Ai(26,"mat-icon",8),xn(),Ar(27," Horizontal "),xn(),Mn(28,"button",9),Yi("click",function(){return r.startMovement("circular")}),Mn(29,"span"),Ai(30,"mat-icon",10),xn(),Ar(31," Circle "),xn(),Mn(32,"button",9),Yi("click",function(){return r.startMovement("perspective")}),Mn(33,"span"),Ai(34,"mat-icon",11),xn(),Ar(35," Perspective "),xn(),Mn(36,"button",9),Yi("click",function(){return r.startMovement("zoom")}),Mn(37,"span"),Ai(38,"mat-icon",12),xn(),Ar(39," Zoom "),xn(),Mn(40,"button",9),Yi("click",function(){return r.startMovement("dolly")}),Mn(41,"span"),Ai(42,"mat-icon",13),xn(),Ar(43," Dolly "),xn(),Mn(44,"button",9),Yi("click",function(){return r.startMovement("zoomLeft")}),Mn(45,"span"),Ai(46,"mat-icon",14),xn(),Ar(47," Zoom Left "),xn(),Mn(48,"button",9),Yi("click",function(){return r.startMovement("zoomCenter")}),Mn(49,"span"),Ai(50,"mat-icon",15),xn(),Ar(51," Zoom Center "),xn(),Mn(52,"button",9),Yi("click",function(){return r.startMovement("zoomRight")}),Mn(53,"span"),Ai(54,"mat-icon",16),xn(),Ar(55," Zoom Right "),xn(),Mn(56,"button",9),Yi("click",function(){return r.startMovement("custom")}),Mn(57,"span"),Ai(58,"mat-icon",17),xn(),Ar(59," Custom "),xn()()(),Mn(60,"mat-expansion-panel")(61,"mat-expansion-panel-header")(62,"mat-panel-title")(63,"span"),Ai(64,"mat-icon",12),xn(),Ar(65," Displacement "),xn()(),Mn(66,"div")(67,"mat-slider",18)(68,"input",19),qu("ngModelChange",function(s){return rf(r.displacementScale,s)||(r.displacementScale=s),s}),Yi("ngModelChange",function(s){return r.onDisplacementScaleChange(s)}),xn()()()(),Mn(69,"mat-expansion-panel")(70,"mat-expansion-panel-header")(71,"mat-panel-title")(72,"span"),Ai(73,"mat-icon",20),xn(),Ar(74," Amount of Motion "),xn()(),Mn(75,"mat-slider",21)(76,"input",22),qu("ngModelChange",function(s){return rf(r.motionAmount,s)||(r.motionAmount=s),s}),xn()()(),Mn(77,"mat-expansion-panel")(78,"mat-expansion-panel-header")(79,"mat-panel-title")(80,"span"),Ai(81,"mat-icon",23),xn(),Ar(82," Animation Length "),xn()(),Mn(83,"mat-slider",24)(84,"input",25),qu("ngModelChange",function(s){return rf(r.animationLength,s)||(r.animationLength=s),s}),Yi("ngModelChange",function(s){return r.onAnimationLengthChange(s)}),xn()()(),Mn(85,"mat-expansion-panel")(86,"mat-expansion-panel-header")(87,"mat-panel-title")(88,"span"),Ai(89,"mat-icon",26),xn(),Ar(90," Focus Point "),xn()(),Mn(91,"button",27),Ar(92,"Set Focus Point"),xn(),Mn(93,"mat-slider",21)(94,"input",28),qu("ngModelChange",function(s){return rf(r.focusPoint,s)||(r.focusPoint=s),s}),xn()()(),Mn(95,"mat-expansion-panel")(96,"mat-expansion-panel-header")(97,"mat-panel-title")(98,"span"),Ai(99,"mat-icon",29),xn(),Ar(100," Edge Dilation "),xn()(),Mn(101,"mat-slider",21)(102,"input",30),qu("ngModelChange",function(s){return rf(r.edgeDilation,s)||(r.edgeDilation=s),s}),xn()()()()),2&i&&(Ni(2),Ay(" ",r.recording?"Stop Recording":"Start Recording"," "),Ni(12),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(10),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(4),lr("disabled",!0),Ni(12),Wu("ngModel",r.displacementScale),Ni(7),lr("disabled",!0),Ni(),Wu("ngModel",r.motionAmount),Ni(8),Wu("ngModel",r.animationLength),Ni(7),lr("disabled",!0),Ni(2),lr("disabled",!0),Ni(),Wu("ngModel",r.focusPoint),Ni(7),lr("disabled",!0),Ni(),Wu("ngModel",r.edgeDilation))},dependencies:[zTe,VTe,W8,X8,BTe,KTe,XTe,oMe,GI,U8,hTe,zI,bMe,_Me,tTe,aw,r8,OI,AMe],styles:[".recording-button[_ngcontent-%COMP%]{width:100%;margin:1rem 0}.preset-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.preset-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:96px;height:96px;background-color:#d3d3d3;border-radius:9px}button[_ngcontent-%COMP%]:hover{background-color:#777}.preset-buttons[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:32px;height:32px}.toggle-buttons[_ngcontent-%COMP%]{margin-bottom:1rem}.toggle-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}mat-slide-toggle[_ngcontent-%COMP%]{margin:0}.icon[_ngcontent-%COMP%]{margin-right:5px}.mat-expansion-panel-header-title[_ngcontent-%COMP%], .mat-expansion-panel-header-description[_ngcontent-%COMP%]{align-items:center}.mat-expansion-panel-header[_ngcontent-%COMP%]{color:#fff}.mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.mat-expansion-panel-content[_ngcontent-%COMP%]{background-color:#444;color:#fff}.mat-mdc-slider[_ngcontent-%COMP%]{width:93%}"]})}return n})();function DMe(n,e){1&n&&(Mn(0,"div"),Ai(1,"app-image-upload"),xn())}function RMe(n,e){1&n&&Ai(0,"app-depth-estimation")}function PMe(n,e){1&n&&(Mn(0,"div",4),Ai(1,"app-preset-menu"),xn())}(function Ate(n,e){return jQ({rootComponent:n,...WL(e)})})((()=>{class n{constructor(t){this.depthEstimationService=t,this.isProcessing$=this.depthEstimationService.isProcessing$}static#e=this.\u0275fac=function(i){return new(i||n)(Je(Qx))};static#t=this.\u0275cmp=Ms({type:n,selectors:[["app-root"]],standalone:!0,features:[Ns],decls:8,vars:9,consts:[[1,"main-container"],[1,"content-container"],[4,"ngIf"],["class","sidebar",4,"ngIf"],[1,"sidebar"]],template:function(i,r){1&i&&(Mn(0,"div",0)(1,"div",1),xa(2,DMe,2,0,"div",2),Dy(3,"async"),xa(4,RMe,1,0,"app-depth-estimation",2),Dy(5,"async"),xn(),xa(6,PMe,2,0,"div",3),Dy(7,"async"),xn()),2&i&&(Ni(2),lr("ngIf",!Ry(3,3,r.isProcessing$)),Ni(2),lr("ngIf",Ry(5,5,r.isProcessing$)),Ni(2),lr("ngIf",Ry(7,7,r.isProcessing$)))},dependencies:[uT,wL,TL,FEe,bTe,IMe],styles:[".main-container[_ngcontent-%COMP%]{display:flex;height:100vh}.content-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.sidebar[_ngcontent-%COMP%]{width:360px;background:#dadada;color:#fff;padding:10px}"]})}return n})(),Sae).catch(n=>console.error(n))},957:(Ye,F,q)=>{var z=q(293).default;self,Ye.exports=(()=>{var L={76:(C,w,_)=>{_(72);const{devDependencies:l}=_(681);C.exports={corePath:`https://unpkg.com/@ffmpeg/core@${l["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},339:(C,w,_)=>{const u=_(72);C.exports=function(){var h=z(function*(f){let g=f;return typeof f>"u"?new Uint8Array:("string"==typeof f?g=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(f)?atob(f.split(",")[1]).split("").map(b=>b.charCodeAt(0)):yield(yield fetch(u(f))).arrayBuffer():(f instanceof File||f instanceof Blob)&&(g=yield(h=>new Promise((f,g)=>{const b=new FileReader;b.onload=()=>{f(b.result)},b.onerror=({target:{error:{code:x}}})=>{g(Error(`File could not be read! Code=${x}`))},b.readAsArrayBuffer(h)}))(f)),new Uint8Array(g))});return function(f){return h.apply(this,arguments)}}()},440:(C,w,_)=>{const u=_(72),{log:l}=_(888),h=function(){var f=z(function*(g,b){l("info",`fetch ${g}`);const x=yield(yield fetch(g)).arrayBuffer();l("info",`${g} file size = ${x.byteLength} bytes`);const A=new Blob([x],{type:b}),k=URL.createObjectURL(A);return l("info",`${g} blob URL = ${k}`),k});return function(b,x){return f.apply(this,arguments)}}();C.exports=function(){var f=z(function*({corePath:g}){if("string"!=typeof g)throw Error("corePath should be a string!");const b=u(g),x=yield h(b,"application/javascript"),A=yield h(b.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),k=yield h(b.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(T=>{const M=document.createElement("script"),P=()=>{M.removeEventListener("load",P),l("info","ffmpeg-core.js script loaded"),T({createFFmpegCore,corePath:x,wasmPath:A,workerPath:k})};M.src=x,M.type="text/javascript",M.addEventListener("load",P),document.getElementsByTagName("head")[0].appendChild(M)}):(l("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:x,wasmPath:A,workerPath:k}))});return function(g){return f.apply(this,arguments)}}()},451:(C,w,_)=>{const u=_(76),l=_(440),h=_(339);C.exports={defaultOptions:u,getCreateFFmpegCore:l,fetchFile:h}},617:C=>{C.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},648:(C,w,_)=>{const{defaultArgs:u,baseOptions:l}=_(617),{setLogging:h,setCustomLogger:f,log:g}=_(888),b=_(405),x=_(10),{defaultOptions:A,getCreateFFmpegCore:k}=_(451),{version:T}=_(681),M=Error("ffmpeg.wasm is not ready, make sure you have completed load().");C.exports=(P={})=>{const{log:B,logger:U,progress:N,...$}={...l,...A,...P};let G=null,W=null,K=null,X=!1,oe=N;const ae=({type:Ue,message:qe})=>{g(Ue,qe),b(qe,oe),(Ue=>{"FFMPEG_END"===Ue&&null!==K&&(K(),K=null,X=!1)})(qe)},pe=function(){var Ue=z(function*(){if(g("info","load ffmpeg-core"),null!==G)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{g("info","loading ffmpeg-core");const{createFFmpegCore:qe,corePath:Mt,workerPath:gt,wasmPath:zt}=yield k($);G=yield qe({mainScriptUrlOrBlob:Mt,printErr:Ce=>ae({type:"fferr",message:Ce}),print:Ce=>ae({type:"ffout",message:Ce}),locateFile:(Ce,Le)=>{if(typeof window<"u"){if(typeof zt<"u"&&Ce.endsWith("ffmpeg-core.wasm"))return zt;if(typeof gt<"u"&&Ce.endsWith("ffmpeg-core.worker.js"))return gt}return Le+Ce}}),W=G.cwrap("proxy_main","number",["number","number"]),g("info","ffmpeg-core loaded")}});return function(){return Ue.apply(this,arguments)}}();return h(B),f(U),g("info",`use ffmpeg.wasm v${T}`),{setProgress:Ue=>{oe=Ue},setLogger:Ue=>{f(Ue)},setLogging:h,load:pe,isLoaded:()=>null!==G,run:(...Ue)=>{if(g("info",`run ffmpeg command: ${Ue.join(" ")}`),null===G)throw M;if(X)throw Error("ffmpeg.wasm can only run one command at a time");return X=!0,new Promise(qe=>{const Mt=[...u,...Ue].filter(gt=>0!==gt.length);K=qe,W(...x(G,Mt))})},exit:()=>{if(null===G)throw M;X=!1,G.exit(1),G=null,W=null,K=null},FS:(Ue,...qe)=>{if(g("info",`run FS.${Ue} ${qe.map(Mt=>"string"==typeof Mt?Mt:`<${Mt.length} bytes binary file>`).join(" ")}`),null===G)throw M;{let Mt=null;try{Mt=G.FS[Ue](...qe)}catch{throw Error("readdir"===Ue?`ffmpeg.FS('readdir', '${qe[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===Ue?`ffmpeg.FS('readFile', '${qe[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return Mt}}}}},888:C=>{let w=!1,_=()=>{};C.exports={logging:w,setLogging:f=>{w=f},setCustomLogger:f=>{_=f},log:(f,g)=>{_({type:f,message:g}),w&&console.log(`[${f}] ${g}`)}}},10:C=>{C.exports=(w,_)=>{const u=w._malloc(_.length*Uint32Array.BYTES_PER_ELEMENT);return _.forEach((l,h)=>{const f=w._malloc(l.length+1);w.writeAsciiToMemory(l,f),w.setValue(u+Uint32Array.BYTES_PER_ELEMENT*h,f,"i32")}),[_.length,u]}},405:C=>{let w=0,_=0;const u=l=>{const[h,f,g]=l.split(":");return 60*parseFloat(h)*60+60*parseFloat(f)+parseFloat(g)};C.exports=(l,h)=>{if("string"==typeof l)if(l.startsWith("  Duration")){const f=l.split(", ")[0].split(": ")[1],g=u(f);h({duration:g,ratio:_}),(0===w||w>g)&&(w=g)}else if(l.startsWith("frame")||l.startsWith("size")){const f=l.split("time=")[1].split(" ")[0],g=u(f);_=g/w,h({ratio:_,time:g})}else l.startsWith("video:")&&(h({ratio:1}),w=0)}},809:(C,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.changeDpiBlob=function B(W,K){var X=W.slice(0,33);return new Promise(function(oe,Z){var ae=new FileReader;ae.onload=function(){var pe=new Uint8Array(ae.result),ge=W.slice(33),je=G(pe,K,W.type);oe(new Blob([je,ge],{type:W.type}))},ae.readAsArrayBuffer(X)})},w.changeDpiDataUrl=function U(W,K){var X=W.split(","),oe=X[0],Z=X[1],ae=void 0,pe=void 0,ge=!1;if(-1!==oe.indexOf(f)){ae=f;var je=function N(W){var K=W.indexOf(b);return-1===K&&(K=W.indexOf(x)),-1===K&&(K=W.indexOf(A)),K}(Z);je>=0?(pe=4*Math.ceil((je+28)/3),ge=!0):pe=44}-1!==oe.indexOf(g)&&(ae=g,pe=24);for(var de=Z.substring(0,pe),Be=Z.substring(pe),ee=atob(de),Ae=new Uint8Array(ee.length),Ue=0;Ue<Ae.length;Ue++)Ae[Ue]=ee.charCodeAt(Ue);var qe=G(Ae,K,ae,ge),Mt=btoa(String.fromCharCode.apply(String,function _(W){if(Array.isArray(W)){for(var K=0,X=Array(W.length);K<W.length;K++)X[K]=W[K];return X}return Array.from(W)}(qe)));return[oe,",",Mt,Be].join("")};var h=void 0,f="image/png",g="image/jpeg",b="AAlwSFlz",x="AAAJcEhZ",A="AAAACXBI",k=112,T=72,M=89,P=115;function G(W,K,X,oe){if(X===g)return W[13]=1,W[14]=K>>8,W[15]=255&K,W[16]=K>>8,W[17]=255&K,W;if(X===f){var Z=new Uint8Array(13);K*=39.3701,Z[0]=k,Z[1]=T,Z[2]=M,Z[3]=P,Z[4]=K>>>24,Z[5]=K>>>16,Z[6]=K>>>8,Z[7]=255&K,Z[8]=Z[4],Z[9]=Z[5],Z[10]=Z[6],Z[11]=Z[7],Z[12]=1;var ae=function l(W){var K=-1;h||(h=function u(){for(var W=new Int32Array(256),K=0;K<256;K++){for(var X=K,oe=0;oe<8;oe++)X=1&X?3988292384^X>>>1:X>>>1;W[K]=X}return W}());for(var X=0;X<W.length;X++)K=h[255&(K^W[X])]^K>>>8;return~K}(Z),pe=new Uint8Array(4);if(pe[0]=ae>>>24,pe[1]=ae>>>16,pe[2]=ae>>>8,pe[3]=255&ae,oe){var ge=function $(W){for(var X=W.length-1;X>=4;X--)if(9===W[X-4]&&W[X-3]===k&&W[X-2]===T&&W[X-1]===M&&W[X]===P)return X-3}(W);return W.set(Z,ge),W.set(pe,ge+13),W}var je=new Uint8Array(4);je[0]=0,je[1]=0,je[2]=0,je[3]=9;var de=new Uint8Array(54);return de.set(W,0),de.set(je,33),de.set(Z,37),de.set(pe,50),de}}},162:function(C,w,_){var u,h;void 0!==(h="function"==typeof(u=function(){"use strict";function g(M,P,B){var U=new XMLHttpRequest;U.open("GET",M),U.responseType="blob",U.onload=function(){T(U.response,P,B)},U.onerror=function(){console.error("could not download file")},U.send()}function b(M){var P=new XMLHttpRequest;P.open("HEAD",M,!1);try{P.send()}catch{}return 200<=P.status&&299>=P.status}function x(M){try{M.dispatchEvent(new MouseEvent("click"))}catch{var P=document.createEvent("MouseEvents");P.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),M.dispatchEvent(P)}}var A="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof _.g&&_.g.global===_.g?_.g:void 0,k=A.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),T=A.saveAs||("object"!=typeof window||window!==A?function(){}:"download"in HTMLAnchorElement.prototype&&!k?function(M,P,B){var U=A.URL||A.webkitURL,N=document.createElement("a");N.download=P=P||M.name||"download",N.rel="noopener","string"==typeof M?(N.href=M,N.origin===location.origin?x(N):b(N.href)?g(M,P,B):x(N,N.target="_blank")):(N.href=U.createObjectURL(M),setTimeout(function(){U.revokeObjectURL(N.href)},4e4),setTimeout(function(){x(N)},0))}:"msSaveOrOpenBlob"in navigator?function(M,P,B){if(P=P||M.name||"download","string"!=typeof M)navigator.msSaveOrOpenBlob(function f(M,P){return typeof P>"u"?P={autoBom:!1}:"object"!=typeof P&&(console.warn("Deprecated: Expected third argument to be a object"),P={autoBom:!P}),P.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(M.type)?new Blob(["\ufeff",M],{type:M.type}):M}(M,B),P);else if(b(M))g(M,P,B);else{var U=document.createElement("a");U.href=M,U.target="_blank",setTimeout(function(){x(U)})}}:function(M,P,B,U){if((U=U||open("","_blank"))&&(U.document.title=U.document.body.innerText="downloading..."),"string"==typeof M)return g(M,P,B);var N="application/octet-stream"===M.type,$=/constructor/i.test(A.HTMLElement)||A.safari,G=/CriOS\/[\d]+/.test(navigator.userAgent);if((G||N&&$||k)&&typeof FileReader<"u"){var W=new FileReader;W.onloadend=function(){var oe=W.result;oe=G?oe:oe.replace(/^data:[^;]*;/,"data:attachment/file;"),U?U.location.href=oe:location=oe,U=null},W.readAsDataURL(M)}else{var K=A.URL||A.webkitURL,X=K.createObjectURL(M);U?U.location=X:location.href=X,U=null,setTimeout(function(){K.revokeObjectURL(X)},4e4)}});A.saveAs=T.saveAs=T,C.exports=T})?u.apply(w,[]):u)&&(C.exports=h)},733:(C,w,_)=>{C.exports=function u(l,h,f){function g(A,k){if(!h[A]){if(!l[A]){if(b)return b(A,!0);var M=new Error("Cannot find module '"+A+"'");throw M.code="MODULE_NOT_FOUND",M}var P=h[A]={exports:{}};l[A][0].call(P.exports,function(B){return g(l[A][1][B]||B)},P,P.exports,u,l,h,f)}return h[A].exports}for(var b=void 0,x=0;x<f.length;x++)g(f[x]);return g}({1:[function(u,l,h){"use strict";var f=u("./utils"),g=u("./support"),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";h.encode=function(x){for(var A,k,T,P,B,U,N=[],$=0,G=x.length,W=G,K="string"!==f.getTypeOf(x);$<x.length;)W=G-$,T=K?(A=x[$++],k=$<G?x[$++]:0,$<G?x[$++]:0):(A=x.charCodeAt($++),k=$<G?x.charCodeAt($++):0,$<G?x.charCodeAt($++):0),P=(3&A)<<4|k>>4,B=1<W?(15&k)<<2|T>>6:64,U=2<W?63&T:64,N.push(b.charAt(A>>2)+b.charAt(P)+b.charAt(B)+b.charAt(U));return N.join("")},h.decode=function(x){var A,k,T,M,P,B,U=0,N=0,$="data:";if(x.substr(0,5)===$)throw new Error("Invalid base64 input, it looks like a data url.");var G,W=3*(x=x.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(x.charAt(x.length-1)===b.charAt(64)&&W--,x.charAt(x.length-2)===b.charAt(64)&&W--,W%1!=0)throw new Error("Invalid base64 input, bad content length.");for(G=g.uint8array?new Uint8Array(0|W):new Array(0|W);U<x.length;)A=b.indexOf(x.charAt(U++))<<2|(M=b.indexOf(x.charAt(U++)))>>4,k=(15&M)<<4|(P=b.indexOf(x.charAt(U++)))>>2,T=(3&P)<<6|(B=b.indexOf(x.charAt(U++))),G[N++]=A,64!==P&&(G[N++]=k),64!==B&&(G[N++]=T);return G}},{"./support":30,"./utils":32}],2:[function(u,l,h){"use strict";var f=u("./external"),g=u("./stream/DataWorker"),b=u("./stream/Crc32Probe"),x=u("./stream/DataLengthProbe");function A(k,T,M,P,B){this.compressedSize=k,this.uncompressedSize=T,this.crc32=M,this.compression=P,this.compressedContent=B}A.prototype={getContentWorker:function(){var k=new g(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new x("data_length")),T=this;return k.on("end",function(){if(this.streamInfo.data_length!==T.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new g(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},A.createWorkerFrom=function(k,T,M){return k.pipe(new b).pipe(new x("uncompressedSize")).pipe(T.compressWorker(M)).pipe(new x("compressedSize")).withStreamInfo("compression",T)},l.exports=A},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(u,l,h){"use strict";var f=u("./stream/GenericWorker");h.STORE={magic:"\0\0",compressWorker:function(g){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},h.DEFLATE=u("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(u,l,h){"use strict";var f=u("./utils"),g=function(){for(var b,x=[],A=0;A<256;A++){b=A;for(var k=0;k<8;k++)b=1&b?3988292384^b>>>1:b>>>1;x[A]=b}return x}();l.exports=function(b,x){return void 0!==b&&b.length?"string"!==f.getTypeOf(b)?function(A,k,T,M){var P=g,B=0+T;A^=-1;for(var U=0;U<B;U++)A=A>>>8^P[255&(A^k[U])];return~A}(0|x,b,b.length):function(A,k,T,M){var P=g,B=0+T;A^=-1;for(var U=0;U<B;U++)A=A>>>8^P[255&(A^k.charCodeAt(U))];return~A}(0|x,b,b.length):0}},{"./utils":32}],5:[function(u,l,h){"use strict";h.base64=!1,h.binary=!1,h.dir=!1,h.createFolders=!0,h.date=null,h.compression=null,h.compressionOptions=null,h.comment=null,h.unixPermissions=null,h.dosPermissions=null},{}],6:[function(u,l,h){"use strict";var f;f=typeof Promise<"u"?Promise:u("lie"),l.exports={Promise:f}},{lie:37}],7:[function(u,l,h){"use strict";var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",g=u("pako"),b=u("./utils"),x=u("./stream/GenericWorker"),A=f?"uint8array":"array";function k(T,M){x.call(this,"FlateWorker/"+T),this._pako=null,this._pakoAction=T,this._pakoOptions=M,this.meta={}}h.magic="\b\0",b.inherits(k,x),k.prototype.processChunk=function(T){this.meta=T.meta,null===this._pako&&this._createPako(),this._pako.push(b.transformTo(A,T.data),!1)},k.prototype.flush=function(){x.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new g[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var T=this;this._pako.onData=function(M){T.push({data:M,meta:T.meta})}},h.compressWorker=function(T){return new k("Deflate",T)},h.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(u,l,h){"use strict";function f(P,B){var U,N="";for(U=0;U<B;U++)N+=String.fromCharCode(255&P),P>>>=8;return N}function g(P,B,U,N,$,G){var W,K,X=P.file,oe=P.compression,Z=G!==A.utf8encode,ae=b.transformTo("string",G(X.name)),pe=b.transformTo("string",A.utf8encode(X.name)),ge=X.comment,je=b.transformTo("string",G(ge)),de=b.transformTo("string",A.utf8encode(ge)),Be=pe.length!==X.name.length,ee=de.length!==ge.length,Ae="",Ue="",qe="",Mt=X.dir,gt=X.date,zt={crc32:0,compressedSize:0,uncompressedSize:0};B&&!U||(zt.crc32=P.crc32,zt.compressedSize=P.compressedSize,zt.uncompressedSize=P.uncompressedSize);var Ce=0;B&&(Ce|=8),Z||!Be&&!ee||(Ce|=2048);var Ne,En,Le=0,Yt=0;Mt&&(Le|=16),"UNIX"===$?(Yt=798,Le|=(En=Ne=X.unixPermissions,Ne||(En=Mt?16893:33204),(65535&En)<<16)):(Yt=20,Le|=function(Ne){return 63&(Ne||0)}(X.dosPermissions)),W=gt.getUTCHours(),W<<=6,W|=gt.getUTCMinutes(),W<<=5,W|=gt.getUTCSeconds()/2,K=gt.getUTCFullYear()-1980,K<<=4,K|=gt.getUTCMonth()+1,K<<=5,K|=gt.getUTCDate(),Be&&(Ue=f(1,1)+f(k(ae),4)+pe,Ae+="up"+f(Ue.length,2)+Ue),ee&&(qe=f(1,1)+f(k(je),4)+de,Ae+="uc"+f(qe.length,2)+qe);var Ct="";return Ct+="\n\0",Ct+=f(Ce,2),Ct+=oe.magic,Ct+=f(W,2),Ct+=f(K,2),Ct+=f(zt.crc32,4),Ct+=f(zt.compressedSize,4),Ct+=f(zt.uncompressedSize,4),Ct+=f(ae.length,2),Ct+=f(Ae.length,2),{fileRecord:T.LOCAL_FILE_HEADER+Ct+ae+Ae,dirRecord:T.CENTRAL_FILE_HEADER+f(Yt,2)+Ct+f(je.length,2)+"\0\0\0\0"+f(Le,4)+f(N,4)+ae+Ae+je}}var b=u("../utils"),x=u("../stream/GenericWorker"),A=u("../utf8"),k=u("../crc32"),T=u("../signature");function M(P,B,U,N){x.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=B,this.zipPlatform=U,this.encodeFileName=N,this.streamFiles=P,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}b.inherits(M,x),M.prototype.push=function(P){var B=P.meta.percent||0,U=this.entriesCount,N=this._sources.length;this.accumulate?this.contentBuffer.push(P):(this.bytesWritten+=P.data.length,x.prototype.push.call(this,{data:P.data,meta:{currentFile:this.currentFile,percent:U?(B+100*(U-N-1))/U:100}}))},M.prototype.openedSource=function(P){this.currentSourceOffset=this.bytesWritten,this.currentFile=P.file.name;var B=this.streamFiles&&!P.file.dir;if(B){var U=g(P,B,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:U.fileRecord,meta:{percent:0}})}else this.accumulate=!0},M.prototype.closedSource=function(P){this.accumulate=!1;var N,B=this.streamFiles&&!P.file.dir,U=g(P,B,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(U.dirRecord),B)this.push({data:(N=P,T.DATA_DESCRIPTOR+f(N.crc32,4)+f(N.compressedSize,4)+f(N.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:U.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},M.prototype.flush=function(){for(var P=this.bytesWritten,B=0;B<this.dirRecords.length;B++)this.push({data:this.dirRecords[B],meta:{percent:100}});var $,G,W,oe,N=($=this.dirRecords.length,G=this.bytesWritten-P,W=P,oe=b.transformTo("string",(0,this.encodeFileName)(this.zipComment)),T.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f($,2)+f($,2)+f(G,4)+f(W,4)+f(oe.length,2)+oe);this.push({data:N,meta:{percent:100}})},M.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},M.prototype.registerPrevious=function(P){this._sources.push(P);var B=this;return P.on("data",function(U){B.processChunk(U)}),P.on("end",function(){B.closedSource(B.previous.streamInfo),B._sources.length?B.prepareNextSource():B.end()}),P.on("error",function(U){B.error(U)}),this},M.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},M.prototype.error=function(P){var B=this._sources;if(!x.prototype.error.call(this,P))return!1;for(var U=0;U<B.length;U++)try{B[U].error(P)}catch{}return!0},M.prototype.lock=function(){x.prototype.lock.call(this);for(var P=this._sources,B=0;B<P.length;B++)P[B].lock()},l.exports=M},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(u,l,h){"use strict";var f=u("../compressions"),g=u("./ZipFileWorker");h.generateWorker=function(b,x,A){var k=new g(x.streamFiles,A,x.platform,x.encodeFileName),T=0;try{b.forEach(function(M,P){T++;var B=function(G,W){var K=G||W,X=f[K];if(!X)throw new Error(K+" is not a valid compression method !");return X}(P.options.compression,x.compression),N=P.dir,$=P.date;P._compressWorker(B,P.options.compressionOptions||x.compressionOptions||{}).withStreamInfo("file",{name:M,dir:N,date:$,comment:P.comment||"",unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions}).pipe(k)}),k.entriesCount=T}catch(M){k.error(M)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(u,l,h){"use strict";function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var g=new f;for(var b in this)"function"!=typeof this[b]&&(g[b]=this[b]);return g}}(f.prototype=u("./object")).loadAsync=u("./load"),f.support=u("./support"),f.defaults=u("./defaults"),f.version="3.7.1",f.loadAsync=function(g,b){return(new f).loadAsync(g,b)},f.external=u("./external"),l.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(u,l,h){"use strict";var f=u("./utils"),g=u("./external"),b=u("./utf8"),x=u("./zipEntries"),A=u("./stream/Crc32Probe"),k=u("./nodejsUtils");function T(M){return new g.Promise(function(P,B){var U=M.decompressed.getContentWorker().pipe(new A);U.on("error",function(N){B(N)}).on("end",function(){U.streamInfo.crc32!==M.decompressed.crc32?B(new Error("Corrupted zip : CRC32 mismatch")):P()}).resume()})}l.exports=function(M,P){var B=this;return P=f.extend(P||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:b.utf8decode}),k.isNode&&k.isStream(M)?g.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",M,!0,P.optimizedBinaryString,P.base64).then(function(U){var N=new x(P);return N.load(U),N}).then(function(U){var N=[g.Promise.resolve(U)],$=U.files;if(P.checkCRC32)for(var G=0;G<$.length;G++)N.push(T($[G]));return g.Promise.all(N)}).then(function(U){for(var N=U.shift(),$=N.files,G=0;G<$.length;G++){var W=$[G];B.file(W.fileNameStr,W.decompressed,{binary:!0,optimizedBinaryString:!0,date:W.date,dir:W.dir,comment:W.fileCommentStr.length?W.fileCommentStr:null,unixPermissions:W.unixPermissions,dosPermissions:W.dosPermissions,createFolders:P.createFolders})}return N.zipComment.length&&(B.comment=N.zipComment),B})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(u,l,h){"use strict";var f=u("../utils"),g=u("../stream/GenericWorker");function b(x,A){g.call(this,"Nodejs stream input adapter for "+x),this._upstreamEnded=!1,this._bindStream(A)}f.inherits(b,g),b.prototype._bindStream=function(x){var A=this;(this._stream=x).pause(),x.on("data",function(k){A.push({data:k,meta:{percent:0}})}).on("error",function(k){A.isPaused?this.generatedError=k:A.error(k)}).on("end",function(){A.isPaused?A._upstreamEnded=!0:A.end()})},b.prototype.pause=function(){return!!g.prototype.pause.call(this)&&(this._stream.pause(),!0)},b.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},l.exports=b},{"../stream/GenericWorker":28,"../utils":32}],13:[function(u,l,h){"use strict";var f=u("readable-stream").Readable;function g(b,x,A){f.call(this,x),this._helper=b;var k=this;b.on("data",function(T,M){k.push(T)||k._helper.pause(),A&&A(M)}).on("error",function(T){k.emit("error",T)}).on("end",function(){k.push(null)})}u("../utils").inherits(g,f),g.prototype._read=function(){this._helper.resume()},l.exports=g},{"../utils":32,"readable-stream":16}],14:[function(u,l,h){"use strict";l.exports={isNode:typeof Buffer<"u",newBufferFrom:function(f,g){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,g);if("number"==typeof f)throw new Error('The "data" argument must not be a number');return new Buffer(f,g)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var g=new Buffer(f);return g.fill(0),g},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&"function"==typeof f.on&&"function"==typeof f.pause&&"function"==typeof f.resume}}},{}],15:[function(u,l,h){"use strict";function f(X,oe,Z){var ae,de,pe=b.getTypeOf(oe),ge=b.extend(Z||{},k);ge.date=ge.date||new Date,null!==ge.compression&&(ge.compression=ge.compression.toUpperCase()),"string"==typeof ge.unixPermissions&&(ge.unixPermissions=parseInt(ge.unixPermissions,8)),ge.unixPermissions&&16384&ge.unixPermissions&&(ge.dir=!0),ge.dosPermissions&&16&ge.dosPermissions&&(ge.dir=!0),ge.dir&&(X=$(X)),ge.createFolders&&(ae=N(X))&&G.call(this,ae,!0),Z&&void 0!==Z.binary||(ge.binary=!("string"===pe&&!1===ge.binary&&!1===ge.base64)),(oe instanceof T&&0===oe.uncompressedSize||ge.dir||!oe||0===oe.length)&&(ge.base64=!1,ge.binary=!0,oe="",ge.compression="STORE",pe="string"),de=oe instanceof T||oe instanceof x?oe:B.isNode&&B.isStream(oe)?new U(X,oe):b.prepareContent(X,oe,ge.binary,ge.optimizedBinaryString,ge.base64);var Be=new M(X,de,ge);this.files[X]=Be}var g=u("./utf8"),b=u("./utils"),x=u("./stream/GenericWorker"),A=u("./stream/StreamHelper"),k=u("./defaults"),T=u("./compressedObject"),M=u("./zipObject"),P=u("./generate"),B=u("./nodejsUtils"),U=u("./nodejs/NodejsStreamInputAdapter"),N=function(X){"/"===X.slice(-1)&&(X=X.substring(0,X.length-1));var oe=X.lastIndexOf("/");return 0<oe?X.substring(0,oe):""},$=function(X){return"/"!==X.slice(-1)&&(X+="/"),X},G=function(X,oe){return oe=void 0!==oe?oe:k.createFolders,X=$(X),this.files[X]||f.call(this,X,null,{dir:!0,createFolders:oe}),this.files[X]};function W(X){return"[object RegExp]"===Object.prototype.toString.call(X)}var K={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(X){var oe,Z,ae;for(oe in this.files)ae=this.files[oe],(Z=oe.slice(this.root.length,oe.length))&&oe.slice(0,this.root.length)===this.root&&X(Z,ae)},filter:function(X){var oe=[];return this.forEach(function(Z,ae){X(Z,ae)&&oe.push(ae)}),oe},file:function(X,oe,Z){if(1!==arguments.length)return f.call(this,X=this.root+X,oe,Z),this;if(W(X)){var ae=X;return this.filter(function(ge,je){return!je.dir&&ae.test(ge)})}var pe=this.files[this.root+X];return pe&&!pe.dir?pe:null},folder:function(X){if(!X)return this;if(W(X))return this.filter(function(pe,ge){return ge.dir&&X.test(pe)});var Z=G.call(this,this.root+X),ae=this.clone();return ae.root=Z.name,ae},remove:function(X){var oe=this.files[X=this.root+X];if(oe||("/"!==X.slice(-1)&&(X+="/"),oe=this.files[X]),oe&&!oe.dir)delete this.files[X];else for(var Z=this.filter(function(pe,ge){return ge.name.slice(0,X.length)===X}),ae=0;ae<Z.length;ae++)delete this.files[Z[ae].name];return this},generate:function(X){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(X){var oe,Z={};try{if((Z=b.extend(X||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:g.utf8encode})).type=Z.type.toLowerCase(),Z.compression=Z.compression.toUpperCase(),"binarystring"===Z.type&&(Z.type="string"),!Z.type)throw new Error("No output type specified.");b.checkSupport(Z.type),"darwin"!==Z.platform&&"freebsd"!==Z.platform&&"linux"!==Z.platform&&"sunos"!==Z.platform||(Z.platform="UNIX"),"win32"===Z.platform&&(Z.platform="DOS"),oe=P.generateWorker(this,Z,Z.comment||this.comment||"")}catch(pe){(oe=new x("error")).error(pe)}return new A(oe,Z.type||"string",Z.mimeType)},generateAsync:function(X,oe){return this.generateInternalStream(X).accumulate(oe)},generateNodeStream:function(X,oe){return(X=X||{}).type||(X.type="nodebuffer"),this.generateInternalStream(X).toNodejsStream(oe)}};l.exports=K},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(u,l,h){l.exports=u("stream")},{stream:void 0}],17:[function(u,l,h){"use strict";var f=u("./DataReader");function g(b){f.call(this,b);for(var x=0;x<this.data.length;x++)b[x]=255&b[x]}u("../utils").inherits(g,f),g.prototype.byteAt=function(b){return this.data[this.zero+b]},g.prototype.lastIndexOfSignature=function(b){for(var x=b.charCodeAt(0),A=b.charCodeAt(1),k=b.charCodeAt(2),T=b.charCodeAt(3),M=this.length-4;0<=M;--M)if(this.data[M]===x&&this.data[M+1]===A&&this.data[M+2]===k&&this.data[M+3]===T)return M-this.zero;return-1},g.prototype.readAndCheckSignature=function(b){var x=b.charCodeAt(0),A=b.charCodeAt(1),k=b.charCodeAt(2),T=b.charCodeAt(3),M=this.readData(4);return x===M[0]&&A===M[1]&&k===M[2]&&T===M[3]},g.prototype.readData=function(b){if(this.checkOffset(b),0===b)return[];var x=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},l.exports=g},{"../utils":32,"./DataReader":18}],18:[function(u,l,h){"use strict";var f=u("../utils");function g(b){this.data=b,this.length=b.length,this.index=0,this.zero=0}g.prototype={checkOffset:function(b){this.checkIndex(this.index+b)},checkIndex:function(b){if(this.length<this.zero+b||b<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+b+"). Corrupted zip ?")},setIndex:function(b){this.checkIndex(b),this.index=b},skip:function(b){this.setIndex(this.index+b)},byteAt:function(b){},readInt:function(b){var x,A=0;for(this.checkOffset(b),x=this.index+b-1;x>=this.index;x--)A=(A<<8)+this.byteAt(x);return this.index+=b,A},readString:function(b){return f.transformTo("string",this.readData(b))},readData:function(b){},lastIndexOfSignature:function(b){},readAndCheckSignature:function(b){},readDate:function(){var b=this.readInt(4);return new Date(Date.UTC(1980+(b>>25&127),(b>>21&15)-1,b>>16&31,b>>11&31,b>>5&63,(31&b)<<1))}},l.exports=g},{"../utils":32}],19:[function(u,l,h){"use strict";var f=u("./Uint8ArrayReader");function g(b){f.call(this,b)}u("../utils").inherits(g,f),g.prototype.readData=function(b){this.checkOffset(b);var x=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},l.exports=g},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(u,l,h){"use strict";var f=u("./DataReader");function g(b){f.call(this,b)}u("../utils").inherits(g,f),g.prototype.byteAt=function(b){return this.data.charCodeAt(this.zero+b)},g.prototype.lastIndexOfSignature=function(b){return this.data.lastIndexOf(b)-this.zero},g.prototype.readAndCheckSignature=function(b){return b===this.readData(4)},g.prototype.readData=function(b){this.checkOffset(b);var x=this.data.slice(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},l.exports=g},{"../utils":32,"./DataReader":18}],21:[function(u,l,h){"use strict";var f=u("./ArrayReader");function g(b){f.call(this,b)}u("../utils").inherits(g,f),g.prototype.readData=function(b){if(this.checkOffset(b),0===b)return new Uint8Array(0);var x=this.data.subarray(this.zero+this.index,this.zero+this.index+b);return this.index+=b,x},l.exports=g},{"../utils":32,"./ArrayReader":17}],22:[function(u,l,h){"use strict";var f=u("../utils"),g=u("../support"),b=u("./ArrayReader"),x=u("./StringReader"),A=u("./NodeBufferReader"),k=u("./Uint8ArrayReader");l.exports=function(T){var M=f.getTypeOf(T);return f.checkSupport(M),"string"!==M||g.uint8array?"nodebuffer"===M?new A(T):g.uint8array?new k(f.transformTo("uint8array",T)):new b(f.transformTo("array",T)):new x(T)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(u,l,h){"use strict";h.LOCAL_FILE_HEADER="PK\x03\x04",h.CENTRAL_FILE_HEADER="PK\x01\x02",h.CENTRAL_DIRECTORY_END="PK\x05\x06",h.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",h.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",h.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(u,l,h){"use strict";var f=u("./GenericWorker"),g=u("../utils");function b(x){f.call(this,"ConvertWorker to "+x),this.destType=x}g.inherits(b,f),b.prototype.processChunk=function(x){this.push({data:g.transformTo(this.destType,x.data),meta:x.meta})},l.exports=b},{"../utils":32,"./GenericWorker":28}],25:[function(u,l,h){"use strict";var f=u("./GenericWorker"),g=u("../crc32");function b(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u("../utils").inherits(b,f),b.prototype.processChunk=function(x){this.streamInfo.crc32=g(x.data,this.streamInfo.crc32||0),this.push(x)},l.exports=b},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(u,l,h){"use strict";var f=u("../utils"),g=u("./GenericWorker");function b(x){g.call(this,"DataLengthProbe for "+x),this.propName=x,this.withStreamInfo(x,0)}f.inherits(b,g),b.prototype.processChunk=function(x){x&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+x.data.length),g.prototype.processChunk.call(this,x)},l.exports=b},{"../utils":32,"./GenericWorker":28}],27:[function(u,l,h){"use strict";var f=u("../utils"),g=u("./GenericWorker");function b(x){g.call(this,"DataWorker");var A=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,x.then(function(k){A.dataIsReady=!0,A.data=k,A.max=k&&k.length||0,A.type=f.getTypeOf(k),A.isPaused||A._tickAndRepeat()},function(k){A.error(k)})}f.inherits(b,g),b.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this.data=null},b.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},b.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},b.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var x=null,A=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":x=this.data.substring(this.index,A);break;case"uint8array":x=this.data.subarray(this.index,A);break;case"array":case"nodebuffer":x=this.data.slice(this.index,A)}return this.index=A,this.push({data:x,meta:{percent:this.max?this.index/this.max*100:0}})},l.exports=b},{"../utils":32,"./GenericWorker":28}],28:[function(u,l,h){"use strict";function f(g){this.name=g||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(g){this.emit("data",g)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(g){this.emit("error",g)}return!0},error:function(g){return!this.isFinished&&(this.isPaused?this.generatedError=g:(this.isFinished=!0,this.emit("error",g),this.previous&&this.previous.error(g),this.cleanUp()),!0)},on:function(g,b){return this._listeners[g].push(b),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(g,b){if(this._listeners[g])for(var x=0;x<this._listeners[g].length;x++)this._listeners[g][x].call(this,b)},pipe:function(g){return g.registerPrevious(this)},registerPrevious:function(g){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=g.streamInfo,this.mergeStreamInfo(),this.previous=g;var b=this;return g.on("data",function(x){b.processChunk(x)}),g.on("end",function(){b.end()}),g.on("error",function(x){b.error(x)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var g=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),g=!0),this.previous&&this.previous.resume(),!g},flush:function(){},processChunk:function(g){this.push(g)},withStreamInfo:function(g,b){return this.extraStreamInfo[g]=b,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var g in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(g)&&(this.streamInfo[g]=this.extraStreamInfo[g])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var g="Worker "+this.name;return this.previous?this.previous+" -> "+g:g}},l.exports=f},{}],29:[function(u,l,h){"use strict";var f=u("../utils"),g=u("./ConvertWorker"),b=u("./GenericWorker"),x=u("../base64"),A=u("../support"),k=u("../external"),T=null;if(A.nodestream)try{T=u("../nodejs/NodejsStreamOutputAdapter")}catch{}function P(B,U,N){var $=U;switch(U){case"blob":case"arraybuffer":$="uint8array";break;case"base64":$="string"}try{this._internalType=$,this._outputType=U,this._mimeType=N,f.checkSupport($),this._worker=B.pipe(new g($)),B.lock()}catch(G){this._worker=new b("error"),this._worker.error(G)}}P.prototype={accumulate:function(B){return function M(B,U){return new k.Promise(function(N,$){var G=[],W=B._internalType,K=B._outputType,X=B._mimeType;B.on("data",function(oe,Z){G.push(oe),U&&U(Z)}).on("error",function(oe){G=[],$(oe)}).on("end",function(){try{var oe=function(Z,ae,pe){switch(Z){case"blob":return f.newBlob(f.transformTo("arraybuffer",ae),pe);case"base64":return x.encode(ae);default:return f.transformTo(Z,ae)}}(K,function(Z,ae){var pe,ge=0,je=null,de=0;for(pe=0;pe<ae.length;pe++)de+=ae[pe].length;switch(Z){case"string":return ae.join("");case"array":return Array.prototype.concat.apply([],ae);case"uint8array":for(je=new Uint8Array(de),pe=0;pe<ae.length;pe++)je.set(ae[pe],ge),ge+=ae[pe].length;return je;case"nodebuffer":return Buffer.concat(ae);default:throw new Error("concat : unsupported type '"+Z+"'")}}(W,G),X);N(oe)}catch(Z){$(Z)}G=[]}).resume()})}(this,B)},on:function(B,U){var N=this;return this._worker.on(B,"data"===B?function($){U.call(N,$.data,$.meta)}:function(){f.delay(U,arguments,N)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(B){if(f.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new T(this,{objectMode:"nodebuffer"!==this._outputType},B)}},l.exports=P},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(u,l,h){"use strict";if(h.base64=!0,h.array=!0,h.string=!0,h.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",h.nodebuffer=typeof Buffer<"u",h.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")h.blob=!1;else{var f=new ArrayBuffer(0);try{h.blob=0===new Blob([f],{type:"application/zip"}).size}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);g.append(f),h.blob=0===g.getBlob("application/zip").size}catch{h.blob=!1}}}try{h.nodestream=!!u("readable-stream").Readable}catch{h.nodestream=!1}},{"readable-stream":16}],31:[function(u,l,h){"use strict";for(var f=u("./utils"),g=u("./support"),b=u("./nodejsUtils"),x=u("./stream/GenericWorker"),A=new Array(256),k=0;k<256;k++)A[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;function T(){x.call(this,"utf-8 decode"),this.leftOver=null}function M(){x.call(this,"utf-8 encode")}A[254]=A[254]=1,h.utf8encode=function(P){return g.nodebuffer?b.newBufferFrom(P,"utf-8"):function(B){var U,N,$,G,W,K=B.length,X=0;for(G=0;G<K;G++)55296==(64512&(N=B.charCodeAt(G)))&&G+1<K&&56320==(64512&($=B.charCodeAt(G+1)))&&(N=65536+(N-55296<<10)+($-56320),G++),X+=N<128?1:N<2048?2:N<65536?3:4;for(U=g.uint8array?new Uint8Array(X):new Array(X),G=W=0;W<X;G++)55296==(64512&(N=B.charCodeAt(G)))&&G+1<K&&56320==(64512&($=B.charCodeAt(G+1)))&&(N=65536+(N-55296<<10)+($-56320),G++),N<128?U[W++]=N:(N<2048?U[W++]=192|N>>>6:(N<65536?U[W++]=224|N>>>12:(U[W++]=240|N>>>18,U[W++]=128|N>>>12&63),U[W++]=128|N>>>6&63),U[W++]=128|63&N);return U}(P)},h.utf8decode=function(P){return g.nodebuffer?f.transformTo("nodebuffer",P).toString("utf-8"):function(B){var U,N,$,G,W=B.length,K=new Array(2*W);for(U=N=0;U<W;)if(($=B[U++])<128)K[N++]=$;else if(4<(G=A[$]))K[N++]=65533,U+=G-1;else{for($&=2===G?31:3===G?15:7;1<G&&U<W;)$=$<<6|63&B[U++],G--;1<G?K[N++]=65533:$<65536?K[N++]=$:(K[N++]=55296|($-=65536)>>10&1023,K[N++]=56320|1023&$)}return K.length!==N&&(K.subarray?K=K.subarray(0,N):K.length=N),f.applyFromCharCode(K)}(P=f.transformTo(g.uint8array?"uint8array":"array",P))},f.inherits(T,x),T.prototype.processChunk=function(P){var B=f.transformTo(g.uint8array?"uint8array":"array",P.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var U=B;(B=new Uint8Array(U.length+this.leftOver.length)).set(this.leftOver,0),B.set(U,this.leftOver.length)}else B=this.leftOver.concat(B);this.leftOver=null}var N=function(G,W){var K;for((W=W||G.length)>G.length&&(W=G.length),K=W-1;0<=K&&128==(192&G[K]);)K--;return K<0||0===K?W:K+A[G[K]]>W?K:W}(B),$=B;N!==B.length&&(g.uint8array?($=B.subarray(0,N),this.leftOver=B.subarray(N,B.length)):($=B.slice(0,N),this.leftOver=B.slice(N,B.length))),this.push({data:h.utf8decode($),meta:P.meta})},T.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:h.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},h.Utf8DecodeWorker=T,f.inherits(M,x),M.prototype.processChunk=function(P){this.push({data:h.utf8encode(P.data),meta:P.meta})},h.Utf8EncodeWorker=M},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(u,l,h){"use strict";var f=u("./support"),g=u("./base64"),b=u("./nodejsUtils"),x=u("set-immediate-shim"),A=u("./external");function k(N){return N}function T(N,$){for(var G=0;G<N.length;++G)$[G]=255&N.charCodeAt(G);return $}h.newBlob=function(N,$){h.checkSupport("blob");try{return new Blob([N],{type:$})}catch{try{var G=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return G.append(N),G.getBlob($)}catch{throw new Error("Bug : can't construct the Blob.")}}};var M={stringifyByChunk:function(N,$,G){var W=[],K=0,X=N.length;if(X<=G)return String.fromCharCode.apply(null,N);for(;K<X;)W.push(String.fromCharCode.apply(null,"array"===$||"nodebuffer"===$?N.slice(K,Math.min(K+G,X)):N.subarray(K,Math.min(K+G,X)))),K+=G;return W.join("")},stringifyByChar:function(N){for(var $="",G=0;G<N.length;G++)$+=String.fromCharCode(N[G]);return $},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&1===String.fromCharCode.apply(null,b.allocBuffer(1)).length}catch{return!1}}()}};function P(N){var $=65536,G=h.getTypeOf(N),W=!0;if("uint8array"===G?W=M.applyCanBeUsed.uint8array:"nodebuffer"===G&&(W=M.applyCanBeUsed.nodebuffer),W)for(;1<$;)try{return M.stringifyByChunk(N,G,$)}catch{$=Math.floor($/2)}return M.stringifyByChar(N)}function B(N,$){for(var G=0;G<N.length;G++)$[G]=N[G];return $}h.applyFromCharCode=P;var U={};U.string={string:k,array:function(N){return T(N,new Array(N.length))},arraybuffer:function(N){return U.string.uint8array(N).buffer},uint8array:function(N){return T(N,new Uint8Array(N.length))},nodebuffer:function(N){return T(N,b.allocBuffer(N.length))}},U.array={string:P,array:k,arraybuffer:function(N){return new Uint8Array(N).buffer},uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return b.newBufferFrom(N)}},U.arraybuffer={string:function(N){return P(new Uint8Array(N))},array:function(N){return B(new Uint8Array(N),new Array(N.byteLength))},arraybuffer:k,uint8array:function(N){return new Uint8Array(N)},nodebuffer:function(N){return b.newBufferFrom(new Uint8Array(N))}},U.uint8array={string:P,array:function(N){return B(N,new Array(N.length))},arraybuffer:function(N){return N.buffer},uint8array:k,nodebuffer:function(N){return b.newBufferFrom(N)}},U.nodebuffer={string:P,array:function(N){return B(N,new Array(N.length))},arraybuffer:function(N){return U.nodebuffer.uint8array(N).buffer},uint8array:function(N){return B(N,new Uint8Array(N.length))},nodebuffer:k},h.transformTo=function(N,$){if($=$||"",!N)return $;h.checkSupport(N);var G=h.getTypeOf($);return U[G][N]($)},h.getTypeOf=function(N){return"string"==typeof N?"string":"[object Array]"===Object.prototype.toString.call(N)?"array":f.nodebuffer&&b.isBuffer(N)?"nodebuffer":f.uint8array&&N instanceof Uint8Array?"uint8array":f.arraybuffer&&N instanceof ArrayBuffer?"arraybuffer":void 0},h.checkSupport=function(N){if(!f[N.toLowerCase()])throw new Error(N+" is not supported by this platform")},h.MAX_VALUE_16BITS=65535,h.MAX_VALUE_32BITS=-1,h.pretty=function(N){var $,G,W="";for(G=0;G<(N||"").length;G++)W+="\\x"+(($=N.charCodeAt(G))<16?"0":"")+$.toString(16).toUpperCase();return W},h.delay=function(N,$,G){x(function(){N.apply(G||null,$||[])})},h.inherits=function(N,$){function G(){}G.prototype=$.prototype,N.prototype=new G},h.extend=function(){var N,$,G={};for(N=0;N<arguments.length;N++)for($ in arguments[N])arguments[N].hasOwnProperty($)&&void 0===G[$]&&(G[$]=arguments[N][$]);return G},h.prepareContent=function(N,$,G,W,K){return A.Promise.resolve($).then(function(X){return f.blob&&(X instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(X)))&&typeof FileReader<"u"?new A.Promise(function(oe,Z){var ae=new FileReader;ae.onload=function(pe){oe(pe.target.result)},ae.onerror=function(pe){Z(pe.target.error)},ae.readAsArrayBuffer(X)}):X}).then(function(X){var Z,oe=h.getTypeOf(X);return oe?("arraybuffer"===oe?X=h.transformTo("uint8array",X):"string"===oe&&(K?X=g.decode(X):G&&!0!==W&&(X=T(Z=X,f.uint8array?new Uint8Array(Z.length):new Array(Z.length)))),X):A.Promise.reject(new Error("Can't read the data of '"+N+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(u,l,h){"use strict";var f=u("./reader/readerFor"),g=u("./utils"),b=u("./signature"),x=u("./zipEntry"),A=(u("./utf8"),u("./support"));function k(T){this.files=[],this.loadOptions=T}k.prototype={checkSignature:function(T){if(!this.reader.readAndCheckSignature(T)){this.reader.index-=4;var M=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+g.pretty(M)+", expected "+g.pretty(T)+")")}},isSignature:function(T,M){var P=this.reader.index;this.reader.setIndex(T);var B=this.reader.readString(4)===M;return this.reader.setIndex(P),B},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var T=this.reader.readData(this.zipCommentLength),P=g.transformTo(A.uint8array?"uint8array":"array",T);this.zipComment=this.loadOptions.decodeFileName(P)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var T,M,P,B=this.zip64EndOfCentralSize-44;0<B;)T=this.reader.readInt(2),M=this.reader.readInt(4),P=this.reader.readData(M),this.zip64ExtensibleData[T]={id:T,length:M,value:P}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var T,M;for(T=0;T<this.files.length;T++)this.reader.setIndex((M=this.files[T]).localHeaderOffset),this.checkSignature(b.LOCAL_FILE_HEADER),M.readLocalPart(this.reader),M.handleUTF8(),M.processAttributes()},readCentralDir:function(){var T;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(b.CENTRAL_FILE_HEADER);)(T=new x({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(T);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var T=this.reader.lastIndexOfSignature(b.CENTRAL_DIRECTORY_END);if(T<0)throw this.isSignature(0,b.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(T);var M=T;if(this.checkSignature(b.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,(T=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(T),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,b.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(b.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var P=this.centralDirOffset+this.centralDirSize;this.zip64&&(P+=20,P+=12+this.zip64EndOfCentralSize);var B=M-P;if(0<B)this.isSignature(M,b.CENTRAL_FILE_HEADER)||(this.reader.zero=B);else if(B<0)throw new Error("Corrupted zip: missing "+Math.abs(B)+" bytes.")},prepareReader:function(T){this.reader=f(T)},load:function(T){this.prepareReader(T),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},l.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(u,l,h){"use strict";var f=u("./reader/readerFor"),g=u("./utils"),b=u("./compressedObject"),x=u("./crc32"),A=u("./utf8"),k=u("./compressions"),T=u("./support");function M(P,B){this.options=P,this.loadOptions=B}M.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(P){var B,U;if(P.skip(22),this.fileNameLength=P.readInt(2),U=P.readInt(2),this.fileName=P.readData(this.fileNameLength),P.skip(U),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(B=function(N){for(var $ in k)if(k.hasOwnProperty($)&&k[$].magic===N)return k[$];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+g.transformTo("string",this.fileName)+")");this.decompressed=new b(this.compressedSize,this.uncompressedSize,this.crc32,B,P.readData(this.compressedSize))},readCentralPart:function(P){this.versionMadeBy=P.readInt(2),P.skip(2),this.bitFlag=P.readInt(2),this.compressionMethod=P.readString(2),this.date=P.readDate(),this.crc32=P.readInt(4),this.compressedSize=P.readInt(4),this.uncompressedSize=P.readInt(4);var B=P.readInt(2);if(this.extraFieldsLength=P.readInt(2),this.fileCommentLength=P.readInt(2),this.diskNumberStart=P.readInt(2),this.internalFileAttributes=P.readInt(2),this.externalFileAttributes=P.readInt(4),this.localHeaderOffset=P.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");P.skip(B),this.readExtraFields(P),this.parseZIP64ExtraField(P),this.fileComment=P.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var P=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==P&&(this.dosPermissions=63&this.externalFileAttributes),3==P&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(P){if(this.extraFields[1]){var B=f(this.extraFields[1].value);this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=B.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=B.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=B.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=B.readInt(4))}},readExtraFields:function(P){var B,U,N,$=P.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});P.index+4<$;)B=P.readInt(2),U=P.readInt(2),N=P.readData(U),this.extraFields[B]={id:B,length:U,value:N};P.setIndex($)},handleUTF8:function(){var P=T.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=A.utf8decode(this.fileName),this.fileCommentStr=A.utf8decode(this.fileComment);else{var B=this.findExtraFieldUnicodePath();if(null!==B)this.fileNameStr=B;else{var U=g.transformTo(P,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(U)}var N=this.findExtraFieldUnicodeComment();if(null!==N)this.fileCommentStr=N;else{var $=g.transformTo(P,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName($)}}},findExtraFieldUnicodePath:function(){var P=this.extraFields[28789];if(P){var B=f(P.value);return 1!==B.readInt(1)||x(this.fileName)!==B.readInt(4)?null:A.utf8decode(B.readData(P.length-5))}return null},findExtraFieldUnicodeComment:function(){var P=this.extraFields[25461];if(P){var B=f(P.value);return 1!==B.readInt(1)||x(this.fileComment)!==B.readInt(4)?null:A.utf8decode(B.readData(P.length-5))}return null}},l.exports=M},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(u,l,h){"use strict";function f(B,U,N){this.name=B,this.dir=N.dir,this.date=N.date,this.comment=N.comment,this.unixPermissions=N.unixPermissions,this.dosPermissions=N.dosPermissions,this._data=U,this._dataBinary=N.binary,this.options={compression:N.compression,compressionOptions:N.compressionOptions}}var g=u("./stream/StreamHelper"),b=u("./stream/DataWorker"),x=u("./utf8"),A=u("./compressedObject"),k=u("./stream/GenericWorker");f.prototype={internalStream:function(B){var U=null,N="string";try{if(!B)throw new Error("No output type specified.");var $="string"===(N=B.toLowerCase())||"text"===N;"binarystring"!==N&&"text"!==N||(N="string"),U=this._decompressWorker();var G=!this._dataBinary;G&&!$&&(U=U.pipe(new x.Utf8EncodeWorker)),!G&&$&&(U=U.pipe(new x.Utf8DecodeWorker))}catch(W){(U=new k("error")).error(W)}return new g(U,N,"")},async:function(B,U){return this.internalStream(B).accumulate(U)},nodeStream:function(B,U){return this.internalStream(B||"nodebuffer").toNodejsStream(U)},_compressWorker:function(B,U){if(this._data instanceof A&&this._data.compression.magic===B.magic)return this._data.getCompressedWorker();var N=this._decompressWorker();return this._dataBinary||(N=N.pipe(new x.Utf8EncodeWorker)),A.createWorkerFrom(N,B,U)},_decompressWorker:function(){return this._data instanceof A?this._data.getContentWorker():this._data instanceof k?this._data:new b(this._data)}};for(var T=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],M=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},P=0;P<T.length;P++)f.prototype[T[P]]=M;l.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(u,l,h){(function(f){"use strict";var g,b,x=f.MutationObserver||f.WebKitMutationObserver;if(x){var A=0,k=new x(B),T=f.document.createTextNode("");k.observe(T,{characterData:!0}),g=function(){T.data=A=++A%2}}else if(f.setImmediate||void 0===f.MessageChannel)g="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var U=f.document.createElement("script");U.onreadystatechange=function(){B(),U.onreadystatechange=null,U.parentNode.removeChild(U),U=null},f.document.documentElement.appendChild(U)}:function(){setTimeout(B,0)};else{var M=new f.MessageChannel;M.port1.onmessage=B,g=function(){M.port2.postMessage(0)}}var P=[];function B(){var U,N;b=!0;for(var $=P.length;$;){for(N=P,P=[],U=-1;++U<$;)N[U]();$=P.length}b=!1}l.exports=function(U){1!==P.push(U)||b||g()}}).call(this,typeof _.g<"u"?_.g:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(u,l,h){"use strict";var f=u("immediate");function g(){}var b={},x=["REJECTED"],A=["FULFILLED"],k=["PENDING"];function T($){if("function"!=typeof $)throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,$!==g&&U(this,$)}function M($,G,W){this.promise=$,"function"==typeof G&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),"function"==typeof W&&(this.onRejected=W,this.callRejected=this.otherCallRejected)}function P($,G,W){f(function(){var K;try{K=G(W)}catch(X){return b.reject($,X)}K===$?b.reject($,new TypeError("Cannot resolve promise with itself")):b.resolve($,K)})}function B($){var G=$&&$.then;if($&&("object"==typeof $||"function"==typeof $)&&"function"==typeof G)return function(){G.apply($,arguments)}}function U($,G){var W=!1;function K(Z){W||(W=!0,b.reject($,Z))}function X(Z){W||(W=!0,b.resolve($,Z))}var oe=N(function(){G(X,K)});"error"===oe.status&&K(oe.value)}function N($,G){var W={};try{W.value=$(G),W.status="success"}catch(K){W.status="error",W.value=K}return W}(l.exports=T).prototype.finally=function($){if("function"!=typeof $)return this;var G=this.constructor;return this.then(function(W){return G.resolve($()).then(function(){return W})},function(W){return G.resolve($()).then(function(){throw W})})},T.prototype.catch=function($){return this.then(null,$)},T.prototype.then=function($,G){if("function"!=typeof $&&this.state===A||"function"!=typeof G&&this.state===x)return this;var W=new this.constructor(g);return this.state!==k?P(W,this.state===A?$:G,this.outcome):this.queue.push(new M(W,$,G)),W},M.prototype.callFulfilled=function($){b.resolve(this.promise,$)},M.prototype.otherCallFulfilled=function($){P(this.promise,this.onFulfilled,$)},M.prototype.callRejected=function($){b.reject(this.promise,$)},M.prototype.otherCallRejected=function($){P(this.promise,this.onRejected,$)},b.resolve=function($,G){var W=N(B,G);if("error"===W.status)return b.reject($,W.value);var K=W.value;if(K)U($,K);else{$.state=A,$.outcome=G;for(var X=-1,oe=$.queue.length;++X<oe;)$.queue[X].callFulfilled(G)}return $},b.reject=function($,G){$.state=x,$.outcome=G;for(var W=-1,K=$.queue.length;++W<K;)$.queue[W].callRejected(G);return $},T.resolve=function($){return $ instanceof this?$:b.resolve(new this(g),$)},T.reject=function($){var G=new this(g);return b.reject(G,$)},T.all=function($){var G=this;if("[object Array]"!==Object.prototype.toString.call($))return this.reject(new TypeError("must be an array"));var W=$.length,K=!1;if(!W)return this.resolve([]);for(var X=new Array(W),oe=0,Z=-1,ae=new this(g);++Z<W;)pe($[Z],Z);return ae;function pe(ge,je){G.resolve(ge).then(function(de){X[je]=de,++oe!==W||K||(K=!0,b.resolve(ae,X))},function(de){K||(K=!0,b.reject(ae,de))})}},T.race=function($){if("[object Array]"!==Object.prototype.toString.call($))return this.reject(new TypeError("must be an array"));var W=$.length,K=!1;if(!W)return this.resolve([]);for(var X=-1,oe=new this(g);++X<W;)this.resolve($[X]).then(function(ae){K||(K=!0,b.resolve(oe,ae))},function(ae){K||(K=!0,b.reject(oe,ae))});return oe}},{immediate:36}],38:[function(u,l,h){"use strict";var f={};(0,u("./lib/utils/common").assign)(f,u("./lib/deflate"),u("./lib/inflate"),u("./lib/zlib/constants")),l.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(u,l,h){"use strict";var f=u("./zlib/deflate"),g=u("./utils/common"),b=u("./utils/strings"),x=u("./zlib/messages"),A=u("./zlib/zstream"),k=Object.prototype.toString,T=0,M=-1,P=0,B=8;function U($){if(!(this instanceof U))return new U($);this.options=g.assign({level:M,method:B,chunkSize:16384,windowBits:15,memLevel:8,strategy:P,to:""},$||{});var G=this.options;G.raw&&0<G.windowBits?G.windowBits=-G.windowBits:G.gzip&&0<G.windowBits&&G.windowBits<16&&(G.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var W=f.deflateInit2(this.strm,G.level,G.method,G.windowBits,G.memLevel,G.strategy);if(W!==T)throw new Error(x[W]);if(G.header&&f.deflateSetHeader(this.strm,G.header),G.dictionary){var K;if(K="string"==typeof G.dictionary?b.string2buf(G.dictionary):"[object ArrayBuffer]"===k.call(G.dictionary)?new Uint8Array(G.dictionary):G.dictionary,(W=f.deflateSetDictionary(this.strm,K))!==T)throw new Error(x[W]);this._dict_set=!0}}function N($,G){var W=new U(G);if(W.push($,!0),W.err)throw W.msg||x[W.err];return W.result}U.prototype.push=function($,G){var W,K,X=this.strm,oe=this.options.chunkSize;if(this.ended)return!1;K=G===~~G?G:!0===G?4:0,X.input="string"==typeof $?b.string2buf($):"[object ArrayBuffer]"===k.call($)?new Uint8Array($):$,X.next_in=0,X.avail_in=X.input.length;do{if(0===X.avail_out&&(X.output=new g.Buf8(oe),X.next_out=0,X.avail_out=oe),1!==(W=f.deflate(X,K))&&W!==T)return this.onEnd(W),!(this.ended=!0);0!==X.avail_out&&(0!==X.avail_in||4!==K&&2!==K)||this.onData("string"===this.options.to?b.buf2binstring(g.shrinkBuf(X.output,X.next_out)):g.shrinkBuf(X.output,X.next_out))}while((0<X.avail_in||0===X.avail_out)&&1!==W);return 4===K?(W=f.deflateEnd(this.strm),this.onEnd(W),this.ended=!0,W===T):2!==K||(this.onEnd(T),!(X.avail_out=0))},U.prototype.onData=function($){this.chunks.push($)},U.prototype.onEnd=function($){$===T&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks)),this.chunks=[],this.err=$,this.msg=this.strm.msg},h.Deflate=U,h.deflate=N,h.deflateRaw=function($,G){return(G=G||{}).raw=!0,N($,G)},h.gzip=function($,G){return(G=G||{}).gzip=!0,N($,G)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(u,l,h){"use strict";var f=u("./zlib/inflate"),g=u("./utils/common"),b=u("./utils/strings"),x=u("./zlib/constants"),A=u("./zlib/messages"),k=u("./zlib/zstream"),T=u("./zlib/gzheader"),M=Object.prototype.toString;function P(U){if(!(this instanceof P))return new P(U);this.options=g.assign({chunkSize:16384,windowBits:0,to:""},U||{});var N=this.options;N.raw&&0<=N.windowBits&&N.windowBits<16&&(N.windowBits=-N.windowBits,0===N.windowBits&&(N.windowBits=-15)),!(0<=N.windowBits&&N.windowBits<16)||U&&U.windowBits||(N.windowBits+=32),15<N.windowBits&&N.windowBits<48&&!(15&N.windowBits)&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var $=f.inflateInit2(this.strm,N.windowBits);if($!==x.Z_OK)throw new Error(A[$]);this.header=new T,f.inflateGetHeader(this.strm,this.header)}function B(U,N){var $=new P(N);if($.push(U,!0),$.err)throw $.msg||A[$.err];return $.result}P.prototype.push=function(U,N){var $,G,W,K,X,oe,Z=this.strm,ae=this.options.chunkSize,pe=this.options.dictionary,ge=!1;if(this.ended)return!1;G=N===~~N?N:!0===N?x.Z_FINISH:x.Z_NO_FLUSH,Z.input="string"==typeof U?b.binstring2buf(U):"[object ArrayBuffer]"===M.call(U)?new Uint8Array(U):U,Z.next_in=0,Z.avail_in=Z.input.length;do{if(0===Z.avail_out&&(Z.output=new g.Buf8(ae),Z.next_out=0,Z.avail_out=ae),($=f.inflate(Z,x.Z_NO_FLUSH))===x.Z_NEED_DICT&&pe&&(oe="string"==typeof pe?b.string2buf(pe):"[object ArrayBuffer]"===M.call(pe)?new Uint8Array(pe):pe,$=f.inflateSetDictionary(this.strm,oe)),$===x.Z_BUF_ERROR&&!0===ge&&($=x.Z_OK,ge=!1),$!==x.Z_STREAM_END&&$!==x.Z_OK)return this.onEnd($),!(this.ended=!0);Z.next_out&&(0!==Z.avail_out&&$!==x.Z_STREAM_END&&(0!==Z.avail_in||G!==x.Z_FINISH&&G!==x.Z_SYNC_FLUSH)||("string"===this.options.to?(W=b.utf8border(Z.output,Z.next_out),K=Z.next_out-W,X=b.buf2string(Z.output,W),Z.next_out=K,Z.avail_out=ae-K,K&&g.arraySet(Z.output,Z.output,W,K,0),this.onData(X)):this.onData(g.shrinkBuf(Z.output,Z.next_out)))),0===Z.avail_in&&0===Z.avail_out&&(ge=!0)}while((0<Z.avail_in||0===Z.avail_out)&&$!==x.Z_STREAM_END);return $===x.Z_STREAM_END&&(G=x.Z_FINISH),G===x.Z_FINISH?($=f.inflateEnd(this.strm),this.onEnd($),this.ended=!0,$===x.Z_OK):G!==x.Z_SYNC_FLUSH||(this.onEnd(x.Z_OK),!(Z.avail_out=0))},P.prototype.onData=function(U){this.chunks.push(U)},P.prototype.onEnd=function(U){U===x.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},h.Inflate=P,h.inflate=B,h.inflateRaw=function(U,N){return(N=N||{}).raw=!0,B(U,N)},h.ungzip=B},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(u,l,h){"use strict";var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";h.assign=function(x){for(var A=Array.prototype.slice.call(arguments,1);A.length;){var k=A.shift();if(k){if("object"!=typeof k)throw new TypeError(k+"must be non-object");for(var T in k)k.hasOwnProperty(T)&&(x[T]=k[T])}}return x},h.shrinkBuf=function(x,A){return x.length===A?x:x.subarray?x.subarray(0,A):(x.length=A,x)};var g={arraySet:function(x,A,k,T,M){if(A.subarray&&x.subarray)x.set(A.subarray(k,k+T),M);else for(var P=0;P<T;P++)x[M+P]=A[k+P]},flattenChunks:function(x){var A,k,T,M,P,B;for(A=T=0,k=x.length;A<k;A++)T+=x[A].length;for(B=new Uint8Array(T),A=M=0,k=x.length;A<k;A++)B.set(P=x[A],M),M+=P.length;return B}},b={arraySet:function(x,A,k,T,M){for(var P=0;P<T;P++)x[M+P]=A[k+P]},flattenChunks:function(x){return[].concat.apply([],x)}};h.setTyped=function(x){x?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,g)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,b))},h.setTyped(f)},{}],42:[function(u,l,h){"use strict";var f=u("./common"),g=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch{g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{b=!1}for(var x=new f.Buf8(256),A=0;A<256;A++)x[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function k(T,M){if(M<65537&&(T.subarray&&b||!T.subarray&&g))return String.fromCharCode.apply(null,f.shrinkBuf(T,M));for(var P="",B=0;B<M;B++)P+=String.fromCharCode(T[B]);return P}x[254]=x[254]=1,h.string2buf=function(T){var M,P,B,U,N,$=T.length,G=0;for(U=0;U<$;U++)55296==(64512&(P=T.charCodeAt(U)))&&U+1<$&&56320==(64512&(B=T.charCodeAt(U+1)))&&(P=65536+(P-55296<<10)+(B-56320),U++),G+=P<128?1:P<2048?2:P<65536?3:4;for(M=new f.Buf8(G),U=N=0;N<G;U++)55296==(64512&(P=T.charCodeAt(U)))&&U+1<$&&56320==(64512&(B=T.charCodeAt(U+1)))&&(P=65536+(P-55296<<10)+(B-56320),U++),P<128?M[N++]=P:(P<2048?M[N++]=192|P>>>6:(P<65536?M[N++]=224|P>>>12:(M[N++]=240|P>>>18,M[N++]=128|P>>>12&63),M[N++]=128|P>>>6&63),M[N++]=128|63&P);return M},h.buf2binstring=function(T){return k(T,T.length)},h.binstring2buf=function(T){for(var M=new f.Buf8(T.length),P=0,B=M.length;P<B;P++)M[P]=T.charCodeAt(P);return M},h.buf2string=function(T,M){var P,B,U,N,$=M||T.length,G=new Array(2*$);for(P=B=0;P<$;)if((U=T[P++])<128)G[B++]=U;else if(4<(N=x[U]))G[B++]=65533,P+=N-1;else{for(U&=2===N?31:3===N?15:7;1<N&&P<$;)U=U<<6|63&T[P++],N--;1<N?G[B++]=65533:U<65536?G[B++]=U:(G[B++]=55296|(U-=65536)>>10&1023,G[B++]=56320|1023&U)}return k(G,B)},h.utf8border=function(T,M){var P;for((M=M||T.length)>T.length&&(M=T.length),P=M-1;0<=P&&128==(192&T[P]);)P--;return P<0||0===P?M:P+x[T[P]]>M?P:M}},{"./common":41}],43:[function(u,l,h){"use strict";l.exports=function(f,g,b,x){for(var A=65535&f,k=f>>>16&65535,T=0;0!==b;){for(b-=T=2e3<b?2e3:b;k=k+(A=A+g[x++]|0)|0,--T;);A%=65521,k%=65521}return A|k<<16}},{}],44:[function(u,l,h){"use strict";l.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(u,l,h){"use strict";var f=function(){for(var g,b=[],x=0;x<256;x++){g=x;for(var A=0;A<8;A++)g=1&g?3988292384^g>>>1:g>>>1;b[x]=g}return b}();l.exports=function(g,b,x,A){var k=f,T=A+x;g^=-1;for(var M=A;M<T;M++)g=g>>>8^k[255&(g^b[M])];return~g}},{}],46:[function(u,l,h){"use strict";var f,g=u("../utils/common"),b=u("./trees"),x=u("./adler32"),A=u("./crc32"),k=u("./messages"),T=0,P=0,B=-2,$=2,G=8,K=286,X=30,oe=19,Z=2*K+1,ae=15,pe=3,ge=258,je=ge+pe+1,de=42,Be=113;function Mt(Q,vt){return Q.msg=k[vt],vt}function gt(Q){return(Q<<1)-(4<Q?9:0)}function zt(Q){for(var vt=Q.length;0<=--vt;)Q[vt]=0}function Ce(Q){var vt=Q.state,Re=vt.pending;Re>Q.avail_out&&(Re=Q.avail_out),0!==Re&&(g.arraySet(Q.output,vt.pending_buf,vt.pending_out,Re,Q.next_out),Q.next_out+=Re,vt.pending_out+=Re,Q.total_out+=Re,Q.avail_out-=Re,vt.pending-=Re,0===vt.pending&&(vt.pending_out=0))}function Le(Q,vt){b._tr_flush_block(Q,0<=Q.block_start?Q.block_start:-1,Q.strstart-Q.block_start,vt),Q.block_start=Q.strstart,Ce(Q.strm)}function Yt(Q,vt){Q.pending_buf[Q.pending++]=vt}function Ct(Q,vt){Q.pending_buf[Q.pending++]=vt>>>8&255,Q.pending_buf[Q.pending++]=255&vt}function Ne(Q,vt){var Re,le,me=Q.max_chain_length,Te=Q.strstart,tt=Q.prev_length,Xe=Q.nice_match,Ve=Q.strstart>Q.w_size-je?Q.strstart-(Q.w_size-je):0,ut=Q.window,Rt=Q.w_mask,Dt=Q.prev,xt=Q.strstart+ge,On=ut[Te+tt-1],Cn=ut[Te+tt];Q.prev_length>=Q.good_match&&(me>>=2),Xe>Q.lookahead&&(Xe=Q.lookahead);do{if(ut[(Re=vt)+tt]===Cn&&ut[Re+tt-1]===On&&ut[Re]===ut[Te]&&ut[++Re]===ut[Te+1]){Te+=2,Re++;do{}while(ut[++Te]===ut[++Re]&&ut[++Te]===ut[++Re]&&ut[++Te]===ut[++Re]&&ut[++Te]===ut[++Re]&&ut[++Te]===ut[++Re]&&ut[++Te]===ut[++Re]&&ut[++Te]===ut[++Re]&&ut[++Te]===ut[++Re]&&Te<xt);if(le=ge-(xt-Te),Te=xt-ge,tt<le){if(Q.match_start=vt,Xe<=(tt=le))break;On=ut[Te+tt-1],Cn=ut[Te+tt]}}}while((vt=Dt[vt&Rt])>Ve&&0!=--me);return tt<=Q.lookahead?tt:Q.lookahead}function Wt(Q){var vt,Re,le,me,Te,tt,Xe,Ve,ut,Rt,Dt=Q.w_size;do{if(me=Q.window_size-Q.lookahead-Q.strstart,Q.strstart>=Dt+(Dt-je)){for(g.arraySet(Q.window,Q.window,Dt,Dt,0),Q.match_start-=Dt,Q.strstart-=Dt,Q.block_start-=Dt,vt=Re=Q.hash_size;le=Q.head[--vt],Q.head[vt]=Dt<=le?le-Dt:0,--Re;);for(vt=Re=Dt;le=Q.prev[--vt],Q.prev[vt]=Dt<=le?le-Dt:0,--Re;);me+=Dt}if(0===Q.strm.avail_in)break;if(Xe=Q.window,Ve=Q.strstart+Q.lookahead,Rt=void 0,(ut=me)<(Rt=(tt=Q.strm).avail_in)&&(Rt=ut),Re=0===Rt?0:(tt.avail_in-=Rt,g.arraySet(Xe,tt.input,tt.next_in,Rt,Ve),1===tt.state.wrap?tt.adler=x(tt.adler,Xe,Rt,Ve):2===tt.state.wrap&&(tt.adler=A(tt.adler,Xe,Rt,Ve)),tt.next_in+=Rt,tt.total_in+=Rt,Rt),Q.lookahead+=Re,Q.lookahead+Q.insert>=pe)for(Q.ins_h=Q.window[Te=Q.strstart-Q.insert],Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Te+1])&Q.hash_mask;Q.insert&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Te+pe-1])&Q.hash_mask,Q.prev[Te&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Te,Te++,Q.insert--,!(Q.lookahead+Q.insert<pe)););}while(Q.lookahead<je&&0!==Q.strm.avail_in)}function En(Q,vt){for(var Re,le;;){if(Q.lookahead<je){if(Wt(Q),Q.lookahead<je&&vt===T)return 1;if(0===Q.lookahead)break}if(Re=0,Q.lookahead>=pe&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+pe-1])&Q.hash_mask,Re=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),0!==Re&&Q.strstart-Re<=Q.w_size-je&&(Q.match_length=Ne(Q,Re)),Q.match_length>=pe)if(le=b._tr_tally(Q,Q.strstart-Q.match_start,Q.match_length-pe),Q.lookahead-=Q.match_length,Q.match_length<=Q.max_lazy_match&&Q.lookahead>=pe){for(Q.match_length--;Q.strstart++,Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+pe-1])&Q.hash_mask,Re=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart,0!=--Q.match_length;);Q.strstart++}else Q.strstart+=Q.match_length,Q.match_length=0,Q.ins_h=Q.window[Q.strstart],Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+1])&Q.hash_mask;else le=b._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++;if(le&&(Le(Q,!1),0===Q.strm.avail_out))return 1}return Q.insert=Q.strstart<pe-1?Q.strstart:pe-1,4===vt?(Le(Q,!0),0===Q.strm.avail_out?3:4):Q.last_lit&&(Le(Q,!1),0===Q.strm.avail_out)?1:2}function rn(Q,vt){for(var Re,le,me;;){if(Q.lookahead<je){if(Wt(Q),Q.lookahead<je&&vt===T)return 1;if(0===Q.lookahead)break}if(Re=0,Q.lookahead>=pe&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+pe-1])&Q.hash_mask,Re=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),Q.prev_length=Q.match_length,Q.prev_match=Q.match_start,Q.match_length=pe-1,0!==Re&&Q.prev_length<Q.max_lazy_match&&Q.strstart-Re<=Q.w_size-je&&(Q.match_length=Ne(Q,Re),Q.match_length<=5&&(1===Q.strategy||Q.match_length===pe&&4096<Q.strstart-Q.match_start)&&(Q.match_length=pe-1)),Q.prev_length>=pe&&Q.match_length<=Q.prev_length){for(me=Q.strstart+Q.lookahead-pe,le=b._tr_tally(Q,Q.strstart-1-Q.prev_match,Q.prev_length-pe),Q.lookahead-=Q.prev_length-1,Q.prev_length-=2;++Q.strstart<=me&&(Q.ins_h=(Q.ins_h<<Q.hash_shift^Q.window[Q.strstart+pe-1])&Q.hash_mask,Re=Q.prev[Q.strstart&Q.w_mask]=Q.head[Q.ins_h],Q.head[Q.ins_h]=Q.strstart),0!=--Q.prev_length;);if(Q.match_available=0,Q.match_length=pe-1,Q.strstart++,le&&(Le(Q,!1),0===Q.strm.avail_out))return 1}else if(Q.match_available){if((le=b._tr_tally(Q,0,Q.window[Q.strstart-1]))&&Le(Q,!1),Q.strstart++,Q.lookahead--,0===Q.strm.avail_out)return 1}else Q.match_available=1,Q.strstart++,Q.lookahead--}return Q.match_available&&(le=b._tr_tally(Q,0,Q.window[Q.strstart-1]),Q.match_available=0),Q.insert=Q.strstart<pe-1?Q.strstart:pe-1,4===vt?(Le(Q,!0),0===Q.strm.avail_out?3:4):Q.last_lit&&(Le(Q,!1),0===Q.strm.avail_out)?1:2}function dn(Q,vt,Re,le,me){this.good_length=Q,this.max_lazy=vt,this.nice_length=Re,this.max_chain=le,this.func=me}function hi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=G,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(2*Z),this.dyn_dtree=new g.Buf16(2*(2*X+1)),this.bl_tree=new g.Buf16(2*(2*oe+1)),zt(this.dyn_ltree),zt(this.dyn_dtree),zt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(ae+1),this.heap=new g.Buf16(2*K+1),zt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(2*K+1),zt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ii(Q){var vt;return Q&&Q.state?(Q.total_in=Q.total_out=0,Q.data_type=$,(vt=Q.state).pending=0,vt.pending_out=0,vt.wrap<0&&(vt.wrap=-vt.wrap),vt.status=vt.wrap?de:Be,Q.adler=2===vt.wrap?0:1,vt.last_flush=T,b._tr_init(vt),P):Mt(Q,B)}function Ki(Q){var Re,vt=ii(Q);return vt===P&&((Re=Q.state).window_size=2*Re.w_size,zt(Re.head),Re.max_lazy_match=f[Re.level].max_lazy,Re.good_match=f[Re.level].good_length,Re.nice_match=f[Re.level].nice_length,Re.max_chain_length=f[Re.level].max_chain,Re.strstart=0,Re.block_start=0,Re.lookahead=0,Re.insert=0,Re.match_length=Re.prev_length=pe-1,Re.match_available=0,Re.ins_h=0),vt}function Sn(Q,vt,Re,le,me,Te){if(!Q)return B;var tt=1;if(-1===vt&&(vt=6),le<0?(tt=0,le=-le):15<le&&(tt=2,le-=16),me<1||9<me||Re!==G||le<8||15<le||vt<0||9<vt||Te<0||4<Te)return Mt(Q,B);8===le&&(le=9);var Xe=new hi;return(Q.state=Xe).strm=Q,Xe.wrap=tt,Xe.gzhead=null,Xe.w_bits=le,Xe.w_size=1<<Xe.w_bits,Xe.w_mask=Xe.w_size-1,Xe.hash_bits=me+7,Xe.hash_size=1<<Xe.hash_bits,Xe.hash_mask=Xe.hash_size-1,Xe.hash_shift=~~((Xe.hash_bits+pe-1)/pe),Xe.window=new g.Buf8(2*Xe.w_size),Xe.head=new g.Buf16(Xe.hash_size),Xe.prev=new g.Buf16(Xe.w_size),Xe.lit_bufsize=1<<me+6,Xe.pending_buf_size=4*Xe.lit_bufsize,Xe.pending_buf=new g.Buf8(Xe.pending_buf_size),Xe.d_buf=1*Xe.lit_bufsize,Xe.l_buf=3*Xe.lit_bufsize,Xe.level=vt,Xe.strategy=Te,Xe.method=Re,Ki(Q)}f=[new dn(0,0,0,0,function(Q,vt){var Re=65535;for(Re>Q.pending_buf_size-5&&(Re=Q.pending_buf_size-5);;){if(Q.lookahead<=1){if(Wt(Q),0===Q.lookahead&&vt===T)return 1;if(0===Q.lookahead)break}Q.strstart+=Q.lookahead,Q.lookahead=0;var le=Q.block_start+Re;if((0===Q.strstart||Q.strstart>=le)&&(Q.lookahead=Q.strstart-le,Q.strstart=le,Le(Q,!1),0===Q.strm.avail_out)||Q.strstart-Q.block_start>=Q.w_size-je&&(Le(Q,!1),0===Q.strm.avail_out))return 1}return Q.insert=0,4===vt?(Le(Q,!0),0===Q.strm.avail_out?3:4):(Q.strstart>Q.block_start&&Le(Q,!1),1)}),new dn(4,4,8,4,En),new dn(4,5,16,8,En),new dn(4,6,32,32,En),new dn(4,4,16,16,rn),new dn(8,16,32,32,rn),new dn(8,16,128,128,rn),new dn(8,32,128,256,rn),new dn(32,128,258,1024,rn),new dn(32,258,258,4096,rn)],h.deflateInit=function(Q,vt){return Sn(Q,vt,G,15,8,0)},h.deflateInit2=Sn,h.deflateReset=Ki,h.deflateResetKeep=ii,h.deflateSetHeader=function(Q,vt){return Q&&Q.state?2!==Q.state.wrap?B:(Q.state.gzhead=vt,P):B},h.deflate=function(Q,vt){var Re,le,me,Te;if(!Q||!Q.state||5<vt||vt<0)return Q?Mt(Q,B):B;if(le=Q.state,!Q.output||!Q.input&&0!==Q.avail_in||666===le.status&&4!==vt)return Mt(Q,0===Q.avail_out?-5:B);if(le.strm=Q,Re=le.last_flush,le.last_flush=vt,le.status===de)if(2===le.wrap)Q.adler=0,Yt(le,31),Yt(le,139),Yt(le,8),le.gzhead?(Yt(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),Yt(le,255&le.gzhead.time),Yt(le,le.gzhead.time>>8&255),Yt(le,le.gzhead.time>>16&255),Yt(le,le.gzhead.time>>24&255),Yt(le,9===le.level?2:2<=le.strategy||le.level<2?4:0),Yt(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(Yt(le,255&le.gzhead.extra.length),Yt(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(Q.adler=A(Q.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(Yt(le,0),Yt(le,0),Yt(le,0),Yt(le,0),Yt(le,0),Yt(le,9===le.level?2:2<=le.strategy||le.level<2?4:0),Yt(le,3),le.status=Be);else{var tt=G+(le.w_bits-8<<4)<<8;tt|=(2<=le.strategy||le.level<2?0:le.level<6?1:6===le.level?2:3)<<6,0!==le.strstart&&(tt|=32),tt+=31-tt%31,le.status=Be,Ct(le,tt),0!==le.strstart&&(Ct(le,Q.adler>>>16),Ct(le,65535&Q.adler)),Q.adler=1}if(69===le.status)if(le.gzhead.extra){for(me=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>me&&(Q.adler=A(Q.adler,le.pending_buf,le.pending-me,me)),Ce(Q),me=le.pending,le.pending!==le.pending_buf_size));)Yt(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>me&&(Q.adler=A(Q.adler,le.pending_buf,le.pending-me,me)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(73===le.status)if(le.gzhead.name){me=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>me&&(Q.adler=A(Q.adler,le.pending_buf,le.pending-me,me)),Ce(Q),me=le.pending,le.pending===le.pending_buf_size)){Te=1;break}Te=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,Yt(le,Te)}while(0!==Te);le.gzhead.hcrc&&le.pending>me&&(Q.adler=A(Q.adler,le.pending_buf,le.pending-me,me)),0===Te&&(le.gzindex=0,le.status=91)}else le.status=91;if(91===le.status)if(le.gzhead.comment){me=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>me&&(Q.adler=A(Q.adler,le.pending_buf,le.pending-me,me)),Ce(Q),me=le.pending,le.pending===le.pending_buf_size)){Te=1;break}Te=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,Yt(le,Te)}while(0!==Te);le.gzhead.hcrc&&le.pending>me&&(Q.adler=A(Q.adler,le.pending_buf,le.pending-me,me)),0===Te&&(le.status=103)}else le.status=103;if(103===le.status&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&Ce(Q),le.pending+2<=le.pending_buf_size&&(Yt(le,255&Q.adler),Yt(le,Q.adler>>8&255),Q.adler=0,le.status=Be)):le.status=Be),0!==le.pending){if(Ce(Q),0===Q.avail_out)return le.last_flush=-1,P}else if(0===Q.avail_in&&gt(vt)<=gt(Re)&&4!==vt)return Mt(Q,-5);if(666===le.status&&0!==Q.avail_in)return Mt(Q,-5);if(0!==Q.avail_in||0!==le.lookahead||vt!==T&&666!==le.status){var Xe=2===le.strategy?function(Ve,ut){for(var Rt;;){if(0===Ve.lookahead&&(Wt(Ve),0===Ve.lookahead)){if(ut===T)return 1;break}if(Ve.match_length=0,Rt=b._tr_tally(Ve,0,Ve.window[Ve.strstart]),Ve.lookahead--,Ve.strstart++,Rt&&(Le(Ve,!1),0===Ve.strm.avail_out))return 1}return Ve.insert=0,4===ut?(Le(Ve,!0),0===Ve.strm.avail_out?3:4):Ve.last_lit&&(Le(Ve,!1),0===Ve.strm.avail_out)?1:2}(le,vt):3===le.strategy?function(Ve,ut){for(var Rt,Dt,xt,On,Cn=Ve.window;;){if(Ve.lookahead<=ge){if(Wt(Ve),Ve.lookahead<=ge&&ut===T)return 1;if(0===Ve.lookahead)break}if(Ve.match_length=0,Ve.lookahead>=pe&&0<Ve.strstart&&(Dt=Cn[xt=Ve.strstart-1])===Cn[++xt]&&Dt===Cn[++xt]&&Dt===Cn[++xt]){On=Ve.strstart+ge;do{}while(Dt===Cn[++xt]&&Dt===Cn[++xt]&&Dt===Cn[++xt]&&Dt===Cn[++xt]&&Dt===Cn[++xt]&&Dt===Cn[++xt]&&Dt===Cn[++xt]&&Dt===Cn[++xt]&&xt<On);Ve.match_length=ge-(On-xt),Ve.match_length>Ve.lookahead&&(Ve.match_length=Ve.lookahead)}if(Ve.match_length>=pe?(Rt=b._tr_tally(Ve,1,Ve.match_length-pe),Ve.lookahead-=Ve.match_length,Ve.strstart+=Ve.match_length,Ve.match_length=0):(Rt=b._tr_tally(Ve,0,Ve.window[Ve.strstart]),Ve.lookahead--,Ve.strstart++),Rt&&(Le(Ve,!1),0===Ve.strm.avail_out))return 1}return Ve.insert=0,4===ut?(Le(Ve,!0),0===Ve.strm.avail_out?3:4):Ve.last_lit&&(Le(Ve,!1),0===Ve.strm.avail_out)?1:2}(le,vt):f[le.level].func(le,vt);if(3!==Xe&&4!==Xe||(le.status=666),1===Xe||3===Xe)return 0===Q.avail_out&&(le.last_flush=-1),P;if(2===Xe&&(1===vt?b._tr_align(le):5!==vt&&(b._tr_stored_block(le,0,0,!1),3===vt&&(zt(le.head),0===le.lookahead&&(le.strstart=0,le.block_start=0,le.insert=0))),Ce(Q),0===Q.avail_out))return le.last_flush=-1,P}return 4!==vt?P:le.wrap<=0?1:(2===le.wrap?(Yt(le,255&Q.adler),Yt(le,Q.adler>>8&255),Yt(le,Q.adler>>16&255),Yt(le,Q.adler>>24&255),Yt(le,255&Q.total_in),Yt(le,Q.total_in>>8&255),Yt(le,Q.total_in>>16&255),Yt(le,Q.total_in>>24&255)):(Ct(le,Q.adler>>>16),Ct(le,65535&Q.adler)),Ce(Q),0<le.wrap&&(le.wrap=-le.wrap),0!==le.pending?P:1)},h.deflateEnd=function(Q){var vt;return Q&&Q.state?(vt=Q.state.status)!==de&&69!==vt&&73!==vt&&91!==vt&&103!==vt&&vt!==Be&&666!==vt?Mt(Q,B):(Q.state=null,vt===Be?Mt(Q,-3):P):B},h.deflateSetDictionary=function(Q,vt){var Re,le,me,Te,tt,Xe,Ve,ut,Rt=vt.length;if(!Q||!Q.state||2===(Te=(Re=Q.state).wrap)||1===Te&&Re.status!==de||Re.lookahead)return B;for(1===Te&&(Q.adler=x(Q.adler,vt,Rt,0)),Re.wrap=0,Rt>=Re.w_size&&(0===Te&&(zt(Re.head),Re.strstart=0,Re.block_start=0,Re.insert=0),ut=new g.Buf8(Re.w_size),g.arraySet(ut,vt,Rt-Re.w_size,Re.w_size,0),vt=ut,Rt=Re.w_size),tt=Q.avail_in,Xe=Q.next_in,Ve=Q.input,Q.avail_in=Rt,Q.next_in=0,Q.input=vt,Wt(Re);Re.lookahead>=pe;){for(le=Re.strstart,me=Re.lookahead-(pe-1);Re.ins_h=(Re.ins_h<<Re.hash_shift^Re.window[le+pe-1])&Re.hash_mask,Re.prev[le&Re.w_mask]=Re.head[Re.ins_h],Re.head[Re.ins_h]=le,le++,--me;);Re.strstart=le,Re.lookahead=pe-1,Wt(Re)}return Re.strstart+=Re.lookahead,Re.block_start=Re.strstart,Re.insert=Re.lookahead,Re.lookahead=0,Re.match_length=Re.prev_length=pe-1,Re.match_available=0,Q.next_in=Xe,Q.input=Ve,Q.avail_in=tt,Re.wrap=Te,P},h.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(u,l,h){"use strict";l.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(u,l,h){"use strict";l.exports=function(f,g){var b,x,A,k,T,M,P,B,U,N,$,G,W,K,X,oe,Z,ae,pe,ge,je,de,Be,ee,Ae;ee=f.input,A=(x=f.next_in)+(f.avail_in-5),Ae=f.output,T=(k=f.next_out)-(g-f.avail_out),M=k+(f.avail_out-257),P=(b=f.state).dmax,B=b.wsize,U=b.whave,N=b.wnext,$=b.window,G=b.hold,W=b.bits,K=b.lencode,X=b.distcode,oe=(1<<b.lenbits)-1,Z=(1<<b.distbits)-1;e:do{W<15&&(G+=ee[x++]<<W,G+=ee[x++]<<(W+=8),W+=8),ae=K[G&oe];t:for(;;){if(G>>>=pe=ae>>>24,W-=pe,0==(pe=ae>>>16&255))Ae[k++]=65535&ae;else{if(!(16&pe)){if(!(64&pe)){ae=K[(65535&ae)+(G&(1<<pe)-1)];continue t}if(32&pe){b.mode=12;break e}f.msg="invalid literal/length code",b.mode=30;break e}ge=65535&ae,(pe&=15)&&(W<pe&&(G+=ee[x++]<<W,W+=8),ge+=G&(1<<pe)-1,G>>>=pe,W-=pe),W<15&&(G+=ee[x++]<<W,G+=ee[x++]<<(W+=8),W+=8),ae=X[G&Z];n:for(;;){if(G>>>=pe=ae>>>24,W-=pe,!(16&(pe=ae>>>16&255))){if(!(64&pe)){ae=X[(65535&ae)+(G&(1<<pe)-1)];continue n}f.msg="invalid distance code",b.mode=30;break e}if(je=65535&ae,W<(pe&=15)&&(G+=ee[x++]<<W,(W+=8)<pe&&(G+=ee[x++]<<W,W+=8)),P<(je+=G&(1<<pe)-1)){f.msg="invalid distance too far back",b.mode=30;break e}if(G>>>=pe,W-=pe,(pe=k-T)<je){if(U<(pe=je-pe)&&b.sane){f.msg="invalid distance too far back",b.mode=30;break e}if(Be=$,(de=0)===N){if(de+=B-pe,pe<ge){for(ge-=pe;Ae[k++]=$[de++],--pe;);de=k-je,Be=Ae}}else if(N<pe){if(de+=B+N-pe,(pe-=N)<ge){for(ge-=pe;Ae[k++]=$[de++],--pe;);if(de=0,N<ge){for(ge-=pe=N;Ae[k++]=$[de++],--pe;);de=k-je,Be=Ae}}}else if(de+=N-pe,pe<ge){for(ge-=pe;Ae[k++]=$[de++],--pe;);de=k-je,Be=Ae}for(;2<ge;)Ae[k++]=Be[de++],Ae[k++]=Be[de++],Ae[k++]=Be[de++],ge-=3;ge&&(Ae[k++]=Be[de++],1<ge&&(Ae[k++]=Be[de++]))}else{for(de=k-je;Ae[k++]=Ae[de++],Ae[k++]=Ae[de++],Ae[k++]=Ae[de++],2<(ge-=3););ge&&(Ae[k++]=Ae[de++],1<ge&&(Ae[k++]=Ae[de++]))}break}}break}}while(x<A&&k<M);x-=ge=W>>3,G&=(1<<(W-=ge<<3))-1,f.next_in=x,f.next_out=k,f.avail_in=x<A?A-x+5:5-(x-A),f.avail_out=k<M?M-k+257:257-(k-M),b.hold=G,b.bits=W}},{}],49:[function(u,l,h){"use strict";var f=u("../utils/common"),g=u("./adler32"),b=u("./crc32"),x=u("./inffast"),A=u("./inftrees"),M=0,P=-2,B=1,U=852,N=592;function $(de){return(de>>>24&255)+(de>>>8&65280)+((65280&de)<<8)+((255&de)<<24)}function G(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function W(de){var Be;return de&&de.state?(de.total_in=de.total_out=(Be=de.state).total=0,de.msg="",Be.wrap&&(de.adler=1&Be.wrap),Be.mode=B,Be.last=0,Be.havedict=0,Be.dmax=32768,Be.head=null,Be.hold=0,Be.bits=0,Be.lencode=Be.lendyn=new f.Buf32(U),Be.distcode=Be.distdyn=new f.Buf32(N),Be.sane=1,Be.back=-1,M):P}function K(de){var Be;return de&&de.state?((Be=de.state).wsize=0,Be.whave=0,Be.wnext=0,W(de)):P}function X(de,Be){var ee,Ae;return de&&de.state?(Ae=de.state,Be<0?(ee=0,Be=-Be):(ee=1+(Be>>4),Be<48&&(Be&=15)),Be&&(Be<8||15<Be)?P:(null!==Ae.window&&Ae.wbits!==Be&&(Ae.window=null),Ae.wrap=ee,Ae.wbits=Be,K(de))):P}function oe(de,Be){var ee,Ae;return de?(Ae=new G,(de.state=Ae).window=null,(ee=X(de,Be))!==M&&(de.state=null),ee):P}var Z,ae,pe=!0;function ge(de){if(pe){var Be;for(Z=new f.Buf32(512),ae=new f.Buf32(32),Be=0;Be<144;)de.lens[Be++]=8;for(;Be<256;)de.lens[Be++]=9;for(;Be<280;)de.lens[Be++]=7;for(;Be<288;)de.lens[Be++]=8;for(A(1,de.lens,0,288,Z,0,de.work,{bits:9}),Be=0;Be<32;)de.lens[Be++]=5;A(2,de.lens,0,32,ae,0,de.work,{bits:5}),pe=!1}de.lencode=Z,de.lenbits=9,de.distcode=ae,de.distbits=5}function je(de,Be,ee,Ae){var Ue,qe=de.state;return null===qe.window&&(qe.wsize=1<<qe.wbits,qe.wnext=0,qe.whave=0,qe.window=new f.Buf8(qe.wsize)),Ae>=qe.wsize?(f.arraySet(qe.window,Be,ee-qe.wsize,qe.wsize,0),qe.wnext=0,qe.whave=qe.wsize):(Ae<(Ue=qe.wsize-qe.wnext)&&(Ue=Ae),f.arraySet(qe.window,Be,ee-Ae,Ue,qe.wnext),(Ae-=Ue)?(f.arraySet(qe.window,Be,ee-Ae,Ae,0),qe.wnext=Ae,qe.whave=qe.wsize):(qe.wnext+=Ue,qe.wnext===qe.wsize&&(qe.wnext=0),qe.whave<qe.wsize&&(qe.whave+=Ue))),0}h.inflateReset=K,h.inflateReset2=X,h.inflateResetKeep=W,h.inflateInit=function(de){return oe(de,15)},h.inflateInit2=oe,h.inflate=function(de,Be){var ee,Ae,Ue,qe,Mt,gt,zt,Ce,Le,Yt,Ct,Ne,Wt,En,rn,dn,hi,ii,Ki,Sn,Q,vt,Re,le,me=0,Te=new f.Buf8(4),tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!de||!de.state||!de.output||!de.input&&0!==de.avail_in)return P;12===(ee=de.state).mode&&(ee.mode=13),Mt=de.next_out,Ue=de.output,qe=de.next_in,Ae=de.input,Ce=ee.hold,Le=ee.bits,Yt=gt=de.avail_in,Ct=zt=de.avail_out,vt=M;e:for(;;)switch(ee.mode){case B:if(0===ee.wrap){ee.mode=13;break}for(;Le<16;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(2&ee.wrap&&35615===Ce){Te[ee.check=0]=255&Ce,Te[1]=Ce>>>8&255,ee.check=b(ee.check,Te,2,0),Le=Ce=0,ee.mode=2;break}if(ee.flags=0,ee.head&&(ee.head.done=!1),!(1&ee.wrap)||(((255&Ce)<<8)+(Ce>>8))%31){de.msg="incorrect header check",ee.mode=30;break}if(8!=(15&Ce)){de.msg="unknown compression method",ee.mode=30;break}if(Le-=4,Q=8+(15&(Ce>>>=4)),0===ee.wbits)ee.wbits=Q;else if(Q>ee.wbits){de.msg="invalid window size",ee.mode=30;break}ee.dmax=1<<Q,de.adler=ee.check=1,ee.mode=512&Ce?10:12,Le=Ce=0;break;case 2:for(;Le<16;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(ee.flags=Ce,8!=(255&ee.flags)){de.msg="unknown compression method",ee.mode=30;break}if(57344&ee.flags){de.msg="unknown header flags set",ee.mode=30;break}ee.head&&(ee.head.text=Ce>>8&1),512&ee.flags&&(Te[0]=255&Ce,Te[1]=Ce>>>8&255,ee.check=b(ee.check,Te,2,0)),Le=Ce=0,ee.mode=3;case 3:for(;Le<32;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}ee.head&&(ee.head.time=Ce),512&ee.flags&&(Te[0]=255&Ce,Te[1]=Ce>>>8&255,Te[2]=Ce>>>16&255,Te[3]=Ce>>>24&255,ee.check=b(ee.check,Te,4,0)),Le=Ce=0,ee.mode=4;case 4:for(;Le<16;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}ee.head&&(ee.head.xflags=255&Ce,ee.head.os=Ce>>8),512&ee.flags&&(Te[0]=255&Ce,Te[1]=Ce>>>8&255,ee.check=b(ee.check,Te,2,0)),Le=Ce=0,ee.mode=5;case 5:if(1024&ee.flags){for(;Le<16;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}ee.length=Ce,ee.head&&(ee.head.extra_len=Ce),512&ee.flags&&(Te[0]=255&Ce,Te[1]=Ce>>>8&255,ee.check=b(ee.check,Te,2,0)),Le=Ce=0}else ee.head&&(ee.head.extra=null);ee.mode=6;case 6:if(1024&ee.flags&&(gt<(Ne=ee.length)&&(Ne=gt),Ne&&(ee.head&&(Q=ee.head.extra_len-ee.length,ee.head.extra||(ee.head.extra=new Array(ee.head.extra_len)),f.arraySet(ee.head.extra,Ae,qe,Ne,Q)),512&ee.flags&&(ee.check=b(ee.check,Ae,Ne,qe)),gt-=Ne,qe+=Ne,ee.length-=Ne),ee.length))break e;ee.length=0,ee.mode=7;case 7:if(2048&ee.flags){if(0===gt)break e;for(Ne=0;Q=Ae[qe+Ne++],ee.head&&Q&&ee.length<65536&&(ee.head.name+=String.fromCharCode(Q)),Q&&Ne<gt;);if(512&ee.flags&&(ee.check=b(ee.check,Ae,Ne,qe)),gt-=Ne,qe+=Ne,Q)break e}else ee.head&&(ee.head.name=null);ee.length=0,ee.mode=8;case 8:if(4096&ee.flags){if(0===gt)break e;for(Ne=0;Q=Ae[qe+Ne++],ee.head&&Q&&ee.length<65536&&(ee.head.comment+=String.fromCharCode(Q)),Q&&Ne<gt;);if(512&ee.flags&&(ee.check=b(ee.check,Ae,Ne,qe)),gt-=Ne,qe+=Ne,Q)break e}else ee.head&&(ee.head.comment=null);ee.mode=9;case 9:if(512&ee.flags){for(;Le<16;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(Ce!==(65535&ee.check)){de.msg="header crc mismatch",ee.mode=30;break}Le=Ce=0}ee.head&&(ee.head.hcrc=ee.flags>>9&1,ee.head.done=!0),de.adler=ee.check=0,ee.mode=12;break;case 10:for(;Le<32;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}de.adler=ee.check=$(Ce),Le=Ce=0,ee.mode=11;case 11:if(0===ee.havedict)return de.next_out=Mt,de.avail_out=zt,de.next_in=qe,de.avail_in=gt,ee.hold=Ce,ee.bits=Le,2;de.adler=ee.check=1,ee.mode=12;case 12:if(5===Be||6===Be)break e;case 13:if(ee.last){Ce>>>=7&Le,Le-=7&Le,ee.mode=27;break}for(;Le<3;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}switch(ee.last=1&Ce,Le-=1,3&(Ce>>>=1)){case 0:ee.mode=14;break;case 1:if(ge(ee),ee.mode=20,6!==Be)break;Ce>>>=2,Le-=2;break e;case 2:ee.mode=17;break;case 3:de.msg="invalid block type",ee.mode=30}Ce>>>=2,Le-=2;break;case 14:for(Ce>>>=7&Le,Le-=7&Le;Le<32;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if((65535&Ce)!=(Ce>>>16^65535)){de.msg="invalid stored block lengths",ee.mode=30;break}if(ee.length=65535&Ce,Le=Ce=0,ee.mode=15,6===Be)break e;case 15:ee.mode=16;case 16:if(Ne=ee.length){if(gt<Ne&&(Ne=gt),zt<Ne&&(Ne=zt),0===Ne)break e;f.arraySet(Ue,Ae,qe,Ne,Mt),gt-=Ne,qe+=Ne,zt-=Ne,Mt+=Ne,ee.length-=Ne;break}ee.mode=12;break;case 17:for(;Le<14;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(ee.nlen=257+(31&Ce),Le-=5,ee.ndist=1+(31&(Ce>>>=5)),Le-=5,ee.ncode=4+(15&(Ce>>>=5)),Ce>>>=4,Le-=4,286<ee.nlen||30<ee.ndist){de.msg="too many length or distance symbols",ee.mode=30;break}ee.have=0,ee.mode=18;case 18:for(;ee.have<ee.ncode;){for(;Le<3;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}ee.lens[tt[ee.have++]]=7&Ce,Ce>>>=3,Le-=3}for(;ee.have<19;)ee.lens[tt[ee.have++]]=0;if(ee.lencode=ee.lendyn,ee.lenbits=7,vt=A(0,ee.lens,0,19,ee.lencode,0,ee.work,Re={bits:ee.lenbits}),ee.lenbits=Re.bits,vt){de.msg="invalid code lengths set",ee.mode=30;break}ee.have=0,ee.mode=19;case 19:for(;ee.have<ee.nlen+ee.ndist;){for(;dn=(me=ee.lencode[Ce&(1<<ee.lenbits)-1])>>>16&255,hi=65535&me,!((rn=me>>>24)<=Le);){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(hi<16)Ce>>>=rn,Le-=rn,ee.lens[ee.have++]=hi;else{if(16===hi){for(le=rn+2;Le<le;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(Ce>>>=rn,Le-=rn,0===ee.have){de.msg="invalid bit length repeat",ee.mode=30;break}Q=ee.lens[ee.have-1],Ne=3+(3&Ce),Ce>>>=2,Le-=2}else if(17===hi){for(le=rn+3;Le<le;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}Le-=rn,Q=0,Ne=3+(7&(Ce>>>=rn)),Ce>>>=3,Le-=3}else{for(le=rn+7;Le<le;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}Le-=rn,Q=0,Ne=11+(127&(Ce>>>=rn)),Ce>>>=7,Le-=7}if(ee.have+Ne>ee.nlen+ee.ndist){de.msg="invalid bit length repeat",ee.mode=30;break}for(;Ne--;)ee.lens[ee.have++]=Q}}if(30===ee.mode)break;if(0===ee.lens[256]){de.msg="invalid code -- missing end-of-block",ee.mode=30;break}if(ee.lenbits=9,vt=A(1,ee.lens,0,ee.nlen,ee.lencode,0,ee.work,Re={bits:ee.lenbits}),ee.lenbits=Re.bits,vt){de.msg="invalid literal/lengths set",ee.mode=30;break}if(ee.distbits=6,ee.distcode=ee.distdyn,vt=A(2,ee.lens,ee.nlen,ee.ndist,ee.distcode,0,ee.work,Re={bits:ee.distbits}),ee.distbits=Re.bits,vt){de.msg="invalid distances set",ee.mode=30;break}if(ee.mode=20,6===Be)break e;case 20:ee.mode=21;case 21:if(6<=gt&&258<=zt){de.next_out=Mt,de.avail_out=zt,de.next_in=qe,de.avail_in=gt,ee.hold=Ce,ee.bits=Le,x(de,Ct),Mt=de.next_out,Ue=de.output,zt=de.avail_out,qe=de.next_in,Ae=de.input,gt=de.avail_in,Ce=ee.hold,Le=ee.bits,12===ee.mode&&(ee.back=-1);break}for(ee.back=0;dn=(me=ee.lencode[Ce&(1<<ee.lenbits)-1])>>>16&255,hi=65535&me,!((rn=me>>>24)<=Le);){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(dn&&!(240&dn)){for(ii=rn,Ki=dn,Sn=hi;dn=(me=ee.lencode[Sn+((Ce&(1<<ii+Ki)-1)>>ii)])>>>16&255,hi=65535&me,!(ii+(rn=me>>>24)<=Le);){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}Ce>>>=ii,Le-=ii,ee.back+=ii}if(Ce>>>=rn,Le-=rn,ee.back+=rn,ee.length=hi,0===dn){ee.mode=26;break}if(32&dn){ee.back=-1,ee.mode=12;break}if(64&dn){de.msg="invalid literal/length code",ee.mode=30;break}ee.extra=15&dn,ee.mode=22;case 22:if(ee.extra){for(le=ee.extra;Le<le;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}ee.length+=Ce&(1<<ee.extra)-1,Ce>>>=ee.extra,Le-=ee.extra,ee.back+=ee.extra}ee.was=ee.length,ee.mode=23;case 23:for(;dn=(me=ee.distcode[Ce&(1<<ee.distbits)-1])>>>16&255,hi=65535&me,!((rn=me>>>24)<=Le);){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(!(240&dn)){for(ii=rn,Ki=dn,Sn=hi;dn=(me=ee.distcode[Sn+((Ce&(1<<ii+Ki)-1)>>ii)])>>>16&255,hi=65535&me,!(ii+(rn=me>>>24)<=Le);){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}Ce>>>=ii,Le-=ii,ee.back+=ii}if(Ce>>>=rn,Le-=rn,ee.back+=rn,64&dn){de.msg="invalid distance code",ee.mode=30;break}ee.offset=hi,ee.extra=15&dn,ee.mode=24;case 24:if(ee.extra){for(le=ee.extra;Le<le;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}ee.offset+=Ce&(1<<ee.extra)-1,Ce>>>=ee.extra,Le-=ee.extra,ee.back+=ee.extra}if(ee.offset>ee.dmax){de.msg="invalid distance too far back",ee.mode=30;break}ee.mode=25;case 25:if(0===zt)break e;if(ee.offset>(Ne=Ct-zt)){if((Ne=ee.offset-Ne)>ee.whave&&ee.sane){de.msg="invalid distance too far back",ee.mode=30;break}Wt=Ne>ee.wnext?ee.wsize-(Ne-=ee.wnext):ee.wnext-Ne,Ne>ee.length&&(Ne=ee.length),En=ee.window}else En=Ue,Wt=Mt-ee.offset,Ne=ee.length;for(zt<Ne&&(Ne=zt),zt-=Ne,ee.length-=Ne;Ue[Mt++]=En[Wt++],--Ne;);0===ee.length&&(ee.mode=21);break;case 26:if(0===zt)break e;Ue[Mt++]=ee.length,zt--,ee.mode=21;break;case 27:if(ee.wrap){for(;Le<32;){if(0===gt)break e;gt--,Ce|=Ae[qe++]<<Le,Le+=8}if(de.total_out+=Ct-=zt,ee.total+=Ct,Ct&&(de.adler=ee.check=ee.flags?b(ee.check,Ue,Ct,Mt-Ct):g(ee.check,Ue,Ct,Mt-Ct)),Ct=zt,(ee.flags?Ce:$(Ce))!==ee.check){de.msg="incorrect data check",ee.mode=30;break}Le=Ce=0}ee.mode=28;case 28:if(ee.wrap&&ee.flags){for(;Le<32;){if(0===gt)break e;gt--,Ce+=Ae[qe++]<<Le,Le+=8}if(Ce!==(4294967295&ee.total)){de.msg="incorrect length check",ee.mode=30;break}Le=Ce=0}ee.mode=29;case 29:vt=1;break e;case 30:vt=-3;break e;case 31:return-4;default:return P}return de.next_out=Mt,de.avail_out=zt,de.next_in=qe,de.avail_in=gt,ee.hold=Ce,ee.bits=Le,(ee.wsize||Ct!==de.avail_out&&ee.mode<30&&(ee.mode<27||4!==Be))&&je(de,de.output,de.next_out,Ct-de.avail_out)?(ee.mode=31,-4):(Ct-=de.avail_out,de.total_in+=Yt-=de.avail_in,de.total_out+=Ct,ee.total+=Ct,ee.wrap&&Ct&&(de.adler=ee.check=ee.flags?b(ee.check,Ue,Ct,de.next_out-Ct):g(ee.check,Ue,Ct,de.next_out-Ct)),de.data_type=ee.bits+(ee.last?64:0)+(12===ee.mode?128:0)+(20===ee.mode||15===ee.mode?256:0),(0==Yt&&0===Ct||4===Be)&&vt===M&&(vt=-5),vt)},h.inflateEnd=function(de){if(!de||!de.state)return P;var Be=de.state;return Be.window&&(Be.window=null),de.state=null,M},h.inflateGetHeader=function(de,Be){var ee;return de&&de.state&&2&(ee=de.state).wrap?((ee.head=Be).done=!1,M):P},h.inflateSetDictionary=function(de,Be){var ee,Ae=Be.length;return de&&de.state?0!==(ee=de.state).wrap&&11!==ee.mode?P:11===ee.mode&&g(1,Be,Ae,0)!==ee.check?-3:je(de,Be,Ae,Ae)?(ee.mode=31,-4):(ee.havedict=1,M):P},h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(u,l,h){"use strict";var f=u("../utils/common"),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],b=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],A=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(k,T,M,P,B,U,N,$){var G,W,K,X,oe,Z,ae,pe,ge,je=$.bits,de=0,Be=0,ee=0,Ae=0,Ue=0,qe=0,Mt=0,gt=0,zt=0,Ce=0,Le=null,Yt=0,Ct=new f.Buf16(16),Ne=new f.Buf16(16),Wt=null,En=0;for(de=0;de<=15;de++)Ct[de]=0;for(Be=0;Be<P;Be++)Ct[T[M+Be]]++;for(Ue=je,Ae=15;1<=Ae&&0===Ct[Ae];Ae--);if(Ae<Ue&&(Ue=Ae),0===Ae)return B[U++]=20971520,B[U++]=20971520,$.bits=1,0;for(ee=1;ee<Ae&&0===Ct[ee];ee++);for(Ue<ee&&(Ue=ee),de=gt=1;de<=15;de++)if(gt<<=1,(gt-=Ct[de])<0)return-1;if(0<gt&&(0===k||1!==Ae))return-1;for(Ne[1]=0,de=1;de<15;de++)Ne[de+1]=Ne[de]+Ct[de];for(Be=0;Be<P;Be++)0!==T[M+Be]&&(N[Ne[T[M+Be]]++]=Be);if(Z=0===k?(Le=Wt=N,19):1===k?(Le=g,Yt-=257,Wt=b,En-=257,256):(Le=x,Wt=A,-1),de=ee,oe=U,Mt=Be=Ce=0,K=-1,X=(zt=1<<(qe=Ue))-1,1===k&&852<zt||2===k&&592<zt)return 1;for(;;){for(ae=de-Mt,ge=N[Be]<Z?(pe=0,N[Be]):N[Be]>Z?(pe=Wt[En+N[Be]],Le[Yt+N[Be]]):(pe=96,0),G=1<<de-Mt,ee=W=1<<qe;B[oe+(Ce>>Mt)+(W-=G)]=ae<<24|pe<<16|ge,0!==W;);for(G=1<<de-1;Ce&G;)G>>=1;if(0!==G?(Ce&=G-1,Ce+=G):Ce=0,Be++,0==--Ct[de]){if(de===Ae)break;de=T[M+N[Be]]}if(Ue<de&&(Ce&X)!==K){for(0===Mt&&(Mt=Ue),oe+=ee,gt=1<<(qe=de-Mt);qe+Mt<Ae&&!((gt-=Ct[qe+Mt])<=0);)qe++,gt<<=1;if(zt+=1<<qe,1===k&&852<zt||2===k&&592<zt)return 1;B[K=Ce&X]=Ue<<24|qe<<16|oe-U}}return 0!==Ce&&(B[oe+Ce]=4194304|de-Mt<<24),$.bits=Ue,0}},{"../utils/common":41}],51:[function(u,l,h){"use strict";l.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(u,l,h){"use strict";var f=u("../utils/common");function x(me){for(var Te=me.length;0<=--Te;)me[Te]=0}var T=256,M=286,P=30,N=15,$=16,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ae=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ge=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],je=new Array(576);x(je);var de=new Array(60);x(de);var Be=new Array(512);x(Be);var ee=new Array(256);x(ee);var Ae=new Array(29);x(Ae);var Ue,qe,Mt,gt=new Array(P);function zt(me,Te,tt,Xe,Ve){this.static_tree=me,this.extra_bits=Te,this.extra_base=tt,this.elems=Xe,this.max_length=Ve,this.has_stree=me&&me.length}function Ce(me,Te){this.dyn_tree=me,this.max_code=0,this.stat_desc=Te}function Le(me){return me<256?Be[me]:Be[256+(me>>>7)]}function Yt(me,Te){me.pending_buf[me.pending++]=255&Te,me.pending_buf[me.pending++]=Te>>>8&255}function Ct(me,Te,tt){me.bi_valid>$-tt?(me.bi_buf|=Te<<me.bi_valid&65535,Yt(me,me.bi_buf),me.bi_buf=Te>>$-me.bi_valid,me.bi_valid+=tt-$):(me.bi_buf|=Te<<me.bi_valid&65535,me.bi_valid+=tt)}function Ne(me,Te,tt){Ct(me,tt[2*Te],tt[2*Te+1])}function Wt(me,Te){for(var tt=0;tt|=1&me,me>>>=1,tt<<=1,0<--Te;);return tt>>>1}function En(me,Te,tt){var Xe,Ve,ut=new Array(N+1),Rt=0;for(Xe=1;Xe<=N;Xe++)ut[Xe]=Rt=Rt+tt[Xe-1]<<1;for(Ve=0;Ve<=Te;Ve++){var Dt=me[2*Ve+1];0!==Dt&&(me[2*Ve]=Wt(ut[Dt]++,Dt))}}function rn(me){var Te;for(Te=0;Te<M;Te++)me.dyn_ltree[2*Te]=0;for(Te=0;Te<P;Te++)me.dyn_dtree[2*Te]=0;for(Te=0;Te<19;Te++)me.bl_tree[2*Te]=0;me.dyn_ltree[512]=1,me.opt_len=me.static_len=0,me.last_lit=me.matches=0}function dn(me){8<me.bi_valid?Yt(me,me.bi_buf):0<me.bi_valid&&(me.pending_buf[me.pending++]=me.bi_buf),me.bi_buf=0,me.bi_valid=0}function hi(me,Te,tt,Xe){var Ve=2*Te,ut=2*tt;return me[Ve]<me[ut]||me[Ve]===me[ut]&&Xe[Te]<=Xe[tt]}function ii(me,Te,tt){for(var Xe=me.heap[tt],Ve=tt<<1;Ve<=me.heap_len&&(Ve<me.heap_len&&hi(Te,me.heap[Ve+1],me.heap[Ve],me.depth)&&Ve++,!hi(Te,Xe,me.heap[Ve],me.depth));)me.heap[tt]=me.heap[Ve],tt=Ve,Ve<<=1;me.heap[tt]=Xe}function Ki(me,Te,tt){var Xe,Ve,ut,Rt,Dt=0;if(0!==me.last_lit)for(;Xe=me.pending_buf[me.d_buf+2*Dt]<<8|me.pending_buf[me.d_buf+2*Dt+1],Ve=me.pending_buf[me.l_buf+Dt],Dt++,0===Xe?Ne(me,Ve,Te):(Ne(me,(ut=ee[Ve])+T+1,Te),0!==(Rt=Z[ut])&&Ct(me,Ve-=Ae[ut],Rt),Ne(me,ut=Le(--Xe),tt),0!==(Rt=ae[ut])&&Ct(me,Xe-=gt[ut],Rt)),Dt<me.last_lit;);Ne(me,256,Te)}function Sn(me,Te){var tt,Xe,Ve,ut=Te.dyn_tree,Rt=Te.stat_desc.static_tree,Dt=Te.stat_desc.has_stree,xt=Te.stat_desc.elems,On=-1;for(me.heap_len=0,me.heap_max=573,tt=0;tt<xt;tt++)0!==ut[2*tt]?(me.heap[++me.heap_len]=On=tt,me.depth[tt]=0):ut[2*tt+1]=0;for(;me.heap_len<2;)ut[2*(Ve=me.heap[++me.heap_len]=On<2?++On:0)]=1,me.depth[Ve]=0,me.opt_len--,Dt&&(me.static_len-=Rt[2*Ve+1]);for(Te.max_code=On,tt=me.heap_len>>1;1<=tt;tt--)ii(me,ut,tt);for(Ve=xt;tt=me.heap[1],me.heap[1]=me.heap[me.heap_len--],ii(me,ut,1),Xe=me.heap[1],me.heap[--me.heap_max]=tt,me.heap[--me.heap_max]=Xe,ut[2*Ve]=ut[2*tt]+ut[2*Xe],me.depth[Ve]=(me.depth[tt]>=me.depth[Xe]?me.depth[tt]:me.depth[Xe])+1,ut[2*tt+1]=ut[2*Xe+1]=Ve,me.heap[1]=Ve++,ii(me,ut,1),2<=me.heap_len;);me.heap[--me.heap_max]=me.heap[1],function(Cn,Vi){var Yr,we,dt,Tt,Bt,At,ht=Vi.dyn_tree,Ot=Vi.max_code,Un=Vi.stat_desc.static_tree,ri=Vi.stat_desc.has_stree,bn=Vi.stat_desc.extra_bits,Li=Vi.stat_desc.extra_base,zn=Vi.stat_desc.max_length,ji=0;for(Tt=0;Tt<=N;Tt++)Cn.bl_count[Tt]=0;for(ht[2*Cn.heap[Cn.heap_max]+1]=0,Yr=Cn.heap_max+1;Yr<573;Yr++)zn<(Tt=ht[2*ht[2*(we=Cn.heap[Yr])+1]+1]+1)&&(Tt=zn,ji++),ht[2*we+1]=Tt,Ot<we||(Cn.bl_count[Tt]++,Bt=0,Li<=we&&(Bt=bn[we-Li]),Cn.opt_len+=(At=ht[2*we])*(Tt+Bt),ri&&(Cn.static_len+=At*(Un[2*we+1]+Bt)));if(0!==ji){do{for(Tt=zn-1;0===Cn.bl_count[Tt];)Tt--;Cn.bl_count[Tt]--,Cn.bl_count[Tt+1]+=2,Cn.bl_count[zn]--,ji-=2}while(0<ji);for(Tt=zn;0!==Tt;Tt--)for(we=Cn.bl_count[Tt];0!==we;)Ot<(dt=Cn.heap[--Yr])||(ht[2*dt+1]!==Tt&&(Cn.opt_len+=(Tt-ht[2*dt+1])*ht[2*dt],ht[2*dt+1]=Tt),we--)}}(me,Te),En(ut,On,me.bl_count)}function Q(me,Te,tt){var Xe,Ve,ut=-1,Rt=Te[1],Dt=0,xt=7,On=4;for(0===Rt&&(xt=138,On=3),Te[2*(tt+1)+1]=65535,Xe=0;Xe<=tt;Xe++)Ve=Rt,Rt=Te[2*(Xe+1)+1],++Dt<xt&&Ve===Rt||(Dt<On?me.bl_tree[2*Ve]+=Dt:0!==Ve?(Ve!==ut&&me.bl_tree[2*Ve]++,me.bl_tree[32]++):Dt<=10?me.bl_tree[34]++:me.bl_tree[36]++,ut=Ve,On=(Dt=0)===Rt?(xt=138,3):Ve===Rt?(xt=6,3):(xt=7,4))}function vt(me,Te,tt){var Xe,Ve,ut=-1,Rt=Te[1],Dt=0,xt=7,On=4;for(0===Rt&&(xt=138,On=3),Xe=0;Xe<=tt;Xe++)if(Ve=Rt,Rt=Te[2*(Xe+1)+1],!(++Dt<xt&&Ve===Rt)){if(Dt<On)for(;Ne(me,Ve,me.bl_tree),0!=--Dt;);else 0!==Ve?(Ve!==ut&&(Ne(me,Ve,me.bl_tree),Dt--),Ne(me,16,me.bl_tree),Ct(me,Dt-3,2)):Dt<=10?(Ne(me,17,me.bl_tree),Ct(me,Dt-3,3)):(Ne(me,18,me.bl_tree),Ct(me,Dt-11,7));ut=Ve,On=(Dt=0)===Rt?(xt=138,3):Ve===Rt?(xt=6,3):(xt=7,4)}}x(gt);var Re=!1;function le(me,Te,tt,Xe){var Ve,ut,Rt;Ct(me,0+(Xe?1:0),3),ut=Te,Rt=tt,dn(Ve=me),Yt(Ve,Rt),Yt(Ve,~Rt),f.arraySet(Ve.pending_buf,Ve.window,ut,Rt,Ve.pending),Ve.pending+=Rt}h._tr_init=function(me){Re||(function(){var Te,tt,Xe,Ve,ut,Rt=new Array(N+1);for(Ve=Xe=0;Ve<28;Ve++)for(Ae[Ve]=Xe,Te=0;Te<1<<Z[Ve];Te++)ee[Xe++]=Ve;for(ee[Xe-1]=Ve,Ve=ut=0;Ve<16;Ve++)for(gt[Ve]=ut,Te=0;Te<1<<ae[Ve];Te++)Be[ut++]=Ve;for(ut>>=7;Ve<P;Ve++)for(gt[Ve]=ut<<7,Te=0;Te<1<<ae[Ve]-7;Te++)Be[256+ut++]=Ve;for(tt=0;tt<=N;tt++)Rt[tt]=0;for(Te=0;Te<=143;)je[2*Te+1]=8,Te++,Rt[8]++;for(;Te<=255;)je[2*Te+1]=9,Te++,Rt[9]++;for(;Te<=279;)je[2*Te+1]=7,Te++,Rt[7]++;for(;Te<=287;)je[2*Te+1]=8,Te++,Rt[8]++;for(En(je,287,Rt),Te=0;Te<P;Te++)de[2*Te+1]=5,de[2*Te]=Wt(Te,5);Ue=new zt(je,Z,257,M,N),qe=new zt(de,ae,0,P,N),Mt=new zt(new Array(0),pe,0,19,7)}(),Re=!0),me.l_desc=new Ce(me.dyn_ltree,Ue),me.d_desc=new Ce(me.dyn_dtree,qe),me.bl_desc=new Ce(me.bl_tree,Mt),me.bi_buf=0,me.bi_valid=0,rn(me)},h._tr_stored_block=le,h._tr_flush_block=function(me,Te,tt,Xe){var Ve,ut,Rt=0;0<me.level?(2===me.strm.data_type&&(me.strm.data_type=function(Dt){var xt,On=4093624447;for(xt=0;xt<=31;xt++,On>>>=1)if(1&On&&0!==Dt.dyn_ltree[2*xt])return 0;if(0!==Dt.dyn_ltree[18]||0!==Dt.dyn_ltree[20]||0!==Dt.dyn_ltree[26])return 1;for(xt=32;xt<T;xt++)if(0!==Dt.dyn_ltree[2*xt])return 1;return 0}(me)),Sn(me,me.l_desc),Sn(me,me.d_desc),Rt=function(Dt){var xt;for(Q(Dt,Dt.dyn_ltree,Dt.l_desc.max_code),Q(Dt,Dt.dyn_dtree,Dt.d_desc.max_code),Sn(Dt,Dt.bl_desc),xt=18;3<=xt&&0===Dt.bl_tree[2*ge[xt]+1];xt--);return Dt.opt_len+=3*(xt+1)+5+5+4,xt}(me),(ut=me.static_len+3+7>>>3)<=(Ve=me.opt_len+3+7>>>3)&&(Ve=ut)):Ve=ut=tt+5,tt+4<=Ve&&-1!==Te?le(me,Te,tt,Xe):4===me.strategy||ut===Ve?(Ct(me,2+(Xe?1:0),3),Ki(me,je,de)):(Ct(me,4+(Xe?1:0),3),function(Dt,xt,On,Cn){var Vi;for(Ct(Dt,xt-257,5),Ct(Dt,On-1,5),Ct(Dt,Cn-4,4),Vi=0;Vi<Cn;Vi++)Ct(Dt,Dt.bl_tree[2*ge[Vi]+1],3);vt(Dt,Dt.dyn_ltree,xt-1),vt(Dt,Dt.dyn_dtree,On-1)}(me,me.l_desc.max_code+1,me.d_desc.max_code+1,Rt+1),Ki(me,me.dyn_ltree,me.dyn_dtree)),rn(me),Xe&&dn(me)},h._tr_tally=function(me,Te,tt){return me.pending_buf[me.d_buf+2*me.last_lit]=Te>>>8&255,me.pending_buf[me.d_buf+2*me.last_lit+1]=255&Te,me.pending_buf[me.l_buf+me.last_lit]=255&tt,me.last_lit++,0===Te?me.dyn_ltree[2*tt]++:(me.matches++,Te--,me.dyn_ltree[2*(ee[tt]+T+1)]++,me.dyn_dtree[2*Le(Te)]++),me.last_lit===me.lit_bufsize-1},h._tr_align=function(me){var Te;Ct(me,2,3),Ne(me,256,je),16===(Te=me).bi_valid?(Yt(Te,Te.bi_buf),Te.bi_buf=0,Te.bi_valid=0):8<=Te.bi_valid&&(Te.pending_buf[Te.pending++]=255&Te.bi_buf,Te.bi_buf>>=8,Te.bi_valid-=8)}},{"../utils/common":41}],53:[function(u,l,h){"use strict";l.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(u,l,h){"use strict";l.exports="function"==typeof setImmediate?setImmediate:function(){var f=[].slice.apply(arguments);f.splice(1,0,0),setTimeout.apply(null,f)}},{}]},{},[10])(10)},560:()=>{HTMLCanvasElement.prototype.toBlob||(HTMLCanvasElement.prototype.toBlob=function(C,w,_){var u=this.toDataURL(w,_).split(",")[1];setTimeout(function(){for(var l=atob(u),h=l.length,f=new Uint8Array(h),g=0;g<h;g++)f[g]=l.charCodeAt(g);C(new Blob([f],{type:w||"image/png"}))})})},650:(C,w,_)=>{"use strict";function l(P,B){for(var U=0;U<B.length;U++){var N=B[U];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(P,N.key,N)}}function f(P){return function g(P){if(Array.isArray(P))return A(P)}(P)||function b(P){if(typeof Symbol<"u"&&Symbol.iterator in Object(P))return Array.from(P)}(P)||function x(P,B){if(P){if("string"==typeof P)return A(P,B);var U=Object.prototype.toString.call(P).slice(8,-1);if("Object"===U&&P.constructor&&(U=P.constructor.name),"Map"===U||"Set"===U)return Array.from(U);if("Arguments"===U||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U))return A(P,B)}}(P)||function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(P,B){(null==B||B>P.length)&&(B=P.length);for(var U=0,N=new Array(B);U<B;U++)N[U]=P[U];return N}_.r(w),_.d(w,{default:()=>M});var T=function(){var P=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],B=function(){function Z(ae){var pe=ae.targetModal,ge=ae.triggers,je=void 0===ge?[]:ge,de=ae.onShow,Be=void 0===de?function(){}:de,ee=ae.onClose,Ae=void 0===ee?function(){}:ee,Ue=ae.openTrigger,qe=void 0===Ue?"data-micromodal-trigger":Ue,Mt=ae.closeTrigger,gt=void 0===Mt?"data-micromodal-close":Mt,zt=ae.openClass,Ce=void 0===zt?"is-open":zt,Le=ae.disableScroll,Yt=void 0!==Le&&Le,Ct=ae.disableFocus,Ne=void 0!==Ct&&Ct,Wt=ae.awaitCloseAnimation,En=void 0!==Wt&&Wt,rn=ae.awaitOpenAnimation,dn=void 0!==rn&&rn,hi=ae.debugMode,ii=void 0!==hi&&hi;(function u(P,B){if(!(P instanceof B))throw new TypeError("Cannot call a class as a function")})(this,Z),this.modal=document.getElementById(pe),this.config={debugMode:ii,disableScroll:Yt,openTrigger:qe,closeTrigger:gt,openClass:Ce,onShow:Be,onClose:Ae,awaitCloseAnimation:En,awaitOpenAnimation:dn,disableFocus:Ne},je.length>0&&this.registerTriggers.apply(this,f(je)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}return function h(P,B,U){B&&l(P.prototype,B),U&&l(P,U)}(Z,[{key:"registerTriggers",value:function(){for(var pe=this,ge=arguments.length,je=new Array(ge),de=0;de<ge;de++)je[de]=arguments[de];je.filter(Boolean).forEach(function(Be){Be.addEventListener("click",function(ee){return pe.showModal(ee)})})}},{key:"showModal",value:function(){var pe=this,ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",function de(){pe.modal.removeEventListener("animationend",de,!1),pe.setFocusToFirstNode()},!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,ge)}},{key:"closeModal",value:function(){var pe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,ge=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,pe),this.config.awaitCloseAnimation){var je=this.config.openClass;this.modal.addEventListener("animationend",function de(){ge.classList.remove(je),ge.removeEventListener("animationend",de,!1)},!1)}else ge.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(pe){this.modal=document.getElementById(pe),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(pe){if(this.config.disableScroll){var ge=document.querySelector("body");switch(pe){case"enable":Object.assign(ge.style,{overflow:""});break;case"disable":Object.assign(ge.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(pe){pe.target.hasAttribute(this.config.closeTrigger)&&this.closeModal(pe)}},{key:"onKeydown",value:function(pe){27===pe.keyCode&&this.closeModal(pe),9===pe.keyCode&&this.retainFocus(pe)}},{key:"getFocusableNodes",value:function(){var pe=this.modal.querySelectorAll(P);return Array.apply(void 0,f(pe))}},{key:"setFocusToFirstNode",value:function(){var pe=this;if(!this.config.disableFocus){var ge=this.getFocusableNodes();if(0!==ge.length){var je=ge.filter(function(de){return!de.hasAttribute(pe.config.closeTrigger)});je.length>0&&je[0].focus(),0===je.length&&ge[0].focus()}}}},{key:"retainFocus",value:function(pe){var ge=this.getFocusableNodes();if(0!==ge.length)if(ge=ge.filter(function(de){return null!==de.offsetParent}),this.modal.contains(document.activeElement)){var je=ge.indexOf(document.activeElement);pe.shiftKey&&0===je&&(ge[ge.length-1].focus(),pe.preventDefault()),!pe.shiftKey&&ge.length>0&&je===ge.length-1&&(ge[0].focus(),pe.preventDefault())}else ge[0].focus()}}]),Z}(),U=null,$=function(ae){if(!document.getElementById(ae))return console.warn("MicroModal: \u2757Seems like you have missed %c'".concat(ae,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(ae,'"></div>')),!1};return{init:function(ae){var pe=Object.assign({},{openTrigger:"data-micromodal-trigger"},ae),ge=f(document.querySelectorAll("[".concat(pe.openTrigger,"]"))),je=function(ae,pe){var ge=[];return ae.forEach(function(je){var de=je.attributes[pe].value;void 0===ge[de]&&(ge[de]=[]),ge[de].push(je)}),ge}(ge,pe.openTrigger);if(!0!==pe.debugMode||!1!==function(ae,pe){if(function(ae){ae.length<=0&&(console.warn("MicroModal: \u2757Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(ae),!pe)return!0;for(var ge in pe)$(ge);return!0}(ge,je))for(var de in je){var Be=je[de];pe.targetModal=de,pe.triggers=f(Be),U=new B(pe)}},show:function(ae,pe){var ge=pe||{};ge.targetModal=ae,(!0!==ge.debugMode||!1!==$(ae))&&(U&&U.removeEventListeners(),(U=new B(ge)).showModal())},close:function(ae){ae?U.closeModalById(ae):U.closeModal()}}}();window.MicroModal=T;const M=T},57:(C,w,_)=>{"use strict";_.r(w),_.d(w,{default:()=>u});const u="(function(b){function a(b,d){if({}.hasOwnProperty.call(a.cache,b))return a.cache[b];var e=a.resolve(b);if(!e)throw new Error('Failed to resolve module '+b);var c={id:b,require:a,filename:b,exports:{},loaded:!1,parent:d,children:[]};d&&d.children.push(c);var f=b.slice(0,b.lastIndexOf('/')+1);return a.cache[b]=c.exports,e.call(c.exports,c,c.exports,f,b),c.loaded=!0,a.cache[b]=c.exports}a.modules={},a.cache={},a.resolve=function(b){return{}.hasOwnProperty.call(a.modules,b)?a.modules[b]:void 0},a.define=function(b,c){a.modules[b]=c},a.define('/gif.worker.coffee',function(d,e,f,g){var b,c;b=a('/GIFEncoder.js',d),c=function(a){var c,e,d,f;return c=new b(a.width,a.height),a.index===0?c.writeHeader():c.firstFrame=!1,c.setTransparent(a.transparent),c.setRepeat(a.repeat),c.setDelay(a.delay),c.setQuality(a.quality),c.addFrame(a.data),a.last&&c.finish(),d=c.stream(),a.data=d.pages,a.cursor=d.cursor,a.pageSize=d.constructor.pageSize,a.canTransfer?(f=function(c){for(var b=0,d=a.data.length;b<d;++b)e=a.data[b],c.push(e.buffer);return c}.call(this,[]),self.postMessage(a,f)):self.postMessage(a)},self.onmessage=function(a){return c(a.data)}}),a.define('/GIFEncoder.js',function(e,h,i,j){function c(){this.page=-1,this.pages=[],this.newPage()}function b(a,b){this.width=~~a,this.height=~~b,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.out=new c}var f=a('/TypedNeuQuant.js',e),g=a('/LZWEncoder.js',e);c.pageSize=4096,c.charMap={};for(var d=0;d<256;d++)c.charMap[d]=String.fromCharCode(d);c.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(c.pageSize),this.cursor=0},c.prototype.getData=function(){var d='';for(var a=0;a<this.pages.length;a++)for(var b=0;b<c.pageSize;b++)d+=c.charMap[this.pages[a][b]];return d},c.prototype.writeByte=function(a){this.cursor>=c.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=a},c.prototype.writeUTFBytes=function(b){for(var c=b.length,a=0;a<c;a++)this.writeByte(b.charCodeAt(a))},c.prototype.writeBytes=function(b,d,e){for(var c=e||b.length,a=d||0;a<c;a++)this.writeByte(b[a])},b.prototype.setDelay=function(a){this.delay=Math.round(a/10)},b.prototype.setFrameRate=function(a){this.delay=Math.round(100/a)},b.prototype.setDispose=function(a){a>=0&&(this.dispose=a)},b.prototype.setRepeat=function(a){this.repeat=a},b.prototype.setTransparent=function(a){this.transparent=a},b.prototype.addFrame=function(a){this.image=a,this.getImagePixels(),this.analyzePixels(),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.writePixels(),this.firstFrame=!1},b.prototype.finish=function(){this.out.writeByte(59)},b.prototype.setQuality=function(a){a<1&&(a=1),this.sample=a},b.prototype.writeHeader=function(){this.out.writeUTFBytes('GIF89a')},b.prototype.analyzePixels=function(){var g=this.pixels.length,d=g/3;this.indexedPixels=new Uint8Array(d);var a=new f(this.pixels,this.sample);a.buildColormap(),this.colorTab=a.getColormap();var b=0;for(var c=0;c<d;c++){var e=a.lookupRGB(this.pixels[b++]&255,this.pixels[b++]&255,this.pixels[b++]&255);this.usedEntry[e]=!0,this.indexedPixels[c]=e}this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent))},b.prototype.findClosest=function(e){if(this.colorTab===null)return-1;var k=(e&16711680)>>16,l=(e&65280)>>8,m=e&255,c=0,d=16777216,j=this.colorTab.length;for(var a=0;a<j;){var f=k-(this.colorTab[a++]&255),g=l-(this.colorTab[a++]&255),h=m-(this.colorTab[a]&255),i=f*f+g*g+h*h,b=parseInt(a/3);this.usedEntry[b]&&i<d&&(d=i,c=b),a++}return c},b.prototype.getImagePixels=function(){var a=this.width,g=this.height;this.pixels=new Uint8Array(a*g*3);var b=this.image,c=0;for(var d=0;d<g;d++)for(var e=0;e<a;e++){var f=d*a*4+e*4;this.pixels[c++]=b[f],this.pixels[c++]=b[f+1],this.pixels[c++]=b[f+2]}},b.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var b,a;this.transparent===null?(b=0,a=0):(b=1,a=2),this.dispose>=0&&(a=dispose&7),a<<=2,this.out.writeByte(0|a|0|b),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},b.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},b.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},b.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes('NETSCAPE2.0'),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},b.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var b=768-this.colorTab.length;for(var a=0;a<b;a++)this.out.writeByte(0)},b.prototype.writeShort=function(a){this.out.writeByte(a&255),this.out.writeByte(a>>8&255)},b.prototype.writePixels=function(){var a=new g(this.width,this.height,this.indexedPixels,this.colorDepth);a.encode(this.out)},b.prototype.stream=function(){return this.out},e.exports=b}),a.define('/LZWEncoder.js',function(e,g,h,i){function f(y,D,C,B){function w(a,b){r[f++]=a,f>=254&&t(b)}function x(b){u(a),k=i+2,j=!0,l(i,b)}function u(b){for(var a=0;a<b;++a)h[a]=-1}function A(z,r){var g,t,d,e,y,w,s;for(q=z,j=!1,n_bits=q,m=p(n_bits),i=1<<z-1,o=i+1,k=i+2,f=0,e=v(),s=0,g=a;g<65536;g*=2)++s;s=8-s,w=a,u(w),l(i,r);a:while((t=v())!=c){if(g=(t<<b)+e,d=t<<s^e,h[d]===g){e=n[d];continue}if(h[d]>=0){y=w-d,d===0&&(y=1);do if((d-=y)<0&&(d+=w),h[d]===g){e=n[d];continue a}while(h[d]>=0)}l(e,r),e=t,k<1<<b?(n[d]=k++,h[d]=g):x(r)}l(e,r),l(o,r)}function z(a){a.writeByte(s),remaining=y*D,curPixel=0,A(s+1,a),a.writeByte(0)}function t(a){f>0&&(a.writeByte(f),a.writeBytes(r,0,f),f=0)}function p(a){return(1<<a)-1}function v(){if(remaining===0)return c;--remaining;var a=C[curPixel++];return a&255}function l(a,c){g&=d[e],e>0?g|=a<<e:g=a,e+=n_bits;while(e>=8)w(g&255,c),g>>=8,e-=8;if((k>m||j)&&(j?(m=p(n_bits=q),j=!1):(++n_bits,n_bits==b?m=1<<b:m=p(n_bits))),a==o){while(e>0)w(g&255,c),g>>=8,e-=8;t(c)}}var s=Math.max(2,B),r=new Uint8Array(256),h=new Int32Array(a),n=new Int32Array(a),g,e=0,f,k=0,m,j=!1,q,i,o;this.encode=z}var c=-1,b=12,a=5003,d=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.exports=f}),a.define('/TypedNeuQuant.js',function(A,F,E,D){function C(A,B){function I(){o=[],q=new Int32Array(256),t=new Int32Array(a),y=new Int32Array(a),z=new Int32Array(a>>3);var c,d;for(c=0;c<a;c++)d=(c<<b+8)/a,o[c]=new Float64Array([d,d,d,0]),y[c]=e/a,t[c]=0}function J(){for(var c=0;c<a;c++)o[c][0]>>=b,o[c][1]>>=b,o[c][2]>>=b,o[c][3]=c}function K(b,a,c,e,f){o[a][0]-=b*(o[a][0]-c)/d,o[a][1]-=b*(o[a][1]-e)/d,o[a][2]-=b*(o[a][2]-f)/d}function L(j,e,n,l,k){var h=Math.abs(e-j),i=Math.min(e+j,a),g=e+1,f=e-1,m=1,b,d;while(g<i||f>h)d=z[m++],g<i&&(b=o[g++],b[0]-=d*(b[0]-n)/c,b[1]-=d*(b[1]-l)/c,b[2]-=d*(b[2]-k)/c),f>h&&(b=o[f--],b[0]-=d*(b[0]-n)/c,b[1]-=d*(b[1]-l)/c,b[2]-=d*(b[2]-k)/c)}function C(p,s,q){var h=2147483647,k=h,d=-1,m=d,c,j,e,n,l;for(c=0;c<a;c++)j=o[c],e=Math.abs(j[0]-p)+Math.abs(j[1]-s)+Math.abs(j[2]-q),e<h&&(h=e,d=c),n=e-(t[c]>>i-b),n<k&&(k=n,m=c),l=y[c]>>g,y[c]-=l,t[c]+=l<<f;return y[d]+=x,t[d]-=r,m}function D(){var d,b,e,c,h,g,f=0,i=0;for(d=0;d<a;d++){for(e=o[d],h=d,g=e[1],b=d+1;b<a;b++)c=o[b],c[1]<g&&(h=b,g=c[1]);if(c=o[h],d!=h&&(b=c[0],c[0]=e[0],e[0]=b,b=c[1],c[1]=e[1],e[1]=b,b=c[2],c[2]=e[2],e[2]=b,b=c[3],c[3]=e[3],e[3]=b),g!=f){for(q[f]=i+d>>1,b=f+1;b<g;b++)q[b]=d;f=g,i=d}}for(q[f]=i+n>>1,b=f+1;b<256;b++)q[b]=n}function E(j,i,k){var b,d,c,e=1e3,h=-1,f=q[i],g=f-1;while(f<a||g>=0)f<a&&(d=o[f],c=d[1]-i,c>=e?f=a:(f++,c<0&&(c=-c),b=d[0]-j,b<0&&(b=-b),c+=b,c<e&&(b=d[2]-k,b<0&&(b=-b),c+=b,c<e&&(e=c,h=d[3])))),g>=0&&(d=o[g],c=i-d[1],c>=e?g=-1:(g--,c<0&&(c=-c),b=d[0]-j,b<0&&(b=-b),c+=b,c<e&&(b=d[2]-k,b<0&&(b=-b),c+=b,c<e&&(e=c,h=d[3]))));return h}function F(){var c,f=A.length,D=30+(B-1)/3,y=f/(3*B),q=~~(y/w),n=d,o=u,a=o>>h;for(a<=1&&(a=0),c=0;c<a;c++)z[c]=n*((a*a-c*c)*m/(a*a));var i;f<s?(B=1,i=3):f%l!==0?i=3*l:f%k!==0?i=3*k:f%p!==0?i=3*p:i=3*j;var r,t,x,e,g=0;c=0;while(c<y)if(r=(A[g]&255)<<b,t=(A[g+1]&255)<<b,x=(A[g+2]&255)<<b,e=C(r,t,x),K(n,e,r,t,x),a!==0&&L(a,e,r,t,x),g+=i,g>=f&&(g-=f),c++,q===0&&(q=1),c%q===0)for(n-=n/D,o-=o/v,a=o>>h,a<=1&&(a=0),e=0;e<a;e++)z[e]=n*((a*a-e*e)*m/(a*a))}function G(){I(),F(),J(),D()}function H(){var b=[],g=[];for(var c=0;c<a;c++)g[o[c][3]]=c;var d=0;for(var e=0;e<a;e++){var f=g[e];b[d++]=o[f][0],b[d++]=o[f][1],b[d++]=o[f][2]}return b}var o,q,t,y,z;this.buildColormap=G,this.getColormap=H,this.lookupRGB=E}var w=100,a=256,n=a-1,b=4,i=16,e=1<<i,f=10,B=1<<f,g=10,x=e>>g,r=e<<f-g,z=a>>3,h=6,t=1<<h,u=z*t,v=30,o=10,d=1<<o,q=8,m=1<<q,y=o+q,c=1<<y,l=499,k=491,p=487,j=503,s=3*j;A.exports=C}),a('/gif.worker.coffee')}.call(this,this))\r\n//# sourceMappingURL=gif.worker.js.map\r\n// gif.worker.js 0.1.6 - https://github.com/jnordberg/gif.js"},72:function(C,w,_){var u,l;u=function(){return function h(){var f=arguments.length;if(0===f)throw new Error("resolveUrl requires at least one argument; got none.");var g=document.createElement("base");if(g.href=arguments[0],1===f)return g.href;var b=document.getElementsByTagName("head")[0];b.insertBefore(g,b.firstChild);for(var A,x=document.createElement("a"),k=1;k<f;k++)x.href=arguments[k],g.href=A=x.href;return b.removeChild(g),A}},void 0!==(l=u.call(w,_,w,C))&&(C.exports=l)},914:function(C,w,_){"use strict";var u=this&&this.__assign||function(){return u=Object.assign||function(we){for(var dt,Tt=1,Bt=arguments.length;Tt<Bt;Tt++)for(var At in dt=arguments[Tt])Object.prototype.hasOwnProperty.call(dt,At)&&(we[At]=dt[At]);return we},u.apply(this,arguments)},l=this&&this.__awaiter||function(we,dt,Tt,Bt){return new(Tt||(Tt=Promise))(function(ht,Ot){function Un(Li){try{bn(Bt.next(Li))}catch(zn){Ot(zn)}}function ri(Li){try{bn(Bt.throw(Li))}catch(zn){Ot(zn)}}function bn(Li){Li.done?ht(Li.value):function At(ht){return ht instanceof Tt?ht:new Tt(function(Ot){Ot(ht)})}(Li.value).then(Un,ri)}bn((Bt=Bt.apply(we,dt||[])).next())})},h=this&&this.__generator||function(we,dt){var Bt,At,ht,Ot,Tt={label:0,sent:function(){if(1&ht[0])throw ht[1];return ht[1]},trys:[],ops:[]};return Ot={next:Un(0),throw:Un(1),return:Un(2)},"function"==typeof Symbol&&(Ot[Symbol.iterator]=function(){return this}),Ot;function Un(bn){return function(Li){return function ri(bn){if(Bt)throw new TypeError("Generator is already executing.");for(;Tt;)try{if(Bt=1,At&&(ht=2&bn[0]?At.return:bn[0]?At.throw||((ht=At.return)&&ht.call(At),0):At.next)&&!(ht=ht.call(At,bn[1])).done)return ht;switch(At=0,ht&&(bn=[2&bn[0],ht.value]),bn[0]){case 0:case 1:ht=bn;break;case 4:return Tt.label++,{value:bn[1],done:!1};case 5:Tt.label++,At=bn[1],bn=[0];continue;case 7:bn=Tt.ops.pop(),Tt.trys.pop();continue;default:if(!(ht=(ht=Tt.trys).length>0&&ht[ht.length-1])&&(6===bn[0]||2===bn[0])){Tt=0;continue}if(3===bn[0]&&(!ht||bn[1]>ht[0]&&bn[1]<ht[3])){Tt.label=bn[1];break}if(6===bn[0]&&Tt.label<ht[1]){Tt.label=ht[1],ht=bn;break}if(ht&&Tt.label<ht[2]){Tt.label=ht[2],Tt.ops.push(bn);break}ht[2]&&Tt.ops.pop(),Tt.trys.pop();continue}bn=dt.call(we,Tt)}catch(Li){bn=[6,Li],At=0}finally{Bt=ht=0}if(5&bn[0])throw bn[1];return{value:bn[0]?bn[1]:void 0,done:!0}}([bn,Li])}}},f=this&&this.__spreadArray||function(we,dt,Tt){if(Tt||2===arguments.length)for(var ht,Bt=0,At=dt.length;Bt<At;Bt++)(ht||!(Bt in dt))&&(ht||(ht=Array.prototype.slice.call(dt,0,Bt)),ht[Bt]=dt[Bt]);return we.concat(ht||Array.prototype.slice.call(dt))};Object.defineProperty(w,"__esModule",{value:!0}),w.browserSupportsGIF=w.browserSupportsMP4=w.browserSupportsWEBM=w.checkHotkeys=w.isRecording=w.stopRecord=w.recordFrame=w.takeJPEGSnapshot=w.takePNGSnapshot=w.beginJPEGFramesRecord=w.beginPNGFramesRecord=w.beginGIFRecord=w.beginVideoRecord=w.bindKeyToJPEGSnapshot=w.bindKeyToPNGSnapshot=w.bindKeyToJPEGFramesRecord=w.bindKeyToPNGFramesRecord=w.bindKeyToGIFRecord=w.bindKeyToVideoRecord=w.setVerbose=w.dispose=w.init=w.MP4=w.WEBM=w.showDialog=void 0,_(886);var b=_(162);_(560);var B,x=_(809),A=_(848),k=_(330),T=_(57),M=_(733),P=URL.createObjectURL(new Blob([T.default])),U=void 0,N=_(330);Object.defineProperty(w,"showDialog",{enumerable:!0,get:function(){return N.showDialog}});var $="gif";w.WEBM="webm",w.MP4="mp4";var G="jpegzip",W="pngzip",K="jpeg",X="png",oe=[],ae=[],pe={},ge={},je=null;function Be(we){ae.push({key:we.key}),A.PARAMS.IS_MANUALLY_CHECKING_HOTKEYS||Ne()}function ee(){oe.length&&(0,k.showWarning)("Don't resize while recording canvas!")}function Ue(we){A.PARAMS.VERBOSE=!!we,U&&U.setLogging(A.PARAMS.VERBOSE)}function qe(){if(null===je)throw new Error("No canvas supplied, please call CanvasCapture.init() and pass in canvas element.")}function Mt(we,dt){Object.keys(ge).forEach(function(Tt){ge[Tt]===we&&delete ge[Tt]}),ge[dt]=we}function Ne(){for(var we,dt,Tt=0;Tt<ae.length;Tt++){var Bt=ae[Tt].key;if(ge.mp4&&Bt===ge[w.MP4]){var At=Te(w.MP4);if(At.length)me(At);else{if(!Vi()){var ht="This browser does not support MP4 video recording, please try again in Chrome as be sure to set the correct server headers: https://github.com/amandaghassaei/canvas-capture#caveats.";(Ot=null===(we=pe[w.MP4])||void 0===we?void 0:we.onError)&&Ot(new Error(ht)),(0,k.showWarning)(ht)}En(pe[w.MP4])}}if(ge.webm&&Bt===ge[w.WEBM]){var Ot,Un=Te(w.WEBM);Un.length?me(Un):(Cn()||(ht="This browser does not support WEBM video recording, please try again in Chrome.",(Ot=null===(dt=pe[w.WEBM])||void 0===dt?void 0:dt.onError)&&Ot(new Error(ht)),(0,k.showWarning)(ht)),En(pe[w.WEBM]))}if(ge.gif&&Bt===ge[$]){var ri=Te($);ri.length?me(ri):rn(pe[$])}if(ge.pngzip&&Bt===ge[W]){var bn=Te(W);bn.length?me(bn):dn(pe[W])}if(ge.jpegzip&&Bt===ge[G]){var Li=Te(G);Li.length?me(Li):hi(pe[G])}ge.png&&Bt===ge[X]&&Sn(pe[X]),ge.jpeg&&Bt===ge[K]&&Q(pe[K])}ae.length=0}function Wt(we){oe.push(we),we.type!==W&&we.type!==G&&we.capturer.start(),(0,k.showDot)(Xe())}function En(we){try{var dt=we?.format||w.MP4;if(dt===w.MP4){if(!Vi())throw(0,k.showWarning)(Tt="This browser does not support MP4 video recording, please try again in Chrome."),new Error(Tt)}else{if(dt!==w.WEBM)throw new Error("invalid video format ".concat(dt,"."));var Tt;if(!Cn())throw(0,k.showWarning)(Tt="This browser does not support WEBM video recording, please try again in Chrome."),new Error(Tt)}if(tt().length)throw(0,k.showWarning)(Tt="CCapture.js only supports one video/gif capture at a time."),new Error(Tt);var Bt=1;we&&we.quality&&(Bt=we.quality);var At=we?.name||"Video_Capture",Ot={name:At,capturer:new window.CCapture({format:w.WEBM,name:At,framerate:we?.fps||60,quality:100*Bt,verbose:A.PARAMS.VERBOSE,motionBlurFrames:we?.motionBlurFrames}),numFrames:0,type:dt,ffmpegOptions:we?.ffmpegOptions,onExportProgress:we?.onExportProgress,onExport:we?.onExport,onExportFinish:we?.onExportFinish,onError:we?.onError};return Wt(Ot),Ot}catch(Un){if(!we?.onError)throw Un;we.onError(Un)}}function rn(we){try{if(tt().length){var dt="CCapture.js only supports one video/gif capture at a time.";throw(0,k.showWarning)(dt),new Error(dt)}var Tt=100;we&&we.quality&&(Tt=100*we.quality);var Bt=we?.name||"GIF_Capture",ht={name:Bt,capturer:new window.CCapture({format:$,name:Bt,framerate:we?.fps||60,workersPath:P,quality:Tt,verbose:A.PARAMS.VERBOSE,onProgress:we?.onExportProgress,motionBlurFrames:we?.motionBlurFrames}),numFrames:0,type:$,onExport:we?.onExport,onExportFinish:we?.onExportFinish,onError:we?.onError};return Wt(ht),ht}catch(Ot){if(!we?.onError)throw Ot;we.onError(Ot)}}function dn(we){try{var Bt={name:we?.name||"PNG_Frames_Capture",zipOptions:{dpi:we?.dpi},zipPromises:[],capturer:new M,numFrames:0,type:W,onExportProgress:we?.onExportProgress,onExport:we?.onExport,onExportFinish:we?.onExportFinish,onError:we?.onError};return Wt(Bt),Bt}catch(At){if(!we?.onError)throw At;we.onError(At)}}function hi(we){try{var Bt={name:we?.name||"JPEG_Frames_Capture",zipOptions:{dpi:we?.dpi,quality:we?.quality},zipPromises:[],capturer:new M,numFrames:0,type:G,onExportProgress:we?.onExportProgress,onExport:we?.onExport,onExportFinish:we?.onExportFinish,onError:we?.onError};return Wt(Bt),Bt}catch(At){if(!we?.onError)throw At;we.onError(At)}}function ii(we,dt,Tt){return l(this,void 0,void 0,function(){return h(this,function(Bt){return[2,new Promise(function(At){we.toBlob(function(ht){At(ht)},"image/".concat(dt),Tt)})]})})}function Ki(we,dt,Tt,Bt){return l(this,void 0,void 0,function(){var At,ht,Ot,Un;return h(this,function(ri){switch(ri.label){case 0:return qe(),At=Bt?.onExportFinish,[4,ii(je,dt,Tt)];case 1:if(!(ht=ri.sent()))throw Ot="Problem saving ".concat(dt.toUpperCase(),", please try again!"),(0,k.showWarning)(Ot),new Error(Ot);return Un=Bt?.onExport||b.saveAs,Bt?.dpi?[4,(0,x.changeDpiBlob)(ht,Bt?.dpi).then(function(bn){Un(bn,we),At&&At()})]:[3,3];case 2:return ri.sent(),[3,4];case 3:Un(ht,we),At&&At(),ri.label=4;case 4:return[2]}})})}function Sn(we){return l(this,void 0,void 0,function(){var Bt;return h(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,Ki("".concat(we?.name||"PNG_Capture",".png"),X,void 0,we)];case 1:return At.sent(),[3,3];case 2:if(Bt=At.sent(),!we?.onError)throw Bt;return we.onError(Bt),[3,3];case 3:return[2]}})})}function Q(we){return l(this,void 0,void 0,function(){var Bt;return h(this,function(At){switch(At.label){case 0:return At.trys.push([0,2,,3]),[4,Ki("".concat(we?.name||"JPEG_Capture",".jpg"),K,we?.quality||1,we)];case 1:return At.sent(),[3,3];case 2:if(Bt=At.sent(),!we?.onError)throw Bt;return we.onError(Bt),[3,3];case 3:return[2]}})})}function Re(we){return l(this,void 0,void 0,function(){return h(this,function(dt){return[2,new Promise(function(Tt){we.save(function(Bt){Tt(Bt)})})]})})}function le(we){return l(this,void 0,void 0,function(){var dt,Tt,Bt,At,ht,Ot,Un,ri,bn,zn,_r,pi;return h(this,function(on){switch(on.label){case 0:if(Tt=(dt=oe[we]).name,Bt=dt.capturer,At=dt.numFrames,ht=dt.type,Ot=dt.zipPromises,Un=dt.onExportProgress,ri=dt.onExport,bn=dt.onExportFinish,zn=dt.ffmpegOptions,oe.splice(we,1),ht!==W&&ht!==G&&Bt.stop(),0===At)throw(0,k.showWarning)("No frames recorded, call CanvasCapture.recordFrame()."),new Error("No frames recorded, call CanvasCapture.recordFrame().");switch(ht){case w.MP4:return[3,1];case w.WEBM:return[3,4];case $:return[3,6];case W:case G:return[3,8]}return[3,11];case 1:return[4,Re(Bt)];case 2:return _r=on.sent(),(0,k.showDialog)("Processing...","MP4 is processing and may take a minute to save.  You can close this dialog in the meantime.",{autoCloseDelay:7e3}),[4,Rt({name:Tt,blob:_r,onExportProgress:Un,onExport:ri,onExportFinish:bn,ffmpegOptions:zn})];case 3:case 10:return on.sent(),[3,12];case 4:return Un&&Un(0),[4,Re(Bt)];case 5:return _r=on.sent(),Un&&Un(1),pi="".concat(Tt,".webm"),ri?ri(_r,pi):(0,b.saveAs)(_r,pi),bn&&bn(),[3,12];case 6:return(0,k.showDialog)("Processing...","GIF is processing and may take a minute to save.  You can close this dialog in the meantime.",{autoCloseDelay:7e3}),[4,Re(Bt)];case 7:return _r=on.sent(),pi="".concat(Tt,".gif"),ri?ri(_r,pi):(0,b.saveAs)(_r,pi),bn&&bn(),[3,12];case 8:return[4,Promise.all(Ot)];case 9:return on.sent(),(0,k.showDialog)("Processing...","Frames are being zipped and may take a minute to save.  You can close this dialog in the meantime.",{autoCloseDelay:7e3}),[4,Bt.generateAsync({type:"blob"},function(pn){Un&&Un(pn.percent/100)}).then(function(pn){var Jt="".concat(Tt,".zip");ri?ri(pn,Jt):(0,b.saveAs)(pn,Jt),bn&&bn()})];case 11:throw new Error("Need to handle saving type ".concat(ht,"."));case 12:return[2]}})})}function me(we){return l(this,void 0,void 0,function(){var dt,Bt,At,ht,Ot,Un,ri;return h(this,function(bn){switch(bn.label){case 0:we&&!Array.isArray(we)&&(we=[we]),dt=we||oe,bn.label=1;case 1:if(bn.trys.push([1,3,,4]),0===oe.length)throw(0,k.showWarning)("No valid capturer inited, please call CanvasCapture.beginVideoRecord(), CanvasCapture.beginGIFRecord(), CanvasCapture.beginPNGFramesRecord(), or CanvasCapture.beginJPEGFramesRecord() first."),new Error("No valid capturer inited, please call CanvasCapture.beginVideoRecord(), CanvasCapture.beginGIFRecord(), CanvasCapture.beginPNGFramesRecord(), or CanvasCapture.beginJPEGFramesRecord() first.");for(Bt=[],Un=0;Un<dt.length;Un++){if((At=oe.indexOf(dt[Un]))<0)throw new Error("Invalid capture ".concat(dt[Un]," \u2013 may have already been stopped."));Bt.push(le(At))}return(0,k.showDot)(Xe()),[4,Promise.all(Bt)];case 2:return bn.sent(),[3,4];case 3:for(ht=bn.sent(),Ot=!0,Un=0;Un<dt.length;Un++)(ri=dt[Un]).onError?ri.onError(ht):Ot=!1;if(!dt.length||!Ot)throw ht;return[3,4];case 4:return[2]}})})}function Te(we){for(var dt=[],Tt=0;Tt<oe.length;Tt++)oe[Tt].type===we&&dt.push(oe[Tt]);return dt}function tt(){return Te(w.WEBM).concat(Te(w.MP4)).concat(Te($))}function Xe(){return oe.length>0}w.init=function de(we,dt){je=we,B=dt?.ffmpegCorePath||"https://unpkg.com/@ffmpeg/core@0.10.0/dist/ffmpeg-core.js",dt&&void 0!==dt.verbose&&Ue(dt.verbose),dt&&void 0!==dt.showAlerts&&(A.PARAMS.SHOW_ALERTS=dt.showAlerts),dt&&void 0!==dt.showDialogs&&(A.PARAMS.SHOW_DIALOGS=dt.showDialogs),dt&&void 0!==dt.showRecDot&&(A.PARAMS.SHOW_REC_DOT=dt.showRecDot),A.PARAMS.SHOW_REC_DOT&&(0,k.initDotWithCSS)(dt?.recDotCSS),je.addEventListener("resize",ee),window.addEventListener("keydown",Be)},w.dispose=function Ae(){je?.removeEventListener("resize",ee),je=null,window.removeEventListener("keydown",Be)},w.setVerbose=Ue,w.bindKeyToVideoRecord=function gt(we,dt){dt?.format===w.WEBM?(pe.webm=dt,Mt(we,w.WEBM)):(pe.mp4=dt,Mt(we,w.MP4))},w.bindKeyToGIFRecord=function zt(we,dt){pe.gif=dt,Mt(we,$)},w.bindKeyToPNGFramesRecord=function Ce(we,dt){pe.pngzip=dt,Mt(we,W)},w.bindKeyToJPEGFramesRecord=function Le(we,dt){pe.jpegzip=dt,Mt(we,G)},w.bindKeyToPNGSnapshot=function Yt(we,dt){pe.png=dt,Mt(we,X)},w.bindKeyToJPEGSnapshot=function Ct(we,dt){pe.jpeg=dt,Mt(we,K)},w.beginVideoRecord=En,w.beginGIFRecord=rn,w.beginPNGFramesRecord=dn,w.beginJPEGFramesRecord=hi,w.takePNGSnapshot=Sn,w.takeJPEGSnapshot=Q,w.recordFrame=function vt(we){var dt=oe;we&&(dt=Array.isArray(we)?we:[we]);try{if(qe(),0===dt.length){var Tt="No valid capturer inited, please call CanvasCapture.beginVideoRecord(), CanvasCapture.beginGIFRecord(), CanvasCapture.beginPNGFramesRecord(), or CanvasCapture.beginJPEGFramesRecord() first.";throw(0,k.showWarning)(Tt),new Error(Tt)}for(var Bt=function(Un){var ri=dt[Un],bn=ri.capturer,Li=ri.type,zn=ri.zipOptions,ji=ri.zipPromises,Ui=ri.numFrames;if(Li===G||Li===W){var _r="frame_".concat(Ui+1),pi=new Promise(function(on,pn){var Jt={dpi:zn?.dpi,quality:zn.quality,name:_r,onExport:function(Lr,bc){bn.file(bc,Lr)},onExportFinish:on,onError:pn};Li===G?Q(Jt):Sn(Jt)});ji.push(pi)}else bn.capture(je);dt[Un].numFrames=Ui+1},At=0;At<dt.length;At++)Bt(At)}catch(Un){var ht=!0;for(At=0;At<dt.length;At++){var Ot=dt[At];Ot.onError?Ot.onError(Un):ht=!1}if(!dt.length||!ht)throw Un}},w.stopRecord=me,w.isRecording=Xe,w.checkHotkeys=function Ve(){A.PARAMS.IS_MANUALLY_CHECKING_HOTKEYS=!0,Ne()};var ut=!1;function Rt(we){return l(this,void 0,void 0,function(){var dt,Tt,At,ht,Ot,Un,ri,bn,zn,ji,Ui,_r,pi,on;return h(this,function(pn){switch(pn.label){case 0:return U||(dt=_(648),U=dt({corePath:B})),ut?[3,2]:[4,U.load().catch(function(){var Jt="MP4 export not supported in this browser, try again in the latest version of Chrome.";throw(0,k.showWarning)(Jt),new Error(Jt)})];case 1:pn.sent(),ut=!0,pn.label=2;case 2:return Tt=we.name,At=we.onExportProgress,ht=we.onExport,Ot=we.onExportFinish,Un=we.ffmpegOptions,[4,we.blob.arrayBuffer()];case 3:return ri=pn.sent(),bn=new Uint8Array(ri),U.FS("writeFile","".concat(Tt,".webm"),bn),At&&U.setProgress(function(Jt){At(Math.max(0,Math.min(Jt.ratio,1)))}),zn=u(u({},{"-c:v":"libx264","-preset":"slow","-crf":"22","-pix_fmt":"yuv420p"}),Un||{}),ji=[],Object.keys(zn).forEach(function(Jt){ji.push(Jt,zn[Jt])}),Ui="".concat(Tt,".mp4"),[4,(on=U).run.apply(on,f(f(["-i","".concat(Tt,".webm")],ji,!1),["-vf","crop=trunc(iw/2)*2:trunc(ih/2)*2","-an",Ui],!1))];case 4:return pn.sent(),[4,U.FS("readFile",Ui)];case 5:return _r=pn.sent(),pi=new Blob([_r],{type:"video/mp4"}),ht?ht(pi,Ui):(0,b.saveAs)(pi,Ui),U.FS("unlink","".concat(Tt,".webm")),U.FS("unlink",Ui),Ot&&Ot(),[2]}})})}function Dt(){var dt=document.createElement("canvas").toDataURL("image/webp",{quality:1});return!("string"!=typeof dt||!dt.match(/^data:image\/webp;base64,/i))}function Cn(){return Dt()}function Vi(){return Dt()&&function xt(){try{new SharedArrayBuffer(1024)}catch{return!1}return!0}()}w.browserSupportsWEBM=Cn,w.browserSupportsMP4=Vi,w.browserSupportsGIF=function Yr(){return function On(){return!!window.Worker}()}},713:(C,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.css=void 0,w.css='\n/**************************  Basic Modal Styles\n**************************/\n\n.modal {\n  font-family: -apple-system,BlinkMacSystemFont,avenir next,avenir,helvetica neue,helvetica,ubuntu,roboto,noto,segoe ui,arial,sans-serif;\n}\n\n.modal__overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal__container {\n  background-color: #fff;\n  padding: 30px;\n  max-width: 500px;\n  max-height: 100vh;\n  overflow-y: auto;\n  box-sizing: border-box;\n}\n\n.modal__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal__title {\n  margin-top: 0;\n  margin-bottom: 0;\n  font-weight: 600;\n  font-size: 1.25rem;\n  line-height: 1.25;\n  color: #222;\n  box-sizing: border-box;\n}\n\n.modal__footer {\n  text-align: right;\n}\n\n.modal__footer>.modal__btn {\n  margin-right: 8px;\n}\n\n.modal__close {\n  background: transparent;\n  border: 0;\n}\n\n.modal__header .modal__close:before { content: "\u2715"; }\n\n.modal__content {\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n  line-height: 1.5;\n  color: rgba(0,0,0,.8);\n}\n\n.modal__btn {\n  font-size: .875rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  padding-top: .5rem;\n  padding-bottom: .5rem;\n  background-color: #e6e6e6;\n  color: rgba(0,0,0,.8);\n  border-radius: .25rem;\n  border-style: none;\n  border-width: 0;\n  cursor: pointer;\n  -webkit-appearance: button;\n  text-transform: none;\n  overflow: visible;\n  line-height: 1.15;\n  margin: 0;\n  will-change: transform;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-backface-visibility: hidden;\n  backface-visibility: hidden;\n  -webkit-transform: translateZ(0);\n  transform: translateZ(0);\n  transition: -webkit-transform .25s ease-out;\n  transition: transform .25s ease-out;\n  transition: transform .25s ease-out,-webkit-transform .25s ease-out;\n}\n\n.modal__btn:focus, .modal__btn:hover {\n  -webkit-transform: scale(1.05);\n  transform: scale(1.05);\n}\n\n.modal__btn-primary {\n  background-color: #333;\n  color: #fff;\n}\n\n\n\n/**************************  Demo Animation Style\n**************************/\n@keyframes mmfadeIn {\n    from { opacity: 0; }\n      to { opacity: 1; }\n}\n\n@keyframes mmfadeOut {\n    from { opacity: 1; }\n      to { opacity: 0; }\n}\n\n@keyframes mmslideIn {\n  from { transform: translateY(15%); }\n    to { transform: translateY(0); }\n}\n\n@keyframes mmslideOut {\n    from { transform: translateY(0); }\n    to { transform: translateY(-10%); }\n}\n\n.micromodal-slide {\n  display: none;\n}\n\n.micromodal-slide.is-open {\n  display: block;\n}\n\n.micromodal-slide[aria-hidden="false"] .modal__overlay {\n  animation: mmfadeIn .3s cubic-bezier(0.0, 0.0, 0.2, 1);\n}\n\n.micromodal-slide[aria-hidden="false"] .modal__container {\n  animation: mmslideIn .3s cubic-bezier(0, 0, .2, 1);\n}\n\n.micromodal-slide[aria-hidden="true"] .modal__overlay {\n  animation: mmfadeOut .3s cubic-bezier(0.0, 0.0, 0.2, 1);\n}\n\n.micromodal-slide[aria-hidden="true"] .modal__container {\n  animation: mmslideOut .3s cubic-bezier(0, 0, .2, 1);\n}\n\n.micromodal-slide .modal__container,\n.micromodal-slide .modal__overlay {\n  will-change: transform;\n}\n'},330:function(C,w,_){"use strict";var u=this&&this.__assign||function(){return u=Object.assign||function(W){for(var K,X=1,oe=arguments.length;X<oe;X++)for(var Z in K=arguments[X])Object.prototype.hasOwnProperty.call(K,Z)&&(W[Z]=K[Z]);return W},u.apply(this,arguments)};Object.defineProperty(w,"__esModule",{value:!0}),w.showDot=w.initDotWithCSS=w.showDialog=w.showWarning=void 0;var l=_(650),h=_(713),f=_(848),g=document.createElement("style");function b(W,K,X){void 0===X&&(X="");var oe='<div class="modal micromodal-slide" id="modal-'.concat(W,'" aria-hidden="true">\n\t\t<div class="modal__overlay" tabindex="-1" data-micromodal-close>\n\t\t<div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-').concat(W,'-title">\n\t\t\t<header class="modal__header">\n\t\t\t\t<h2 class="modal__title" id="modal-').concat(W,'-title">\n\t\t\t\t\t').concat(K,'\n\t\t\t\t</h2>\n\t\t\t\t<button class="modal__close" aria-label="Close modal" data-micromodal-close></button>\n\t\t\t</header>\n\t\t\t<main class="modal__content">\n\t\t\t\t<p id="modal-').concat(W,'-content">\n\t\t\t\t\t').concat(X,"\n\t\t\t\t</p>\n\t\t\t</main>\n\t\t</div>\n\t\t</div>\n\t</div>"),Z=document.createElement("div");return Z.innerHTML=oe,Z.firstChild}g.textContent=h.css,document.head.append(g);var x=!1,A=!1,k="alert",T=b(k,"Warning"),M="dialog",P=b(M,"Saving...");w.showWarning=function B(W){console.warn(W),f.PARAMS.SHOW_ALERTS&&(x||(x=!0,document.getElementsByTagName("body")[0].appendChild(T)),document.getElementById("modal-".concat(k,"-content")).innerHTML=W,l.default.show("modal-".concat(k)))},w.showDialog=function U(W,K,X){if(f.PARAMS.VERBOSE&&console.log(W,K),f.PARAMS.SHOW_DIALOGS){A||(A=!0,document.getElementsByTagName("body")[0].appendChild(P)),document.getElementById("modal-".concat(M,"-title")).innerHTML=W,document.getElementById("modal-".concat(M,"-content")).innerHTML=K,l.default.show("modal-".concat(M));var oe=void 0!==X?.autoCloseDelay?X.autoCloseDelay:-1;oe>0&&setTimeout(function(){l.default.close("modal-".concat(M))},oe)}};var N=document.createElement("div");w.initDotWithCSS=function $(W){N.id="recordingDot";var K=u({background:"red",width:"20px",height:"20px","border-radius":"50%",display:"none",position:"absolute",top:"0",right:"0","z-index":"10",margin:"20px"},W);Object.assign(N.style,K),document.getElementsByTagName("body")[0].appendChild(N)},w.showDot=function G(W){f.PARAMS.SHOW_REC_DOT&&(N.style.display=W?"inline-block":"none")}},848:(C,w)=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.PARAMS=void 0,w.PARAMS={VERBOSE:!1,SHOW_ALERTS:!1,SHOW_DIALOGS:!1,SHOW_REC_DOT:!1,IS_MANUALLY_CHECKING_HOTKEYS:!1}},886:(C,w,_)=>{var u;C=_.nmd(C),function(){if(typeof C.exports<"u")var l=_(846),h=_(173),f=_(769),g=_(166);var b={function:!0,object:!0};function x(Ae){return Ae&&Ae.Object===Object?Ae:null}parseFloat,parseInt;var B=x((b[typeof w]&&w&&!w.nodeType?w:void 0)&&(b.object&&C&&!C.nodeType?C:void 0)&&"object"==typeof _.g&&_.g),U=x(b[typeof self]&&self),N=x(b[typeof window]&&window),$=x(b[typeof this]&&this);function W(Ae){return("0000000"+Ae).slice(-7)}B||N!==($&&$.window)&&N||U||$||Function("return this")(),"gc"in window||(window.gc=function(){}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(Ae,Ue,qe){for(var Mt=atob(this.toDataURL(Ue,qe).split(",")[1]),gt=Mt.length,zt=new Uint8Array(gt),Ce=0;Ce<gt;Ce++)zt[Ce]=Mt.charCodeAt(Ce);Ae(new Blob([zt],{type:Ue||"image/png"}))}}),function(){if("performance"in window||(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},!("now"in window.performance)){var Ae=Date.now();performance.timing&&performance.timing.navigationStart&&(Ae=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-Ae}}}();var K=window.Date.now();function oe(Ae){var Ue={};this.settings=Ae,this.on=function(qe,Mt){Ue[qe]=Mt},this.emit=function(qe){var Mt=Ue[qe];Mt&&Mt.apply(null,Array.prototype.slice.call(arguments,1))},this.filename=Ae.name||function X(){function Ae(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return Ae()+Ae()+"-"+Ae()+"-"+Ae()+"-"+Ae()+"-"+Ae()+Ae()+Ae()}(),this.extension="",this.mimeType=""}function Z(Ae){oe.call(this,Ae),this.extension=".tar",this.mimeType="application/x-tar",this.fileExtension="",this.tape=null,this.count=0}function ae(Ae){Z.call(this,Ae),this.type="image/png",this.fileExtension=".png"}function pe(Ae){Z.call(this,Ae),this.type="image/jpeg",this.fileExtension=".jpg",this.quality=Ae.quality/100||.8}function ge(Ae){"image/webp"!==document.createElement("canvas").toDataURL("image/webp").substr(5,10)&&console.log("WebP not supported - try another export format"),oe.call(this,Ae),this.quality=Ae.quality/100||.8,this.extension=".webm",this.mimeType="video/webm",this.baseFilename=this.filename,this.frames=[],this.part=1,this.videoWriter=new g({quality:this.quality,fileWriter:null,fd:null,frameRate:Ae.framerate})}function je(Ae){oe.call(this,Ae),Ae.quality=Ae.quality/100||.8,this.encoder=new FFMpegServer.Video(Ae),this.encoder.on("process",function(){this.emit("process")}.bind(this)),this.encoder.on("finished",function(Ue,qe){var Mt=this.callback;Mt&&(this.callback=void 0,Mt(Ue,qe))}.bind(this)),this.encoder.on("progress",function(Ue){this.settings.onProgress&&this.settings.onProgress(Ue)}.bind(this)),this.encoder.on("error",function(Ue){alert(JSON.stringify(Ue,null,2))}.bind(this))}function de(Ae){oe.call(this,Ae),this.framerate=this.settings.framerate,this.type="video/webm",this.extension=".webm",this.stream=null,this.mediaRecorder=null,this.chunks=[]}function Be(Ae){oe.call(this,Ae),Ae.quality=31-(30*Ae.quality/100||10),Ae.workers=Ae.workers||4,this.extension=".gif",this.mimeType="image/gif",this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.sizeSet=!1,this.encoder=new f({workers:Ae.workers,quality:Ae.quality,workerScript:Ae.workersPath}),this.encoder.on("progress",function(Ue){this.settings.onProgress&&this.settings.onProgress(Ue)}.bind(this)),this.encoder.on("finished",function(Ue){var qe=this.callback;qe&&(this.callback=void 0,qe(Ue))}.bind(this))}function ee(Ae){var Mt,zt,Ce,Le,Yt,Bt,Ct,Ue=Ae||{},Ne=[],Wt=[],En=0,rn=0,hi=[],ii=!1,Ki={};Ue.framerate=Ue.framerate||60,Ue.motionBlurFrames=2*(Ue.motionBlurFrames||1),Mt=Ue.verbose||!1,Ue.step=1e3/Ue.framerate,Ue.timeLimit=Ue.timeLimit||0,Ue.frameLimit=Ue.frameLimit||0,Ue.startTime=Ue.startTime||0;var Sn=document.createElement("div");Sn.style.position="absolute",Sn.style.left=Sn.style.top=0,Sn.style.backgroundColor="black",Sn.style.fontFamily="monospace",Sn.style.fontSize="11px",Sn.style.padding="5px",Sn.style.color="red",Sn.style.zIndex=1e5,Ue.display&&document.body.appendChild(Sn);var Re,le,Q=document.createElement("canvas"),vt=Q.getContext("2d");ji("Step is set to "+Ue.step+"ms");var me={gif:Be,webm:ge,ffmpegserver:je,png:ae,jpg:pe,"webm-mediarecorder":de},Te=me[Ue.format];if(!Te)throw"Error: Incorrect or missing format: Valid formats are "+Object.keys(me).join(", ");if((Ct=new Te(Ue)).step=Bt,Ct.on("process",Li),Ct.on("progress",function pi(on){!function _r(on){var pn=Ki[on];pn&&pn.apply(null,Array.prototype.slice.call(arguments,1))}("progress",on)}),"performance"in window||(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},!("now"in window.performance)){var tt=Date.now();performance.timing&&performance.timing.navigationStart&&(tt=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-tt}}var Xe=window.setTimeout,Ve=window.setInterval,ut=window.clearInterval,Rt=window.clearTimeout,Dt=window.requestAnimationFrame,xt=window.Date.now,On=window.performance.now,Cn=window.Date.prototype.getTime,Vi=[];function dt(){ii=!1,Ct.stop(),function At(){ji("Capturer stop"),window.setTimeout=Xe,window.setInterval=Ve,window.clearInterval=ut,window.clearTimeout=Rt,window.requestAnimationFrame=Dt,window.Date.prototype.getTime=Cn,window.Date.now=xt,window.performance.now=On}()}function Tt(on,pn){Xe(on,0,pn)}function Bt(){Tt(Li)}function Li(){var pn=(En+rn/Ue.motionBlurFrames)*(1e3/Ue.framerate);zt=Ce+pn,Le=Yt+pn,Vi.forEach(function(Lr){Lr._hookedTime=pn/1e3}),function ht(){var on=En/Ue.framerate;(Ue.frameLimit&&En>=Ue.frameLimit||Ue.timeLimit&&on>=Ue.timeLimit)&&(dt(),zn());var pn=new Date(null);pn.setSeconds(on),Sn.textContent=Ue.motionBlurFrames>2?"CCapture "+Ue.format+" | "+En+" frames ("+rn+" inter) | "+pn.toISOString().substr(11,8):"CCapture "+Ue.format+" | "+En+" frames | "+pn.toISOString().substr(11,8)}(),ji("Frame: "+En+" "+rn);for(var Jt=0;Jt<Ne.length;Jt++)if(zt>=Ne[Jt].triggerTime){Tt(Ne[Jt].callback),Ne.splice(Jt,1);continue}for(Jt=0;Jt<Wt.length;Jt++)if(zt>=Wt[Jt].triggerTime){Tt(Wt[Jt].callback),Wt[Jt].triggerTime+=Wt[Jt].time;continue}hi.forEach(function(Lr){Tt(Lr,zt-K)}),hi=[]}function zn(on){on||(on=function(pn){return h(pn,Ct.filename+Ct.extension,Ct.mimeType),!1}),Ct.save(on)}function ji(on){Mt&&console.log(on)}return{start:function we(){(function Yr(){function on(){return this._hooked||(this._hooked=!0,this._hookedTime=this.currentTime||0,this.pause(),Vi.push(this)),this._hookedTime+Ue.startTime}ji("Capturer start"),Ce=window.Date.now(),zt=Ce+Ue.startTime,Yt=window.performance.now(),Le=Yt+Ue.startTime,window.Date.prototype.getTime=function(){return zt},window.Date.now=function(){return zt},window.setTimeout=function(pn,Jt){var Lr={callback:pn,time:Jt,triggerTime:zt+Jt};return Ne.push(Lr),ji("Timeout set to "+Lr.time),Lr},window.clearTimeout=function(pn){for(var Jt=0;Jt<Ne.length;Jt++)if(Ne[Jt]==pn){Ne.splice(Jt,1),ji("Timeout cleared");continue}},window.setInterval=function(pn,Jt){var Lr={callback:pn,time:Jt,triggerTime:zt+Jt};return Wt.push(Lr),ji("Interval set to "+Lr.time),Lr},window.clearInterval=function(pn){return ji("clear Interval"),null},window.requestAnimationFrame=function(pn){hi.push(pn)},window.performance.now=function(){return Le};try{Object.defineProperty(HTMLVideoElement.prototype,"currentTime",{get:on}),Object.defineProperty(HTMLAudioElement.prototype,"currentTime",{get:on})}catch(pn){ji(pn)}})(),Ct.start(),ii=!0},capture:function bn(on){ii&&(Ue.motionBlurFrames>2?(function Ot(on){(Q.width!==on.width||Q.height!==on.height)&&(Q.width=on.width,Q.height=on.height,Re=new Uint16Array(Q.height*Q.width*4),vt.fillStyle="#0",vt.fillRect(0,0,Q.width,Q.height))}(on),function Un(on){vt.drawImage(on,0,0),le=vt.getImageData(0,0,Q.width,Q.height);for(var pn=0;pn<Re.length;pn+=4)Re[pn]+=le.data[pn],Re[pn+1]+=le.data[pn+1],Re[pn+2]+=le.data[pn+2];rn++}(on),rn>=.5*Ue.motionBlurFrames?function ri(){for(var on=le.data,pn=0;pn<Re.length;pn+=4)on[pn]=2*Re[pn]/Ue.motionBlurFrames,on[pn+1]=2*Re[pn+1]/Ue.motionBlurFrames,on[pn+2]=2*Re[pn+2]/Ue.motionBlurFrames;for(vt.putImageData(le,0,0),Ct.add(Q),En++,rn=0,ji("Full MB Frame! "+En+" "+zt),pn=0;pn<Re.length;pn+=4)Re[pn]=0,Re[pn+1]=0,Re[pn+2]=0;gc()}():Bt()):(Ct.add(on),ji("Full Frame! "+ ++En)))},stop:dt,save:zn,on:function Ui(on,pn){Ki[on]=pn}}}oe.prototype.start=function(){},oe.prototype.stop=function(){},oe.prototype.add=function(){},oe.prototype.save=function(){},oe.prototype.dispose=function(){},oe.prototype.safeToProceed=function(){return!0},oe.prototype.step=function(){console.log("Step not set!")},(Z.prototype=Object.create(oe.prototype)).start=function(){this.dispose()},Z.prototype.add=function(Ae){var Ue=new FileReader;Ue.onload=function(){this.tape.append(W(this.count)+this.fileExtension,new Uint8Array(Ue.result)),this.count++,this.step()}.bind(this),Ue.readAsArrayBuffer(Ae)},Z.prototype.save=function(Ae){Ae(this.tape.save())},Z.prototype.dispose=function(){this.tape=new l,this.count=0},(ae.prototype=Object.create(Z.prototype)).add=function(Ae){Ae.toBlob(function(Ue){Z.prototype.add.call(this,Ue)}.bind(this),this.type)},(pe.prototype=Object.create(Z.prototype)).add=function(Ae){Ae.toBlob(function(Ue){Z.prototype.add.call(this,Ue)}.bind(this),this.type,this.quality)},(ge.prototype=Object.create(oe.prototype)).start=function(Ae){this.dispose()},ge.prototype.add=function(Ae){this.videoWriter.addFrame(Ae),this.settings.autoSaveTime>0&&this.frames.length/this.settings.framerate>=this.settings.autoSaveTime?this.save(function(Ue){this.filename=this.baseFilename+"-part-"+W(this.part),h(Ue,this.filename+this.extension,this.mimeType),this.dispose(),this.part++,this.filename=this.baseFilename+"-part-"+W(this.part),this.step()}.bind(this)):this.step()},ge.prototype.save=function(Ae){this.videoWriter.complete().then(Ae)},ge.prototype.dispose=function(Ae){this.frames=[]},(je.prototype=Object.create(oe.prototype)).start=function(){this.encoder.start(this.settings)},je.prototype.add=function(Ae){this.encoder.add(Ae)},je.prototype.save=function(Ae){this.callback=Ae,this.encoder.end()},je.prototype.safeToProceed=function(){return this.encoder.safeToProceed()},(de.prototype=Object.create(oe.prototype)).add=function(Ae){this.stream||(this.stream=Ae.captureStream(this.framerate),this.mediaRecorder=new MediaRecorder(this.stream),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=function(Ue){this.chunks.push(Ue.data)}.bind(this)),this.step()},de.prototype.save=function(Ae){this.mediaRecorder.onstop=function(Ue){var qe=new Blob(this.chunks,{type:"video/webm"});this.chunks=[],Ae(qe)}.bind(this),this.mediaRecorder.stop()},(Be.prototype=Object.create(oe.prototype)).add=function(Ae){this.sizeSet||(this.encoder.setOption("width",Ae.width),this.encoder.setOption("height",Ae.height),this.sizeSet=!0),this.canvas.width=Ae.width,this.canvas.height=Ae.height,this.ctx.drawImage(Ae,0,0),this.encoder.addFrame(this.ctx,{copy:!0,delay:this.settings.step}),this.step()},Be.prototype.save=function(Ae){this.callback=Ae,this.encoder.render()},(N||U||{}).CCapture=ee,void 0!==(u=function(){return ee}.call(w,_,w,C))&&(C.exports=u)}()},173:C=>{typeof C.exports<"u"&&(C.exports=function w(_,u,l){var B,U,$,h=window,f="application/octet-stream",g=l||f,b=_,x=document,A=x.createElement("a"),k=function(K){return String(K)},T=h.Blob||h.MozBlob||h.WebKitBlob||k,M=h.MSBlobBuilder||h.WebKitBlobBuilder||h.BlobBuilder,P=u||"download";if("true"===String(this)&&(g=(b=[b,g])[0],b=b[1]),String(b).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(function G(K){for(var X=K.split(/[:;,]/),oe=X[1],ae=("base64"==X[2]?atob:decodeURIComponent)(X.pop()),pe=ae.length,ge=0,je=new Uint8Array(pe);ge<pe;++ge)je[ge]=ae.charCodeAt(ge);return new T([je],{type:oe})}(b),P):W(b);try{B=b instanceof T?b:new T([b],{type:g})}catch{M&&((U=new M).append([b]),B=U.getBlob(g))}function W(K,X){if("download"in A)return A.href=K,A.setAttribute("download",P),A.innerHTML="downloading...",A.style.display="none",x.body.appendChild(A),setTimeout(function(){A.click(),x.body.removeChild(A),!0===X&&setTimeout(function(){h.URL.revokeObjectURL(A.href)},250)},66),!0;var oe=x.createElement("iframe");x.body.appendChild(oe),X||(K="data:"+K.replace(/^data:([\w\/\-\+]+)/,f)),oe.src=K,setTimeout(function(){x.body.removeChild(oe)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(B,P);if(h.URL)W(h.URL.createObjectURL(B),!0);else{if("string"==typeof B||B.constructor===k)try{return W("data:"+g+";base64,"+h.btoa(B))}catch{return W("data:"+g+","+encodeURIComponent(B))}($=new FileReader).onload=function(K){W(this.result)},$.readAsDataURL(B)}return!0})},769:C=>{C.exports=function(){return function l(h,f,g){function b(k,T){if(!f[k]){if(!h[k]){if(x)return x(k,!0);var P=new Error("Cannot find module '"+k+"'");throw P.code="MODULE_NOT_FOUND",P}var B=f[k]={exports:{}};h[k][0].call(B.exports,function(U){return b(h[k][1][U]||U)},B,B.exports,l,h,f,g)}return f[k].exports}for(var x=void 0,A=0;A<g.length;A++)b(g[A]);return b}}()({1:[function(l,h,f){function g(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function b(T){return"function"==typeof T}function A(T){return"object"==typeof T&&null!==T}function k(T){return void 0===T}h.exports=g,g.EventEmitter=g,g.prototype._events=void 0,g.prototype._maxListeners=void 0,g.defaultMaxListeners=10,g.prototype.setMaxListeners=function(T){if(!function x(T){return"number"==typeof T}(T)||T<0||isNaN(T))throw TypeError("n must be a positive number");return this._maxListeners=T,this},g.prototype.emit=function(T){var M,P,B,U,N,$;if(this._events||(this._events={}),"error"===T&&(!this._events.error||A(this._events.error)&&!this._events.error.length)){if((M=arguments[1])instanceof Error)throw M;var G=new Error('Uncaught, unspecified "error" event. ('+M+")");throw G.context=M,G}if(k(P=this._events[T]))return!1;if(b(P))switch(arguments.length){case 1:P.call(this);break;case 2:P.call(this,arguments[1]);break;case 3:P.call(this,arguments[1],arguments[2]);break;default:U=Array.prototype.slice.call(arguments,1),P.apply(this,U)}else if(A(P))for(U=Array.prototype.slice.call(arguments,1),B=($=P.slice()).length,N=0;N<B;N++)$[N].apply(this,U);return!0},g.prototype.on=g.prototype.addListener=function(T,M){var P;if(!b(M))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",T,b(M.listener)?M.listener:M),this._events[T]?A(this._events[T])?this._events[T].push(M):this._events[T]=[this._events[T],M]:this._events[T]=M,A(this._events[T])&&!this._events[T].warned&&(P=k(this._maxListeners)?g.defaultMaxListeners:this._maxListeners)&&P>0&&this._events[T].length>P&&(this._events[T].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[T].length),"function"==typeof console.trace&&console.trace()),this},g.prototype.once=function(T,M){if(!b(M))throw TypeError("listener must be a function");var P=!1;function B(){this.removeListener(T,B),P||(P=!0,M.apply(this,arguments))}return B.listener=M,this.on(T,B),this},g.prototype.removeListener=function(T,M){var P,B,U,N;if(!b(M))throw TypeError("listener must be a function");if(!this._events||!this._events[T])return this;if(U=(P=this._events[T]).length,B=-1,P===M||b(P.listener)&&P.listener===M)delete this._events[T],this._events.removeListener&&this.emit("removeListener",T,M);else if(A(P)){for(N=U;N-- >0;)if(P[N]===M||P[N].listener&&P[N].listener===M){B=N;break}if(B<0)return this;1===P.length?(P.length=0,delete this._events[T]):P.splice(B,1),this._events.removeListener&&this.emit("removeListener",T,M)}return this},g.prototype.removeAllListeners=function(T){var M,P;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[T]&&delete this._events[T],this;if(0===arguments.length){for(M in this._events)"removeListener"!==M&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events={},this}if(b(P=this._events[T]))this.removeListener(T,P);else if(P)for(;P.length;)this.removeListener(T,P[P.length-1]);return delete this._events[T],this},g.prototype.listeners=function(T){return this._events&&this._events[T]?b(this._events[T])?[this._events[T]]:this._events[T].slice():[]},g.prototype.listenerCount=function(T){if(this._events){var M=this._events[T];if(b(M))return 1;if(M)return M.length}return 0},g.listenerCount=function(T,M){return T.listenerCount(M)}},{}],2:[function(l,h,f){var g=l("./TypedNeuQuant.js"),b=l("./LZWEncoder.js");function x(){this.page=-1,this.pages=[],this.newPage()}x.pageSize=4096,x.charMap={};for(var A=0;A<256;A++)x.charMap[A]=String.fromCharCode(A);function k(T,M){this.width=~~T,this.height=~~M,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new x}x.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(x.pageSize),this.cursor=0},x.prototype.getData=function(){for(var T="",M=0;M<this.pages.length;M++)for(var P=0;P<x.pageSize;P++)T+=x.charMap[this.pages[M][P]];return T},x.prototype.writeByte=function(T){this.cursor>=x.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=T},x.prototype.writeUTFBytes=function(T){for(var M=T.length,P=0;P<M;P++)this.writeByte(T.charCodeAt(P))},x.prototype.writeBytes=function(T,M,P){for(var B=P||T.length,U=M||0;U<B;U++)this.writeByte(T[U])},k.prototype.setDelay=function(T){this.delay=Math.round(T/10)},k.prototype.setFrameRate=function(T){this.delay=Math.round(100/T)},k.prototype.setDispose=function(T){T>=0&&(this.dispose=T)},k.prototype.setRepeat=function(T){this.repeat=T},k.prototype.setTransparent=function(T){this.transparent=T},k.prototype.addFrame=function(T){this.image=T,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1},k.prototype.finish=function(){this.out.writeByte(59)},k.prototype.setQuality=function(T){T<1&&(T=1),this.sample=T},k.prototype.setDither=function(T){!0===T&&(T="FloydSteinberg"),this.dither=T},k.prototype.setGlobalPalette=function(T){this.globalPalette=T},k.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},k.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},k.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new g(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},k.prototype.indexPixels=function(T){var M=this.pixels.length/3;this.indexedPixels=new Uint8Array(M);for(var P=0,B=0;B<M;B++){var U=this.findClosestRGB(255&this.pixels[P++],255&this.pixels[P++],255&this.pixels[P++]);this.usedEntry[U]=!0,this.indexedPixels[B]=U}},k.prototype.ditherPixels=function(T,M){var P={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!T||!P[T])throw"Unknown dithering kernel: "+T;var B=P[T],U=0,N=this.height,$=this.width,G=this.pixels,W=M?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var K=0;K<N;K++){M&&(W*=-1);for(var X=1==W?0:$-1,oe=1==W?$:0;X!==oe;X+=W){var Z=3*(U=K*$+X),ae=G[Z],pe=G[Z+1],ge=G[Z+2];Z=this.findClosestRGB(ae,pe,ge),this.usedEntry[Z]=!0,this.indexedPixels[U]=Z;for(var ee=ae-this.colorTab[Z*=3],Ae=pe-this.colorTab[Z+1],Ue=ge-this.colorTab[Z+2],qe=1==W?0:B.length-1,Mt=1==W?B.length:0;qe!==Mt;qe+=W){var gt=B[qe][1],zt=B[qe][2];if(gt+X>=0&&gt+X<$&&zt+K>=0&&zt+K<N){var Ce=B[qe][0];Z=U+gt+zt*$,G[Z*=3]=Math.max(0,Math.min(255,G[Z]+ee*Ce)),G[Z+1]=Math.max(0,Math.min(255,G[Z+1]+Ae*Ce)),G[Z+2]=Math.max(0,Math.min(255,G[Z+2]+Ue*Ce))}}}}},k.prototype.findClosest=function(T,M){return this.findClosestRGB((16711680&T)>>16,(65280&T)>>8,255&T,M)},k.prototype.findClosestRGB=function(T,M,P,B){if(null===this.colorTab)return-1;if(this.neuQuant&&!B)return this.neuQuant.lookupRGB(T,M,P);for(var N=0,$=16777216,G=this.colorTab.length,W=0,K=0;W<G;K++){var X=T-(255&this.colorTab[W++]),oe=M-(255&this.colorTab[W++]),Z=P-(255&this.colorTab[W++]),ae=X*X+oe*oe+Z*Z;(!B||this.usedEntry[K])&&ae<$&&($=ae,N=K)}return N},k.prototype.getImagePixels=function(){var T=this.width,M=this.height;this.pixels=new Uint8Array(T*M*3);for(var P=this.image,B=0,U=0,N=0;N<M;N++)for(var $=0;$<T;$++)this.pixels[U++]=P[B++],this.pixels[U++]=P[B++],this.pixels[U++]=P[B++],B++},k.prototype.writeGraphicCtrlExt=function(){var T,M;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(T=0,M=0):(T=1,M=2),this.dispose>=0&&(M=7&this.dispose),this.out.writeByte((M<<=2)|T),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},k.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(this.firstFrame||this.globalPalette?0:128|this.palSize)},k.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},k.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},k.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var T=768-this.colorTab.length,M=0;M<T;M++)this.out.writeByte(0)},k.prototype.writeShort=function(T){this.out.writeByte(255&T),this.out.writeByte(T>>8&255)},k.prototype.writePixels=function(){new b(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},k.prototype.stream=function(){return this.out},h.exports=k},{"./LZWEncoder.js":3,"./TypedNeuQuant.js":4}],3:[function(l,h,f){var x=5003,A=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];h.exports=function k(T,M,P,B){var W,X,Z,pe,ge,je,U=Math.max(2,B),N=new Uint8Array(256),$=new Int32Array(x),G=new Int32Array(x),K=0,oe=0,ae=!1;function de(Ce,Le){N[X++]=Ce,X>=254&&qe(Le)}function Be(Ce){ee(x),oe=ge+2,ae=!0,zt(ge,Ce)}function ee(Ce){for(var Le=0;Le<Ce;++Le)$[Le]=-1}function qe(Ce){X>0&&(Ce.writeByte(X),Ce.writeBytes(N,0,X),X=0)}function Mt(Ce){return(1<<Ce)-1}function gt(){return 0===remaining?-1:(--remaining,255&P[curPixel++])}function zt(Ce,Le){for(W&=A[K],K>0?W|=Ce<<K:W=Ce,K+=n_bits;K>=8;)de(255&W,Le),W>>=8,K-=8;if((oe>Z||ae)&&(ae?(Z=Mt(n_bits=pe),ae=!1):(++n_bits,Z=12==n_bits?4096:Mt(n_bits))),Ce==je){for(;K>0;)de(255&W,Le),W>>=8,K-=8;qe(Le)}}this.encode=function Ue(Ce){Ce.writeByte(U),remaining=T*M,curPixel=0,function Ae(Ce,Le){var Yt,Ct,Ne,Wt,En,dn;for(pe=Ce,ae=!1,n_bits=pe,Z=Mt(n_bits),je=1+(ge=1<<Ce-1),oe=ge+2,X=0,Wt=gt(),dn=0,Yt=x;Yt<65536;Yt*=2)++dn;dn=8-dn,ee(x),zt(ge,Le);e:for(;-1!=(Ct=gt());)if($[Ne=Ct<<dn^Wt]!==(Yt=(Ct<<12)+Wt)){if($[Ne]>=0){En=5003-Ne,0===Ne&&(En=1);do{if((Ne-=En)<0&&(Ne+=5003),$[Ne]===Yt){Wt=G[Ne];continue e}}while($[Ne]>=0)}zt(Wt,Le),Wt=Ct,oe<4096?(G[Ne]=oe++,$[Ne]=Yt):Be(Le)}else Wt=G[Ne];zt(Wt,Le),zt(je,Le)}(U+1,Ce),Ce.writeByte(0)}}},{}],4:[function(l,h,f){var b=256,Z=1024,de=1<<18;h.exports=function Mt(gt,zt){var Ce,Le,Yt,Ct,Ne;function rn(Re,le,me,Te,tt){Ce[le][0]-=Re*(Ce[le][0]-me)/Z,Ce[le][1]-=Re*(Ce[le][1]-Te)/Z,Ce[le][2]-=Re*(Ce[le][2]-tt)/Z}function dn(Re,le,me,Te,tt){for(var xt,On,Xe=Math.abs(le-Re),Ve=Math.min(le+Re,b),ut=le+1,Rt=le-1,Dt=1;ut<Ve||Rt>Xe;)On=Ne[Dt++],ut<Ve&&((xt=Ce[ut++])[0]-=On*(xt[0]-me)/de,xt[1]-=On*(xt[1]-Te)/de,xt[2]-=On*(xt[2]-tt)/de),Rt>Xe&&((xt=Ce[Rt--])[0]-=On*(xt[0]-me)/de,xt[1]-=On*(xt[1]-Te)/de,xt[2]-=On*(xt[2]-tt)/de)}function hi(Re,le,me){var ut,Rt,Dt,xt,On,Te=2147483647,tt=Te,Xe=-1,Ve=Xe;for(ut=0;ut<b;ut++)Rt=Ce[ut],(Dt=Math.abs(Rt[0]-Re)+Math.abs(Rt[1]-le)+Math.abs(Rt[2]-me))<Te&&(Te=Dt,Xe=ut),(xt=Dt-(Yt[ut]>>12))<tt&&(tt=xt,Ve=ut),Ct[ut]-=On=Ct[ut]>>10,Yt[ut]+=On<<10;return Ct[Xe]+=64,Yt[Xe]-=65536,Ve}this.buildColormap=function Q(){(function Wt(){var Re,le;for(Ce=[],Le=new Int32Array(256),Yt=new Int32Array(b),Ct=new Int32Array(b),Ne=new Int32Array(32),Re=0;Re<b;Re++)le=(Re<<12)/b,Ce[Re]=new Float64Array([le,le,le,0]),Ct[Re]=256,Yt[Re]=0})(),function Sn(){var Re,Rt,le=gt.length,me=30+(zt-1)/3,Te=le/(3*zt),tt=~~(Te/100),Xe=Z,Ve=2048,ut=Ve>>6;for(ut<=1&&(ut=0),Re=0;Re<ut;Re++)Ne[Re]=Xe*(256*(ut*ut-Re*Re)/(ut*ut));le<1509?(zt=1,Rt=3):Rt=le%499!=0?1497:le%491!=0?1473:le%487!=0?1461:1509;var Dt,xt,On,Cn,Vi=0;for(Re=0;Re<Te;)if(rn(Xe,Cn=hi(Dt=(255&gt[Vi])<<4,xt=(255&gt[Vi+1])<<4,On=(255&gt[Vi+2])<<4),Dt,xt,On),0!==ut&&dn(ut,Cn,Dt,xt,On),(Vi+=Rt)>=le&&(Vi-=le),0===tt&&(tt=1),++Re%tt==0)for(Xe-=Xe/me,(ut=(Ve-=Ve/30)>>6)<=1&&(ut=0),Cn=0;Cn<ut;Cn++)Ne[Cn]=Xe*(256*(ut*ut-Cn*Cn)/(ut*ut))}(),function En(){for(var Re=0;Re<b;Re++)Ce[Re][0]>>=4,Ce[Re][1]>>=4,Ce[Re][2]>>=4,Ce[Re][3]=Re}(),function ii(){var Re,le,me,Te,tt,Xe,Ve=0,ut=0;for(Re=0;Re<b;Re++){for(tt=Re,Xe=(me=Ce[Re])[1],le=Re+1;le<b;le++)(Te=Ce[le])[1]<Xe&&(tt=le,Xe=Te[1]);if(Te=Ce[tt],Re!=tt&&(le=Te[0],Te[0]=me[0],me[0]=le,le=Te[1],Te[1]=me[1],me[1]=le,le=Te[2],Te[2]=me[2],me[2]=le,le=Te[3],Te[3]=me[3],me[3]=le),Xe!=Ve){for(Le[Ve]=ut+Re>>1,le=Ve+1;le<Xe;le++)Le[le]=Re;Ve=Xe,ut=Re}}for(Le[Ve]=ut+255>>1,le=Ve+1;le<256;le++)Le[le]=255}()},this.getColormap=function vt(){for(var Re=[],le=[],me=0;me<b;me++)le[Ce[me][3]]=me;for(var Te=0,tt=0;tt<b;tt++){var Xe=le[tt];Re[Te++]=Ce[Xe][0],Re[Te++]=Ce[Xe][1],Re[Te++]=Ce[Xe][2]}return Re},this.lookupRGB=function Ki(Re,le,me){for(var Te,tt,Xe,Ve=1e3,ut=-1,Rt=Le[le],Dt=Rt-1;Rt<b||Dt>=0;)Rt<b&&((Xe=(tt=Ce[Rt])[1]-le)>=Ve?Rt=b:(Rt++,Xe<0&&(Xe=-Xe),(Te=tt[0]-Re)<0&&(Te=-Te),(Xe+=Te)<Ve&&((Te=tt[2]-me)<0&&(Te=-Te),(Xe+=Te)<Ve&&(Ve=Xe,ut=tt[3])))),Dt>=0&&((Xe=le-(tt=Ce[Dt])[1])>=Ve?Dt=-1:(Dt--,Xe<0&&(Xe=-Xe),(Te=tt[0]-Re)<0&&(Te=-Te),(Xe+=Te)<Ve&&((Te=tt[2]-me)<0&&(Te=-Te),(Xe+=Te)<Ve&&(Ve=Xe,ut=tt[3]))));return ut}}},{}],5:[function(l,h,f){var g,b,x,A,k;k=navigator.userAgent.toLowerCase(),A=navigator.platform.toLowerCase(),x="ie"===(g=k.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(b={name:"version"===g[1]?g[3]:g[1],version:x||parseFloat("opera"===g[1]&&g[4]?g[4]:g[2]),platform:{name:k.match(/ip(?:ad|od|hone)/)?"ios":(k.match(/(?:webos|android)/)||A.match(/mac|win|linux/)||["other"])[0]}})[b.name]=!0,b[b.name+parseInt(b.version,10)]=!0,b.platform[b.platform.name]=!0,h.exports=b},{}],6:[function(l,h,f){var g,A,M={}.hasOwnProperty,P=[].indexOf||function(U){for(var N=0,$=this.length;N<$;N++)if(N in this&&this[N]===U)return N;return-1},B=[].slice;g=l("events").EventEmitter,A=l("./browser.coffee"),l("./GIFEncoder.js"),l("./gif.worker.coffee"),h.exports=function(U){var N,$;function G(W){var K,X;for(X in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(W),N)null==(K=this.options)[X]&&(K[X]=N[X])}return function(U,N){for(var $ in N)M.call(N,$)&&(U[$]=N[$]);function G(){this.constructor=U}G.prototype=N.prototype,U.prototype=new G,U.__super__=N.prototype}(G,U),N={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},$={delay:500,copy:!1,dispose:-1},G.prototype.setOption=function(W,K){if(this.options[W]=K,null!=this._canvas&&("width"===W||"height"===W))return this._canvas[W]=K},G.prototype.setOptions=function(W){var K,X;for(K in X=[],W)M.call(W,K)&&X.push(this.setOption(K,W[K]));return X},G.prototype.addFrame=function(W,K){var X,oe;for(oe in null==K&&(K={}),(X={}).transparent=this.options.transparent,$)X[oe]=K[oe]||$[oe];if(null==this.options.width&&this.setOption("width",W.width),null==this.options.height&&this.setOption("height",W.height),typeof ImageData<"u"&&null!==ImageData&&W instanceof ImageData)X.data=W.data;else if(typeof CanvasRenderingContext2D<"u"&&null!==CanvasRenderingContext2D&&W instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&null!==WebGLRenderingContext&&W instanceof WebGLRenderingContext)K.copy?X.data=this.getContextData(W):X.context=W;else{if(null==W.childNodes)throw new Error("Invalid image");K.copy?X.data=this.getImageData(W):X.image=W}return this.frames.push(X)},G.prototype.render=function(){var K,X,oe;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var Z,ae,pe;for(pe=[],Z=0,ae=this.frames.length;0<=ae?Z<ae:Z>ae;0<=ae?++Z:--Z)pe.push(null);return pe}.call(this),X=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(K=0,oe=X;0<=oe?K<oe:K>oe;0<=oe?++K:--K)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},G.prototype.abort=function(){for(var W;null!=(W=this.activeWorkers.shift());)this.log("killing active worker"),W.terminate();return this.running=!1,this.emit("abort")},G.prototype.spawnWorkers=function(){var K,X,oe;return K=Math.min(this.options.workers,this.frames.length),function(){oe=[];for(var Z=X=this.freeWorkers.length;X<=K?Z<K:Z>K;X<=K?Z++:Z--)oe.push(Z);return oe}.apply(this).forEach(function(Z){return function(ae){var pe;return Z.log("spawning worker "+ae),(pe=new Worker(Z.options.workerScript)).onmessage=function(ge){return Z.activeWorkers.splice(Z.activeWorkers.indexOf(pe),1),Z.freeWorkers.push(pe),Z.frameFinished(ge.data)},Z.freeWorkers.push(pe)}}(this)),K},G.prototype.frameFinished=function(W){var X,oe;if(this.log("frame "+W.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[W.index]=W,!0===this.options.globalPalette&&(this.options.globalPalette=W.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(X=1,oe=this.freeWorkers.length;1<=oe?X<oe:X>oe;1<=oe?++X:--X)this.renderNextFrame();return P.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},G.prototype.finishRendering=function(){var W,K,X,oe,Z,ae,pe,ge,je,de,Be,ee,Ue,qe,Mt;for(ge=0,Z=0,je=(Ue=this.imageParts).length;Z<je;Z++)ge+=((K=Ue[Z]).data.length-1)*K.pageSize+K.cursor;for(ge+=K.pageSize-K.cursor,this.log("rendering finished - filesize "+Math.round(ge/1e3)+"kb"),W=new Uint8Array(ge),ee=0,ae=0,de=(qe=this.imageParts).length;ae<de;ae++)for(X=pe=0,Be=(Mt=(K=qe[ae]).data).length;pe<Be;X=++pe)W.set(Mt[X],ee),ee+=X===K.data.length-1?K.cursor:K.pageSize;return oe=new Blob([W],{type:"image/gif"}),this.emit("finished",oe,W)},G.prototype.renderNextFrame=function(){var W,K,X;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return W=this.frames[this.nextFrame++],X=this.freeWorkers.shift(),K=this.getTask(W),this.log("starting frame "+(K.index+1)+" of "+this.frames.length),this.activeWorkers.push(X),X.postMessage(K)},G.prototype.getContextData=function(W){return W.getImageData(0,0,this.options.width,this.options.height).data},G.prototype.getImageData=function(W){var K;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(K=this._canvas.getContext("2d")).setFill=this.options.background,K.fillRect(0,0,this.options.width,this.options.height),K.drawImage(W,0,0),this.getContextData(K)},G.prototype.getTask=function(W){var K,X;if(X={index:K=this.frames.indexOf(W),last:K===this.frames.length-1,delay:W.delay,dispose:W.dispose,transparent:W.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===A.name},null!=W.data)X.data=W.data;else if(null!=W.context)X.data=this.getContextData(W.context);else{if(null==W.image)throw new Error("Invalid frame");X.data=this.getImageData(W.image)}return X},G.prototype.log=function(){var W;if(W=1<=arguments.length?B.call(arguments,0):[],this.options.debug)return console.log.apply(console,W)},G}(g)},{"./GIFEncoder.js":2,"./browser.coffee":5,"./gif.worker.coffee":7,events:1}],7:[function(l,h,f){var g,b;g=l("./GIFEncoder.js"),b=function(x){var A,T,M;return A=new g(x.width,x.height),0===x.index?A.writeHeader():A.firstFrame=!1,A.setTransparent(x.transparent),A.setDispose(x.dispose),A.setRepeat(x.repeat),A.setDelay(x.delay),A.setQuality(x.quality),A.setDither(x.dither),A.setGlobalPalette(x.globalPalette),A.addFrame(x.data),x.last&&A.finish(),!0===x.globalPalette&&(x.globalPalette=A.getGlobalPalette()),T=A.stream(),x.data=T.pages,x.cursor=T.cursor,x.pageSize=T.constructor.pageSize,x.canTransfer?(M=function(){var P,B,U,N;for(N=[],P=0,B=(U=x.data).length;P<B;P++)N.push(U[P].buffer);return N}(),self.postMessage(x,M)):self.postMessage(x)},self.onmessage=function(x){return b(x.data)}},{"./GIFEncoder.js":2}]},{},[6])(6)},846:C=>{(function(){"use strict";var w=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];function _(g){var b,x=new Uint8Array(g);for(b=0;b<g;b+=1)x[b]=0;return x}window.utils={},window.utils.clean=_,window.utils.pad=function l(g,b,x){return g=g.toString(x||8),"000000000000".substr(g.length+12-b)+g},window.utils.extend=function u(g,b,x,A){var T=_((parseInt((b+x)/A)+1)*A);return T.set(g),T},window.utils.stringToUint8=function h(g,b,x){var A,k;for(b=b||_(g.length),x=x||0,A=0,k=g.length;A<k;A+=1)b[x]=g.charCodeAt(A),x+=1;return b},window.utils.uint8ToBase64=function f(g){var b,T,P,A="";for(b=0,T=g.length-g.length%3;b<T;b+=3)A+=w[(P=(g[b]<<16)+(g[b+1]<<8)+g[b+2])>>18&63]+w[P>>12&63]+w[P>>6&63]+w[63&P];switch(A.length%4){case 1:A+="=";break;case 2:A+="=="}return A}})(),function(){"use strict";var _,w=window.utils;_=[{field:"fileName",length:100},{field:"fileMode",length:8},{field:"uid",length:8},{field:"gid",length:8},{field:"fileSize",length:12},{field:"mtime",length:12},{field:"checksum",length:8},{field:"type",length:1},{field:"linkName",length:100},{field:"ustar",length:8},{field:"owner",length:32},{field:"group",length:32},{field:"majorNumber",length:8},{field:"minorNumber",length:8},{field:"filenamePrefix",length:155},{field:"padding",length:12}],window.header={},window.header.structure=_,window.header.format=function u(l,h){var f=w.clean(512),g=0;return _.forEach(function(b){var A,k,x=l[b.field]||"";for(A=0,k=x.length;A<k;A+=1)f[g]=x.charCodeAt(A),g+=1;g+=b.length-A}),"function"==typeof h?h(f,g):f}}(),function(){"use strict";var l,w=window.header,_=window.utils,u=512;function h(f){this.written=0,this.out=_.clean(l=(f||20)*u),this.blocks=[],this.length=0}h.prototype.append=function(f,g,b,x){var A,k,T,M,P,B,U;if("string"==typeof g)g=_.stringToUint8(g);else if(g.constructor!==Uint8Array.prototype.constructor)throw"Invalid input type. You gave me: "+g.constructor.toString().match(/function\s*([$A-Za-z_][0-9A-Za-z_]*)\s*\(/)[1];"function"==typeof b&&(b={}),T=(b=b||{}).mode||4095&parseInt("777",8),M=b.mtime||Math.floor(+new Date/1e3),P=b.uid||0,B=b.gid||0,A={fileName:f,fileMode:_.pad(T,7),uid:_.pad(P,7),gid:_.pad(B,7),fileSize:_.pad(g.length,11),mtime:_.pad(M,11),checksum:"        ",type:"0",ustar:"ustar  ",owner:b.owner||"",group:b.group||""},k=0,Object.keys(A).forEach(function(G){var W,X,K=A[G];for(W=0,X=K.length;W<X;W+=1)k+=K.charCodeAt(W)}),A.checksum=_.pad(k,6)+"\0 ",U=w.format(A);var N=Math.ceil(U.length/u)*u,$=Math.ceil(g.length/u)*u;this.blocks.push({header:U,input:g,headerLength:N,inputLength:$})},h.prototype.save=function(){var f=[],g=[],b=0,x=Math.pow(2,20),A=[];return this.blocks.forEach(function(k){b+k.headerLength+k.inputLength>x&&(g.push({blocks:A,length:b}),A=[],b=0),A.push(k),b+=k.headerLength+k.inputLength}),g.push({blocks:A,length:b}),g.forEach(function(k){var T=new Uint8Array(k.length),M=0;k.blocks.forEach(function(P){T.set(P.header,M),T.set(P.input,M+=P.headerLength),M+=P.inputLength}),f.push(T)}),f.push(new Uint8Array(2*u)),new Blob(f,{type:"octet/stream"})},h.prototype.clear=function(){this.written=0,this.out=_.clean(l)},typeof C.exports<"u"?C.exports=h:window.Tar=h}()},166:C=>{"use strict";var w=function(u){this.data=new Uint8Array(u),this.pos=0};w.prototype.seek=function(u){this.pos=u},w.prototype.writeBytes=function(u){for(var l=0;l<u.length;l++)this.data[this.pos++]=u[l]},w.prototype.writeByte=function(u){this.data[this.pos++]=u},w.prototype.writeU8=w.prototype.writeByte,w.prototype.writeU16BE=function(u){this.data[this.pos++]=u>>8,this.data[this.pos++]=u},w.prototype.writeDoubleBE=function(u){for(var l=new Uint8Array(new Float64Array([u]).buffer),h=l.length-1;h>=0;h--)this.writeByte(l[h])},w.prototype.writeFloatBE=function(u){for(var l=new Uint8Array(new Float32Array([u]).buffer),h=l.length-1;h>=0;h--)this.writeByte(l[h])},w.prototype.writeString=function(u){for(var l=0;l<u.length;l++)this.data[this.pos++]=u.charCodeAt(l)},w.prototype.writeEBMLVarIntWidth=function(u,l){switch(l){case 1:this.writeU8(128|u);break;case 2:this.writeU8(64|u>>8),this.writeU8(u);break;case 3:this.writeU8(32|u>>16),this.writeU8(u>>8),this.writeU8(u);break;case 4:this.writeU8(16|u>>24),this.writeU8(u>>16),this.writeU8(u>>8),this.writeU8(u);break;case 5:this.writeU8(8|u/4294967296&7),this.writeU8(u>>24),this.writeU8(u>>16),this.writeU8(u>>8),this.writeU8(u);break;default:throw new RuntimeException("Bad EBML VINT size "+l)}},w.prototype.measureEBMLVarInt=function(u){if(u<127)return 1;if(u<16383)return 2;if(u<2097151)return 3;if(u<268435455)return 4;if(u<34359738367)return 5;throw new RuntimeException("EBML VINT size not supported "+u)},w.prototype.writeEBMLVarInt=function(u){this.writeEBMLVarIntWidth(u,this.measureEBMLVarInt(u))},w.prototype.writeUnsignedIntBE=function(u,l){switch(void 0===l&&(l=this.measureUnsignedInt(u)),l){case 5:this.writeU8(Math.floor(u/4294967296));case 4:this.writeU8(u>>24);case 3:this.writeU8(u>>16);case 2:this.writeU8(u>>8);case 1:this.writeU8(u);break;default:throw new RuntimeException("Bad UINT size "+l)}},w.prototype.measureUnsignedInt=function(u){return u<256?1:u<65536?2:u<16777216?3:u<4294967296?4:5},w.prototype.getAsDataArray=function(){if(this.pos<this.data.byteLength)return this.data.subarray(0,this.pos);if(this.pos==this.data.byteLength)return this.data;throw"ArrayBufferDataStream's pos lies beyond end of buffer"};var u,_=function(u){return function(l){var h=[],f=Promise.resolve(),g=null;function x(T){return new Promise(function(M,P){var B=new FileReader;B.addEventListener("loadend",function(){M(B.result)}),B.readAsArrayBuffer(T)})}function A(T){return new Promise(function(M,P){T instanceof Uint8Array?M(T):T instanceof ArrayBuffer||ArrayBuffer.isView(T)?M(new Uint8Array(T)):T instanceof Blob?M(x(T).then(function(B){return new Uint8Array(B)})):M(x(new Blob([T])).then(function(B){return new Uint8Array(B)}))})}function k(T){var M=T.byteLength||T.length||T.size;if(!Number.isInteger(M))throw"Failed to determine size of element";return M}typeof FileWriter<"u"&&l instanceof FileWriter&&(g=l),this.pos=0,this.length=0,this.seek=function(T){if(T<0)throw"Offset may not be negative";if(isNaN(T))throw"Offset may not be NaN";if(T>this.length)throw"Seeking beyond the end of file is not allowed";this.pos=T},this.write=function(T){var M={offset:this.pos,data:T,length:k(T)},P=M.offset>=this.length;this.pos+=M.length,this.length=Math.max(this.length,this.pos),f=f.then(function(){if(g)return new Promise(function(N,$){g.onwriteend=N,g.seek(M.offset),g.write(new Blob([M.data]))});if(!P)for(var B=0;B<h.length;B++){var U=h[B];if(!(M.offset+M.length<=U.offset||M.offset>=U.offset+U.length)){if(M.offset<U.offset||M.offset+M.length>U.offset+U.length)throw new Error("Overwrite crosses blob boundaries");return M.offset==U.offset&&M.length==U.length?void(U.data=M.data):A(U.data).then(function(N){return U.data=N,A(M.data)}).then(function(N){M.data=N,U.data.set(M.data,M.offset-U.offset)})}}h.push(M)})},this.complete=function(T){return f=f.then(g?function(){return null}:function(){for(var M=[],P=0;P<h.length;P++)M.push(h[P].data);return new Blob(M,{mimeType:T})})}}}();u=function(l,h){function A(P){var B=P.indexOf("VP8 ");if(-1==B)throw"Failed to identify beginning of keyframe in WebP image";return P.substring(B+=8)}function k(P){this.value=P}function T(P){this.value=P}function M(P,B,U){if(Array.isArray(U))for(var N=0;N<U.length;N++)M(P,B,U[N]);else if("string"==typeof U)P.writeString(U);else if(U instanceof Uint8Array)P.writeBytes(U);else{if(!U.id)throw"Bad EBML datatype "+typeof U.data;var $,G,W;if(U.offset=P.pos+B,P.writeUnsignedIntBE(U.id),Array.isArray(U.data))-1===U.size?P.writeByte(255):($=P.pos,P.writeBytes([0,0,0,0])),U.dataOffset=(G=P.pos)+B,M(P,B,U.data),-1!==U.size&&(U.size=(W=P.pos)-G,P.seek($),P.writeEBMLVarIntWidth(U.size,4),P.seek(W));else if("string"==typeof U.data)P.writeEBMLVarInt(U.data.length),U.dataOffset=P.pos+B,P.writeString(U.data);else if("number"==typeof U.data)U.size||(U.size=P.measureUnsignedInt(U.data)),P.writeEBMLVarInt(U.size),U.dataOffset=P.pos+B,P.writeUnsignedIntBE(U.data,U.size);else if(U.data instanceof T)P.writeEBMLVarInt(8),U.dataOffset=P.pos+B,P.writeDoubleBE(U.data.value);else if(U.data instanceof k)P.writeEBMLVarInt(4),U.dataOffset=P.pos+B,P.writeFloatBE(U.data.value);else{if(!(U.data instanceof Uint8Array))throw"Bad EBML datatype "+typeof U.data;P.writeEBMLVarInt(U.data.byteLength),U.dataOffset=P.pos+B,P.writeBytes(U.data)}}}return function(P){var $,G,ae,ge,N=!1,W=[],K=0,X=0,Z={Cues:{id:new Uint8Array([28,83,187,107]),positionEBML:null},SegmentInfo:{id:new Uint8Array([21,73,169,102]),positionEBML:null},Tracks:{id:new Uint8Array([22,84,174,107]),positionEBML:null}},pe={id:17545,data:new T(0)},je=[],de=new h(P.fileWriter||P.fd);function Be(Ne){return Ne-ae.dataOffset}function Ue(Ne){var Wt=new l(4);if(!(Ne.trackNumber>0&&Ne.trackNumber<127))throw"TrackNumber must be > 0 and < 127";return Wt.writeEBMLVarInt(Ne.trackNumber),Wt.writeU16BE(Ne.timecode),Wt.writeByte(128),{id:163,data:[Wt.getAsDataArray(),Ne.frame]}}function zt(){if(0!=W.length){for(var Ne=0,Wt=0;Wt<W.length;Wt++)Ne+=W[Wt].frame.length;var En=new l(Ne+32*W.length),rn=function qe(Ne){return{id:524531317,data:[{id:231,data:Math.round(Ne.timecode)}]}}({timecode:Math.round(K)});for(Wt=0;Wt<W.length;Wt++)rn.data.push(Ue(W[Wt]));M(En,de.pos,rn),de.write(En.getAsDataArray()),function Mt(Ne,Wt,En){je.push({id:187,data:[{id:179,data:Wt},{id:183,data:[{id:247,data:Ne},{id:241,data:Be(En)}]}]})}(1,Math.round(K),rn.offset),W=[],K+=X,X=0}}this.addFrame=function(Ne){if(N){if(Ne.width!=$||Ne.height!=G)throw"Frame size differs from previous frames"}else $=Ne.width,G=Ne.height,function Ae(){ge=function ee(){var Ne={id:21420,size:5,data:0},Wt={id:290298740,data:[]};for(var En in Z){var rn=Z[En];rn.positionEBML=Object.create(Ne),Wt.data.push({id:19899,data:[{id:21419,data:rn.id},rn.positionEBML]})}return Wt}();var Wt={id:357149030,data:[{id:2807729,data:1e6},{id:19840,data:"webm-writer-js"},{id:22337,data:"webm-writer-js"},pe]},En={id:374648427,data:[{id:174,data:[{id:215,data:1},{id:29637,data:1},{id:156,data:0},{id:2274716,data:"und"},{id:134,data:"V_VP8"},{id:2459272,data:"VP8"},{id:131,data:1},{id:224,data:[{id:176,data:$},{id:186,data:G}]}]}]};ae={id:408125543,size:-1,data:[ge,Wt,En]};var rn=new l(256);M(rn,de.pos,[{id:440786851,data:[{id:17030,data:1},{id:17143,data:1},{id:17138,data:4},{id:17139,data:8},{id:17026,data:"webm"},{id:17031,data:2},{id:17029,data:2}]},ae]),de.write(rn.getAsDataArray()),Z.SegmentInfo.positionEBML.data=Be(Wt.offset),Z.Tracks.positionEBML.data=Be(En.offset)}(),N=!0;var Wt=function x(P,B){return function g(P){return!("string"!=typeof P||!P.match(/^data:image\/webp;base64,/i))&&window.atob(P.substring(23))}(P.toDataURL("image/webp",{quality:B}))}(Ne,{quality:P.quality});if(!Wt)throw"Couldn't decode WebP frame, does the browser support WebP?";!function Le(Ne){Ne.trackNumber=1,Ne.timecode=Math.round(X),W.push(Ne),(X+=Ne.duration)>=5e3&&zt()}({frame:A(Wt),duration:P.frameDuration})},this.complete=function(){return zt(),function gt(){var Ne={id:475249515,data:je},Wt=new l(16+32*je.length);M(Wt,de.pos,Ne),de.write(Wt.getAsDataArray()),Z.Cues.positionEBML.data=Be(Ne.offset)}(),function Yt(){var Ne=new l(ge.size),Wt=de.pos;M(Ne,ge.dataOffset,ge.data),de.seek(ge.dataOffset),de.write(Ne.getAsDataArray()),de.seek(Wt)}(),function Ct(){var Ne=new l(8),Wt=de.pos;Ne.writeDoubleBE(K),de.seek(pe.dataOffset),de.write(Ne.getAsDataArray()),de.seek(Wt)}(),de.complete("video/webm")},this.getWrittenSize=function(){return de.length},P=function f(P,B){var U={};return[P,B].forEach(function(N){for(var $ in N)Object.prototype.hasOwnProperty.call(N,$)&&(U[$]=N[$])}),U}({quality:.95,fileWriter:null,fd:null,frameDuration:null,frameRate:null},P||{}),function Ce(){if(!P.frameDuration){if(!P.frameRate)throw"Missing required frameDuration or frameRate setting";P.frameDuration=1e3/P.frameRate}}()}},typeof C.exports<"u"?C.exports=u(w,_):window.WebMWriter=u(w,_)},681:C=>{"use strict";C.exports=JSON.parse('{"_from":"@ffmpeg/ffmpeg","_id":"@ffmpeg/ffmpeg@0.10.1","_inBundle":false,"_integrity":"sha512-ChQkH7Rh57hmVo1LhfQFibWX/xqneolJKSwItwZdKPcLZuKigtYAYDIvB55pDfP17VtR1R77SxgkB2/UApB+Og==","_location":"/@ffmpeg/ffmpeg","_phantomChildren":{},"_requested":{"type":"tag","registry":true,"raw":"@ffmpeg/ffmpeg","name":"@ffmpeg/ffmpeg","escapedName":"@ffmpeg%2fffmpeg","scope":"@ffmpeg","rawSpec":"","saveSpec":null,"fetchSpec":"latest"},"_requiredBy":["#USER","/"],"_resolved":"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.10.1.tgz","_shasum":"3dacf3985de9c83a95fbf79fe709920cc009b00a","_spec":"@ffmpeg/ffmpeg","_where":"/Users/amandaghassaei/Projects/canvas-capture","author":{"name":"Jerome Wu","email":"jeromewus@gmail.com"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"bundleDependencies":false,"dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"deprecated":false,"description":"FFmpeg WebAssembly version","devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},"directories":{"example":"examples"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","keywords":["ffmpeg","WebAssembly","video"],"license":"MIT","main":"src/index.js","name":"@ffmpeg/ffmpeg","repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"scripts":{"build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","lint":"eslint src","prepublishOnly":"npm run build","start":"node scripts/server.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js"},"types":"src/index.d.ts","version":"0.10.1"}')}},V={};function S(C){var w=V[C];if(void 0!==w)return w.exports;var _=V[C]={id:C,loaded:!1,exports:{}};return L[C].call(_.exports,_,_.exports,S),_.loaded=!0,_.exports}S.d=(C,w)=>{for(var _ in w)S.o(w,_)&&!S.o(C,_)&&Object.defineProperty(C,_,{enumerable:!0,get:w[_]})},S.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),S.o=(C,w)=>Object.prototype.hasOwnProperty.call(C,w),S.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},S.nmd=C=>(C.paths=[],C.children||(C.children=[]),C);var O={};return(()=>{"use strict";var C=O;Object.defineProperty(C,"__esModule",{value:!0}),C.CanvasCapture=void 0;var w=S(914);C.CanvasCapture=w,C.default=w})(),O})()},964:(Ye,F,q)=>{"use strict";q.r(F),q.d(F,{InferenceSession:()=>A,Tensor:()=>b,env:()=>w,registerBackend:()=>S});var z=q(467);const L={},V=[],S=(k,T,M)=>{if(!T||"function"!=typeof T.init||"function"!=typeof T.createSessionHandler)throw new TypeError("not a valid backend");{const P=L[k];if(void 0===P)L[k]={backend:T,priority:M};else{if(P.priority>M)return;if(P.priority===M&&P.backend!==T)throw new Error(`cannot register backend "${k}" using priority ${M}`)}if(M>=0){const B=V.indexOf(k);-1!==B&&V.splice(B,1);for(let U=0;U<V.length;U++)if(L[V[U]].priority<=M)return void V.splice(U,0,k);V.push(k)}}},O=function(){var k=(0,z.A)(function*(T){const M=0===T.length?V:T,P=[];for(const B of M){const U=L[B];if(U){if(U.initialized)return U.backend;if(U.aborted)continue;const N=!!U.initPromise;try{return N||(U.initPromise=U.backend.init()),yield U.initPromise,U.initialized=!0,U.backend}catch($){N||P.push({name:B,err:$}),U.aborted=!0}finally{delete U.initPromise}}}throw new Error(`no available backend found. ERR: ${P.map(B=>`[${B.name}] ${B.err}`).join(", ")}`)});return function(M){return k.apply(this,arguments)}}(),w=new class C{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(T){if(void 0!==T){if("string"!=typeof T||-1===["verbose","info","warning","error","fatal"].indexOf(T))throw new Error(`Unsupported logging level: ${T}`);this.logLevelInternal=T}}get logLevel(){return this.logLevelInternal}},_=typeof BigInt64Array<"u"&&"function"==typeof BigInt64Array.from,u=typeof BigUint64Array<"u"&&"function"==typeof BigUint64Array.from,l=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),h=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);_&&(l.set("int64",BigInt64Array),h.set(BigInt64Array,"int64")),u&&(l.set("uint64",BigUint64Array),h.set(BigUint64Array,"uint64"));class g{constructor(T,M,P){let B,U,N;if("string"==typeof T)if(B=T,N=P,"string"===T){if(!Array.isArray(M))throw new TypeError("A string tensor's data must be a string array.");U=M}else{const G=l.get(T);if(void 0===G)throw new TypeError(`Unsupported tensor type: ${T}.`);if(Array.isArray(M))U=G.from(M);else{if(!(M instanceof G))throw new TypeError(`A ${B} tensor's data must be type of ${G}`);U=M}}else if(N=M,Array.isArray(T)){if(0===T.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const G=typeof T[0];if("string"===G)B="string",U=T;else{if("boolean"!==G)throw new TypeError(`Invalid element type of data array: ${G}.`);B="bool",U=Uint8Array.from(T)}}else{const G=h.get(T.constructor);if(void 0===G)throw new TypeError(`Unsupported type for tensor data: ${T.constructor}.`);B=G,U=T}if(void 0===N)N=[U.length];else if(!Array.isArray(N))throw new TypeError("A tensor's dims must be a number array");const $=(k=>{let T=1;for(let M=0;M<k.length;M++){const P=k[M];if("number"!=typeof P||!Number.isSafeInteger(P))throw new TypeError(`dims[${M}] must be an integer, got: ${P}`);if(P<0)throw new RangeError(`dims[${M}] must be a non-negative integer, got: ${P}`);T*=P}return T})(N);if($!==U.length)throw new Error(`Tensor's size(${$}) does not match data length(${U.length}).`);this.dims=N,this.type=B,this.data=U,this.size=$}static bufferToTensor(T,M){if(void 0===T)throw new Error("Image buffer must be defined");if(void 0===M.height||void 0===M.width)throw new Error("Image height and width must be defined");const{height:P,width:B}=M,U=M.norm;let N,$;N=void 0===U||void 0===U.mean?255:U.mean,$=void 0===U||void 0===U.bias?0:U.bias;const G=void 0!==M.bitmapFormat?M.bitmapFormat:"RGBA",W=void 0!==M.tensorFormat&&void 0!==M.tensorFormat?M.tensorFormat:"RGB",K=P*B,X="RGBA"===W?new Float32Array(4*K):new Float32Array(3*K);let oe=4,Z=0,ae=1,pe=2,ge=3,je=0,de=K,Be=2*K,ee=-1;"RGB"===G&&(oe=3,Z=0,ae=1,pe=2,ge=-1),"RGBA"===W?ee=3*K:"RBG"===W?(je=0,Be=K,de=2*K):"BGR"===W&&(Be=0,de=K,je=2*K);for(let Ue=0;Ue<K;Ue++,Z+=oe,pe+=oe,ae+=oe,ge+=oe)X[je++]=(T[Z]+$)/N,X[de++]=(T[ae]+$)/N,X[Be++]=(T[pe]+$)/N,-1!==ee&&-1!==ge&&(X[ee++]=(T[ge]+$)/N);return new g("float32",X,"RGBA"===W?[1,4,P,B]:[1,3,P,B])}static fromImage(T,M){return(0,z.A)(function*(){const P=typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement,B=typeof ImageData<"u"&&T instanceof ImageData,U=typeof ImageBitmap<"u"&&T instanceof ImageBitmap,N=typeof String<"u"&&(T instanceof String||"string"==typeof T);let $,G={};if(P){const W=document.createElement("canvas"),K=W.getContext("2d");if(null==K)throw new Error("Can not access image data");{let X=T.naturalHeight,oe=T.naturalWidth;if(void 0!==M&&void 0!==M.resizedHeight&&void 0!==M.resizedWidth&&(X=M.resizedHeight,oe=M.resizedWidth),void 0!==M){if(G=M,void 0!==M.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(G.tensorFormat="RGBA",void 0!==M.height&&M.height!==X)throw new Error("Image input config height doesn't match HTMLImageElement height");if(G.height=X,void 0!==M.width&&M.width!==oe)throw new Error("Image input config width doesn't match HTMLImageElement width");G.width=oe}else G.tensorFormat="RGBA",G.height=X,G.width=oe;W.width=oe,W.height=X,K.drawImage(T,0,0,oe,X),$=K.getImageData(0,0,oe,X).data}}else{if(!B){if(U){if(void 0===M)throw new Error("Please provide image config with format for Imagebitmap");if(void 0!==M.bitmapFormat)throw new Error("Image input config format must be defined for ImageBitmap");const W=document.createElement("canvas").getContext("2d");if(null!=W){const K=T.height,X=T.width;if(W.drawImage(T,0,0,X,K),$=W.getImageData(0,0,X,K).data,void 0!==M){if(void 0!==M.height&&M.height!==K)throw new Error("Image input config height doesn't match ImageBitmap height");if(G.height=K,void 0!==M.width&&M.width!==X)throw new Error("Image input config width doesn't match ImageBitmap width");G.width=X}else G.height=K,G.width=X;return g.bufferToTensor($,G)}throw new Error("Can not access image data")}if(N)return new Promise((W,K)=>{const X=document.createElement("canvas"),oe=X.getContext("2d");if(!T||!oe)return K();const Z=new Image;Z.crossOrigin="Anonymous",Z.src=T,Z.onload=()=>{X.width=Z.width,X.height=Z.height,oe.drawImage(Z,0,0,X.width,X.height);const ae=oe.getImageData(0,0,X.width,X.height);if(void 0!==M){if(void 0!==M.height&&M.height!==X.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(G.height=X.height,void 0!==M.width&&M.width!==X.width)throw new Error("Image input config width doesn't match ImageBitmap width");G.width=X.width}else G.height=X.height,G.width=X.width;W(g.bufferToTensor(ae.data,G))}});throw new Error("Input data provided is not supported - aborted tensor creation")}{let K,X;if(void 0!==M&&void 0!==M.resizedWidth&&void 0!==M.resizedHeight?(K=M.resizedHeight,X=M.resizedWidth):(K=T.height,X=T.width),void 0!==M){if(G=M,void 0!==M.bitmapFormat&&"RGBA"!==M.bitmapFormat)throw new Error("Image input config format must be RGBA for ImageData");G.bitmapFormat="RGBA"}else G.bitmapFormat="RGBA";if(G.height=K,G.width=X,void 0!==M){const oe=document.createElement("canvas");oe.width=X,oe.height=K;const Z=oe.getContext("2d");if(null==Z)throw new Error("Can not access image data");Z.putImageData(T,0,0),$=Z.getImageData(0,0,X,K).data}else $=T.data}}if(void 0!==$)return g.bufferToTensor($,G);throw new Error("Input data provided is not supported - aborted tensor creation")})()}toImageData(T){var M,P;const B=document.createElement("canvas").getContext("2d");let U;if(null==B)throw new Error("Can not access image data");{const N=this.dims[3],$=this.dims[2],G=this.dims[1],W=void 0!==T&&void 0!==T.format?T.format:"RGB",K=void 0!==T&&void 0!==(null===(M=T.norm)||void 0===M?void 0:M.mean)?T.norm.mean:255,X=void 0!==T&&void 0!==(null===(P=T.norm)||void 0===P?void 0:P.bias)?T.norm.bias:0,oe=$*N;if(void 0!==T){if(void 0!==T.height&&T.height!==$)throw new Error("Image output config height doesn't match tensor height");if(void 0!==T.width&&T.width!==N)throw new Error("Image output config width doesn't match tensor width");if(void 0!==T.format&&4===G&&"RGBA"!==T.format||3===G&&"RGB"!==T.format&&"BGR"!==T.format)throw new Error("Tensor format doesn't match input tensor dims")}const Z=4;let ae=0,pe=1,ge=2,je=3,de=0,Be=oe,ee=2*oe,Ae=-1;"RGBA"===W?(de=0,Be=oe,ee=2*oe,Ae=3*oe):"RGB"===W?(de=0,Be=oe,ee=2*oe):"RBG"===W&&(de=0,ee=oe,Be=2*oe),U=B.createImageData(N,$);for(let Ue=0;Ue<$*N;ae+=Z,pe+=Z,ge+=Z,je+=Z,Ue++)U.data[ae]=(this.data[de++]-X)*K,U.data[pe]=(this.data[Be++]-X)*K,U.data[ge]=(this.data[ee++]-X)*K,U.data[je]=-1===Ae?255:(this.data[Ae++]-X)*K}return U}reshape(T){return new g(this.type,this.data,T)}}const b=g;class x{constructor(T){this.handler=T}run(T,M,P){var B=this;return(0,z.A)(function*(){const U={};let N={};if("object"!=typeof T||null===T||T instanceof b||Array.isArray(T))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let $=!0;if("object"==typeof M){if(null===M)throw new TypeError("Unexpected argument[1]: cannot be null.");if(M instanceof b)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(M)){if(0===M.length)throw new TypeError("'fetches' cannot be an empty array.");$=!1;for(const K of M){if("string"!=typeof K)throw new TypeError("'fetches' must be a string array or an object.");if(-1===B.outputNames.indexOf(K))throw new RangeError(`'fetches' contains invalid output name: ${K}.`);U[K]=null}if("object"==typeof P&&null!==P)N=P;else if(typeof P<"u")throw new TypeError("'options' must be an object.")}else{let K=!1;const X=Object.getOwnPropertyNames(M);for(const oe of B.outputNames)if(-1!==X.indexOf(oe)){const Z=M[oe];(null===Z||Z instanceof b)&&(K=!0,$=!1,U[oe]=Z)}if(K){if("object"==typeof P&&null!==P)N=P;else if(typeof P<"u")throw new TypeError("'options' must be an object.")}else N=M}}else if(typeof M<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const K of B.inputNames)if(typeof T[K]>"u")throw new Error(`input '${K}' is missing in 'feeds'.`);if($)for(const K of B.outputNames)U[K]=null;const G=yield B.handler.run(T,U,N),W={};for(const K in G)Object.hasOwnProperty.call(G,K)&&(W[K]=new b(G[K].type,G[K].data,G[K].dims));return W})()}static create(T,M,P,B){return(0,z.A)(function*(){let U,N={};if("string"==typeof T){if(U=T,"object"==typeof M&&null!==M)N=M;else if(typeof M<"u")throw new TypeError("'options' must be an object.")}else if(T instanceof Uint8Array){if(U=T,"object"==typeof M&&null!==M)N=M;else if(typeof M<"u")throw new TypeError("'options' must be an object.")}else{if(!(T instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&T instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const X=T;let oe=0,Z=T.byteLength;if("object"==typeof M&&null!==M)N=M;else if("number"==typeof M){if(oe=M,!Number.isSafeInteger(oe))throw new RangeError("'byteOffset' must be an integer.");if(oe<0||oe>=X.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${X.byteLength}).`);if(Z=T.byteLength-oe,"number"==typeof P){if(Z=P,!Number.isSafeInteger(Z))throw new RangeError("'byteLength' must be an integer.");if(Z<=0||oe+Z>X.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${X.byteLength-oe}].`);if("object"==typeof B&&null!==B)N=B;else if(typeof B<"u")throw new TypeError("'options' must be an object.")}else if(typeof P<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof M<"u")throw new TypeError("'options' must be an object.");U=new Uint8Array(X,oe,Z)}}const G=(N.executionProviders||[]).map(X=>"string"==typeof X?X:X.name),K=yield(yield O(G)).createSessionHandler(U,N);return new x(K)})()}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const A=x},941:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(293).default,F;self,F=__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(Ye,F,q)=>{var z,L=(z=(z=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(V){function S(){return ge.buffer!=de&&Ct(ge.buffer),Be}function O(){return ge.buffer!=de&&Ct(ge.buffer),ee}function C(){return ge.buffer!=de&&Ct(ge.buffer),Ae}function w(){return ge.buffer!=de&&Ct(ge.buffer),Ue}function _(){return ge.buffer!=de&&Ct(ge.buffer),qe}var u,l,h;V=V||{},u||(u=void 0!==V?V:{}),u.ready=new Promise(function(J,ce){l=J,h=ce});var f,g,b,x,A,k,T=Object.assign({},u),M="./this.program",P=(J,ce)=>{throw ce},B="object"==typeof window,U="function"==typeof importScripts,N="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,$=u.ENVIRONMENT_IS_PTHREAD||!1,G="";function W(J){return u.locateFile?u.locateFile(J,G):G+J}if(N){let J;G=U?q(908).dirname(G)+"/":"//",k=()=>{A||(x=q(1384),A=q(908))},f=function(ce,ve){return k(),ce=A.normalize(ce),x.readFileSync(ce,ve?void 0:"utf8")},b=ce=>((ce=f(ce,!0)).buffer||(ce=new Uint8Array(ce)),ce),g=(ce,ve,Pe)=>{k(),ce=A.normalize(ce),x.readFile(ce,function(Ze,ft){Ze?Pe(Ze):ve(ft.buffer)})},1<process.argv.length&&(M=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(ce){if(!(ce instanceof Xe))throw ce}),process.on("unhandledRejection",function(ce){throw ce}),P=(ce,ve)=>{if(ii())throw process.exitCode=ce,ve;ve instanceof Xe||ae("exiting due to exception: "+ve),process.exit(ce)},u.inspect=function(){return"[Emscripten Module object]"};try{J=q(9925)}catch(ce){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ce}q.g.Worker=J.Worker}else(B||U)&&(U?G=self.location.href:typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),z&&(G=z),G=0!==G.indexOf("blob:")?G.substr(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1):"",N||(f=J=>{var ce=new XMLHttpRequest;return ce.open("GET",J,!1),ce.send(null),ce.responseText},U&&(b=J=>{var ce=new XMLHttpRequest;return ce.open("GET",J,!1),ce.responseType="arraybuffer",ce.send(null),new Uint8Array(ce.response)}),g=(J,ce,ve)=>{var Pe=new XMLHttpRequest;Pe.open("GET",J,!0),Pe.responseType="arraybuffer",Pe.onload=()=>{200==Pe.status||0==Pe.status&&Pe.response?ce(Pe.response):ve()},Pe.onerror=ve,Pe.send(null)}));N&&typeof performance>"u"&&(q.g.performance=q(6953).performance);var K=console.log.bind(console),X=console.warn.bind(console);N&&(k(),K=J=>x.writeSync(1,J+"\n"),X=J=>x.writeSync(2,J+"\n"));var oe,Z=u.print||K,ae=u.printErr||X;Object.assign(u,T),T=null,u.thisProgram&&(M=u.thisProgram),u.quit&&(P=u.quit),u.wasmBinary&&(oe=u.wasmBinary);var pe=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&le("no native wasm support detected");var ge,je,de,Be,ee,Ae,Ue,qe,Mt=!1,gt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function zt(J,ce,ve){var Pe=(ce>>>=0)+ve;for(ve=ce;J[ve]&&!(ve>=Pe);)++ve;if(16<ve-ce&&J.buffer&&gt)return gt.decode(J.buffer instanceof SharedArrayBuffer?J.slice(ce,ve):J.subarray(ce,ve));for(Pe="";ce<ve;){var Ze=J[ce++];if(128&Ze){var ft=63&J[ce++];if(192==(224&Ze))Pe+=String.fromCharCode((31&Ze)<<6|ft);else{var en=63&J[ce++];65536>(Ze=224==(240&Ze)?(15&Ze)<<12|ft<<6|en:(7&Ze)<<18|ft<<12|en<<6|63&J[ce++])?Pe+=String.fromCharCode(Ze):(Ze-=65536,Pe+=String.fromCharCode(55296|Ze>>10,56320|1023&Ze))}}else Pe+=String.fromCharCode(Ze)}return Pe}function Ce(J,ce){return(J>>>=0)?zt(O(),J,ce):""}function Le(J,ce,ve,Pe){if(!(0<Pe))return 0;var Ze=ve>>>=0;Pe=ve+Pe-1;for(var ft=0;ft<J.length;++ft){var en=J.charCodeAt(ft);if(55296<=en&&57343>=en&&(en=65536+((1023&en)<<10)|1023&J.charCodeAt(++ft)),127>=en){if(ve>=Pe)break;ce[ve++>>>0]=en}else{if(2047>=en){if(ve+1>=Pe)break;ce[ve++>>>0]=192|en>>6}else{if(65535>=en){if(ve+2>=Pe)break;ce[ve++>>>0]=224|en>>12}else{if(ve+3>=Pe)break;ce[ve++>>>0]=240|en>>18,ce[ve++>>>0]=128|en>>12&63}ce[ve++>>>0]=128|en>>6&63}ce[ve++>>>0]=128|63&en}}return ce[ve>>>0]=0,ve-Ze}function Yt(J){for(var ce=0,ve=0;ve<J.length;++ve){var Pe=J.charCodeAt(ve);127>=Pe?ce++:2047>=Pe?ce+=2:55296<=Pe&&57343>=Pe?(ce+=4,++ve):ce+=3}return ce}function Ct(J){de=J,u.HEAP8=Be=new Int8Array(J),u.HEAP16=new Int16Array(J),u.HEAP32=Ae=new Int32Array(J),u.HEAPU8=ee=new Uint8Array(J),u.HEAPU16=new Uint16Array(J),u.HEAPU32=Ue=new Uint32Array(J),u.HEAPF32=new Float32Array(J),u.HEAPF64=qe=new Float64Array(J)}$&&(de=u.buffer);var Ne=u.INITIAL_MEMORY||16777216;if($)ge=u.wasmMemory,de=u.buffer;else if(u.wasmMemory)ge=u.wasmMemory;else if(!((ge=new WebAssembly.Memory({initial:Ne/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw ae("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),N&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");ge&&(de=ge.buffer),Ne=de.byteLength,Ct(de);var Wt,En=[],rn=[],dn=[],hi=[];function ii(){return pe||!1}function Ki(){var J=u.preRun.shift();En.unshift(J)}var Sn,Q=0,vt=null,Re=null;function le(J){throw $?postMessage({cmd:"onAbort",arg:J}):u.onAbort&&u.onAbort(J),ae(J="Aborted("+J+")"),Mt=!0,J=new WebAssembly.RuntimeError(J+". Build with -sASSERTIONS for more info."),h(J),J}function me(){return Sn.startsWith("data:application/octet-stream;base64,")}function Te(){var J=Sn;try{if(J==Sn&&oe)return new Uint8Array(oe);if(b)return b(J);throw"both async and sync fetching of the wasm failed"}catch(ce){le(ce)}}Sn="ort-wasm-threaded.wasm",me()||(Sn=W(Sn));var tt={};function Xe(J){this.name="ExitStatus",this.message="Program terminated with exit("+J+")",this.status=J}function Ve(J){(J=xt.Vb[J])||le(),xt.mc(J)}function ut(J){var ce=xt.Cc();if(!ce)return 6;xt.ac.push(ce),xt.Vb[J.Ub]=ce,ce.Ub=J.Ub;var ve={cmd:"run",start_routine:J.Ic,arg:J.zc,pthread_ptr:J.Ub};return ce.$b=()=>{ve.time=performance.now(),ce.postMessage(ve,J.Nc)},ce.loaded&&(ce.$b(),delete ce.$b),0}function Rt(J){if($)return yn(1,1,J);ii()||(xt.oc(),u.onExit&&u.onExit(J),Mt=!0),P(J,new Xe(J))}function Dt(J,ce){if(!ce&&$)throw Vi(J),"unwind";ii()||$||(yc(),On(dn),z_(0),qd[1].length&&Dp(1,10),qd[2].length&&Dp(2,10),xt.oc()),Rt(J)}var xt={Yb:[],ac:[],qc:[],Vb:{},fc:function(){$&&xt.Ec()},Pc:function(){},Ec:function(){xt.receiveObjectTransfer=xt.Gc,xt.threadInitTLS=xt.pc,xt.setExitStatus=xt.nc,pe=!1},nc:function(){},oc:function(){for(var J of Object.values(xt.Vb))xt.mc(J);for(J of xt.Yb)J.terminate();xt.Yb=[]},mc:function(J){var ce=J.Ub;delete xt.Vb[ce],xt.Yb.push(J),xt.ac.splice(xt.ac.indexOf(J),1),J.Ub=0,Op(ce)},Gc:function(){},pc:function(){xt.qc.forEach(J=>J())},Fc:function(J,ce){J.onmessage=ve=>{var Pe=(ve=ve.data).cmd;if(J.Ub&&(xt.Bc=J.Ub),ve.targetThread&&ve.targetThread!=xu()){var Ze=xt.Vb[ve.Qc];Ze?Ze.postMessage(ve,ve.transferList):ae('Internal error! Worker sent a message "'+Pe+'" to target pthread '+ve.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===Pe?ze(ve.queue):"spawnThread"===Pe?ut(ve):"cleanupThread"===Pe?Ve(ve.thread):"killThread"===Pe?(Pe=xt.Vb[ve=ve.thread],delete xt.Vb[ve],Pe.terminate(),Op(ve),xt.ac.splice(xt.ac.indexOf(Pe),1),Pe.Ub=0):"cancelThread"===Pe?xt.Vb[ve.thread].postMessage({cmd:"cancel"}):"loaded"===Pe?(J.loaded=!0,ce&&ce(J),J.$b&&(J.$b(),delete J.$b)):"print"===Pe?Z("Thread "+ve.threadId+": "+ve.text):"printErr"===Pe?ae("Thread "+ve.threadId+": "+ve.text):"alert"===Pe?alert("Thread "+ve.threadId+": "+ve.text):"setimmediate"===ve.target?J.postMessage(ve):"onAbort"===Pe?u.onAbort&&u.onAbort(ve.arg):Pe&&ae("worker sent an unknown command "+Pe);xt.Bc=void 0},J.onerror=ve=>{throw ae("worker sent an error! "+ve.filename+":"+ve.lineno+": "+ve.message),ve},N&&(J.on("message",function(ve){J.onmessage({data:ve})}),J.on("error",function(ve){J.onerror(ve)}),J.on("detachedExit",function(){})),J.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||z,wasmMemory:ge,wasmModule:je})},yc:function(){var J=W("ort-wasm-threaded.worker.js");xt.Yb.push(new Worker(J))},Cc:function(){return 0==xt.Yb.length&&(xt.yc(),xt.Fc(xt.Yb[0])),xt.Yb.pop()}};function On(J){for(;0<J.length;)J.shift()(u)}function Vi(J){if($)return yn(2,0,J);try{Dt(J)}catch(ce){ce instanceof Xe||"unwind"==ce||P(1,ce)}}u.PThread=xt,u.establishStackSpace=function(){var J=xu(),ce=C()[J+44>>2>>>0];J=C()[J+48>>2>>>0],$_(ce,ce-J),fi(ce)};var Yr=[];function we(J){var ce=Yr[J];return ce||(J>=Yr.length&&(Yr.length=J+1),Yr[J]=ce=Wt.get(J)),ce}u.invokeEntryPoint=function(J,ce){J=we(J)(ce),ii()?xt.nc(J):j_(J)};var dt,Tt,Bt=[],At=0,ht=0;function Ot(J){this.Zb=J,this.Sb=J-24,this.xc=function(ce){w()[this.Sb+4>>2>>>0]=ce},this.bc=function(){return w()[this.Sb+4>>2>>>0]},this.wc=function(ce){w()[this.Sb+8>>2>>>0]=ce},this.Dc=function(){return w()[this.Sb+8>>2>>>0]},this.rc=function(){C()[this.Sb>>2>>>0]=0},this.hc=function(ce){ce=ce?1:0,S()[(this.Sb+12|0)>>>0]=ce},this.uc=function(){return 0!=S()[(this.Sb+12|0)>>>0]},this.ic=function(ce){ce=ce?1:0,S()[(this.Sb+13|0)>>>0]=ce},this.kc=function(){return 0!=S()[(this.Sb+13|0)>>>0]},this.fc=function(ce,ve){this.cc(0),this.xc(ce),this.wc(ve),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(C(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(C(),this.Sb>>2,1)},this.cc=function(ce){w()[this.Sb+16>>2>>>0]=ce},this.tc=function(){return w()[this.Sb+16>>2>>>0]},this.vc=function(){if(Tw(this.bc()))return w()[this.Zb>>2>>>0];var ce=this.tc();return 0!==ce?ce:this.Zb}}function Un(J){return V_(new Ot(J).Sb)}function ri(J,ce,ve,Pe){return $?yn(3,1,J,ce,ve,Pe):bn(J,ce,ve,Pe)}function bn(J,ce,ve,Pe){if(typeof SharedArrayBuffer>"u")return ae("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var Ze=[];return $&&0===Ze.length?ri(J,ce,ve,Pe):(J={Ic:ve,Ub:J,zc:Pe,Nc:Ze},$?(J.Oc="spawnThread",postMessage(J,Ze),0):ut(J))}function Li(J,ce,ve){return $?yn(4,1,J,ce,ve):0}function zn(J,ce){if($)return yn(5,1,J,ce)}function ji(J,ce){if($)return yn(6,1,J,ce)}function Ui(J,ce,ve){if($)return yn(7,1,J,ce,ve)}function _r(J,ce,ve){return $?yn(8,1,J,ce,ve):0}function pi(J,ce){if($)return yn(9,1,J,ce)}function on(J,ce,ve){if($)return yn(10,1,J,ce,ve)}function pn(J,ce,ve,Pe){if($)return yn(11,1,J,ce,ve,Pe)}function Jt(J,ce,ve,Pe){if($)return yn(12,1,J,ce,ve,Pe)}function Lr(J,ce,ve,Pe){if($)return yn(13,1,J,ce,ve,Pe)}function bc(J){if($)return yn(14,1,J)}function fe(J,ce){if($)return yn(15,1,J,ce)}function Me(J,ce,ve){if($)return yn(16,1,J,ce,ve)}function ze(J){Atomics.store(C(),J>>2,1),xu()&&wu(J),Atomics.compareExchange(C(),J>>2,1,0)}function Ke(J){return w()[J>>>2]+4294967296*C()[J+4>>>2]}function nt(J,ce,ve,Pe,Ze,ft){return $?yn(17,1,J,ce,ve,Pe,Ze,ft):-52}function yt(J,ce,ve,Pe,Ze,ft){if($)return yn(18,1,J,ce,ve,Pe,Ze,ft)}function it(J){var ce=Yt(J)+1,ve=Pp(ce);return ve&&Le(J,S(),ve,ce),ve}function kn(J,ce,ve){function Pe(Di){return(Di=Di.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Di[1]:"GMT"}if($)return yn(19,1,J,ce,ve);var Ze=(new Date).getFullYear(),ft=new Date(Ze,0,1),en=new Date(Ze,6,1);Ze=ft.getTimezoneOffset();var Nn=en.getTimezoneOffset(),Mi=Math.max(Ze,Nn);C()[J>>2>>>0]=60*Mi,C()[ce>>2>>>0]=+(Ze!=Nn),J=Pe(ft),ce=Pe(en),J=it(J),ce=it(ce),Nn<Ze?(w()[ve>>2>>>0]=J,w()[ve+4>>2>>>0]=ce):(w()[ve>>2>>>0]=ce,w()[ve+4>>2>>>0]=J)}function yn(J,ce){var ve=arguments.length-2,Pe=arguments;return function Cn(J){var ce=gi();return J=J(),fi(ce),J}(()=>{for(var Ze=kp(8*ve),ft=Ze>>3,en=0;en<ve;en++){var Nn=Pe[2+en];_()[ft+en>>>0]=Nn}return Sw(J,ve,Ze,ce)})}u.executeNotifiedProxyingQueue=ze,Tt=N?()=>{var J=process.hrtime();return 1e3*J[0]+J[1]/1e6}:$?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var mi,Zi=[],io={};function Sr(){if(!mi){var J,ce={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:M||"./this.program"};for(J in io)void 0===io[J]?delete ce[J]:ce[J]=io[J];var ve=[];for(J in ce)ve.push(J+"="+ce[J]);mi=ve}return mi}function pt(J,ce){if($)return yn(20,1,J,ce);var ve=0;return Sr().forEach(function(Pe,Ze){var ft=ce+ve;for(Ze=w()[J+4*Ze>>2>>>0]=ft,ft=0;ft<Pe.length;++ft)S()[(0|Ze++)>>>0]=Pe.charCodeAt(ft);S()[(0|Ze)>>>0]=0,ve+=Pe.length+1}),0}function Ii(J,ce){if($)return yn(21,1,J,ce);var ve=Sr();w()[J>>2>>>0]=ve.length;var Pe=0;return ve.forEach(function(Ze){Pe+=Ze.length+1}),w()[ce>>2>>>0]=Pe,0}function pr(J){return $?yn(22,1,J):52}function Qo(J,ce,ve,Pe){return $?yn(23,1,J,ce,ve,Pe):52}function Fa(J,ce,ve,Pe,Ze){return $?yn(24,1,J,ce,ve,Pe,Ze):70}var qd=[null,[],[]];function Dp(J,ce){var ve=qd[J];0===ce||10===ce?((1===J?Z:ae)(zt(ve,0)),ve.length=0):ve.push(ce)}function L_(J,ce,ve,Pe){if($)return yn(25,1,J,ce,ve,Pe);for(var Ze=0,ft=0;ft<ve;ft++){var en=w()[ce>>2>>>0],Nn=w()[ce+4>>2>>>0];ce+=8;for(var Mi=0;Mi<Nn;Mi++)Dp(J,O()[en+Mi>>>0]);Ze+=Nn}return w()[Pe>>2>>>0]=Ze,0}var Jo=0;function ws(J){return J%4==0&&(J%100!=0||J%400==0)}var vu=[31,29,31,30,31,30,31,31,30,31,30,31],La=[31,28,31,30,31,30,31,31,30,31,30,31];function Rp(J,ce,ve,Pe){function Ze(_t,Bi,Tr){for(_t="number"==typeof _t?_t.toString():_t||"";_t.length<Bi;)_t=Tr[0]+_t;return _t}function ft(_t,Bi){return Ze(_t,Bi,"0")}function en(_t,Bi){function Tr(xc){return 0>xc?-1:0<xc?1:0}var Ua;return 0===(Ua=Tr(_t.getFullYear()-Bi.getFullYear()))&&0===(Ua=Tr(_t.getMonth()-Bi.getMonth()))&&(Ua=Tr(_t.getDate()-Bi.getDate())),Ua}function Nn(_t){switch(_t.getDay()){case 0:return new Date(_t.getFullYear()-1,11,29);case 1:return _t;case 2:return new Date(_t.getFullYear(),0,3);case 3:return new Date(_t.getFullYear(),0,2);case 4:return new Date(_t.getFullYear(),0,1);case 5:return new Date(_t.getFullYear()-1,11,31);case 6:return new Date(_t.getFullYear()-1,11,30)}}function Mi(_t){var Bi=_t.Wb;for(_t=new Date(new Date(_t.Xb+1900,0,1).getTime());0<Bi;){var Tr=_t.getMonth(),Ua=(ws(_t.getFullYear())?vu:La)[Tr];if(!(Bi>Ua-_t.getDate())){_t.setDate(_t.getDate()+Bi);break}Bi-=Ua-_t.getDate()+1,_t.setDate(1),11>Tr?_t.setMonth(Tr+1):(_t.setMonth(0),_t.setFullYear(_t.getFullYear()+1))}return Tr=new Date(_t.getFullYear()+1,0,4),Bi=Nn(new Date(_t.getFullYear(),0,4)),Tr=Nn(Tr),0>=en(Bi,_t)?0>=en(Tr,_t)?_t.getFullYear()+1:_t.getFullYear():_t.getFullYear()-1}var Di=C()[Pe+40>>2>>>0];for(var Pr in Pe={Lc:C()[Pe>>2>>>0],Kc:C()[Pe+4>>2>>>0],dc:C()[Pe+8>>2>>>0],jc:C()[Pe+12>>2>>>0],ec:C()[Pe+16>>2>>>0],Xb:C()[Pe+20>>2>>>0],Tb:C()[Pe+24>>2>>>0],Wb:C()[Pe+28>>2>>>0],Rc:C()[Pe+32>>2>>>0],Jc:C()[Pe+36>>2>>>0],Mc:Di?Ce(Di):""},ve=Ce(ve),Di={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ve=ve.replace(new RegExp(Pr,"g"),Di[Pr]);var _t,Bi,ga="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Es="January February March April May June July August September October November December".split(" ");for(Pr in Di={"%a":function(_t){return ga[_t.Tb].substring(0,3)},"%A":function(_t){return ga[_t.Tb]},"%b":function(_t){return Es[_t.ec].substring(0,3)},"%B":function(_t){return Es[_t.ec]},"%C":function(_t){return ft((_t.Xb+1900)/100|0,2)},"%d":function(_t){return ft(_t.jc,2)},"%e":function(_t){return Ze(_t.jc,2," ")},"%g":function(_t){return Mi(_t).toString().substring(2)},"%G":function(_t){return Mi(_t)},"%H":function(_t){return ft(_t.dc,2)},"%I":function(_t){return 0==(_t=_t.dc)?_t=12:12<_t&&(_t-=12),ft(_t,2)},"%j":function(_t){for(var Bi=0,Tr=0;Tr<=_t.ec-1;Bi+=(ws(_t.Xb+1900)?vu:La)[Tr++]);return ft(_t.jc+Bi,3)},"%m":function(_t){return ft(_t.ec+1,2)},"%M":function(_t){return ft(_t.Kc,2)},"%n":function(){return"\n"},"%p":function(_t){return 0<=_t.dc&&12>_t.dc?"AM":"PM"},"%S":function(_t){return ft(_t.Lc,2)},"%t":function(){return"\t"},"%u":function(_t){return _t.Tb||7},"%U":function(_t){return ft(Math.floor((_t.Wb+7-_t.Tb)/7),2)},"%V":function(_t){var Bi=Math.floor((_t.Wb+7-(_t.Tb+6)%7)/7);if(2>=(_t.Tb+371-_t.Wb-2)%7&&Bi++,Bi)53==Bi&&(4==(Tr=(_t.Tb+371-_t.Wb)%7)||3==Tr&&ws(_t.Xb)||(Bi=1));else{Bi=52;var Tr=(_t.Tb+7-_t.Wb-1)%7;(4==Tr||5==Tr&&ws(_t.Xb%400-1))&&Bi++}return ft(Bi,2)},"%w":function(_t){return _t.Tb},"%W":function(_t){return ft(Math.floor((_t.Wb+7-(_t.Tb+6)%7)/7),2)},"%y":function(_t){return(_t.Xb+1900).toString().substring(2)},"%Y":function(_t){return _t.Xb+1900},"%z":function(_t){return(0<=(_t=_t.Jc)?"+":"-")+("0000"+((_t=Math.abs(_t)/60)/60*100+_t%60)).slice(-4)},"%Z":function(_t){return _t.Mc},"%%":function(){return"%"}},ve=ve.replace(/%%/g,"\0\0"),Di)ve.includes(Pr)&&(ve=ve.replace(new RegExp(Pr,"g"),Di[Pr](Pe)));return Le(_t=ve=ve.replace(/\0\0/g,"%"),Bi=Array(Yt(_t)+1),0,Bi.length),(Pr=Bi).length>ce?0:(function(_t,Bi){S().set(_t,Bi>>>0)}(Pr,J),Pr.length-1)}xt.fc();var U_=[null,Rt,Vi,ri,Li,zn,ji,Ui,_r,pi,on,pn,Jt,Lr,bc,fe,Me,nt,yt,kn,pt,Ii,pr,Qo,Fa,L_],B_={b:function(J){return Pp(J+24)+24},n:function(J){return(J=new Ot(J)).uc()||(J.hc(!0),At--),J.ic(!1),Bt.push(J),J.sc(),J.vc()},ma:function(J){throw ae("Unexpected exception thrown, this is not properly supported - aborting"),Mt=!0,J},x:function(){xi(0);var J=Bt.pop();if(J.Hc()&&!J.kc()){var ce=J.Dc();ce&&we(ce)(J.Zb),Un(J.Zb)}ht=0},e:function(){var J=ht;if(!J)return Jo=0;var ce=new Ot(J);ce.cc(J);var ve=ce.bc();if(!ve)return Jo=0,J;for(var Pe=Array.prototype.slice.call(arguments),Ze=0;Ze<Pe.length;Ze++){var ft=Pe[Ze];if(0===ft||ft===ve)break;if(Yd(ft,ve,ce.Sb+16))return Jo=ft,J}return Jo=ve,J},l:function(){var J=ht;if(!J)return Jo=0;var ce=new Ot(J);ce.cc(J);var ve=ce.bc();if(!ve)return Jo=0,J;for(var Pe=Array.prototype.slice.call(arguments),Ze=0;Ze<Pe.length;Ze++){var ft=Pe[Ze];if(0===ft||ft===ve)break;if(Yd(ft,ve,ce.Sb+16))return Jo=ft,J}return Jo=ve,J},h:function(){var J=ht;if(!J)return Jo=0;var ce=new Ot(J);ce.cc(J);var ve=ce.bc();if(!ve)return Jo=0,J;for(var Pe=Array.prototype.slice.call(arguments),Ze=0;Ze<Pe.length;Ze++){var ft=Pe[Ze];if(0===ft||ft===ve)break;if(Yd(ft,ve,ce.Sb+16))return Jo=ft,J}return Jo=ve,J},t:Un,M:function(){var J=Bt.pop();J||le("no exception to throw");var ce=J.Zb;throw J.kc()||(Bt.push(J),J.ic(!0),J.hc(!1),At++),ht=ce,ce},c:function(J,ce,ve){throw new Ot(J).fc(ce,ve),ht=J,At++,J},pa:function(){return At},Fa:function(J){Xd(J,!U,1,!B),xt.pc()},T:function(J){$?postMessage({cmd:"cleanupThread",thread:J}):Ve(J)},xa:bn,j:function(J){throw ht||(ht=J),J},H:Li,Ma:zn,ua:ji,wa:Ui,oa:_r,Ka:pi,Ca:on,Ja:pn,V:Jt,va:Lr,sa:bc,La:fe,ta:Me,Ta:function(){},X:function(){le("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){le("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(J,ce,ve,Pe){if(J==ce)setTimeout(()=>ze(Pe));else if($)postMessage({targetThread:J,cmd:"processProxyingQueue",queue:Pe});else{if(!(J=xt.Vb[J]))return;J.postMessage({cmd:"processProxyingQueue",queue:Pe})}return 1},Ea:function(){return-1},Pa:function(J,ce){J=new Date(1e3*Ke(J)),C()[ce>>2>>>0]=J.getUTCSeconds(),C()[ce+4>>2>>>0]=J.getUTCMinutes(),C()[ce+8>>2>>>0]=J.getUTCHours(),C()[ce+12>>2>>>0]=J.getUTCDate(),C()[ce+16>>2>>>0]=J.getUTCMonth(),C()[ce+20>>2>>>0]=J.getUTCFullYear()-1900,C()[ce+24>>2>>>0]=J.getUTCDay(),J=(J.getTime()-Date.UTC(J.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,C()[ce+28>>2>>>0]=J},Qa:function(J,ce){J=new Date(1e3*Ke(J)),C()[ce>>2>>>0]=J.getSeconds(),C()[ce+4>>2>>>0]=J.getMinutes(),C()[ce+8>>2>>>0]=J.getHours(),C()[ce+12>>2>>>0]=J.getDate(),C()[ce+16>>2>>>0]=J.getMonth(),C()[ce+20>>2>>>0]=J.getFullYear()-1900,C()[ce+24>>2>>>0]=J.getDay();var ve=new Date(J.getFullYear(),0,1),Pe=(J.getTime()-ve.getTime())/864e5|0;C()[ce+28>>2>>>0]=Pe,C()[ce+36>>2>>>0]=-60*J.getTimezoneOffset(),Pe=new Date(J.getFullYear(),6,1).getTimezoneOffset(),J=0|(Pe!=(ve=ve.getTimezoneOffset())&&J.getTimezoneOffset()==Math.min(ve,Pe)),C()[ce+32>>2>>>0]=J},Ra:function(J){var ce=new Date(C()[J+20>>2>>>0]+1900,C()[J+16>>2>>>0],C()[J+12>>2>>>0],C()[J+8>>2>>>0],C()[J+4>>2>>>0],C()[J>>2>>>0],0),ve=C()[J+32>>2>>>0],Pe=ce.getTimezoneOffset(),Ze=new Date(ce.getFullYear(),0,1),ft=new Date(ce.getFullYear(),6,1).getTimezoneOffset(),en=Ze.getTimezoneOffset(),Nn=Math.min(en,ft);return 0>ve?C()[J+32>>2>>>0]=+(ft!=en&&Nn==Pe):0<ve!=(Nn==Pe)&&(ft=Math.max(en,ft),ce.setTime(ce.getTime()+6e4*((0<ve?Nn:ft)-Pe))),C()[J+24>>2>>>0]=ce.getDay(),ve=(ce.getTime()-Ze.getTime())/864e5|0,C()[J+28>>2>>>0]=ve,C()[J>>2>>>0]=ce.getSeconds(),C()[J+4>>2>>>0]=ce.getMinutes(),C()[J+8>>2>>>0]=ce.getHours(),C()[J+12>>2>>>0]=ce.getDate(),C()[J+16>>2>>>0]=ce.getMonth(),ce.getTime()/1e3|0},Aa:nt,Ba:yt,Sa:function J(ce,ve,Pe){J.Ac||(J.Ac=!0,kn(ce,ve,Pe))},y:function(){le("")},U:function(){if(!N&&!U){var J="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";dt||(dt={}),dt[J]||(dt[J]=1,N&&(J="warning: "+J),ae(J))}},ra:function(){return 4294901760},B:Tt,Ia:function(J,ce,ve){O().copyWithin(J>>>0,ce>>>0,ce+ve>>>0)},F:function(){return N?q(3993).cpus().length:navigator.hardwareConcurrency},Da:function(J,ce,ve){Zi.length=ce,ve>>=3;for(var Pe=0;Pe<ce;Pe++)Zi[Pe]=_()[ve+Pe>>>0];return(0>J?tt[-J-1]:U_[J]).apply(null,Zi)},qa:function(J){var ce=O().length;if((J>>>=0)<=ce||4294901760<J)return!1;for(var ve=1;4>=ve;ve*=2){var Pe=ce*(1+.2/ve);Pe=Math.min(Pe,J+100663296);var Ze=Math;Pe=Math.max(J,Pe),Ze=Ze.min.call(Ze,4294901760,Pe+(65536-Pe%65536)%65536);e:{try{ge.grow(Ze-de.byteLength+65535>>>16),Ct(ge.buffer);var ft=1;break e}catch{}ft=void 0}if(ft)return!0}return!1},Na:function(){throw"unwind"},Ga:pt,Ha:Ii,J:Dt,I:pr,S:Qo,ga:Fa,R:L_,d:function(){return Jo},na:function J(ce,ve){J.lc||(J.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var Ze=new Uint8Array(1);return()=>(crypto.getRandomValues(Ze),Ze[0])}if(N)try{var ft=q(Object(function(){var en=new Error("Cannot find module 'crypto'");throw en.code="MODULE_NOT_FOUND",en}()));return()=>ft.randomBytes(1)[0]}catch{}return()=>le("randomDevice")}());for(var Pe=0;Pe<ve;Pe++)S()[(ce+Pe|0)>>>0]=J.lc();return 0},ia:function(J,ce,ve){var Pe=gi();try{return we(J)(ce,ve)}catch(Ze){if(fi(Pe),Ze!==Ze+0)throw Ze;xi(1,0)}},ja:function(J,ce,ve){var Pe=gi();try{return we(J)(ce,ve)}catch(Ze){if(fi(Pe),Ze!==Ze+0)throw Ze;xi(1,0)}},K:function(J){var ce=gi();try{return we(J)()}catch(ve){if(fi(ce),ve!==ve+0)throw ve;xi(1,0)}},f:function(J,ce){var ve=gi();try{return we(J)(ce)}catch(Pe){if(fi(ve),Pe!==Pe+0)throw Pe;xi(1,0)}},P:function(J,ce,ve){var Pe=gi();try{return we(J)(ce,ve)}catch(Ze){if(fi(Pe),Ze!==Ze+0)throw Ze;xi(1,0)}},Q:function(J,ce,ve){var Pe=gi();try{return we(J)(ce,ve)}catch(Ze){if(fi(Pe),Ze!==Ze+0)throw Ze;xi(1,0)}},k:function(J,ce,ve){var Pe=gi();try{return we(J)(ce,ve)}catch(Ze){if(fi(Pe),Ze!==Ze+0)throw Ze;xi(1,0)}},p:function(J,ce,ve,Pe){var Ze=gi();try{return we(J)(ce,ve,Pe)}catch(ft){if(fi(Ze),ft!==ft+0)throw ft;xi(1,0)}},q:function(J,ce,ve,Pe,Ze){var ft=gi();try{return we(J)(ce,ve,Pe,Ze)}catch(en){if(fi(ft),en!==en+0)throw en;xi(1,0)}},N:function(J,ce,ve,Pe,Ze,ft){var en=gi();try{return we(J)(ce,ve,Pe,Ze,ft)}catch(Nn){if(fi(en),Nn!==Nn+0)throw Nn;xi(1,0)}},s:function(J,ce,ve,Pe,Ze,ft){var en=gi();try{return we(J)(ce,ve,Pe,Ze,ft)}catch(Nn){if(fi(en),Nn!==Nn+0)throw Nn;xi(1,0)}},w:function(J,ce,ve,Pe,Ze,ft,en){var Nn=gi();try{return we(J)(ce,ve,Pe,Ze,ft,en)}catch(Mi){if(fi(Nn),Mi!==Mi+0)throw Mi;xi(1,0)}},L:function(J,ce,ve,Pe,Ze,ft,en,Nn){var Mi=gi();try{return we(J)(ce,ve,Pe,Ze,ft,en,Nn)}catch(Di){if(fi(Mi),Di!==Di+0)throw Di;xi(1,0)}},E:function(J,ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr,ga){var Es=gi();try{return we(J)(ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr,ga)}catch(_t){if(fi(Es),_t!==_t+0)throw _t;xi(1,0)}},aa:function(J,ce,ve,Pe,Ze,ft,en,Nn){var Mi=gi();try{return H_(J,ce,ve,Pe,Ze,ft,en,Nn)}catch(Di){if(fi(Mi),Di!==Di+0)throw Di;xi(1,0)}},_:function(J,ce,ve,Pe,Ze,ft,en){var Nn=gi();try{return Np(J,ce,ve,Pe,Ze,ft,en)}catch(Mi){if(fi(Nn),Mi!==Mi+0)throw Mi;xi(1,0)}},Z:function(J,ce,ve,Pe,Ze){var ft=gi();try{return G_(J,ce,ve,Pe,Ze)}catch(en){if(fi(ft),en!==en+0)throw en;xi(1,0)}},ca:function(J,ce,ve,Pe){var Ze=gi();try{return Ur(J,ce,ve,Pe)}catch(ft){if(fi(Ze),ft!==ft+0)throw ft;xi(1,0)}},$:function(J){var ce=gi();try{return Kd(J)}catch(ve){if(fi(ce),ve!==ve+0)throw ve;xi(1,0)}},ba:function(J,ce){var ve=gi();try{return Dw(J,ce)}catch(Pe){if(fi(ve),Pe!==Pe+0)throw Pe;xi(1,0)}},Y:function(J,ce,ve){var Pe=gi();try{return Mw(J,ce,ve)}catch(Ze){if(fi(Pe),Ze!==Ze+0)throw Ze;xi(1,0)}},g:function(J){var ce=gi();try{we(J)()}catch(ve){if(fi(ce),ve!==ve+0)throw ve;xi(1,0)}},r:function(J,ce){var ve=gi();try{we(J)(ce)}catch(Pe){if(fi(ve),Pe!==Pe+0)throw Pe;xi(1,0)}},i:function(J,ce,ve){var Pe=gi();try{we(J)(ce,ve)}catch(Ze){if(fi(Pe),Ze!==Ze+0)throw Ze;xi(1,0)}},ha:function(J,ce,ve,Pe){var Ze=gi();try{we(J)(ce,ve,Pe)}catch(ft){if(fi(Ze),ft!==ft+0)throw ft;xi(1,0)}},m:function(J,ce,ve,Pe){var Ze=gi();try{we(J)(ce,ve,Pe)}catch(ft){if(fi(Ze),ft!==ft+0)throw ft;xi(1,0)}},v:function(J,ce,ve,Pe,Ze){var ft=gi();try{we(J)(ce,ve,Pe,Ze)}catch(en){if(fi(ft),en!==en+0)throw en;xi(1,0)}},u:function(J,ce,ve,Pe,Ze,ft){var en=gi();try{we(J)(ce,ve,Pe,Ze,ft)}catch(Nn){if(fi(en),Nn!==Nn+0)throw Nn;xi(1,0)}},O:function(J,ce,ve,Pe,Ze,ft,en){var Nn=gi();try{we(J)(ce,ve,Pe,Ze,ft,en)}catch(Mi){if(fi(Nn),Mi!==Mi+0)throw Mi;xi(1,0)}},A:function(J,ce,ve,Pe,Ze,ft,en,Nn){var Mi=gi();try{we(J)(ce,ve,Pe,Ze,ft,en,Nn)}catch(Di){if(fi(Mi),Di!==Di+0)throw Di;xi(1,0)}},ka:function(J,ce,ve,Pe,Ze,ft,en,Nn,Mi){var Di=gi();try{we(J)(ce,ve,Pe,Ze,ft,en,Nn,Mi)}catch(Pr){if(fi(Di),Pr!==Pr+0)throw Pr;xi(1,0)}},C:function(J,ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr){var ga=gi();try{we(J)(ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr)}catch(Es){if(fi(ga),Es!==Es+0)throw Es;xi(1,0)}},D:function(J,ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr,ga,Es,_t,Bi,Tr){var Ua=gi();try{we(J)(ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr,ga,Es,_t,Bi,Tr)}catch(xc){if(fi(Ua),xc!==xc+0)throw xc;xi(1,0)}},fa:function(J,ce,ve,Pe,Ze,ft,en,Nn){var Mi=gi();try{Aw(J,ce,ve,Pe,Ze,ft,en,Nn)}catch(Di){if(fi(Mi),Di!==Di+0)throw Di;xi(1,0)}},da:function(J,ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr,ga){var Es=gi();try{Iw(J,ce,ve,Pe,Ze,ft,en,Nn,Mi,Di,Pr,ga)}catch(_t){if(fi(Es),_t!==_t+0)throw _t;xi(1,0)}},ea:function(J,ce,ve,Pe,Ze,ft){var en=gi();try{Cw(J,ce,ve,Pe,Ze,ft)}catch(Nn){if(fi(en),Nn!==Nn+0)throw Nn;xi(1,0)}},o:function(J){return J},a:ge||u.wasmMemory,G:function(J){Jo=J},la:Rp,z:function(J,ce,ve,Pe){return Rp(J,ce,ve,Pe)}};(function(){function J(Ze,ft){u.asm=Ze.exports,xt.qc.push(u.asm.sb),Wt=u.asm.ub,rn.unshift(u.asm.Va),je=ft,$||(Q--,u.monitorRunDependencies&&u.monitorRunDependencies(Q),0==Q&&(null!==vt&&(clearInterval(vt),vt=null),Re&&(Ze=Re,Re=null,Ze())))}function ce(Ze){J(Ze.instance,Ze.module)}function ve(Ze){return function(){if(!oe&&(B||U)){if("function"==typeof fetch&&!Sn.startsWith("file://"))return fetch(Sn,{credentials:"same-origin"}).then(function(ft){if(!ft.ok)throw"failed to load wasm binary file at '"+Sn+"'";return ft.arrayBuffer()}).catch(function(){return Te()});if(g)return new Promise(function(ft,en){g(Sn,function(Nn){ft(new Uint8Array(Nn))},en)})}return Promise.resolve().then(function(){return Te()})}().then(function(ft){return WebAssembly.instantiate(ft,Pe)}).then(function(ft){return ft}).then(Ze,function(ft){ae("failed to asynchronously prepare wasm: "+ft),le(ft)})}var Pe={a:B_};if($||(Q++,u.monitorRunDependencies&&u.monitorRunDependencies(Q)),u.instantiateWasm)try{return u.instantiateWasm(Pe,J)}catch(Ze){return ae("Module.instantiateWasm callback failed with error: "+Ze),!1}(oe||"function"!=typeof WebAssembly.instantiateStreaming||me()||Sn.startsWith("file://")||N||"function"!=typeof fetch?ve(ce):fetch(Sn,{credentials:"same-origin"}).then(function(Ze){return WebAssembly.instantiateStreaming(Ze,Pe).then(ce,function(ft){return ae("wasm streaming compile failed: "+ft),ae("falling back to ArrayBuffer instantiation"),ve(ce)})})).catch(h)})(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var xu=u._pthread_self=function(){return(xu=u._pthread_self=u.asm.ob).apply(null,arguments)},Pp=u._malloc=function(){return(Pp=u._malloc=u.asm.pb).apply(null,arguments)},V_=u._free=function(){return(V_=u._free=u.asm.qb).apply(null,arguments)},z_=u._fflush=function(){return(z_=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var yc=u.___funcs_on_exit=function(){return(yc=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},Xd=u.__emscripten_thread_init=function(){return(Xd=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var vc,Sw=u._emscripten_run_in_main_runtime_thread_js=function(){return(Sw=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},wu=u.__emscripten_proxy_execute_task_queue=function(){return(wu=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Op=u.__emscripten_thread_free_data=function(){return(Op=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},j_=u.__emscripten_thread_exit=function(){return(j_=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},xi=u._setThrew=function(){return(xi=u._setThrew=u.asm.Bb).apply(null,arguments)},$_=u._emscripten_stack_set_limits=function(){return($_=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},gi=u.stackSave=function(){return(gi=u.stackSave=u.asm.Db).apply(null,arguments)},fi=u.stackRestore=function(){return(fi=u.stackRestore=u.asm.Eb).apply(null,arguments)},kp=u.stackAlloc=function(){return(kp=u.stackAlloc=u.asm.Fb).apply(null,arguments)},Yd=u.___cxa_can_catch=function(){return(Yd=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Tw=u.___cxa_is_pointer_type=function(){return(Tw=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},Kd=u.dynCall_j=function(){return(Kd=u.dynCall_j=u.asm.Ib).apply(null,arguments)},Np=u.dynCall_iiiiij=function(){return(Np=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},Mw=u.dynCall_jii=function(){return(Mw=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Aw=u.dynCall_viiiiij=function(){return(Aw=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Cw=u.dynCall_vjji=function(){return(Cw=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Iw=u.dynCall_viiijjjii=function(){return(Iw=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ur=u.dynCall_iij=function(){return(Ur=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},Dw=u.dynCall_ji=function(){return(Dw=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},H_=u.dynCall_iiiiiij=function(){return(H_=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},G_=u.dynCall_iiij=function(){return(G_=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function Rw(){function J(){if(!vc&&(vc=!0,u.calledRun=!0,!Mt)&&($||On(rn),l(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!$)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var ce=u.postRun.shift();hi.unshift(ce)}On(hi)}}if(!(0<Q))if($)l(u),$||On(rn),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)Ki();On(En),0<Q||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),J()},1)):J())}}if(u.UTF8ToString=Ce,u.stringToUTF8=function(J,ce,ve){return Le(J,O(),ce,ve)},u.lengthBytesUTF8=Yt,u.keepRuntimeAlive=ii,u.wasmMemory=ge,u.stackSave=gi,u.stackRestore=fi,u.stackAlloc=kp,u.ExitStatus=Xe,u.PThread=xt,Re=function J(){vc||Rw(),vc||(Re=J)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Rw(),V.ready});Ye.exports=L},932:(Ye,F,q)=>{var z,L=(z=(z=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(V){var S,O,C;V=V||{},S||(S=void 0!==V?V:{}),S.ready=new Promise(function(fe,Me){O=fe,C=Me});var w,_,u,l,h,f,g=Object.assign({},S),b="./this.program",x=(fe,Me)=>{throw Me},A="object"==typeof window,k="function"==typeof importScripts,T="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,M="";T?(M=k?q(908).dirname(M)+"/":"//",f=()=>{h||(l=q(1384),h=q(908))},w=function(fe,Me){return f(),fe=h.normalize(fe),l.readFileSync(fe,Me?void 0:"utf8")},u=fe=>((fe=w(fe,!0)).buffer||(fe=new Uint8Array(fe)),fe),_=(fe,Me,ze)=>{f(),fe=h.normalize(fe),l.readFile(fe,function(Ke,nt){Ke?ze(Ke):Me(nt.buffer)})},1<process.argv.length&&(b=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(fe){if(!(fe instanceof dn))throw fe}),process.on("unhandledRejection",function(fe){throw fe}),x=(fe,Me)=>{if(N||0<gt)throw process.exitCode=fe,Me;Me instanceof dn||U("exiting due to exception: "+Me),process.exit(fe)},S.inspect=function(){return"[Emscripten Module object]"}):(A||k)&&(k?M=self.location.href:typeof document<"u"&&document.currentScript&&(M=document.currentScript.src),z&&(M=z),M=0!==M.indexOf("blob:")?M.substr(0,M.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w=fe=>{var Me=new XMLHttpRequest;return Me.open("GET",fe,!1),Me.send(null),Me.responseText},k&&(u=fe=>{var Me=new XMLHttpRequest;return Me.open("GET",fe,!1),Me.responseType="arraybuffer",Me.send(null),new Uint8Array(Me.response)}),_=(fe,Me,ze)=>{var Ke=new XMLHttpRequest;Ke.open("GET",fe,!0),Ke.responseType="arraybuffer",Ke.onload=()=>{200==Ke.status||0==Ke.status&&Ke.response?Me(Ke.response):ze()},Ke.onerror=ze,Ke.send(null)});var P,B=S.print||console.log.bind(console),U=S.printErr||console.warn.bind(console);Object.assign(S,g),g=null,S.thisProgram&&(b=S.thisProgram),S.quit&&(x=S.quit),S.wasmBinary&&(P=S.wasmBinary);var N=S.noExitRuntime||!1;"object"!=typeof WebAssembly&&Ne("no native wasm support detected");var $,G,W,K,X,oe,Z=!1,ae=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function pe(fe,Me,ze){var Ke=(Me>>>=0)+ze;for(ze=Me;fe[ze]&&!(ze>=Ke);)++ze;if(16<ze-Me&&fe.buffer&&ae)return ae.decode(fe.subarray(Me,ze));for(Ke="";Me<ze;){var nt=fe[Me++];if(128&nt){var yt=63&fe[Me++];if(192==(224&nt))Ke+=String.fromCharCode((31&nt)<<6|yt);else{var it=63&fe[Me++];65536>(nt=224==(240&nt)?(15&nt)<<12|yt<<6|it:(7&nt)<<18|yt<<12|it<<6|63&fe[Me++])?Ke+=String.fromCharCode(nt):(nt-=65536,Ke+=String.fromCharCode(55296|nt>>10,56320|1023&nt))}}else Ke+=String.fromCharCode(nt)}return Ke}function ge(fe,Me){return(fe>>>=0)?pe(K,fe,Me):""}function je(fe,Me,ze,Ke){if(!(0<Ke))return 0;var nt=ze>>>=0;Ke=ze+Ke-1;for(var yt=0;yt<fe.length;++yt){var it=fe.charCodeAt(yt);if(55296<=it&&57343>=it&&(it=65536+((1023&it)<<10)|1023&fe.charCodeAt(++yt)),127>=it){if(ze>=Ke)break;Me[ze++>>>0]=it}else{if(2047>=it){if(ze+1>=Ke)break;Me[ze++>>>0]=192|it>>6}else{if(65535>=it){if(ze+2>=Ke)break;Me[ze++>>>0]=224|it>>12}else{if(ze+3>=Ke)break;Me[ze++>>>0]=240|it>>18,Me[ze++>>>0]=128|it>>12&63}Me[ze++>>>0]=128|it>>6&63}Me[ze++>>>0]=128|63&it}}return Me[ze>>>0]=0,ze-nt}function de(fe){for(var Me=0,ze=0;ze<fe.length;++ze){var Ke=fe.charCodeAt(ze);127>=Ke?Me++:2047>=Ke?Me+=2:55296<=Ke&&57343>=Ke?(Me+=4,++ze):Me+=3}return Me}function Be(){var fe=$.buffer;G=fe,S.HEAP8=W=new Int8Array(fe),S.HEAP16=new Int16Array(fe),S.HEAP32=X=new Int32Array(fe),S.HEAPU8=K=new Uint8Array(fe),S.HEAPU16=new Uint16Array(fe),S.HEAPU32=oe=new Uint32Array(fe),S.HEAPF32=new Float32Array(fe),S.HEAPF64=new Float64Array(fe)}var ee,Ae=[],Ue=[],qe=[],Mt=[],gt=0;function zt(){var fe=S.preRun.shift();Ae.unshift(fe)}var Ce,Le=0,Yt=null,Ct=null;function Ne(fe){throw S.onAbort&&S.onAbort(fe),U(fe="Aborted("+fe+")"),Z=!0,fe=new WebAssembly.RuntimeError(fe+". Build with -sASSERTIONS for more info."),C(fe),fe}function Wt(){return Ce.startsWith("data:application/octet-stream;base64,")}if(Ce="ort-wasm.wasm",!Wt()){var En=Ce;Ce=S.locateFile?S.locateFile(En,M):M+En}function rn(){var fe=Ce;try{if(fe==Ce&&P)return new Uint8Array(P);if(u)return u(fe);throw"both async and sync fetching of the wasm failed"}catch(Me){Ne(Me)}}function dn(fe){this.name="ExitStatus",this.message="Program terminated with exit("+fe+")",this.status=fe}function hi(fe){for(;0<fe.length;)fe.shift()(S)}var ii=[],Ki=0,Sn=0;function Q(fe){this.Db=fe,this.zb=fe-24,this.Ub=function(Me){oe[this.zb+4>>2>>>0]=Me},this.Eb=function(){return oe[this.zb+4>>2>>>0]},this.Sb=function(Me){oe[this.zb+8>>2>>>0]=Me},this.Wb=function(){return oe[this.zb+8>>2>>>0]},this.Tb=function(){X[this.zb>>2>>>0]=0},this.Ib=function(Me){W[(this.zb+12|0)>>>0]=Me?1:0},this.Pb=function(){return 0!=W[(this.zb+12|0)>>>0]},this.Jb=function(Me){W[(this.zb+13|0)>>>0]=Me?1:0},this.Lb=function(){return 0!=W[(this.zb+13|0)>>>0]},this.Rb=function(Me,ze){this.Fb(0),this.Ub(Me),this.Sb(ze),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){X[this.zb>>2>>>0]+=1},this.Xb=function(){var Me=X[this.zb>>2>>>0];return X[this.zb>>2>>>0]=Me-1,1===Me},this.Fb=function(Me){oe[this.zb+16>>2>>>0]=Me},this.Ob=function(){return oe[this.zb+16>>2>>>0]},this.Qb=function(){if(bn(this.Eb()))return oe[this.Db>>2>>>0];var Me=this.Ob();return 0!==Me?Me:this.Db}}function vt(fe){return dt(new Q(fe).zb)}var Re=[];function le(fe){var Me=Re[fe];return Me||(fe>=Re.length&&(Re.length=fe+1),Re[fe]=Me=ee.get(fe)),Me}function me(fe){var Me=de(fe)+1,ze=we(Me);return ze&&je(fe,W,ze,Me),ze}var Te={};function tt(){if(!Xe){var fe,Me={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:b||"./this.program"};for(fe in Te)void 0===Te[fe]?delete Me[fe]:Me[fe]=Te[fe];var ze=[];for(fe in Me)ze.push(fe+"="+Me[fe]);Xe=ze}return Xe}var Xe,Ve=[null,[],[]];function ut(fe,Me){var ze=Ve[fe];0===Me||10===Me?((1===fe?B:U)(pe(ze,0)),ze.length=0):ze.push(Me)}var Rt=0;function Dt(fe){return fe%4==0&&(fe%100!=0||fe%400==0)}var xt=[31,29,31,30,31,30,31,31,30,31,30,31],On=[31,28,31,30,31,30,31,31,30,31,30,31];function Cn(fe,Me,ze,Ke){function nt(pt,Ii,pr){for(pt="number"==typeof pt?pt.toString():pt||"";pt.length<Ii;)pt=pr[0]+pt;return pt}function yt(pt,Ii){return nt(pt,Ii,"0")}function it(pt,Ii){function pr(Fa){return 0>Fa?-1:0<Fa?1:0}var Qo;return 0===(Qo=pr(pt.getFullYear()-Ii.getFullYear()))&&0===(Qo=pr(pt.getMonth()-Ii.getMonth()))&&(Qo=pr(pt.getDate()-Ii.getDate())),Qo}function kn(pt){switch(pt.getDay()){case 0:return new Date(pt.getFullYear()-1,11,29);case 1:return pt;case 2:return new Date(pt.getFullYear(),0,3);case 3:return new Date(pt.getFullYear(),0,2);case 4:return new Date(pt.getFullYear(),0,1);case 5:return new Date(pt.getFullYear()-1,11,31);case 6:return new Date(pt.getFullYear()-1,11,30)}}function yn(pt){var Ii=pt.Bb;for(pt=new Date(new Date(pt.Cb+1900,0,1).getTime());0<Ii;){var pr=pt.getMonth(),Qo=(Dt(pt.getFullYear())?xt:On)[pr];if(!(Ii>Qo-pt.getDate())){pt.setDate(pt.getDate()+Ii);break}Ii-=Qo-pt.getDate()+1,pt.setDate(1),11>pr?pt.setMonth(pr+1):(pt.setMonth(0),pt.setFullYear(pt.getFullYear()+1))}return pr=new Date(pt.getFullYear()+1,0,4),Ii=kn(new Date(pt.getFullYear(),0,4)),pr=kn(pr),0>=it(Ii,pt)?0>=it(pr,pt)?pt.getFullYear()+1:pt.getFullYear():pt.getFullYear()-1}var mi=X[Ke+40>>2>>>0];for(var Zi in Ke={$b:X[Ke>>2>>>0],Zb:X[Ke+4>>2>>>0],Gb:X[Ke+8>>2>>>0],Kb:X[Ke+12>>2>>>0],Hb:X[Ke+16>>2>>>0],Cb:X[Ke+20>>2>>>0],Ab:X[Ke+24>>2>>>0],Bb:X[Ke+28>>2>>>0],bc:X[Ke+32>>2>>>0],Yb:X[Ke+36>>2>>>0],ac:mi?ge(mi):""},ze=ge(ze),mi={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ze=ze.replace(new RegExp(Zi,"g"),mi[Zi]);var pt,Ii,io="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Sr="January February March April May June July August September October November December".split(" ");for(Zi in mi={"%a":function(pt){return io[pt.Ab].substring(0,3)},"%A":function(pt){return io[pt.Ab]},"%b":function(pt){return Sr[pt.Hb].substring(0,3)},"%B":function(pt){return Sr[pt.Hb]},"%C":function(pt){return yt((pt.Cb+1900)/100|0,2)},"%d":function(pt){return yt(pt.Kb,2)},"%e":function(pt){return nt(pt.Kb,2," ")},"%g":function(pt){return yn(pt).toString().substring(2)},"%G":function(pt){return yn(pt)},"%H":function(pt){return yt(pt.Gb,2)},"%I":function(pt){return 0==(pt=pt.Gb)?pt=12:12<pt&&(pt-=12),yt(pt,2)},"%j":function(pt){for(var Ii=0,pr=0;pr<=pt.Hb-1;Ii+=(Dt(pt.Cb+1900)?xt:On)[pr++]);return yt(pt.Kb+Ii,3)},"%m":function(pt){return yt(pt.Hb+1,2)},"%M":function(pt){return yt(pt.Zb,2)},"%n":function(){return"\n"},"%p":function(pt){return 0<=pt.Gb&&12>pt.Gb?"AM":"PM"},"%S":function(pt){return yt(pt.$b,2)},"%t":function(){return"\t"},"%u":function(pt){return pt.Ab||7},"%U":function(pt){return yt(Math.floor((pt.Bb+7-pt.Ab)/7),2)},"%V":function(pt){var Ii=Math.floor((pt.Bb+7-(pt.Ab+6)%7)/7);if(2>=(pt.Ab+371-pt.Bb-2)%7&&Ii++,Ii)53==Ii&&(4==(pr=(pt.Ab+371-pt.Bb)%7)||3==pr&&Dt(pt.Cb)||(Ii=1));else{Ii=52;var pr=(pt.Ab+7-pt.Bb-1)%7;(4==pr||5==pr&&Dt(pt.Cb%400-1))&&Ii++}return yt(Ii,2)},"%w":function(pt){return pt.Ab},"%W":function(pt){return yt(Math.floor((pt.Bb+7-(pt.Ab+6)%7)/7),2)},"%y":function(pt){return(pt.Cb+1900).toString().substring(2)},"%Y":function(pt){return pt.Cb+1900},"%z":function(pt){return(0<=(pt=pt.Yb)?"+":"-")+("0000"+((pt=Math.abs(pt)/60)/60*100+pt%60)).slice(-4)},"%Z":function(pt){return pt.ac},"%%":function(){return"%"}},ze=ze.replace(/%%/g,"\0\0"),mi)ze.includes(Zi)&&(ze=ze.replace(new RegExp(Zi,"g"),mi[Zi](Ke)));return je(pt=ze=ze.replace(/\0\0/g,"%"),Ii=Array(de(pt)+1),0,Ii.length),(Zi=Ii).length>Me?0:(W.set(Zi,fe>>>0),Zi.length-1)}var Vi={a:function(fe){return we(fe+24)+24},m:function(fe){return(fe=new Q(fe)).Pb()||(fe.Ib(!0),Ki--),fe.Jb(!1),ii.push(fe),fe.Nb(),fe.Qb()},ia:function(fe){throw U("Unexpected exception thrown, this is not properly supported - aborting"),Z=!0,fe},w:function(){At(0);var fe=ii.pop();if(fe.Xb()&&!fe.Lb()){var Me=fe.Wb();Me&&le(Me)(fe.Db),vt(fe.Db)}Sn=0},d:function(){var fe=Sn;if(!fe)return Rt=0;var Me=new Q(fe);Me.Fb(fe);var ze=Me.Eb();if(!ze)return Rt=0,fe;for(var Ke=Array.prototype.slice.call(arguments),nt=0;nt<Ke.length;nt++){var yt=Ke[nt];if(0===yt||yt===ze)break;if(ri(yt,ze,Me.zb+16))return Rt=yt,fe}return Rt=ze,fe},k:function(){var fe=Sn;if(!fe)return Rt=0;var Me=new Q(fe);Me.Fb(fe);var ze=Me.Eb();if(!ze)return Rt=0,fe;for(var Ke=Array.prototype.slice.call(arguments),nt=0;nt<Ke.length;nt++){var yt=Ke[nt];if(0===yt||yt===ze)break;if(ri(yt,ze,Me.zb+16))return Rt=yt,fe}return Rt=ze,fe},g:function(){var fe=Sn;if(!fe)return Rt=0;var Me=new Q(fe);Me.Fb(fe);var ze=Me.Eb();if(!ze)return Rt=0,fe;for(var Ke=Array.prototype.slice.call(arguments),nt=0;nt<Ke.length;nt++){var yt=Ke[nt];if(0===yt||yt===ze)break;if(ri(yt,ze,Me.zb+16))return Rt=yt,fe}return Rt=ze,fe},s:vt,L:function(){var fe=ii.pop();fe||Ne("no exception to throw");var Me=fe.Db;throw fe.Lb()||(ii.push(fe),fe.Jb(!0),fe.Ib(!1),Ki++),Sn=Me,Me},b:function(fe,Me,ze){throw new Q(fe).Rb(Me,ze),Sn=fe,Ki++,fe},la:function(){return Ki},i:function(fe){throw Sn||(Sn=fe),fe},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Ne("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(fe,Me){fe=new Date(1e3*(oe[fe>>>2]+4294967296*X[fe+4>>>2])),X[Me>>2>>>0]=fe.getUTCSeconds(),X[Me+4>>2>>>0]=fe.getUTCMinutes(),X[Me+8>>2>>>0]=fe.getUTCHours(),X[Me+12>>2>>>0]=fe.getUTCDate(),X[Me+16>>2>>>0]=fe.getUTCMonth(),X[Me+20>>2>>>0]=fe.getUTCFullYear()-1900,X[Me+24>>2>>>0]=fe.getUTCDay(),X[Me+28>>2>>>0]=(fe.getTime()-Date.UTC(fe.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(fe,Me){fe=new Date(1e3*(oe[fe>>>2]+4294967296*X[fe+4>>>2])),X[Me>>2>>>0]=fe.getSeconds(),X[Me+4>>2>>>0]=fe.getMinutes(),X[Me+8>>2>>>0]=fe.getHours(),X[Me+12>>2>>>0]=fe.getDate(),X[Me+16>>2>>>0]=fe.getMonth(),X[Me+20>>2>>>0]=fe.getFullYear()-1900,X[Me+24>>2>>>0]=fe.getDay();var ze=new Date(fe.getFullYear(),0,1);X[Me+28>>2>>>0]=(fe.getTime()-ze.getTime())/864e5|0,X[Me+36>>2>>>0]=-60*fe.getTimezoneOffset();var Ke=new Date(fe.getFullYear(),6,1).getTimezoneOffset();ze=ze.getTimezoneOffset(),X[Me+32>>2>>>0]=0|(Ke!=ze&&fe.getTimezoneOffset()==Math.min(ze,Ke))},Fa:function(fe){var Me=new Date(X[fe+20>>2>>>0]+1900,X[fe+16>>2>>>0],X[fe+12>>2>>>0],X[fe+8>>2>>>0],X[fe+4>>2>>>0],X[fe>>2>>>0],0),ze=X[fe+32>>2>>>0],Ke=Me.getTimezoneOffset(),nt=new Date(Me.getFullYear(),0,1),yt=new Date(Me.getFullYear(),6,1).getTimezoneOffset(),it=nt.getTimezoneOffset(),kn=Math.min(it,yt);return 0>ze?X[fe+32>>2>>>0]=+(yt!=it&&kn==Ke):0<ze!=(kn==Ke)&&(yt=Math.max(it,yt),Me.setTime(Me.getTime()+6e4*((0<ze?kn:yt)-Ke))),X[fe+24>>2>>>0]=Me.getDay(),X[fe+28>>2>>>0]=(Me.getTime()-nt.getTime())/864e5|0,X[fe>>2>>>0]=Me.getSeconds(),X[fe+4>>2>>>0]=Me.getMinutes(),X[fe+8>>2>>>0]=Me.getHours(),X[fe+12>>2>>>0]=Me.getDate(),X[fe+16>>2>>>0]=Me.getMonth(),Me.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function fe(Me,ze,Ke){fe.Vb||(fe.Vb=!0,function(nt,yt,it){function kn(Sr){return(Sr=Sr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Sr[1]:"GMT"}var yn=(new Date).getFullYear(),mi=new Date(yn,0,1),Zi=new Date(yn,6,1);yn=mi.getTimezoneOffset();var io=Zi.getTimezoneOffset();X[nt>>2>>>0]=60*Math.max(yn,io),X[yt>>2>>>0]=+(yn!=io),nt=kn(mi),yt=kn(Zi),nt=me(nt),yt=me(yt),io<yn?(oe[it>>2>>>0]=nt,oe[it+4>>2>>>0]=yt):(oe[it>>2>>>0]=yt,oe[it+4>>2>>>0]=nt)}(Me,ze,Ke))},B:function(){Ne("")},ma:function(){return 4294901760},I:T?()=>{var fe=process.hrtime();return 1e3*fe[0]+fe[1]/1e6}:()=>performance.now(),xa:function(fe,Me,ze){K.copyWithin(fe>>>0,Me>>>0,Me+ze>>>0)},G:function(fe){var Me=K.length;if(4294901760<(fe>>>=0))return!1;for(var ze=1;4>=ze;ze*=2){var Ke=Me*(1+.2/ze);Ke=Math.min(Ke,fe+100663296);var nt=Math;Ke=Math.max(fe,Ke),nt=nt.min.call(nt,4294901760,Ke+(65536-Ke%65536)%65536);e:{try{$.grow(nt-G.byteLength+65535>>>16),Be();var yt=1;break e}catch{}yt=void 0}if(yt)return!0}return!1},va:function(fe,Me){var ze=0;return tt().forEach(function(Ke,nt){var yt=Me+ze;for(nt=oe[fe+4*nt>>2>>>0]=yt,yt=0;yt<Ke.length;++yt)W[(0|nt++)>>>0]=Ke.charCodeAt(yt);W[(0|nt)>>>0]=0,ze+=Ke.length+1}),0},wa:function(fe,Me){var ze=tt();oe[fe>>2>>>0]=ze.length;var Ke=0;return ze.forEach(function(nt){Ke+=nt.length+1}),oe[Me>>2>>>0]=Ke,0},ba:function(fe){N||0<gt||(Bt(),hi(qe),Tt(0),Ve[1].length&&ut(1,10),Ve[2].length&&ut(2,10)),N||0<gt||(S.onExit&&S.onExit(fe),Z=!0),x(fe,new dn(fe))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(fe,Me,ze,Ke){for(var nt=0,yt=0;yt<ze;yt++){var it=oe[Me>>2>>>0],kn=oe[Me+4>>2>>>0];Me+=8;for(var yn=0;yn<kn;yn++)ut(fe,K[it+yn>>>0]);nt+=kn}return oe[Ke>>2>>>0]=nt,0},c:function(){return Rt},ja:function fe(Me,ze){fe.Mb||(fe.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var nt=new Uint8Array(1);return()=>(crypto.getRandomValues(nt),nt[0])}if(T)try{var yt=q(Object(function(){var it=new Error("Cannot find module 'crypto'");throw it.code="MODULE_NOT_FOUND",it}()));return()=>yt.randomBytes(1)[0]}catch{}return()=>Ne("randomDevice")}());for(var Ke=0;Ke<ze;Ke++)W[(Me+Ke|0)>>>0]=fe.Mb();return 0},ea:function(fe,Me,ze){var Ke=ht();try{return le(fe)(Me,ze)}catch(nt){if(Ot(Ke),nt!==nt+0)throw nt;At(1,0)}},fa:function(fe,Me,ze){var Ke=ht();try{return le(fe)(Me,ze)}catch(nt){if(Ot(Ke),nt!==nt+0)throw nt;At(1,0)}},J:function(fe){var Me=ht();try{return le(fe)()}catch(ze){if(Ot(Me),ze!==ze+0)throw ze;At(1,0)}},e:function(fe,Me){var ze=ht();try{return le(fe)(Me)}catch(Ke){if(Ot(ze),Ke!==Ke+0)throw Ke;At(1,0)}},N:function(fe,Me,ze){var Ke=ht();try{return le(fe)(Me,ze)}catch(nt){if(Ot(Ke),nt!==nt+0)throw nt;At(1,0)}},O:function(fe,Me,ze){var Ke=ht();try{return le(fe)(Me,ze)}catch(nt){if(Ot(Ke),nt!==nt+0)throw nt;At(1,0)}},j:function(fe,Me,ze){var Ke=ht();try{return le(fe)(Me,ze)}catch(nt){if(Ot(Ke),nt!==nt+0)throw nt;At(1,0)}},o:function(fe,Me,ze,Ke){var nt=ht();try{return le(fe)(Me,ze,Ke)}catch(yt){if(Ot(nt),yt!==yt+0)throw yt;At(1,0)}},p:function(fe,Me,ze,Ke,nt){var yt=ht();try{return le(fe)(Me,ze,Ke,nt)}catch(it){if(Ot(yt),it!==it+0)throw it;At(1,0)}},M:function(fe,Me,ze,Ke,nt,yt){var it=ht();try{return le(fe)(Me,ze,Ke,nt,yt)}catch(kn){if(Ot(it),kn!==kn+0)throw kn;At(1,0)}},r:function(fe,Me,ze,Ke,nt,yt){var it=ht();try{return le(fe)(Me,ze,Ke,nt,yt)}catch(kn){if(Ot(it),kn!==kn+0)throw kn;At(1,0)}},v:function(fe,Me,ze,Ke,nt,yt,it){var kn=ht();try{return le(fe)(Me,ze,Ke,nt,yt,it)}catch(yn){if(Ot(kn),yn!==yn+0)throw yn;At(1,0)}},K:function(fe,Me,ze,Ke,nt,yt,it,kn){var yn=ht();try{return le(fe)(Me,ze,Ke,nt,yt,it,kn)}catch(mi){if(Ot(yn),mi!==mi+0)throw mi;At(1,0)}},D:function(fe,Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi,io){var Sr=ht();try{return le(fe)(Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi,io)}catch(pt){if(Ot(Sr),pt!==pt+0)throw pt;At(1,0)}},X:function(fe,Me,ze,Ke,nt,yt,it,kn){var yn=ht();try{return Jt(fe,Me,ze,Ke,nt,yt,it,kn)}catch(mi){if(Ot(yn),mi!==mi+0)throw mi;At(1,0)}},V:function(fe,Me,ze,Ke,nt,yt,it){var kn=ht();try{return zn(fe,Me,ze,Ke,nt,yt,it)}catch(yn){if(Ot(kn),yn!==yn+0)throw yn;At(1,0)}},U:function(fe,Me,ze,Ke,nt){var yt=ht();try{return Lr(fe,Me,ze,Ke,nt)}catch(it){if(Ot(yt),it!==it+0)throw it;At(1,0)}},Z:function(fe,Me,ze,Ke){var nt=ht();try{return on(fe,Me,ze,Ke)}catch(yt){if(Ot(nt),yt!==yt+0)throw yt;At(1,0)}},W:function(fe){var Me=ht();try{return Li(fe)}catch(ze){if(Ot(Me),ze!==ze+0)throw ze;At(1,0)}},Y:function(fe,Me){var ze=ht();try{return pn(fe,Me)}catch(Ke){if(Ot(ze),Ke!==Ke+0)throw Ke;At(1,0)}},T:function(fe,Me,ze){var Ke=ht();try{return ji(fe,Me,ze)}catch(nt){if(Ot(Ke),nt!==nt+0)throw nt;At(1,0)}},f:function(fe){var Me=ht();try{le(fe)()}catch(ze){if(Ot(Me),ze!==ze+0)throw ze;At(1,0)}},q:function(fe,Me){var ze=ht();try{le(fe)(Me)}catch(Ke){if(Ot(ze),Ke!==Ke+0)throw Ke;At(1,0)}},h:function(fe,Me,ze){var Ke=ht();try{le(fe)(Me,ze)}catch(nt){if(Ot(Ke),nt!==nt+0)throw nt;At(1,0)}},da:function(fe,Me,ze,Ke){var nt=ht();try{le(fe)(Me,ze,Ke)}catch(yt){if(Ot(nt),yt!==yt+0)throw yt;At(1,0)}},l:function(fe,Me,ze,Ke){var nt=ht();try{le(fe)(Me,ze,Ke)}catch(yt){if(Ot(nt),yt!==yt+0)throw yt;At(1,0)}},t:function(fe,Me,ze,Ke,nt){var yt=ht();try{le(fe)(Me,ze,Ke,nt)}catch(it){if(Ot(yt),it!==it+0)throw it;At(1,0)}},u:function(fe,Me,ze,Ke,nt,yt){var it=ht();try{le(fe)(Me,ze,Ke,nt,yt)}catch(kn){if(Ot(it),kn!==kn+0)throw kn;At(1,0)}},x:function(fe,Me,ze,Ke,nt,yt,it){var kn=ht();try{le(fe)(Me,ze,Ke,nt,yt,it)}catch(yn){if(Ot(kn),yn!==yn+0)throw yn;At(1,0)}},z:function(fe,Me,ze,Ke,nt,yt,it,kn){var yn=ht();try{le(fe)(Me,ze,Ke,nt,yt,it,kn)}catch(mi){if(Ot(yn),mi!==mi+0)throw mi;At(1,0)}},ga:function(fe,Me,ze,Ke,nt,yt,it,kn,yn){var mi=ht();try{le(fe)(Me,ze,Ke,nt,yt,it,kn,yn)}catch(Zi){if(Ot(mi),Zi!==Zi+0)throw Zi;At(1,0)}},A:function(fe,Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi){var io=ht();try{le(fe)(Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi)}catch(Sr){if(Ot(io),Sr!==Sr+0)throw Sr;At(1,0)}},C:function(fe,Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi,io,Sr,pt,Ii,pr){var Qo=ht();try{le(fe)(Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi,io,Sr,pt,Ii,pr)}catch(Fa){if(Ot(Qo),Fa!==Fa+0)throw Fa;At(1,0)}},aa:function(fe,Me,ze,Ke,nt,yt,it,kn){var yn=ht();try{Ui(fe,Me,ze,Ke,nt,yt,it,kn)}catch(mi){if(Ot(yn),mi!==mi+0)throw mi;At(1,0)}},_:function(fe,Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi,io){var Sr=ht();try{pi(fe,Me,ze,Ke,nt,yt,it,kn,yn,mi,Zi,io)}catch(pt){if(Ot(Sr),pt!==pt+0)throw pt;At(1,0)}},$:function(fe,Me,ze,Ke,nt,yt){var it=ht();try{_r(fe,Me,ze,Ke,nt,yt)}catch(kn){if(Ot(it),kn!==kn+0)throw kn;At(1,0)}},n:function(fe){return fe},F:function(fe){Rt=fe},ha:Cn,y:function(fe,Me,ze,Ke){return Cn(fe,Me,ze,Ke)}};(function(){function fe(nt){S.asm=nt.exports,$=S.asm.Ka,Be(),ee=S.asm.ib,Ue.unshift(S.asm.La),Le--,S.monitorRunDependencies&&S.monitorRunDependencies(Le),0==Le&&(null!==Yt&&(clearInterval(Yt),Yt=null),Ct&&(nt=Ct,Ct=null,nt()))}function Me(nt){fe(nt.instance)}function ze(nt){return function(){if(!P&&(A||k)){if("function"==typeof fetch&&!Ce.startsWith("file://"))return fetch(Ce,{credentials:"same-origin"}).then(function(yt){if(!yt.ok)throw"failed to load wasm binary file at '"+Ce+"'";return yt.arrayBuffer()}).catch(function(){return rn()});if(_)return new Promise(function(yt,it){_(Ce,function(kn){yt(new Uint8Array(kn))},it)})}return Promise.resolve().then(function(){return rn()})}().then(function(yt){return WebAssembly.instantiate(yt,Ke)}).then(function(yt){return yt}).then(nt,function(yt){U("failed to asynchronously prepare wasm: "+yt),Ne(yt)})}var Ke={a:Vi};if(Le++,S.monitorRunDependencies&&S.monitorRunDependencies(Le),S.instantiateWasm)try{return S.instantiateWasm(Ke,fe)}catch(nt){return U("Module.instantiateWasm callback failed with error: "+nt),!1}(P||"function"!=typeof WebAssembly.instantiateStreaming||Wt()||Ce.startsWith("file://")||T||"function"!=typeof fetch?ze(Me):fetch(Ce,{credentials:"same-origin"}).then(function(nt){return WebAssembly.instantiateStreaming(nt,Ke).then(Me,function(yt){return U("wasm streaming compile failed: "+yt),U("falling back to ArrayBuffer instantiation"),ze(Me)})})).catch(C)})(),S.___wasm_call_ctors=function(){return(S.___wasm_call_ctors=S.asm.La).apply(null,arguments)},S._OrtInit=function(){return(S._OrtInit=S.asm.Ma).apply(null,arguments)},S._OrtCreateSessionOptions=function(){return(S._OrtCreateSessionOptions=S.asm.Na).apply(null,arguments)},S._OrtAppendExecutionProvider=function(){return(S._OrtAppendExecutionProvider=S.asm.Oa).apply(null,arguments)},S._OrtAddSessionConfigEntry=function(){return(S._OrtAddSessionConfigEntry=S.asm.Pa).apply(null,arguments)},S._OrtReleaseSessionOptions=function(){return(S._OrtReleaseSessionOptions=S.asm.Qa).apply(null,arguments)},S._OrtCreateSession=function(){return(S._OrtCreateSession=S.asm.Ra).apply(null,arguments)},S._OrtReleaseSession=function(){return(S._OrtReleaseSession=S.asm.Sa).apply(null,arguments)},S._OrtGetInputCount=function(){return(S._OrtGetInputCount=S.asm.Ta).apply(null,arguments)},S._OrtGetOutputCount=function(){return(S._OrtGetOutputCount=S.asm.Ua).apply(null,arguments)},S._OrtGetInputName=function(){return(S._OrtGetInputName=S.asm.Va).apply(null,arguments)},S._OrtGetOutputName=function(){return(S._OrtGetOutputName=S.asm.Wa).apply(null,arguments)},S._OrtFree=function(){return(S._OrtFree=S.asm.Xa).apply(null,arguments)},S._OrtCreateTensor=function(){return(S._OrtCreateTensor=S.asm.Ya).apply(null,arguments)},S._OrtGetTensorData=function(){return(S._OrtGetTensorData=S.asm.Za).apply(null,arguments)},S._OrtReleaseTensor=function(){return(S._OrtReleaseTensor=S.asm._a).apply(null,arguments)},S._OrtCreateRunOptions=function(){return(S._OrtCreateRunOptions=S.asm.$a).apply(null,arguments)},S._OrtAddRunConfigEntry=function(){return(S._OrtAddRunConfigEntry=S.asm.ab).apply(null,arguments)},S._OrtReleaseRunOptions=function(){return(S._OrtReleaseRunOptions=S.asm.bb).apply(null,arguments)},S._OrtRun=function(){return(S._OrtRun=S.asm.cb).apply(null,arguments)},S._OrtEndProfiling=function(){return(S._OrtEndProfiling=S.asm.db).apply(null,arguments)};var Yr,we=S._malloc=function(){return(we=S._malloc=S.asm.eb).apply(null,arguments)},dt=S._free=function(){return(dt=S._free=S.asm.fb).apply(null,arguments)},Tt=S._fflush=function(){return(Tt=S._fflush=S.asm.gb).apply(null,arguments)},Bt=S.___funcs_on_exit=function(){return(Bt=S.___funcs_on_exit=S.asm.hb).apply(null,arguments)},At=S._setThrew=function(){return(At=S._setThrew=S.asm.jb).apply(null,arguments)},ht=S.stackSave=function(){return(ht=S.stackSave=S.asm.kb).apply(null,arguments)},Ot=S.stackRestore=function(){return(Ot=S.stackRestore=S.asm.lb).apply(null,arguments)},Un=S.stackAlloc=function(){return(Un=S.stackAlloc=S.asm.mb).apply(null,arguments)},ri=S.___cxa_can_catch=function(){return(ri=S.___cxa_can_catch=S.asm.nb).apply(null,arguments)},bn=S.___cxa_is_pointer_type=function(){return(bn=S.___cxa_is_pointer_type=S.asm.ob).apply(null,arguments)},Li=S.dynCall_j=function(){return(Li=S.dynCall_j=S.asm.pb).apply(null,arguments)},zn=S.dynCall_iiiiij=function(){return(zn=S.dynCall_iiiiij=S.asm.qb).apply(null,arguments)},ji=S.dynCall_jii=function(){return(ji=S.dynCall_jii=S.asm.rb).apply(null,arguments)},Ui=S.dynCall_viiiiij=function(){return(Ui=S.dynCall_viiiiij=S.asm.sb).apply(null,arguments)},_r=S.dynCall_vjji=function(){return(_r=S.dynCall_vjji=S.asm.tb).apply(null,arguments)},pi=S.dynCall_viiijjjii=function(){return(pi=S.dynCall_viiijjjii=S.asm.ub).apply(null,arguments)},on=S.dynCall_iij=function(){return(on=S.dynCall_iij=S.asm.vb).apply(null,arguments)},pn=S.dynCall_ji=function(){return(pn=S.dynCall_ji=S.asm.wb).apply(null,arguments)},Jt=S.dynCall_iiiiiij=function(){return(Jt=S.dynCall_iiiiiij=S.asm.xb).apply(null,arguments)},Lr=S.dynCall_iiij=function(){return(Lr=S.dynCall_iiij=S.asm.yb).apply(null,arguments)};function bc(){function fe(){if(!Yr&&(Yr=!0,S.calledRun=!0,!Z)){if(hi(Ue),O(S),S.onRuntimeInitialized&&S.onRuntimeInitialized(),S.postRun)for("function"==typeof S.postRun&&(S.postRun=[S.postRun]);S.postRun.length;){var Me=S.postRun.shift();Mt.unshift(Me)}hi(Mt)}}if(!(0<Le)){if(S.preRun)for("function"==typeof S.preRun&&(S.preRun=[S.preRun]);S.preRun.length;)zt();hi(Ae),0<Le||(S.setStatus?(S.setStatus("Running..."),setTimeout(function(){setTimeout(function(){S.setStatus("")},1),fe()},1)):fe())}}if(S.UTF8ToString=ge,S.stringToUTF8=function(fe,Me,ze){return je(fe,K,Me,ze)},S.lengthBytesUTF8=de,S.stackSave=ht,S.stackRestore=Ot,S.stackAlloc=Un,Ct=function fe(){Yr||bc(),Yr||(Ct=fe)},S.preInit)for("function"==typeof S.preInit&&(S.preInit=[S.preInit]);0<S.preInit.length;)S.preInit.pop()();return bc(),V.ready});Ye.exports=L},4537:Ye=>{"use strict";Ye.exports=function(F,q){for(var z=new Array(arguments.length-1),L=0,V=2,S=!0;V<arguments.length;)z[L++]=arguments[V++];return new Promise(function(O,C){z[L]=function(w){if(S)if(S=!1,w)C(w);else{for(var _=new Array(arguments.length-1),u=0;u<_.length;)_[u++]=arguments[u];O.apply(null,_)}};try{F.apply(q||null,z)}catch(w){S&&(S=!1,C(w))}})}},7419:(Ye,F)=>{"use strict";var q=F;q.length=function(O){var C=O.length;if(!C)return 0;for(var w=0;--C%4>1&&"="===O.charAt(C);)++w;return Math.ceil(3*O.length)/4-w};for(var z=new Array(64),L=new Array(123),V=0;V<64;)L[z[V]=V<26?V+65:V<52?V+71:V<62?V-4:V-59|43]=V++;q.encode=function(O,C,w){for(var _,u=null,l=[],h=0,f=0;C<w;){var g=O[C++];switch(f){case 0:l[h++]=z[g>>2],_=(3&g)<<4,f=1;break;case 1:l[h++]=z[_|g>>4],_=(15&g)<<2,f=2;break;case 2:l[h++]=z[_|g>>6],l[h++]=z[63&g],f=0}h>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,l)),h=0)}return f&&(l[h++]=z[_],l[h++]=61,1===f&&(l[h++]=61)),u?(h&&u.push(String.fromCharCode.apply(String,l.slice(0,h))),u.join("")):String.fromCharCode.apply(String,l.slice(0,h))};var S="invalid encoding";q.decode=function(O,C,w){for(var _,u=w,l=0,h=0;h<O.length;){var f=O.charCodeAt(h++);if(61===f&&l>1)break;if(void 0===(f=L[f]))throw Error(S);switch(l){case 0:_=f,l=1;break;case 1:C[w++]=_<<2|(48&f)>>4,_=f,l=2;break;case 2:C[w++]=(15&_)<<4|(60&f)>>2,_=f,l=3;break;case 3:C[w++]=(3&_)<<6|f,l=0}}if(1===l)throw Error(S);return w-u},q.test=function(O){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(O)}},9211:Ye=>{"use strict";function F(){this._listeners={}}Ye.exports=F,F.prototype.on=function(q,z,L){return(this._listeners[q]||(this._listeners[q]=[])).push({fn:z,ctx:L||this}),this},F.prototype.off=function(q,z){if(void 0===q)this._listeners={};else if(void 0===z)this._listeners[q]=[];else for(var L=this._listeners[q],V=0;V<L.length;)L[V].fn===z?L.splice(V,1):++V;return this},F.prototype.emit=function(q){var z=this._listeners[q];if(z){for(var L=[],V=1;V<arguments.length;)L.push(arguments[V++]);for(V=0;V<z.length;)z[V].fn.apply(z[V++].ctx,L)}return this}},945:Ye=>{"use strict";function F(S){return typeof Float32Array<"u"?function(){var O=new Float32Array([-0]),C=new Uint8Array(O.buffer),w=128===C[3];function _(f,g,b){O[0]=f,g[b]=C[0],g[b+1]=C[1],g[b+2]=C[2],g[b+3]=C[3]}function u(f,g,b){O[0]=f,g[b]=C[3],g[b+1]=C[2],g[b+2]=C[1],g[b+3]=C[0]}function l(f,g){return C[0]=f[g],C[1]=f[g+1],C[2]=f[g+2],C[3]=f[g+3],O[0]}function h(f,g){return C[3]=f[g],C[2]=f[g+1],C[1]=f[g+2],C[0]=f[g+3],O[0]}S.writeFloatLE=w?_:u,S.writeFloatBE=w?u:_,S.readFloatLE=w?l:h,S.readFloatBE=w?h:l}():function(){function O(w,_,u,l){var h=_<0?1:0;if(h&&(_=-_),0===_)w(1/_>0?0:2147483648,u,l);else if(isNaN(_))w(2143289344,u,l);else if(_>34028234663852886e22)w((h<<31|2139095040)>>>0,u,l);else if(_<11754943508222875e-54)w((h<<31|Math.round(_/1401298464324817e-60))>>>0,u,l);else{var f=Math.floor(Math.log(_)/Math.LN2);w((h<<31|f+127<<23|8388607&Math.round(_*Math.pow(2,-f)*8388608))>>>0,u,l)}}function C(w,_,u){var l=w(_,u),h=2*(l>>31)+1,f=l>>>23&255,g=8388607&l;return 255===f?g?NaN:h*(1/0):0===f?1401298464324817e-60*h*g:h*Math.pow(2,f-150)*(g+8388608)}S.writeFloatLE=O.bind(null,q),S.writeFloatBE=O.bind(null,z),S.readFloatLE=C.bind(null,L),S.readFloatBE=C.bind(null,V)}(),typeof Float64Array<"u"?function(){var O=new Float64Array([-0]),C=new Uint8Array(O.buffer),w=128===C[7];function _(f,g,b){O[0]=f,g[b]=C[0],g[b+1]=C[1],g[b+2]=C[2],g[b+3]=C[3],g[b+4]=C[4],g[b+5]=C[5],g[b+6]=C[6],g[b+7]=C[7]}function u(f,g,b){O[0]=f,g[b]=C[7],g[b+1]=C[6],g[b+2]=C[5],g[b+3]=C[4],g[b+4]=C[3],g[b+5]=C[2],g[b+6]=C[1],g[b+7]=C[0]}function l(f,g){return C[0]=f[g],C[1]=f[g+1],C[2]=f[g+2],C[3]=f[g+3],C[4]=f[g+4],C[5]=f[g+5],C[6]=f[g+6],C[7]=f[g+7],O[0]}function h(f,g){return C[7]=f[g],C[6]=f[g+1],C[5]=f[g+2],C[4]=f[g+3],C[3]=f[g+4],C[2]=f[g+5],C[1]=f[g+6],C[0]=f[g+7],O[0]}S.writeDoubleLE=w?_:u,S.writeDoubleBE=w?u:_,S.readDoubleLE=w?l:h,S.readDoubleBE=w?h:l}():function(){function O(w,_,u,l,h,f){var g=l<0?1:0;if(g&&(l=-l),0===l)w(0,h,f+_),w(1/l>0?0:2147483648,h,f+u);else if(isNaN(l))w(0,h,f+_),w(2146959360,h,f+u);else if(l>17976931348623157e292)w(0,h,f+_),w((g<<31|2146435072)>>>0,h,f+u);else{var b;if(l<22250738585072014e-324)w((b=l/5e-324)>>>0,h,f+_),w((g<<31|b/4294967296)>>>0,h,f+u);else{var x=Math.floor(Math.log(l)/Math.LN2);1024===x&&(x=1023),w(4503599627370496*(b=l*Math.pow(2,-x))>>>0,h,f+_),w((g<<31|x+1023<<20|1048576*b&1048575)>>>0,h,f+u)}}}function C(w,_,u,l,h){var f=w(l,h+_),g=w(l,h+u),b=2*(g>>31)+1,x=g>>>20&2047,A=4294967296*(1048575&g)+f;return 2047===x?A?NaN:b*(1/0):0===x?5e-324*b*A:b*Math.pow(2,x-1075)*(A+4503599627370496)}S.writeDoubleLE=O.bind(null,q,0,4),S.writeDoubleBE=O.bind(null,z,4,0),S.readDoubleLE=C.bind(null,L,0,4),S.readDoubleBE=C.bind(null,V,4,0)}(),S}function q(S,O,C){O[C]=255&S,O[C+1]=S>>>8&255,O[C+2]=S>>>16&255,O[C+3]=S>>>24}function z(S,O,C){O[C]=S>>>24,O[C+1]=S>>>16&255,O[C+2]=S>>>8&255,O[C+3]=255&S}function L(S,O){return(S[O]|S[O+1]<<8|S[O+2]<<16|S[O+3]<<24)>>>0}function V(S,O){return(S[O]<<24|S[O+1]<<16|S[O+2]<<8|S[O+3])>>>0}Ye.exports=F(F)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(Ye){}return null}module.exports=inquire},6662:Ye=>{"use strict";Ye.exports=function(F,q,z){var L=z||8192,V=L>>>1,S=null,O=L;return function(C){if(C<1||C>V)return F(C);O+C>L&&(S=F(L),O=0);var w=q.call(S,O,O+=C);return 7&O&&(O=1+(7|O)),w}}},4997:(Ye,F)=>{"use strict";var q=F;q.length=function(z){for(var L=0,V=0,S=0;S<z.length;++S)(V=z.charCodeAt(S))<128?L+=1:V<2048?L+=2:55296==(64512&V)&&56320==(64512&z.charCodeAt(S+1))?(++S,L+=4):L+=3;return L},q.read=function(z,L,V){if(V-L<1)return"";for(var S,O=null,C=[],w=0;L<V;)(S=z[L++])<128?C[w++]=S:S>191&&S<224?C[w++]=(31&S)<<6|63&z[L++]:S>239&&S<365?(S=((7&S)<<18|(63&z[L++])<<12|(63&z[L++])<<6|63&z[L++])-65536,C[w++]=55296+(S>>10),C[w++]=56320+(1023&S)):C[w++]=(15&S)<<12|(63&z[L++])<<6|63&z[L++],w>8191&&((O||(O=[])).push(String.fromCharCode.apply(String,C)),w=0);return O?(w&&O.push(String.fromCharCode.apply(String,C.slice(0,w))),O.join("")):String.fromCharCode.apply(String,C.slice(0,w))},q.write=function(z,L,V){for(var S,O,C=V,w=0;w<z.length;++w)(S=z.charCodeAt(w))<128?L[V++]=S:S<2048?(L[V++]=S>>6|192,L[V++]=63&S|128):55296==(64512&S)&&56320==(64512&(O=z.charCodeAt(w+1)))?(++w,L[V++]=(S=65536+((1023&S)<<10)+(1023&O))>>18|240,L[V++]=S>>12&63|128,L[V++]=S>>6&63|128,L[V++]=63&S|128):(L[V++]=S>>12|224,L[V++]=S>>6&63|128,L[V++]=63&S|128);return V-C}},3442:(Ye,F)=>{"use strict";F.__esModule=!0;var q=function(){function z(L){if(!L)throw new TypeError("Invalid argument; `value` has no value.");this.value=z.EMPTY,L&&z.isGuid(L)&&(this.value=L)}return z.isGuid=function(L){var V=L.toString();return L&&(L instanceof z||z.validator.test(V))},z.create=function(){return new z([z.gen(2),z.gen(1),z.gen(1),z.gen(1),z.gen(3)].join("-"))},z.createEmpty=function(){return new z("emptyguid")},z.parse=function(L){return new z(L)},z.raw=function(){return[z.gen(2),z.gen(1),z.gen(1),z.gen(1),z.gen(3)].join("-")},z.gen=function(L){for(var V="",S=0;S<L;S++)V+=(65536*(1+Math.random())|0).toString(16).substring(1);return V},z.prototype.equals=function(L){return z.isGuid(L)&&this.value===L.toString()},z.prototype.isEmpty=function(){return this.value===z.EMPTY},z.prototype.toString=function(){return this.value},z.prototype.toJSON=function(){return{value:this.value}},z.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),z.EMPTY="00000000-0000-0000-0000-000000000000",z}();F.Guid=q},3720:Ye=>{Ye.exports=q;var F=null;try{F=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function q(N,$,G){this.low=0|N,this.high=0|$,this.unsigned=!!G}function z(N){return!0===(N&&N.__isLong__)}Object.defineProperty(q.prototype,"__isLong__",{value:!0}),q.isLong=z;var L={},V={};function S(N,$){var G,W,K;return $?(K=0<=(N>>>=0)&&N<256)&&(W=V[N])?W:(G=C(N,(0|N)<0?-1:0,!0),K&&(V[N]=G),G):(K=-128<=(N|=0)&&N<128)&&(W=L[N])?W:(G=C(N,N<0?-1:0,!1),K&&(L[N]=G),G)}function O(N,$){if(isNaN(N))return $?x:b;if($){if(N<0)return x;if(N>=h)return P}else{if(N<=-f)return B;if(N+1>=f)return M}return N<0?O(-N,$).neg():C(N%l|0,N/l|0,$)}function C(N,$,G){return new q(N,$,G)}q.fromInt=S,q.fromNumber=O,q.fromBits=C;var w=Math.pow;function _(N,$,G){if(0===N.length)throw Error("empty string");if("NaN"===N||"Infinity"===N||"+Infinity"===N||"-Infinity"===N)return b;if("number"==typeof $?(G=$,$=!1):$=!!$,(G=G||10)<2||36<G)throw RangeError("radix");var W;if((W=N.indexOf("-"))>0)throw Error("interior hyphen");if(0===W)return _(N.substring(1),$,G).neg();for(var K=O(w(G,8)),X=b,oe=0;oe<N.length;oe+=8){var Z=Math.min(8,N.length-oe),ae=parseInt(N.substring(oe,oe+Z),G);if(Z<8){var pe=O(w(G,Z));X=X.mul(pe).add(O(ae))}else X=(X=X.mul(K)).add(O(ae))}return X.unsigned=$,X}function u(N,$){return"number"==typeof N?O(N,$):"string"==typeof N?_(N,$):C(N.low,N.high,"boolean"==typeof $?$:N.unsigned)}q.fromString=_,q.fromValue=u;var l=4294967296,h=l*l,f=h/2,g=S(1<<24),b=S(0);q.ZERO=b;var x=S(0,!0);q.UZERO=x;var A=S(1);q.ONE=A;var k=S(1,!0);q.UONE=k;var T=S(-1);q.NEG_ONE=T;var M=C(-1,2147483647,!1);q.MAX_VALUE=M;var P=C(-1,-1,!0);q.MAX_UNSIGNED_VALUE=P;var B=C(0,-2147483648,!1);q.MIN_VALUE=B;var U=q.prototype;U.toInt=function(){return this.unsigned?this.low>>>0:this.low},U.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},U.toString=function(N){if((N=N||10)<2||36<N)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B)){var $=O(N),G=this.div($),W=G.mul($).sub(this);return G.toString(N)+W.toInt().toString(N)}return"-"+this.neg().toString(N)}for(var K=O(w(N,6),this.unsigned),X=this,oe="";;){var Z=X.div(K),ae=(X.sub(Z.mul(K)).toInt()>>>0).toString(N);if((X=Z).isZero())return ae+oe;for(;ae.length<6;)ae="0"+ae;oe=""+ae+oe}},U.getHighBits=function(){return this.high},U.getHighBitsUnsigned=function(){return this.high>>>0},U.getLowBits=function(){return this.low},U.getLowBitsUnsigned=function(){return this.low>>>0},U.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var N=0!=this.high?this.high:this.low,$=31;$>0&&!(N&1<<$);$--);return 0!=this.high?$+33:$+1},U.isZero=function(){return 0===this.high&&0===this.low},U.eqz=U.isZero,U.isNegative=function(){return!this.unsigned&&this.high<0},U.isPositive=function(){return this.unsigned||this.high>=0},U.isOdd=function(){return!(1&~this.low)},U.isEven=function(){return!(1&this.low)},U.equals=function(N){return z(N)||(N=u(N)),(this.unsigned===N.unsigned||this.high>>>31!=1||N.high>>>31!=1)&&this.high===N.high&&this.low===N.low},U.eq=U.equals,U.notEquals=function(N){return!this.eq(N)},U.neq=U.notEquals,U.ne=U.notEquals,U.lessThan=function(N){return this.comp(N)<0},U.lt=U.lessThan,U.lessThanOrEqual=function(N){return this.comp(N)<=0},U.lte=U.lessThanOrEqual,U.le=U.lessThanOrEqual,U.greaterThan=function(N){return this.comp(N)>0},U.gt=U.greaterThan,U.greaterThanOrEqual=function(N){return this.comp(N)>=0},U.gte=U.greaterThanOrEqual,U.ge=U.greaterThanOrEqual,U.compare=function(N){if(z(N)||(N=u(N)),this.eq(N))return 0;var $=this.isNegative(),G=N.isNegative();return $&&!G?-1:!$&&G?1:this.unsigned?N.high>>>0>this.high>>>0||N.high===this.high&&N.low>>>0>this.low>>>0?-1:1:this.sub(N).isNegative()?-1:1},U.comp=U.compare,U.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(A)},U.neg=U.negate,U.add=function(N){z(N)||(N=u(N));var ae=0,pe=0,ge=0,je=0;return ge+=(je+=(65535&this.low)+(65535&N.low))>>>16,pe+=(ge+=(this.low>>>16)+(N.low>>>16))>>>16,ae+=(pe+=(65535&this.high)+(65535&N.high))>>>16,ae+=(this.high>>>16)+(N.high>>>16),C((ge&=65535)<<16|(je&=65535),(ae&=65535)<<16|(pe&=65535),this.unsigned)},U.subtract=function(N){return z(N)||(N=u(N)),this.add(N.neg())},U.sub=U.subtract,U.multiply=function(N){if(this.isZero())return b;if(z(N)||(N=u(N)),F)return C(F.mul(this.low,this.high,N.low,N.high),F.get_high(),this.unsigned);if(N.isZero())return b;if(this.eq(B))return N.isOdd()?B:b;if(N.eq(B))return this.isOdd()?B:b;if(this.isNegative())return N.isNegative()?this.neg().mul(N.neg()):this.neg().mul(N).neg();if(N.isNegative())return this.mul(N.neg()).neg();if(this.lt(g)&&N.lt(g))return O(this.toNumber()*N.toNumber(),this.unsigned);var G=65535&this.high,W=this.low>>>16,K=65535&this.low,oe=65535&N.high,Z=N.low>>>16,ae=65535&N.low,pe=0,ge=0,je=0,de=0;return je+=(de+=K*ae)>>>16,ge+=(je+=W*ae)>>>16,je&=65535,ge+=(je+=K*Z)>>>16,pe+=(ge+=G*ae)>>>16,ge&=65535,pe+=(ge+=W*Z)>>>16,ge&=65535,pe+=(ge+=K*oe)>>>16,pe+=(this.high>>>16)*ae+G*Z+W*oe+K*(N.high>>>16),C((je&=65535)<<16|(de&=65535),(pe&=65535)<<16|(ge&=65535),this.unsigned)},U.mul=U.multiply,U.divide=function(N){if(z(N)||(N=u(N)),N.isZero())throw Error("division by zero");var $,G,W;if(F)return this.unsigned||-2147483648!==this.high||-1!==N.low||-1!==N.high?C((this.unsigned?F.div_u:F.div_s)(this.low,this.high,N.low,N.high),F.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?x:b;if(this.unsigned){if(N.unsigned||(N=N.toUnsigned()),N.gt(this))return x;if(N.gt(this.shru(1)))return k;W=x}else{if(this.eq(B))return N.eq(A)||N.eq(T)?B:N.eq(B)?A:($=this.shr(1).div(N).shl(1)).eq(b)?N.isNegative()?A:T:(G=this.sub(N.mul($)),W=$.add(G.div(N)));if(N.eq(B))return this.unsigned?x:b;if(this.isNegative())return N.isNegative()?this.neg().div(N.neg()):this.neg().div(N).neg();if(N.isNegative())return this.div(N.neg()).neg();W=b}for(G=this;G.gte(N);){$=Math.max(1,Math.floor(G.toNumber()/N.toNumber()));for(var K=Math.ceil(Math.log($)/Math.LN2),X=K<=48?1:w(2,K-48),oe=O($),Z=oe.mul(N);Z.isNegative()||Z.gt(G);)Z=(oe=O($-=X,this.unsigned)).mul(N);oe.isZero()&&(oe=A),W=W.add(oe),G=G.sub(Z)}return W},U.div=U.divide,U.modulo=function(N){return z(N)||(N=u(N)),F?C((this.unsigned?F.rem_u:F.rem_s)(this.low,this.high,N.low,N.high),F.get_high(),this.unsigned):this.sub(this.div(N).mul(N))},U.mod=U.modulo,U.rem=U.modulo,U.not=function(){return C(~this.low,~this.high,this.unsigned)},U.and=function(N){return z(N)||(N=u(N)),C(this.low&N.low,this.high&N.high,this.unsigned)},U.or=function(N){return z(N)||(N=u(N)),C(this.low|N.low,this.high|N.high,this.unsigned)},U.xor=function(N){return z(N)||(N=u(N)),C(this.low^N.low,this.high^N.high,this.unsigned)},U.shiftLeft=function(N){return z(N)&&(N=N.toInt()),0==(N&=63)?this:N<32?C(this.low<<N,this.high<<N|this.low>>>32-N,this.unsigned):C(0,this.low<<N-32,this.unsigned)},U.shl=U.shiftLeft,U.shiftRight=function(N){return z(N)&&(N=N.toInt()),0==(N&=63)?this:N<32?C(this.low>>>N|this.high<<32-N,this.high>>N,this.unsigned):C(this.high>>N-32,this.high>=0?0:-1,this.unsigned)},U.shr=U.shiftRight,U.shiftRightUnsigned=function(N){if(z(N)&&(N=N.toInt()),0==(N&=63))return this;var $=this.high;return N<32?C(this.low>>>N|$<<32-N,$>>>N,this.unsigned):C(32===N?$:$>>>N-32,0,this.unsigned)},U.shru=U.shiftRightUnsigned,U.shr_u=U.shiftRightUnsigned,U.toSigned=function(){return this.unsigned?C(this.low,this.high,!1):this},U.toUnsigned=function(){return this.unsigned?this:C(this.low,this.high,!0)},U.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},U.toBytesLE=function(){var N=this.high,$=this.low;return[255&$,$>>>8&255,$>>>16&255,$>>>24,255&N,N>>>8&255,N>>>16&255,N>>>24]},U.toBytesBE=function(){var N=this.high,$=this.low;return[N>>>24,N>>>16&255,N>>>8&255,255&N,$>>>24,$>>>16&255,$>>>8&255,255&$]},q.fromBytes=function(N,$,G){return G?q.fromBytesLE(N,$):q.fromBytesBE(N,$)},q.fromBytesLE=function(N,$){return new q(N[0]|N[1]<<8|N[2]<<16|N[3]<<24,N[4]|N[5]<<8|N[6]<<16|N[7]<<24,$)},q.fromBytesBE=function(N,$){return new q(N[4]<<24|N[5]<<16|N[6]<<8|N[7],N[0]<<24|N[1]<<16|N[2]<<8|N[3],$)}},1446:(Ye,F,q)=>{"use strict";var z,L,V,S=q(2100),O=S.Reader,C=S.Writer,w=S.util,_=S.roots.default||(S.roots.default={});_.onnx=((V={}).Version=(z={},(L=Object.create(z))[z[0]="_START_VERSION"]=0,L[z[1]="IR_VERSION_2017_10_10"]=1,L[z[2]="IR_VERSION_2017_10_30"]=2,L[z[3]="IR_VERSION_2017_11_3"]=3,L[z[4]="IR_VERSION_2019_1_22"]=4,L[z[5]="IR_VERSION"]=5,L),V.AttributeProto=function(){function u(l){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.name="",u.prototype.refAttrName="",u.prototype.docString="",u.prototype.type=0,u.prototype.f=0,u.prototype.i=w.Long?w.Long.fromBits(0,0,!1):0,u.prototype.s=w.newBuffer([]),u.prototype.t=null,u.prototype.g=null,u.prototype.floats=w.emptyArray,u.prototype.ints=w.emptyArray,u.prototype.strings=w.emptyArray,u.prototype.tensors=w.emptyArray,u.prototype.graphs=w.emptyArray,u.create=function(l){return new u(l)},u.encode=function(l,h){if(h||(h=C.create()),null!=l.name&&l.hasOwnProperty("name")&&h.uint32(10).string(l.name),null!=l.f&&l.hasOwnProperty("f")&&h.uint32(21).float(l.f),null!=l.i&&l.hasOwnProperty("i")&&h.uint32(24).int64(l.i),null!=l.s&&l.hasOwnProperty("s")&&h.uint32(34).bytes(l.s),null!=l.t&&l.hasOwnProperty("t")&&_.onnx.TensorProto.encode(l.t,h.uint32(42).fork()).ldelim(),null!=l.g&&l.hasOwnProperty("g")&&_.onnx.GraphProto.encode(l.g,h.uint32(50).fork()).ldelim(),null!=l.floats&&l.floats.length){h.uint32(58).fork();for(var f=0;f<l.floats.length;++f)h.float(l.floats[f]);h.ldelim()}if(null!=l.ints&&l.ints.length){for(h.uint32(66).fork(),f=0;f<l.ints.length;++f)h.int64(l.ints[f]);h.ldelim()}if(null!=l.strings&&l.strings.length)for(f=0;f<l.strings.length;++f)h.uint32(74).bytes(l.strings[f]);if(null!=l.tensors&&l.tensors.length)for(f=0;f<l.tensors.length;++f)_.onnx.TensorProto.encode(l.tensors[f],h.uint32(82).fork()).ldelim();if(null!=l.graphs&&l.graphs.length)for(f=0;f<l.graphs.length;++f)_.onnx.GraphProto.encode(l.graphs[f],h.uint32(90).fork()).ldelim();return null!=l.docString&&l.hasOwnProperty("docString")&&h.uint32(106).string(l.docString),null!=l.type&&l.hasOwnProperty("type")&&h.uint32(160).int32(l.type),null!=l.refAttrName&&l.hasOwnProperty("refAttrName")&&h.uint32(170).string(l.refAttrName),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.AttributeProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.name=l.string();break;case 21:g.refAttrName=l.string();break;case 13:g.docString=l.string();break;case 20:g.type=l.int32();break;case 2:g.f=l.float();break;case 3:g.i=l.int64();break;case 4:g.s=l.bytes();break;case 5:g.t=_.onnx.TensorProto.decode(l,l.uint32());break;case 6:g.g=_.onnx.GraphProto.decode(l,l.uint32());break;case 7:if(g.floats&&g.floats.length||(g.floats=[]),2==(7&b))for(var x=l.uint32()+l.pos;l.pos<x;)g.floats.push(l.float());else g.floats.push(l.float());break;case 8:if(g.ints&&g.ints.length||(g.ints=[]),2==(7&b))for(x=l.uint32()+l.pos;l.pos<x;)g.ints.push(l.int64());else g.ints.push(l.int64());break;case 9:g.strings&&g.strings.length||(g.strings=[]),g.strings.push(l.bytes());break;case 10:g.tensors&&g.tensors.length||(g.tensors=[]),g.tensors.push(_.onnx.TensorProto.decode(l,l.uint32()));break;case 11:g.graphs&&g.graphs.length||(g.graphs=[]),g.graphs.push(_.onnx.GraphProto.decode(l,l.uint32()));break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.name&&l.hasOwnProperty("name")&&!w.isString(l.name))return"name: string expected";if(null!=l.refAttrName&&l.hasOwnProperty("refAttrName")&&!w.isString(l.refAttrName))return"refAttrName: string expected";if(null!=l.docString&&l.hasOwnProperty("docString")&&!w.isString(l.docString))return"docString: string expected";if(null!=l.type&&l.hasOwnProperty("type"))switch(l.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=l.f&&l.hasOwnProperty("f")&&"number"!=typeof l.f)return"f: number expected";if(null!=l.i&&l.hasOwnProperty("i")&&!(w.isInteger(l.i)||l.i&&w.isInteger(l.i.low)&&w.isInteger(l.i.high)))return"i: integer|Long expected";if(null!=l.s&&l.hasOwnProperty("s")&&!(l.s&&"number"==typeof l.s.length||w.isString(l.s)))return"s: buffer expected";if(null!=l.t&&l.hasOwnProperty("t")&&(f=_.onnx.TensorProto.verify(l.t)))return"t."+f;if(null!=l.g&&l.hasOwnProperty("g")&&(f=_.onnx.GraphProto.verify(l.g)))return"g."+f;if(null!=l.floats&&l.hasOwnProperty("floats")){if(!Array.isArray(l.floats))return"floats: array expected";for(var h=0;h<l.floats.length;++h)if("number"!=typeof l.floats[h])return"floats: number[] expected"}if(null!=l.ints&&l.hasOwnProperty("ints")){if(!Array.isArray(l.ints))return"ints: array expected";for(h=0;h<l.ints.length;++h)if(!(w.isInteger(l.ints[h])||l.ints[h]&&w.isInteger(l.ints[h].low)&&w.isInteger(l.ints[h].high)))return"ints: integer|Long[] expected"}if(null!=l.strings&&l.hasOwnProperty("strings")){if(!Array.isArray(l.strings))return"strings: array expected";for(h=0;h<l.strings.length;++h)if(!(l.strings[h]&&"number"==typeof l.strings[h].length||w.isString(l.strings[h])))return"strings: buffer[] expected"}if(null!=l.tensors&&l.hasOwnProperty("tensors")){if(!Array.isArray(l.tensors))return"tensors: array expected";for(h=0;h<l.tensors.length;++h)if(f=_.onnx.TensorProto.verify(l.tensors[h]))return"tensors."+f}if(null!=l.graphs&&l.hasOwnProperty("graphs")){if(!Array.isArray(l.graphs))return"graphs: array expected";for(h=0;h<l.graphs.length;++h){var f;if(f=_.onnx.GraphProto.verify(l.graphs[h]))return"graphs."+f}}return null},u.fromObject=function(l){if(l instanceof _.onnx.AttributeProto)return l;var h=new _.onnx.AttributeProto;switch(null!=l.name&&(h.name=String(l.name)),null!=l.refAttrName&&(h.refAttrName=String(l.refAttrName)),null!=l.docString&&(h.docString=String(l.docString)),l.type){case"UNDEFINED":case 0:h.type=0;break;case"FLOAT":case 1:h.type=1;break;case"INT":case 2:h.type=2;break;case"STRING":case 3:h.type=3;break;case"TENSOR":case 4:h.type=4;break;case"GRAPH":case 5:h.type=5;break;case"FLOATS":case 6:h.type=6;break;case"INTS":case 7:h.type=7;break;case"STRINGS":case 8:h.type=8;break;case"TENSORS":case 9:h.type=9;break;case"GRAPHS":case 10:h.type=10}if(null!=l.f&&(h.f=Number(l.f)),null!=l.i&&(w.Long?(h.i=w.Long.fromValue(l.i)).unsigned=!1:"string"==typeof l.i?h.i=parseInt(l.i,10):"number"==typeof l.i?h.i=l.i:"object"==typeof l.i&&(h.i=new w.LongBits(l.i.low>>>0,l.i.high>>>0).toNumber())),null!=l.s&&("string"==typeof l.s?w.base64.decode(l.s,h.s=w.newBuffer(w.base64.length(l.s)),0):l.s.length&&(h.s=l.s)),null!=l.t){if("object"!=typeof l.t)throw TypeError(".onnx.AttributeProto.t: object expected");h.t=_.onnx.TensorProto.fromObject(l.t)}if(null!=l.g){if("object"!=typeof l.g)throw TypeError(".onnx.AttributeProto.g: object expected");h.g=_.onnx.GraphProto.fromObject(l.g)}if(l.floats){if(!Array.isArray(l.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");h.floats=[];for(var f=0;f<l.floats.length;++f)h.floats[f]=Number(l.floats[f])}if(l.ints){if(!Array.isArray(l.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(h.ints=[],f=0;f<l.ints.length;++f)w.Long?(h.ints[f]=w.Long.fromValue(l.ints[f])).unsigned=!1:"string"==typeof l.ints[f]?h.ints[f]=parseInt(l.ints[f],10):"number"==typeof l.ints[f]?h.ints[f]=l.ints[f]:"object"==typeof l.ints[f]&&(h.ints[f]=new w.LongBits(l.ints[f].low>>>0,l.ints[f].high>>>0).toNumber())}if(l.strings){if(!Array.isArray(l.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(h.strings=[],f=0;f<l.strings.length;++f)"string"==typeof l.strings[f]?w.base64.decode(l.strings[f],h.strings[f]=w.newBuffer(w.base64.length(l.strings[f])),0):l.strings[f].length&&(h.strings[f]=l.strings[f])}if(l.tensors){if(!Array.isArray(l.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(h.tensors=[],f=0;f<l.tensors.length;++f){if("object"!=typeof l.tensors[f])throw TypeError(".onnx.AttributeProto.tensors: object expected");h.tensors[f]=_.onnx.TensorProto.fromObject(l.tensors[f])}}if(l.graphs){if(!Array.isArray(l.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(h.graphs=[],f=0;f<l.graphs.length;++f){if("object"!=typeof l.graphs[f])throw TypeError(".onnx.AttributeProto.graphs: object expected");h.graphs[f]=_.onnx.GraphProto.fromObject(l.graphs[f])}}return h},u.toObject=function(l,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.floats=[],f.ints=[],f.strings=[],f.tensors=[],f.graphs=[]),h.defaults){if(f.name="",f.f=0,w.Long){var g=new w.Long(0,0,!1);f.i=h.longs===String?g.toString():h.longs===Number?g.toNumber():g}else f.i=h.longs===String?"0":0;h.bytes===String?f.s="":(f.s=[],h.bytes!==Array&&(f.s=w.newBuffer(f.s))),f.t=null,f.g=null,f.docString="",f.type=h.enums===String?"UNDEFINED":0,f.refAttrName=""}if(null!=l.name&&l.hasOwnProperty("name")&&(f.name=l.name),null!=l.f&&l.hasOwnProperty("f")&&(f.f=h.json&&!isFinite(l.f)?String(l.f):l.f),null!=l.i&&l.hasOwnProperty("i")&&(f.i="number"==typeof l.i?h.longs===String?String(l.i):l.i:h.longs===String?w.Long.prototype.toString.call(l.i):h.longs===Number?new w.LongBits(l.i.low>>>0,l.i.high>>>0).toNumber():l.i),null!=l.s&&l.hasOwnProperty("s")&&(f.s=h.bytes===String?w.base64.encode(l.s,0,l.s.length):h.bytes===Array?Array.prototype.slice.call(l.s):l.s),null!=l.t&&l.hasOwnProperty("t")&&(f.t=_.onnx.TensorProto.toObject(l.t,h)),null!=l.g&&l.hasOwnProperty("g")&&(f.g=_.onnx.GraphProto.toObject(l.g,h)),l.floats&&l.floats.length){f.floats=[];for(var b=0;b<l.floats.length;++b)f.floats[b]=h.json&&!isFinite(l.floats[b])?String(l.floats[b]):l.floats[b]}if(l.ints&&l.ints.length)for(f.ints=[],b=0;b<l.ints.length;++b)f.ints[b]="number"==typeof l.ints[b]?h.longs===String?String(l.ints[b]):l.ints[b]:h.longs===String?w.Long.prototype.toString.call(l.ints[b]):h.longs===Number?new w.LongBits(l.ints[b].low>>>0,l.ints[b].high>>>0).toNumber():l.ints[b];if(l.strings&&l.strings.length)for(f.strings=[],b=0;b<l.strings.length;++b)f.strings[b]=h.bytes===String?w.base64.encode(l.strings[b],0,l.strings[b].length):h.bytes===Array?Array.prototype.slice.call(l.strings[b]):l.strings[b];if(l.tensors&&l.tensors.length)for(f.tensors=[],b=0;b<l.tensors.length;++b)f.tensors[b]=_.onnx.TensorProto.toObject(l.tensors[b],h);if(l.graphs&&l.graphs.length)for(f.graphs=[],b=0;b<l.graphs.length;++b)f.graphs[b]=_.onnx.GraphProto.toObject(l.graphs[b],h);return null!=l.docString&&l.hasOwnProperty("docString")&&(f.docString=l.docString),null!=l.type&&l.hasOwnProperty("type")&&(f.type=h.enums===String?_.onnx.AttributeProto.AttributeType[l.type]:l.type),null!=l.refAttrName&&l.hasOwnProperty("refAttrName")&&(f.refAttrName=l.refAttrName),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u.AttributeType=(l={},(h=Object.create(l))[l[0]="UNDEFINED"]=0,h[l[1]="FLOAT"]=1,h[l[2]="INT"]=2,h[l[3]="STRING"]=3,h[l[4]="TENSOR"]=4,h[l[5]="GRAPH"]=5,h[l[6]="FLOATS"]=6,h[l[7]="INTS"]=7,h[l[8]="STRINGS"]=8,h[l[9]="TENSORS"]=9,h[l[10]="GRAPHS"]=10,h),u;var l,h}(),V.ValueInfoProto=function(){function u(l){if(l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.name="",u.prototype.type=null,u.prototype.docString="",u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=C.create()),null!=l.name&&l.hasOwnProperty("name")&&h.uint32(10).string(l.name),null!=l.type&&l.hasOwnProperty("type")&&_.onnx.TypeProto.encode(l.type,h.uint32(18).fork()).ldelim(),null!=l.docString&&l.hasOwnProperty("docString")&&h.uint32(26).string(l.docString),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.ValueInfoProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.name=l.string();break;case 2:g.type=_.onnx.TypeProto.decode(l,l.uint32());break;case 3:g.docString=l.string();break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.name&&l.hasOwnProperty("name")&&!w.isString(l.name))return"name: string expected";if(null!=l.type&&l.hasOwnProperty("type")){var h=_.onnx.TypeProto.verify(l.type);if(h)return"type."+h}return null!=l.docString&&l.hasOwnProperty("docString")&&!w.isString(l.docString)?"docString: string expected":null},u.fromObject=function(l){if(l instanceof _.onnx.ValueInfoProto)return l;var h=new _.onnx.ValueInfoProto;if(null!=l.name&&(h.name=String(l.name)),null!=l.type){if("object"!=typeof l.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");h.type=_.onnx.TypeProto.fromObject(l.type)}return null!=l.docString&&(h.docString=String(l.docString)),h},u.toObject=function(l,h){h||(h={});var f={};return h.defaults&&(f.name="",f.type=null,f.docString=""),null!=l.name&&l.hasOwnProperty("name")&&(f.name=l.name),null!=l.type&&l.hasOwnProperty("type")&&(f.type=_.onnx.TypeProto.toObject(l.type,h)),null!=l.docString&&l.hasOwnProperty("docString")&&(f.docString=l.docString),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u}(),V.NodeProto=function(){function u(l){if(this.input=[],this.output=[],this.attribute=[],l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.input=w.emptyArray,u.prototype.output=w.emptyArray,u.prototype.name="",u.prototype.opType="",u.prototype.domain="",u.prototype.attribute=w.emptyArray,u.prototype.docString="",u.create=function(l){return new u(l)},u.encode=function(l,h){if(h||(h=C.create()),null!=l.input&&l.input.length)for(var f=0;f<l.input.length;++f)h.uint32(10).string(l.input[f]);if(null!=l.output&&l.output.length)for(f=0;f<l.output.length;++f)h.uint32(18).string(l.output[f]);if(null!=l.name&&l.hasOwnProperty("name")&&h.uint32(26).string(l.name),null!=l.opType&&l.hasOwnProperty("opType")&&h.uint32(34).string(l.opType),null!=l.attribute&&l.attribute.length)for(f=0;f<l.attribute.length;++f)_.onnx.AttributeProto.encode(l.attribute[f],h.uint32(42).fork()).ldelim();return null!=l.docString&&l.hasOwnProperty("docString")&&h.uint32(50).string(l.docString),null!=l.domain&&l.hasOwnProperty("domain")&&h.uint32(58).string(l.domain),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.NodeProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.input&&g.input.length||(g.input=[]),g.input.push(l.string());break;case 2:g.output&&g.output.length||(g.output=[]),g.output.push(l.string());break;case 3:g.name=l.string();break;case 4:g.opType=l.string();break;case 7:g.domain=l.string();break;case 5:g.attribute&&g.attribute.length||(g.attribute=[]),g.attribute.push(_.onnx.AttributeProto.decode(l,l.uint32()));break;case 6:g.docString=l.string();break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.input&&l.hasOwnProperty("input")){if(!Array.isArray(l.input))return"input: array expected";for(var h=0;h<l.input.length;++h)if(!w.isString(l.input[h]))return"input: string[] expected"}if(null!=l.output&&l.hasOwnProperty("output")){if(!Array.isArray(l.output))return"output: array expected";for(h=0;h<l.output.length;++h)if(!w.isString(l.output[h]))return"output: string[] expected"}if(null!=l.name&&l.hasOwnProperty("name")&&!w.isString(l.name))return"name: string expected";if(null!=l.opType&&l.hasOwnProperty("opType")&&!w.isString(l.opType))return"opType: string expected";if(null!=l.domain&&l.hasOwnProperty("domain")&&!w.isString(l.domain))return"domain: string expected";if(null!=l.attribute&&l.hasOwnProperty("attribute")){if(!Array.isArray(l.attribute))return"attribute: array expected";for(h=0;h<l.attribute.length;++h){var f=_.onnx.AttributeProto.verify(l.attribute[h]);if(f)return"attribute."+f}}return null!=l.docString&&l.hasOwnProperty("docString")&&!w.isString(l.docString)?"docString: string expected":null},u.fromObject=function(l){if(l instanceof _.onnx.NodeProto)return l;var h=new _.onnx.NodeProto;if(l.input){if(!Array.isArray(l.input))throw TypeError(".onnx.NodeProto.input: array expected");h.input=[];for(var f=0;f<l.input.length;++f)h.input[f]=String(l.input[f])}if(l.output){if(!Array.isArray(l.output))throw TypeError(".onnx.NodeProto.output: array expected");for(h.output=[],f=0;f<l.output.length;++f)h.output[f]=String(l.output[f])}if(null!=l.name&&(h.name=String(l.name)),null!=l.opType&&(h.opType=String(l.opType)),null!=l.domain&&(h.domain=String(l.domain)),l.attribute){if(!Array.isArray(l.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(h.attribute=[],f=0;f<l.attribute.length;++f){if("object"!=typeof l.attribute[f])throw TypeError(".onnx.NodeProto.attribute: object expected");h.attribute[f]=_.onnx.AttributeProto.fromObject(l.attribute[f])}}return null!=l.docString&&(h.docString=String(l.docString)),h},u.toObject=function(l,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.input=[],f.output=[],f.attribute=[]),h.defaults&&(f.name="",f.opType="",f.docString="",f.domain=""),l.input&&l.input.length){f.input=[];for(var g=0;g<l.input.length;++g)f.input[g]=l.input[g]}if(l.output&&l.output.length)for(f.output=[],g=0;g<l.output.length;++g)f.output[g]=l.output[g];if(null!=l.name&&l.hasOwnProperty("name")&&(f.name=l.name),null!=l.opType&&l.hasOwnProperty("opType")&&(f.opType=l.opType),l.attribute&&l.attribute.length)for(f.attribute=[],g=0;g<l.attribute.length;++g)f.attribute[g]=_.onnx.AttributeProto.toObject(l.attribute[g],h);return null!=l.docString&&l.hasOwnProperty("docString")&&(f.docString=l.docString),null!=l.domain&&l.hasOwnProperty("domain")&&(f.domain=l.domain),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u}(),V.ModelProto=function(){function u(l){if(this.opsetImport=[],this.metadataProps=[],l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.irVersion=w.Long?w.Long.fromBits(0,0,!1):0,u.prototype.opsetImport=w.emptyArray,u.prototype.producerName="",u.prototype.producerVersion="",u.prototype.domain="",u.prototype.modelVersion=w.Long?w.Long.fromBits(0,0,!1):0,u.prototype.docString="",u.prototype.graph=null,u.prototype.metadataProps=w.emptyArray,u.create=function(l){return new u(l)},u.encode=function(l,h){if(h||(h=C.create()),null!=l.irVersion&&l.hasOwnProperty("irVersion")&&h.uint32(8).int64(l.irVersion),null!=l.producerName&&l.hasOwnProperty("producerName")&&h.uint32(18).string(l.producerName),null!=l.producerVersion&&l.hasOwnProperty("producerVersion")&&h.uint32(26).string(l.producerVersion),null!=l.domain&&l.hasOwnProperty("domain")&&h.uint32(34).string(l.domain),null!=l.modelVersion&&l.hasOwnProperty("modelVersion")&&h.uint32(40).int64(l.modelVersion),null!=l.docString&&l.hasOwnProperty("docString")&&h.uint32(50).string(l.docString),null!=l.graph&&l.hasOwnProperty("graph")&&_.onnx.GraphProto.encode(l.graph,h.uint32(58).fork()).ldelim(),null!=l.opsetImport&&l.opsetImport.length)for(var f=0;f<l.opsetImport.length;++f)_.onnx.OperatorSetIdProto.encode(l.opsetImport[f],h.uint32(66).fork()).ldelim();if(null!=l.metadataProps&&l.metadataProps.length)for(f=0;f<l.metadataProps.length;++f)_.onnx.StringStringEntryProto.encode(l.metadataProps[f],h.uint32(114).fork()).ldelim();return h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.ModelProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.irVersion=l.int64();break;case 8:g.opsetImport&&g.opsetImport.length||(g.opsetImport=[]),g.opsetImport.push(_.onnx.OperatorSetIdProto.decode(l,l.uint32()));break;case 2:g.producerName=l.string();break;case 3:g.producerVersion=l.string();break;case 4:g.domain=l.string();break;case 5:g.modelVersion=l.int64();break;case 6:g.docString=l.string();break;case 7:g.graph=_.onnx.GraphProto.decode(l,l.uint32());break;case 14:g.metadataProps&&g.metadataProps.length||(g.metadataProps=[]),g.metadataProps.push(_.onnx.StringStringEntryProto.decode(l,l.uint32()));break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.irVersion&&l.hasOwnProperty("irVersion")&&!(w.isInteger(l.irVersion)||l.irVersion&&w.isInteger(l.irVersion.low)&&w.isInteger(l.irVersion.high)))return"irVersion: integer|Long expected";if(null!=l.opsetImport&&l.hasOwnProperty("opsetImport")){if(!Array.isArray(l.opsetImport))return"opsetImport: array expected";for(var h=0;h<l.opsetImport.length;++h)if(f=_.onnx.OperatorSetIdProto.verify(l.opsetImport[h]))return"opsetImport."+f}if(null!=l.producerName&&l.hasOwnProperty("producerName")&&!w.isString(l.producerName))return"producerName: string expected";if(null!=l.producerVersion&&l.hasOwnProperty("producerVersion")&&!w.isString(l.producerVersion))return"producerVersion: string expected";if(null!=l.domain&&l.hasOwnProperty("domain")&&!w.isString(l.domain))return"domain: string expected";if(null!=l.modelVersion&&l.hasOwnProperty("modelVersion")&&!(w.isInteger(l.modelVersion)||l.modelVersion&&w.isInteger(l.modelVersion.low)&&w.isInteger(l.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=l.docString&&l.hasOwnProperty("docString")&&!w.isString(l.docString))return"docString: string expected";if(null!=l.graph&&l.hasOwnProperty("graph")&&(f=_.onnx.GraphProto.verify(l.graph)))return"graph."+f;if(null!=l.metadataProps&&l.hasOwnProperty("metadataProps")){if(!Array.isArray(l.metadataProps))return"metadataProps: array expected";for(h=0;h<l.metadataProps.length;++h){var f;if(f=_.onnx.StringStringEntryProto.verify(l.metadataProps[h]))return"metadataProps."+f}}return null},u.fromObject=function(l){if(l instanceof _.onnx.ModelProto)return l;var h=new _.onnx.ModelProto;if(null!=l.irVersion&&(w.Long?(h.irVersion=w.Long.fromValue(l.irVersion)).unsigned=!1:"string"==typeof l.irVersion?h.irVersion=parseInt(l.irVersion,10):"number"==typeof l.irVersion?h.irVersion=l.irVersion:"object"==typeof l.irVersion&&(h.irVersion=new w.LongBits(l.irVersion.low>>>0,l.irVersion.high>>>0).toNumber())),l.opsetImport){if(!Array.isArray(l.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");h.opsetImport=[];for(var f=0;f<l.opsetImport.length;++f){if("object"!=typeof l.opsetImport[f])throw TypeError(".onnx.ModelProto.opsetImport: object expected");h.opsetImport[f]=_.onnx.OperatorSetIdProto.fromObject(l.opsetImport[f])}}if(null!=l.producerName&&(h.producerName=String(l.producerName)),null!=l.producerVersion&&(h.producerVersion=String(l.producerVersion)),null!=l.domain&&(h.domain=String(l.domain)),null!=l.modelVersion&&(w.Long?(h.modelVersion=w.Long.fromValue(l.modelVersion)).unsigned=!1:"string"==typeof l.modelVersion?h.modelVersion=parseInt(l.modelVersion,10):"number"==typeof l.modelVersion?h.modelVersion=l.modelVersion:"object"==typeof l.modelVersion&&(h.modelVersion=new w.LongBits(l.modelVersion.low>>>0,l.modelVersion.high>>>0).toNumber())),null!=l.docString&&(h.docString=String(l.docString)),null!=l.graph){if("object"!=typeof l.graph)throw TypeError(".onnx.ModelProto.graph: object expected");h.graph=_.onnx.GraphProto.fromObject(l.graph)}if(l.metadataProps){if(!Array.isArray(l.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(h.metadataProps=[],f=0;f<l.metadataProps.length;++f){if("object"!=typeof l.metadataProps[f])throw TypeError(".onnx.ModelProto.metadataProps: object expected");h.metadataProps[f]=_.onnx.StringStringEntryProto.fromObject(l.metadataProps[f])}}return h},u.toObject=function(l,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.opsetImport=[],f.metadataProps=[]),h.defaults){if(w.Long){var g=new w.Long(0,0,!1);f.irVersion=h.longs===String?g.toString():h.longs===Number?g.toNumber():g}else f.irVersion=h.longs===String?"0":0;f.producerName="",f.producerVersion="",f.domain="",w.Long?(g=new w.Long(0,0,!1),f.modelVersion=h.longs===String?g.toString():h.longs===Number?g.toNumber():g):f.modelVersion=h.longs===String?"0":0,f.docString="",f.graph=null}if(null!=l.irVersion&&l.hasOwnProperty("irVersion")&&(f.irVersion="number"==typeof l.irVersion?h.longs===String?String(l.irVersion):l.irVersion:h.longs===String?w.Long.prototype.toString.call(l.irVersion):h.longs===Number?new w.LongBits(l.irVersion.low>>>0,l.irVersion.high>>>0).toNumber():l.irVersion),null!=l.producerName&&l.hasOwnProperty("producerName")&&(f.producerName=l.producerName),null!=l.producerVersion&&l.hasOwnProperty("producerVersion")&&(f.producerVersion=l.producerVersion),null!=l.domain&&l.hasOwnProperty("domain")&&(f.domain=l.domain),null!=l.modelVersion&&l.hasOwnProperty("modelVersion")&&(f.modelVersion="number"==typeof l.modelVersion?h.longs===String?String(l.modelVersion):l.modelVersion:h.longs===String?w.Long.prototype.toString.call(l.modelVersion):h.longs===Number?new w.LongBits(l.modelVersion.low>>>0,l.modelVersion.high>>>0).toNumber():l.modelVersion),null!=l.docString&&l.hasOwnProperty("docString")&&(f.docString=l.docString),null!=l.graph&&l.hasOwnProperty("graph")&&(f.graph=_.onnx.GraphProto.toObject(l.graph,h)),l.opsetImport&&l.opsetImport.length){f.opsetImport=[];for(var b=0;b<l.opsetImport.length;++b)f.opsetImport[b]=_.onnx.OperatorSetIdProto.toObject(l.opsetImport[b],h)}if(l.metadataProps&&l.metadataProps.length)for(f.metadataProps=[],b=0;b<l.metadataProps.length;++b)f.metadataProps[b]=_.onnx.StringStringEntryProto.toObject(l.metadataProps[b],h);return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u}(),V.StringStringEntryProto=function(){function u(l){if(l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.key="",u.prototype.value="",u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=C.create()),null!=l.key&&l.hasOwnProperty("key")&&h.uint32(10).string(l.key),null!=l.value&&l.hasOwnProperty("value")&&h.uint32(18).string(l.value),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.StringStringEntryProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.key=l.string();break;case 2:g.value=l.string();break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){return"object"!=typeof l||null===l?"object expected":null!=l.key&&l.hasOwnProperty("key")&&!w.isString(l.key)?"key: string expected":null!=l.value&&l.hasOwnProperty("value")&&!w.isString(l.value)?"value: string expected":null},u.fromObject=function(l){if(l instanceof _.onnx.StringStringEntryProto)return l;var h=new _.onnx.StringStringEntryProto;return null!=l.key&&(h.key=String(l.key)),null!=l.value&&(h.value=String(l.value)),h},u.toObject=function(l,h){h||(h={});var f={};return h.defaults&&(f.key="",f.value=""),null!=l.key&&l.hasOwnProperty("key")&&(f.key=l.key),null!=l.value&&l.hasOwnProperty("value")&&(f.value=l.value),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u}(),V.TensorAnnotation=function(){function u(l){if(this.quantParameterTensorNames=[],l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.tensorName="",u.prototype.quantParameterTensorNames=w.emptyArray,u.create=function(l){return new u(l)},u.encode=function(l,h){if(h||(h=C.create()),null!=l.tensorName&&l.hasOwnProperty("tensorName")&&h.uint32(10).string(l.tensorName),null!=l.quantParameterTensorNames&&l.quantParameterTensorNames.length)for(var f=0;f<l.quantParameterTensorNames.length;++f)_.onnx.StringStringEntryProto.encode(l.quantParameterTensorNames[f],h.uint32(18).fork()).ldelim();return h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.TensorAnnotation;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.tensorName=l.string();break;case 2:g.quantParameterTensorNames&&g.quantParameterTensorNames.length||(g.quantParameterTensorNames=[]),g.quantParameterTensorNames.push(_.onnx.StringStringEntryProto.decode(l,l.uint32()));break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.tensorName&&l.hasOwnProperty("tensorName")&&!w.isString(l.tensorName))return"tensorName: string expected";if(null!=l.quantParameterTensorNames&&l.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(l.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var h=0;h<l.quantParameterTensorNames.length;++h){var f=_.onnx.StringStringEntryProto.verify(l.quantParameterTensorNames[h]);if(f)return"quantParameterTensorNames."+f}}return null},u.fromObject=function(l){if(l instanceof _.onnx.TensorAnnotation)return l;var h=new _.onnx.TensorAnnotation;if(null!=l.tensorName&&(h.tensorName=String(l.tensorName)),l.quantParameterTensorNames){if(!Array.isArray(l.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");h.quantParameterTensorNames=[];for(var f=0;f<l.quantParameterTensorNames.length;++f){if("object"!=typeof l.quantParameterTensorNames[f])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");h.quantParameterTensorNames[f]=_.onnx.StringStringEntryProto.fromObject(l.quantParameterTensorNames[f])}}return h},u.toObject=function(l,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.quantParameterTensorNames=[]),h.defaults&&(f.tensorName=""),null!=l.tensorName&&l.hasOwnProperty("tensorName")&&(f.tensorName=l.tensorName),l.quantParameterTensorNames&&l.quantParameterTensorNames.length){f.quantParameterTensorNames=[];for(var g=0;g<l.quantParameterTensorNames.length;++g)f.quantParameterTensorNames[g]=_.onnx.StringStringEntryProto.toObject(l.quantParameterTensorNames[g],h)}return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u}(),V.GraphProto=function(){function u(l){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.node=w.emptyArray,u.prototype.name="",u.prototype.initializer=w.emptyArray,u.prototype.docString="",u.prototype.input=w.emptyArray,u.prototype.output=w.emptyArray,u.prototype.valueInfo=w.emptyArray,u.prototype.quantizationAnnotation=w.emptyArray,u.create=function(l){return new u(l)},u.encode=function(l,h){if(h||(h=C.create()),null!=l.node&&l.node.length)for(var f=0;f<l.node.length;++f)_.onnx.NodeProto.encode(l.node[f],h.uint32(10).fork()).ldelim();if(null!=l.name&&l.hasOwnProperty("name")&&h.uint32(18).string(l.name),null!=l.initializer&&l.initializer.length)for(f=0;f<l.initializer.length;++f)_.onnx.TensorProto.encode(l.initializer[f],h.uint32(42).fork()).ldelim();if(null!=l.docString&&l.hasOwnProperty("docString")&&h.uint32(82).string(l.docString),null!=l.input&&l.input.length)for(f=0;f<l.input.length;++f)_.onnx.ValueInfoProto.encode(l.input[f],h.uint32(90).fork()).ldelim();if(null!=l.output&&l.output.length)for(f=0;f<l.output.length;++f)_.onnx.ValueInfoProto.encode(l.output[f],h.uint32(98).fork()).ldelim();if(null!=l.valueInfo&&l.valueInfo.length)for(f=0;f<l.valueInfo.length;++f)_.onnx.ValueInfoProto.encode(l.valueInfo[f],h.uint32(106).fork()).ldelim();if(null!=l.quantizationAnnotation&&l.quantizationAnnotation.length)for(f=0;f<l.quantizationAnnotation.length;++f)_.onnx.TensorAnnotation.encode(l.quantizationAnnotation[f],h.uint32(114).fork()).ldelim();return h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.GraphProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.node&&g.node.length||(g.node=[]),g.node.push(_.onnx.NodeProto.decode(l,l.uint32()));break;case 2:g.name=l.string();break;case 5:g.initializer&&g.initializer.length||(g.initializer=[]),g.initializer.push(_.onnx.TensorProto.decode(l,l.uint32()));break;case 10:g.docString=l.string();break;case 11:g.input&&g.input.length||(g.input=[]),g.input.push(_.onnx.ValueInfoProto.decode(l,l.uint32()));break;case 12:g.output&&g.output.length||(g.output=[]),g.output.push(_.onnx.ValueInfoProto.decode(l,l.uint32()));break;case 13:g.valueInfo&&g.valueInfo.length||(g.valueInfo=[]),g.valueInfo.push(_.onnx.ValueInfoProto.decode(l,l.uint32()));break;case 14:g.quantizationAnnotation&&g.quantizationAnnotation.length||(g.quantizationAnnotation=[]),g.quantizationAnnotation.push(_.onnx.TensorAnnotation.decode(l,l.uint32()));break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.node&&l.hasOwnProperty("node")){if(!Array.isArray(l.node))return"node: array expected";for(var h=0;h<l.node.length;++h)if(f=_.onnx.NodeProto.verify(l.node[h]))return"node."+f}if(null!=l.name&&l.hasOwnProperty("name")&&!w.isString(l.name))return"name: string expected";if(null!=l.initializer&&l.hasOwnProperty("initializer")){if(!Array.isArray(l.initializer))return"initializer: array expected";for(h=0;h<l.initializer.length;++h)if(f=_.onnx.TensorProto.verify(l.initializer[h]))return"initializer."+f}if(null!=l.docString&&l.hasOwnProperty("docString")&&!w.isString(l.docString))return"docString: string expected";if(null!=l.input&&l.hasOwnProperty("input")){if(!Array.isArray(l.input))return"input: array expected";for(h=0;h<l.input.length;++h)if(f=_.onnx.ValueInfoProto.verify(l.input[h]))return"input."+f}if(null!=l.output&&l.hasOwnProperty("output")){if(!Array.isArray(l.output))return"output: array expected";for(h=0;h<l.output.length;++h)if(f=_.onnx.ValueInfoProto.verify(l.output[h]))return"output."+f}if(null!=l.valueInfo&&l.hasOwnProperty("valueInfo")){if(!Array.isArray(l.valueInfo))return"valueInfo: array expected";for(h=0;h<l.valueInfo.length;++h)if(f=_.onnx.ValueInfoProto.verify(l.valueInfo[h]))return"valueInfo."+f}if(null!=l.quantizationAnnotation&&l.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(l.quantizationAnnotation))return"quantizationAnnotation: array expected";for(h=0;h<l.quantizationAnnotation.length;++h){var f;if(f=_.onnx.TensorAnnotation.verify(l.quantizationAnnotation[h]))return"quantizationAnnotation."+f}}return null},u.fromObject=function(l){if(l instanceof _.onnx.GraphProto)return l;var h=new _.onnx.GraphProto;if(l.node){if(!Array.isArray(l.node))throw TypeError(".onnx.GraphProto.node: array expected");h.node=[];for(var f=0;f<l.node.length;++f){if("object"!=typeof l.node[f])throw TypeError(".onnx.GraphProto.node: object expected");h.node[f]=_.onnx.NodeProto.fromObject(l.node[f])}}if(null!=l.name&&(h.name=String(l.name)),l.initializer){if(!Array.isArray(l.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(h.initializer=[],f=0;f<l.initializer.length;++f){if("object"!=typeof l.initializer[f])throw TypeError(".onnx.GraphProto.initializer: object expected");h.initializer[f]=_.onnx.TensorProto.fromObject(l.initializer[f])}}if(null!=l.docString&&(h.docString=String(l.docString)),l.input){if(!Array.isArray(l.input))throw TypeError(".onnx.GraphProto.input: array expected");for(h.input=[],f=0;f<l.input.length;++f){if("object"!=typeof l.input[f])throw TypeError(".onnx.GraphProto.input: object expected");h.input[f]=_.onnx.ValueInfoProto.fromObject(l.input[f])}}if(l.output){if(!Array.isArray(l.output))throw TypeError(".onnx.GraphProto.output: array expected");for(h.output=[],f=0;f<l.output.length;++f){if("object"!=typeof l.output[f])throw TypeError(".onnx.GraphProto.output: object expected");h.output[f]=_.onnx.ValueInfoProto.fromObject(l.output[f])}}if(l.valueInfo){if(!Array.isArray(l.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(h.valueInfo=[],f=0;f<l.valueInfo.length;++f){if("object"!=typeof l.valueInfo[f])throw TypeError(".onnx.GraphProto.valueInfo: object expected");h.valueInfo[f]=_.onnx.ValueInfoProto.fromObject(l.valueInfo[f])}}if(l.quantizationAnnotation){if(!Array.isArray(l.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(h.quantizationAnnotation=[],f=0;f<l.quantizationAnnotation.length;++f){if("object"!=typeof l.quantizationAnnotation[f])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");h.quantizationAnnotation[f]=_.onnx.TensorAnnotation.fromObject(l.quantizationAnnotation[f])}}return h},u.toObject=function(l,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.node=[],f.initializer=[],f.input=[],f.output=[],f.valueInfo=[],f.quantizationAnnotation=[]),h.defaults&&(f.name="",f.docString=""),l.node&&l.node.length){f.node=[];for(var g=0;g<l.node.length;++g)f.node[g]=_.onnx.NodeProto.toObject(l.node[g],h)}if(null!=l.name&&l.hasOwnProperty("name")&&(f.name=l.name),l.initializer&&l.initializer.length)for(f.initializer=[],g=0;g<l.initializer.length;++g)f.initializer[g]=_.onnx.TensorProto.toObject(l.initializer[g],h);if(null!=l.docString&&l.hasOwnProperty("docString")&&(f.docString=l.docString),l.input&&l.input.length)for(f.input=[],g=0;g<l.input.length;++g)f.input[g]=_.onnx.ValueInfoProto.toObject(l.input[g],h);if(l.output&&l.output.length)for(f.output=[],g=0;g<l.output.length;++g)f.output[g]=_.onnx.ValueInfoProto.toObject(l.output[g],h);if(l.valueInfo&&l.valueInfo.length)for(f.valueInfo=[],g=0;g<l.valueInfo.length;++g)f.valueInfo[g]=_.onnx.ValueInfoProto.toObject(l.valueInfo[g],h);if(l.quantizationAnnotation&&l.quantizationAnnotation.length)for(f.quantizationAnnotation=[],g=0;g<l.quantizationAnnotation.length;++g)f.quantizationAnnotation[g]=_.onnx.TensorAnnotation.toObject(l.quantizationAnnotation[g],h);return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u}(),V.TensorProto=function(){function u(l){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.dims=w.emptyArray,u.prototype.dataType=0,u.prototype.segment=null,u.prototype.floatData=w.emptyArray,u.prototype.int32Data=w.emptyArray,u.prototype.stringData=w.emptyArray,u.prototype.int64Data=w.emptyArray,u.prototype.name="",u.prototype.docString="",u.prototype.rawData=w.newBuffer([]),u.prototype.externalData=w.emptyArray,u.prototype.dataLocation=0,u.prototype.doubleData=w.emptyArray,u.prototype.uint64Data=w.emptyArray,u.create=function(l){return new u(l)},u.encode=function(l,h){if(h||(h=C.create()),null!=l.dims&&l.dims.length){h.uint32(10).fork();for(var f=0;f<l.dims.length;++f)h.int64(l.dims[f]);h.ldelim()}if(null!=l.dataType&&l.hasOwnProperty("dataType")&&h.uint32(16).int32(l.dataType),null!=l.segment&&l.hasOwnProperty("segment")&&_.onnx.TensorProto.Segment.encode(l.segment,h.uint32(26).fork()).ldelim(),null!=l.floatData&&l.floatData.length){for(h.uint32(34).fork(),f=0;f<l.floatData.length;++f)h.float(l.floatData[f]);h.ldelim()}if(null!=l.int32Data&&l.int32Data.length){for(h.uint32(42).fork(),f=0;f<l.int32Data.length;++f)h.int32(l.int32Data[f]);h.ldelim()}if(null!=l.stringData&&l.stringData.length)for(f=0;f<l.stringData.length;++f)h.uint32(50).bytes(l.stringData[f]);if(null!=l.int64Data&&l.int64Data.length){for(h.uint32(58).fork(),f=0;f<l.int64Data.length;++f)h.int64(l.int64Data[f]);h.ldelim()}if(null!=l.name&&l.hasOwnProperty("name")&&h.uint32(66).string(l.name),null!=l.rawData&&l.hasOwnProperty("rawData")&&h.uint32(74).bytes(l.rawData),null!=l.doubleData&&l.doubleData.length){for(h.uint32(82).fork(),f=0;f<l.doubleData.length;++f)h.double(l.doubleData[f]);h.ldelim()}if(null!=l.uint64Data&&l.uint64Data.length){for(h.uint32(90).fork(),f=0;f<l.uint64Data.length;++f)h.uint64(l.uint64Data[f]);h.ldelim()}if(null!=l.docString&&l.hasOwnProperty("docString")&&h.uint32(98).string(l.docString),null!=l.externalData&&l.externalData.length)for(f=0;f<l.externalData.length;++f)_.onnx.StringStringEntryProto.encode(l.externalData[f],h.uint32(106).fork()).ldelim();return null!=l.dataLocation&&l.hasOwnProperty("dataLocation")&&h.uint32(112).int32(l.dataLocation),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.TensorProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:if(g.dims&&g.dims.length||(g.dims=[]),2==(7&b))for(var x=l.uint32()+l.pos;l.pos<x;)g.dims.push(l.int64());else g.dims.push(l.int64());break;case 2:g.dataType=l.int32();break;case 3:g.segment=_.onnx.TensorProto.Segment.decode(l,l.uint32());break;case 4:if(g.floatData&&g.floatData.length||(g.floatData=[]),2==(7&b))for(x=l.uint32()+l.pos;l.pos<x;)g.floatData.push(l.float());else g.floatData.push(l.float());break;case 5:if(g.int32Data&&g.int32Data.length||(g.int32Data=[]),2==(7&b))for(x=l.uint32()+l.pos;l.pos<x;)g.int32Data.push(l.int32());else g.int32Data.push(l.int32());break;case 6:g.stringData&&g.stringData.length||(g.stringData=[]),g.stringData.push(l.bytes());break;case 7:if(g.int64Data&&g.int64Data.length||(g.int64Data=[]),2==(7&b))for(x=l.uint32()+l.pos;l.pos<x;)g.int64Data.push(l.int64());else g.int64Data.push(l.int64());break;case 8:g.name=l.string();break;case 12:g.docString=l.string();break;case 9:g.rawData=l.bytes();break;case 13:g.externalData&&g.externalData.length||(g.externalData=[]),g.externalData.push(_.onnx.StringStringEntryProto.decode(l,l.uint32()));break;case 14:g.dataLocation=l.int32();break;case 10:if(g.doubleData&&g.doubleData.length||(g.doubleData=[]),2==(7&b))for(x=l.uint32()+l.pos;l.pos<x;)g.doubleData.push(l.double());else g.doubleData.push(l.double());break;case 11:if(g.uint64Data&&g.uint64Data.length||(g.uint64Data=[]),2==(7&b))for(x=l.uint32()+l.pos;l.pos<x;)g.uint64Data.push(l.uint64());else g.uint64Data.push(l.uint64());break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.dims&&l.hasOwnProperty("dims")){if(!Array.isArray(l.dims))return"dims: array expected";for(var h=0;h<l.dims.length;++h)if(!(w.isInteger(l.dims[h])||l.dims[h]&&w.isInteger(l.dims[h].low)&&w.isInteger(l.dims[h].high)))return"dims: integer|Long[] expected"}if(null!=l.dataType&&l.hasOwnProperty("dataType")&&!w.isInteger(l.dataType))return"dataType: integer expected";if(null!=l.segment&&l.hasOwnProperty("segment")&&(f=_.onnx.TensorProto.Segment.verify(l.segment)))return"segment."+f;if(null!=l.floatData&&l.hasOwnProperty("floatData")){if(!Array.isArray(l.floatData))return"floatData: array expected";for(h=0;h<l.floatData.length;++h)if("number"!=typeof l.floatData[h])return"floatData: number[] expected"}if(null!=l.int32Data&&l.hasOwnProperty("int32Data")){if(!Array.isArray(l.int32Data))return"int32Data: array expected";for(h=0;h<l.int32Data.length;++h)if(!w.isInteger(l.int32Data[h]))return"int32Data: integer[] expected"}if(null!=l.stringData&&l.hasOwnProperty("stringData")){if(!Array.isArray(l.stringData))return"stringData: array expected";for(h=0;h<l.stringData.length;++h)if(!(l.stringData[h]&&"number"==typeof l.stringData[h].length||w.isString(l.stringData[h])))return"stringData: buffer[] expected"}if(null!=l.int64Data&&l.hasOwnProperty("int64Data")){if(!Array.isArray(l.int64Data))return"int64Data: array expected";for(h=0;h<l.int64Data.length;++h)if(!(w.isInteger(l.int64Data[h])||l.int64Data[h]&&w.isInteger(l.int64Data[h].low)&&w.isInteger(l.int64Data[h].high)))return"int64Data: integer|Long[] expected"}if(null!=l.name&&l.hasOwnProperty("name")&&!w.isString(l.name))return"name: string expected";if(null!=l.docString&&l.hasOwnProperty("docString")&&!w.isString(l.docString))return"docString: string expected";if(null!=l.rawData&&l.hasOwnProperty("rawData")&&!(l.rawData&&"number"==typeof l.rawData.length||w.isString(l.rawData)))return"rawData: buffer expected";if(null!=l.externalData&&l.hasOwnProperty("externalData")){if(!Array.isArray(l.externalData))return"externalData: array expected";for(h=0;h<l.externalData.length;++h){var f;if(f=_.onnx.StringStringEntryProto.verify(l.externalData[h]))return"externalData."+f}}if(null!=l.dataLocation&&l.hasOwnProperty("dataLocation"))switch(l.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=l.doubleData&&l.hasOwnProperty("doubleData")){if(!Array.isArray(l.doubleData))return"doubleData: array expected";for(h=0;h<l.doubleData.length;++h)if("number"!=typeof l.doubleData[h])return"doubleData: number[] expected"}if(null!=l.uint64Data&&l.hasOwnProperty("uint64Data")){if(!Array.isArray(l.uint64Data))return"uint64Data: array expected";for(h=0;h<l.uint64Data.length;++h)if(!(w.isInteger(l.uint64Data[h])||l.uint64Data[h]&&w.isInteger(l.uint64Data[h].low)&&w.isInteger(l.uint64Data[h].high)))return"uint64Data: integer|Long[] expected"}return null},u.fromObject=function(l){if(l instanceof _.onnx.TensorProto)return l;var h=new _.onnx.TensorProto;if(l.dims){if(!Array.isArray(l.dims))throw TypeError(".onnx.TensorProto.dims: array expected");h.dims=[];for(var f=0;f<l.dims.length;++f)w.Long?(h.dims[f]=w.Long.fromValue(l.dims[f])).unsigned=!1:"string"==typeof l.dims[f]?h.dims[f]=parseInt(l.dims[f],10):"number"==typeof l.dims[f]?h.dims[f]=l.dims[f]:"object"==typeof l.dims[f]&&(h.dims[f]=new w.LongBits(l.dims[f].low>>>0,l.dims[f].high>>>0).toNumber())}if(null!=l.dataType&&(h.dataType=0|l.dataType),null!=l.segment){if("object"!=typeof l.segment)throw TypeError(".onnx.TensorProto.segment: object expected");h.segment=_.onnx.TensorProto.Segment.fromObject(l.segment)}if(l.floatData){if(!Array.isArray(l.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(h.floatData=[],f=0;f<l.floatData.length;++f)h.floatData[f]=Number(l.floatData[f])}if(l.int32Data){if(!Array.isArray(l.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(h.int32Data=[],f=0;f<l.int32Data.length;++f)h.int32Data[f]=0|l.int32Data[f]}if(l.stringData){if(!Array.isArray(l.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(h.stringData=[],f=0;f<l.stringData.length;++f)"string"==typeof l.stringData[f]?w.base64.decode(l.stringData[f],h.stringData[f]=w.newBuffer(w.base64.length(l.stringData[f])),0):l.stringData[f].length&&(h.stringData[f]=l.stringData[f])}if(l.int64Data){if(!Array.isArray(l.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(h.int64Data=[],f=0;f<l.int64Data.length;++f)w.Long?(h.int64Data[f]=w.Long.fromValue(l.int64Data[f])).unsigned=!1:"string"==typeof l.int64Data[f]?h.int64Data[f]=parseInt(l.int64Data[f],10):"number"==typeof l.int64Data[f]?h.int64Data[f]=l.int64Data[f]:"object"==typeof l.int64Data[f]&&(h.int64Data[f]=new w.LongBits(l.int64Data[f].low>>>0,l.int64Data[f].high>>>0).toNumber())}if(null!=l.name&&(h.name=String(l.name)),null!=l.docString&&(h.docString=String(l.docString)),null!=l.rawData&&("string"==typeof l.rawData?w.base64.decode(l.rawData,h.rawData=w.newBuffer(w.base64.length(l.rawData)),0):l.rawData.length&&(h.rawData=l.rawData)),l.externalData){if(!Array.isArray(l.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(h.externalData=[],f=0;f<l.externalData.length;++f){if("object"!=typeof l.externalData[f])throw TypeError(".onnx.TensorProto.externalData: object expected");h.externalData[f]=_.onnx.StringStringEntryProto.fromObject(l.externalData[f])}}switch(l.dataLocation){case"DEFAULT":case 0:h.dataLocation=0;break;case"EXTERNAL":case 1:h.dataLocation=1}if(l.doubleData){if(!Array.isArray(l.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(h.doubleData=[],f=0;f<l.doubleData.length;++f)h.doubleData[f]=Number(l.doubleData[f])}if(l.uint64Data){if(!Array.isArray(l.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(h.uint64Data=[],f=0;f<l.uint64Data.length;++f)w.Long?(h.uint64Data[f]=w.Long.fromValue(l.uint64Data[f])).unsigned=!0:"string"==typeof l.uint64Data[f]?h.uint64Data[f]=parseInt(l.uint64Data[f],10):"number"==typeof l.uint64Data[f]?h.uint64Data[f]=l.uint64Data[f]:"object"==typeof l.uint64Data[f]&&(h.uint64Data[f]=new w.LongBits(l.uint64Data[f].low>>>0,l.uint64Data[f].high>>>0).toNumber(!0))}return h},u.toObject=function(l,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.dims=[],f.floatData=[],f.int32Data=[],f.stringData=[],f.int64Data=[],f.doubleData=[],f.uint64Data=[],f.externalData=[]),h.defaults&&(f.dataType=0,f.segment=null,f.name="",h.bytes===String?f.rawData="":(f.rawData=[],h.bytes!==Array&&(f.rawData=w.newBuffer(f.rawData))),f.docString="",f.dataLocation=h.enums===String?"DEFAULT":0),l.dims&&l.dims.length){f.dims=[];for(var g=0;g<l.dims.length;++g)f.dims[g]="number"==typeof l.dims[g]?h.longs===String?String(l.dims[g]):l.dims[g]:h.longs===String?w.Long.prototype.toString.call(l.dims[g]):h.longs===Number?new w.LongBits(l.dims[g].low>>>0,l.dims[g].high>>>0).toNumber():l.dims[g]}if(null!=l.dataType&&l.hasOwnProperty("dataType")&&(f.dataType=l.dataType),null!=l.segment&&l.hasOwnProperty("segment")&&(f.segment=_.onnx.TensorProto.Segment.toObject(l.segment,h)),l.floatData&&l.floatData.length)for(f.floatData=[],g=0;g<l.floatData.length;++g)f.floatData[g]=h.json&&!isFinite(l.floatData[g])?String(l.floatData[g]):l.floatData[g];if(l.int32Data&&l.int32Data.length)for(f.int32Data=[],g=0;g<l.int32Data.length;++g)f.int32Data[g]=l.int32Data[g];if(l.stringData&&l.stringData.length)for(f.stringData=[],g=0;g<l.stringData.length;++g)f.stringData[g]=h.bytes===String?w.base64.encode(l.stringData[g],0,l.stringData[g].length):h.bytes===Array?Array.prototype.slice.call(l.stringData[g]):l.stringData[g];if(l.int64Data&&l.int64Data.length)for(f.int64Data=[],g=0;g<l.int64Data.length;++g)f.int64Data[g]="number"==typeof l.int64Data[g]?h.longs===String?String(l.int64Data[g]):l.int64Data[g]:h.longs===String?w.Long.prototype.toString.call(l.int64Data[g]):h.longs===Number?new w.LongBits(l.int64Data[g].low>>>0,l.int64Data[g].high>>>0).toNumber():l.int64Data[g];if(null!=l.name&&l.hasOwnProperty("name")&&(f.name=l.name),null!=l.rawData&&l.hasOwnProperty("rawData")&&(f.rawData=h.bytes===String?w.base64.encode(l.rawData,0,l.rawData.length):h.bytes===Array?Array.prototype.slice.call(l.rawData):l.rawData),l.doubleData&&l.doubleData.length)for(f.doubleData=[],g=0;g<l.doubleData.length;++g)f.doubleData[g]=h.json&&!isFinite(l.doubleData[g])?String(l.doubleData[g]):l.doubleData[g];if(l.uint64Data&&l.uint64Data.length)for(f.uint64Data=[],g=0;g<l.uint64Data.length;++g)f.uint64Data[g]="number"==typeof l.uint64Data[g]?h.longs===String?String(l.uint64Data[g]):l.uint64Data[g]:h.longs===String?w.Long.prototype.toString.call(l.uint64Data[g]):h.longs===Number?new w.LongBits(l.uint64Data[g].low>>>0,l.uint64Data[g].high>>>0).toNumber(!0):l.uint64Data[g];if(null!=l.docString&&l.hasOwnProperty("docString")&&(f.docString=l.docString),l.externalData&&l.externalData.length)for(f.externalData=[],g=0;g<l.externalData.length;++g)f.externalData[g]=_.onnx.StringStringEntryProto.toObject(l.externalData[g],h);return null!=l.dataLocation&&l.hasOwnProperty("dataLocation")&&(f.dataLocation=h.enums===String?_.onnx.TensorProto.DataLocation[l.dataLocation]:l.dataLocation),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u.DataType=(l={},(h=Object.create(l))[l[0]="UNDEFINED"]=0,h[l[1]="FLOAT"]=1,h[l[2]="UINT8"]=2,h[l[3]="INT8"]=3,h[l[4]="UINT16"]=4,h[l[5]="INT16"]=5,h[l[6]="INT32"]=6,h[l[7]="INT64"]=7,h[l[8]="STRING"]=8,h[l[9]="BOOL"]=9,h[l[10]="FLOAT16"]=10,h[l[11]="DOUBLE"]=11,h[l[12]="UINT32"]=12,h[l[13]="UINT64"]=13,h[l[14]="COMPLEX64"]=14,h[l[15]="COMPLEX128"]=15,h[l[16]="BFLOAT16"]=16,h),u.Segment=function(){function l(h){if(h)for(var f=Object.keys(h),g=0;g<f.length;++g)null!=h[f[g]]&&(this[f[g]]=h[f[g]])}return l.prototype.begin=w.Long?w.Long.fromBits(0,0,!1):0,l.prototype.end=w.Long?w.Long.fromBits(0,0,!1):0,l.create=function(h){return new l(h)},l.encode=function(h,f){return f||(f=C.create()),null!=h.begin&&h.hasOwnProperty("begin")&&f.uint32(8).int64(h.begin),null!=h.end&&h.hasOwnProperty("end")&&f.uint32(16).int64(h.end),f},l.encodeDelimited=function(h,f){return this.encode(h,f).ldelim()},l.decode=function(h,f){h instanceof O||(h=O.create(h));for(var g=void 0===f?h.len:h.pos+f,b=new _.onnx.TensorProto.Segment;h.pos<g;){var x=h.uint32();switch(x>>>3){case 1:b.begin=h.int64();break;case 2:b.end=h.int64();break;default:h.skipType(7&x)}}return b},l.decodeDelimited=function(h){return h instanceof O||(h=new O(h)),this.decode(h,h.uint32())},l.verify=function(h){return"object"!=typeof h||null===h?"object expected":null!=h.begin&&h.hasOwnProperty("begin")&&!(w.isInteger(h.begin)||h.begin&&w.isInteger(h.begin.low)&&w.isInteger(h.begin.high))?"begin: integer|Long expected":null!=h.end&&h.hasOwnProperty("end")&&!(w.isInteger(h.end)||h.end&&w.isInteger(h.end.low)&&w.isInteger(h.end.high))?"end: integer|Long expected":null},l.fromObject=function(h){if(h instanceof _.onnx.TensorProto.Segment)return h;var f=new _.onnx.TensorProto.Segment;return null!=h.begin&&(w.Long?(f.begin=w.Long.fromValue(h.begin)).unsigned=!1:"string"==typeof h.begin?f.begin=parseInt(h.begin,10):"number"==typeof h.begin?f.begin=h.begin:"object"==typeof h.begin&&(f.begin=new w.LongBits(h.begin.low>>>0,h.begin.high>>>0).toNumber())),null!=h.end&&(w.Long?(f.end=w.Long.fromValue(h.end)).unsigned=!1:"string"==typeof h.end?f.end=parseInt(h.end,10):"number"==typeof h.end?f.end=h.end:"object"==typeof h.end&&(f.end=new w.LongBits(h.end.low>>>0,h.end.high>>>0).toNumber())),f},l.toObject=function(h,f){f||(f={});var g={};if(f.defaults){if(w.Long){var b=new w.Long(0,0,!1);g.begin=f.longs===String?b.toString():f.longs===Number?b.toNumber():b}else g.begin=f.longs===String?"0":0;w.Long?(b=new w.Long(0,0,!1),g.end=f.longs===String?b.toString():f.longs===Number?b.toNumber():b):g.end=f.longs===String?"0":0}return null!=h.begin&&h.hasOwnProperty("begin")&&(g.begin="number"==typeof h.begin?f.longs===String?String(h.begin):h.begin:f.longs===String?w.Long.prototype.toString.call(h.begin):f.longs===Number?new w.LongBits(h.begin.low>>>0,h.begin.high>>>0).toNumber():h.begin),null!=h.end&&h.hasOwnProperty("end")&&(g.end="number"==typeof h.end?f.longs===String?String(h.end):h.end:f.longs===String?w.Long.prototype.toString.call(h.end):f.longs===Number?new w.LongBits(h.end.low>>>0,h.end.high>>>0).toNumber():h.end),g},l.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},l}(),u.DataLocation=function(){var l={},h=Object.create(l);return h[l[0]="DEFAULT"]=0,h[l[1]="EXTERNAL"]=1,h}(),u;var l,h}(),V.TensorShapeProto=function(){function u(l){if(this.dim=[],l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.dim=w.emptyArray,u.create=function(l){return new u(l)},u.encode=function(l,h){if(h||(h=C.create()),null!=l.dim&&l.dim.length)for(var f=0;f<l.dim.length;++f)_.onnx.TensorShapeProto.Dimension.encode(l.dim[f],h.uint32(10).fork()).ldelim();return h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.TensorShapeProto;l.pos<f;){var b=l.uint32();b>>>3==1?(g.dim&&g.dim.length||(g.dim=[]),g.dim.push(_.onnx.TensorShapeProto.Dimension.decode(l,l.uint32()))):l.skipType(7&b)}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){if("object"!=typeof l||null===l)return"object expected";if(null!=l.dim&&l.hasOwnProperty("dim")){if(!Array.isArray(l.dim))return"dim: array expected";for(var h=0;h<l.dim.length;++h){var f=_.onnx.TensorShapeProto.Dimension.verify(l.dim[h]);if(f)return"dim."+f}}return null},u.fromObject=function(l){if(l instanceof _.onnx.TensorShapeProto)return l;var h=new _.onnx.TensorShapeProto;if(l.dim){if(!Array.isArray(l.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");h.dim=[];for(var f=0;f<l.dim.length;++f){if("object"!=typeof l.dim[f])throw TypeError(".onnx.TensorShapeProto.dim: object expected");h.dim[f]=_.onnx.TensorShapeProto.Dimension.fromObject(l.dim[f])}}return h},u.toObject=function(l,h){h||(h={});var f={};if((h.arrays||h.defaults)&&(f.dim=[]),l.dim&&l.dim.length){f.dim=[];for(var g=0;g<l.dim.length;++g)f.dim[g]=_.onnx.TensorShapeProto.Dimension.toObject(l.dim[g],h)}return f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u.Dimension=function(){function l(f){if(f)for(var g=Object.keys(f),b=0;b<g.length;++b)null!=f[g[b]]&&(this[g[b]]=f[g[b]])}var h;return l.prototype.dimValue=w.Long?w.Long.fromBits(0,0,!1):0,l.prototype.dimParam="",l.prototype.denotation="",Object.defineProperty(l.prototype,"value",{get:w.oneOfGetter(h=["dimValue","dimParam"]),set:w.oneOfSetter(h)}),l.create=function(f){return new l(f)},l.encode=function(f,g){return g||(g=C.create()),null!=f.dimValue&&f.hasOwnProperty("dimValue")&&g.uint32(8).int64(f.dimValue),null!=f.dimParam&&f.hasOwnProperty("dimParam")&&g.uint32(18).string(f.dimParam),null!=f.denotation&&f.hasOwnProperty("denotation")&&g.uint32(26).string(f.denotation),g},l.encodeDelimited=function(f,g){return this.encode(f,g).ldelim()},l.decode=function(f,g){f instanceof O||(f=O.create(f));for(var b=void 0===g?f.len:f.pos+g,x=new _.onnx.TensorShapeProto.Dimension;f.pos<b;){var A=f.uint32();switch(A>>>3){case 1:x.dimValue=f.int64();break;case 2:x.dimParam=f.string();break;case 3:x.denotation=f.string();break;default:f.skipType(7&A)}}return x},l.decodeDelimited=function(f){return f instanceof O||(f=new O(f)),this.decode(f,f.uint32())},l.verify=function(f){if("object"!=typeof f||null===f)return"object expected";var g={};if(null!=f.dimValue&&f.hasOwnProperty("dimValue")&&(g.value=1,!(w.isInteger(f.dimValue)||f.dimValue&&w.isInteger(f.dimValue.low)&&w.isInteger(f.dimValue.high))))return"dimValue: integer|Long expected";if(null!=f.dimParam&&f.hasOwnProperty("dimParam")){if(1===g.value)return"value: multiple values";if(g.value=1,!w.isString(f.dimParam))return"dimParam: string expected"}return null!=f.denotation&&f.hasOwnProperty("denotation")&&!w.isString(f.denotation)?"denotation: string expected":null},l.fromObject=function(f){if(f instanceof _.onnx.TensorShapeProto.Dimension)return f;var g=new _.onnx.TensorShapeProto.Dimension;return null!=f.dimValue&&(w.Long?(g.dimValue=w.Long.fromValue(f.dimValue)).unsigned=!1:"string"==typeof f.dimValue?g.dimValue=parseInt(f.dimValue,10):"number"==typeof f.dimValue?g.dimValue=f.dimValue:"object"==typeof f.dimValue&&(g.dimValue=new w.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber())),null!=f.dimParam&&(g.dimParam=String(f.dimParam)),null!=f.denotation&&(g.denotation=String(f.denotation)),g},l.toObject=function(f,g){g||(g={});var b={};return g.defaults&&(b.denotation=""),null!=f.dimValue&&f.hasOwnProperty("dimValue")&&(b.dimValue="number"==typeof f.dimValue?g.longs===String?String(f.dimValue):f.dimValue:g.longs===String?w.Long.prototype.toString.call(f.dimValue):g.longs===Number?new w.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber():f.dimValue,g.oneofs&&(b.value="dimValue")),null!=f.dimParam&&f.hasOwnProperty("dimParam")&&(b.dimParam=f.dimParam,g.oneofs&&(b.value="dimParam")),null!=f.denotation&&f.hasOwnProperty("denotation")&&(b.denotation=f.denotation),b},l.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},l}(),u}(),V.TypeProto=function(){function u(h){if(h)for(var f=Object.keys(h),g=0;g<f.length;++g)null!=h[f[g]]&&(this[f[g]]=h[f[g]])}var l;return u.prototype.tensorType=null,u.prototype.denotation="",Object.defineProperty(u.prototype,"value",{get:w.oneOfGetter(l=["tensorType"]),set:w.oneOfSetter(l)}),u.create=function(h){return new u(h)},u.encode=function(h,f){return f||(f=C.create()),null!=h.tensorType&&h.hasOwnProperty("tensorType")&&_.onnx.TypeProto.Tensor.encode(h.tensorType,f.uint32(10).fork()).ldelim(),null!=h.denotation&&h.hasOwnProperty("denotation")&&f.uint32(50).string(h.denotation),f},u.encodeDelimited=function(h,f){return this.encode(h,f).ldelim()},u.decode=function(h,f){h instanceof O||(h=O.create(h));for(var g=void 0===f?h.len:h.pos+f,b=new _.onnx.TypeProto;h.pos<g;){var x=h.uint32();switch(x>>>3){case 1:b.tensorType=_.onnx.TypeProto.Tensor.decode(h,h.uint32());break;case 6:b.denotation=h.string();break;default:h.skipType(7&x)}}return b},u.decodeDelimited=function(h){return h instanceof O||(h=new O(h)),this.decode(h,h.uint32())},u.verify=function(h){if("object"!=typeof h||null===h)return"object expected";if(null!=h.tensorType&&h.hasOwnProperty("tensorType")){var f=_.onnx.TypeProto.Tensor.verify(h.tensorType);if(f)return"tensorType."+f}return null!=h.denotation&&h.hasOwnProperty("denotation")&&!w.isString(h.denotation)?"denotation: string expected":null},u.fromObject=function(h){if(h instanceof _.onnx.TypeProto)return h;var f=new _.onnx.TypeProto;if(null!=h.tensorType){if("object"!=typeof h.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");f.tensorType=_.onnx.TypeProto.Tensor.fromObject(h.tensorType)}return null!=h.denotation&&(f.denotation=String(h.denotation)),f},u.toObject=function(h,f){f||(f={});var g={};return f.defaults&&(g.denotation=""),null!=h.tensorType&&h.hasOwnProperty("tensorType")&&(g.tensorType=_.onnx.TypeProto.Tensor.toObject(h.tensorType,f),f.oneofs&&(g.value="tensorType")),null!=h.denotation&&h.hasOwnProperty("denotation")&&(g.denotation=h.denotation),g},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u.Tensor=function(){function h(f){if(f)for(var g=Object.keys(f),b=0;b<g.length;++b)null!=f[g[b]]&&(this[g[b]]=f[g[b]])}return h.prototype.elemType=0,h.prototype.shape=null,h.create=function(f){return new h(f)},h.encode=function(f,g){return g||(g=C.create()),null!=f.elemType&&f.hasOwnProperty("elemType")&&g.uint32(8).int32(f.elemType),null!=f.shape&&f.hasOwnProperty("shape")&&_.onnx.TensorShapeProto.encode(f.shape,g.uint32(18).fork()).ldelim(),g},h.encodeDelimited=function(f,g){return this.encode(f,g).ldelim()},h.decode=function(f,g){f instanceof O||(f=O.create(f));for(var b=void 0===g?f.len:f.pos+g,x=new _.onnx.TypeProto.Tensor;f.pos<b;){var A=f.uint32();switch(A>>>3){case 1:x.elemType=f.int32();break;case 2:x.shape=_.onnx.TensorShapeProto.decode(f,f.uint32());break;default:f.skipType(7&A)}}return x},h.decodeDelimited=function(f){return f instanceof O||(f=new O(f)),this.decode(f,f.uint32())},h.verify=function(f){if("object"!=typeof f||null===f)return"object expected";if(null!=f.elemType&&f.hasOwnProperty("elemType")&&!w.isInteger(f.elemType))return"elemType: integer expected";if(null!=f.shape&&f.hasOwnProperty("shape")){var g=_.onnx.TensorShapeProto.verify(f.shape);if(g)return"shape."+g}return null},h.fromObject=function(f){if(f instanceof _.onnx.TypeProto.Tensor)return f;var g=new _.onnx.TypeProto.Tensor;if(null!=f.elemType&&(g.elemType=0|f.elemType),null!=f.shape){if("object"!=typeof f.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");g.shape=_.onnx.TensorShapeProto.fromObject(f.shape)}return g},h.toObject=function(f,g){g||(g={});var b={};return g.defaults&&(b.elemType=0,b.shape=null),null!=f.elemType&&f.hasOwnProperty("elemType")&&(b.elemType=f.elemType),null!=f.shape&&f.hasOwnProperty("shape")&&(b.shape=_.onnx.TensorShapeProto.toObject(f.shape,g)),b},h.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},h}(),u}(),V.OperatorSetIdProto=function(){function u(l){if(l)for(var h=Object.keys(l),f=0;f<h.length;++f)null!=l[h[f]]&&(this[h[f]]=l[h[f]])}return u.prototype.domain="",u.prototype.version=w.Long?w.Long.fromBits(0,0,!1):0,u.create=function(l){return new u(l)},u.encode=function(l,h){return h||(h=C.create()),null!=l.domain&&l.hasOwnProperty("domain")&&h.uint32(10).string(l.domain),null!=l.version&&l.hasOwnProperty("version")&&h.uint32(16).int64(l.version),h},u.encodeDelimited=function(l,h){return this.encode(l,h).ldelim()},u.decode=function(l,h){l instanceof O||(l=O.create(l));for(var f=void 0===h?l.len:l.pos+h,g=new _.onnx.OperatorSetIdProto;l.pos<f;){var b=l.uint32();switch(b>>>3){case 1:g.domain=l.string();break;case 2:g.version=l.int64();break;default:l.skipType(7&b)}}return g},u.decodeDelimited=function(l){return l instanceof O||(l=new O(l)),this.decode(l,l.uint32())},u.verify=function(l){return"object"!=typeof l||null===l?"object expected":null!=l.domain&&l.hasOwnProperty("domain")&&!w.isString(l.domain)?"domain: string expected":null!=l.version&&l.hasOwnProperty("version")&&!(w.isInteger(l.version)||l.version&&w.isInteger(l.version.low)&&w.isInteger(l.version.high))?"version: integer|Long expected":null},u.fromObject=function(l){if(l instanceof _.onnx.OperatorSetIdProto)return l;var h=new _.onnx.OperatorSetIdProto;return null!=l.domain&&(h.domain=String(l.domain)),null!=l.version&&(w.Long?(h.version=w.Long.fromValue(l.version)).unsigned=!1:"string"==typeof l.version?h.version=parseInt(l.version,10):"number"==typeof l.version?h.version=l.version:"object"==typeof l.version&&(h.version=new w.LongBits(l.version.low>>>0,l.version.high>>>0).toNumber())),h},u.toObject=function(l,h){h||(h={});var f={};if(h.defaults)if(f.domain="",w.Long){var g=new w.Long(0,0,!1);f.version=h.longs===String?g.toString():h.longs===Number?g.toNumber():g}else f.version=h.longs===String?"0":0;return null!=l.domain&&l.hasOwnProperty("domain")&&(f.domain=l.domain),null!=l.version&&l.hasOwnProperty("version")&&(f.version="number"==typeof l.version?h.longs===String?String(l.version):l.version:h.longs===String?w.Long.prototype.toString.call(l.version):h.longs===Number?new w.LongBits(l.version.low>>>0,l.version.high>>>0).toNumber():l.version),f},u.prototype.toJSON=function(){return this.constructor.toObject(this,S.util.toJSONOptions)},u}(),V),Ye.exports=_},2100:(Ye,F,q)=>{"use strict";Ye.exports=q(9482)},9482:(Ye,F,q)=>{"use strict";var z=F;function L(){z.util._configure(),z.Writer._configure(z.BufferWriter),z.Reader._configure(z.BufferReader)}z.build="minimal",z.Writer=q(1173),z.BufferWriter=q(3155),z.Reader=q(1408),z.BufferReader=q(593),z.util=q(9693),z.rpc=q(5994),z.roots=q(5054),z.configure=L,L()},1408:(Ye,F,q)=>{"use strict";Ye.exports=C;var z,L=q(9693),V=L.LongBits,S=L.utf8;function O(g,b){return RangeError("index out of range: "+g.pos+" + "+(b||1)+" > "+g.len)}function C(g){this.buf=g,this.pos=0,this.len=g.length}var w,_=typeof Uint8Array<"u"?function(g){if(g instanceof Uint8Array||Array.isArray(g))return new C(g);throw Error("illegal buffer")}:function(g){if(Array.isArray(g))return new C(g);throw Error("illegal buffer")},u=function(){return L.Buffer?function(g){return(C.create=function(b){return L.Buffer.isBuffer(b)?new z(b):_(b)})(g)}:_};function l(){var g=new V(0,0),b=0;if(!(this.len-this.pos>4)){for(;b<3;++b){if(this.pos>=this.len)throw O(this);if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*b)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(127&this.buf[this.pos++])<<7*b)>>>0,g}for(;b<4;++b)if(g.lo=(g.lo|(127&this.buf[this.pos])<<7*b)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(127&this.buf[this.pos])<<28)>>>0,g.hi=(g.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return g;if(b=0,this.len-this.pos>4){for(;b<5;++b)if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*b+3)>>>0,this.buf[this.pos++]<128)return g}else for(;b<5;++b){if(this.pos>=this.len)throw O(this);if(g.hi=(g.hi|(127&this.buf[this.pos])<<7*b+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}function h(g,b){return(g[b-4]|g[b-3]<<8|g[b-2]<<16|g[b-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw O(this,8);return new V(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}C.create=u(),C.prototype._slice=L.Array.prototype.subarray||L.Array.prototype.slice,C.prototype.uint32=(w=4294967295,function(){if(w=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(w=(w|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(w=(w|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(w=(w|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(w=(w|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return w;if((this.pos+=5)>this.len)throw this.pos=this.len,O(this,10);return w}),C.prototype.int32=function(){return 0|this.uint32()},C.prototype.sint32=function(){var g=this.uint32();return g>>>1^-(1&g)},C.prototype.bool=function(){return 0!==this.uint32()},C.prototype.fixed32=function(){if(this.pos+4>this.len)throw O(this,4);return h(this.buf,this.pos+=4)},C.prototype.sfixed32=function(){if(this.pos+4>this.len)throw O(this,4);return 0|h(this.buf,this.pos+=4)},C.prototype.float=function(){if(this.pos+4>this.len)throw O(this,4);var g=L.float.readFloatLE(this.buf,this.pos);return this.pos+=4,g},C.prototype.double=function(){if(this.pos+8>this.len)throw O(this,4);var g=L.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,g},C.prototype.bytes=function(){var g=this.uint32(),b=this.pos,x=this.pos+g;if(x>this.len)throw O(this,g);return this.pos+=g,Array.isArray(this.buf)?this.buf.slice(b,x):b===x?new this.buf.constructor(0):this._slice.call(this.buf,b,x)},C.prototype.string=function(){var g=this.bytes();return S.read(g,0,g.length)},C.prototype.skip=function(g){if("number"==typeof g){if(this.pos+g>this.len)throw O(this,g);this.pos+=g}else do{if(this.pos>=this.len)throw O(this)}while(128&this.buf[this.pos++]);return this},C.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(g=7&this.uint32());)this.skipType(g);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},C._configure=function(g){z=g,C.create=u(),z._configure();var b=L.Long?"toLong":"toNumber";L.merge(C.prototype,{int64:function(){return l.call(this)[b](!1)},uint64:function(){return l.call(this)[b](!0)},sint64:function(){return l.call(this).zzDecode()[b](!1)},fixed64:function(){return f.call(this)[b](!0)},sfixed64:function(){return f.call(this)[b](!1)}})}},593:(Ye,F,q)=>{"use strict";Ye.exports=V;var z=q(1408);(V.prototype=Object.create(z.prototype)).constructor=V;var L=q(9693);function V(S){z.call(this,S)}V._configure=function(){L.Buffer&&(V.prototype._slice=L.Buffer.prototype.slice)},V.prototype.string=function(){var S=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+S,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+S,this.len))},V._configure()},5054:Ye=>{"use strict";Ye.exports={}},5994:(Ye,F,q)=>{"use strict";F.Service=q(7948)},7948:(Ye,F,q)=>{"use strict";Ye.exports=L;var z=q(9693);function L(V,S,O){if("function"!=typeof V)throw TypeError("rpcImpl must be a function");z.EventEmitter.call(this),this.rpcImpl=V,this.requestDelimited=!!S,this.responseDelimited=!!O}(L.prototype=Object.create(z.EventEmitter.prototype)).constructor=L,L.prototype.rpcCall=function V(S,O,C,w,_){if(!w)throw TypeError("request must be specified");var u=this;if(!_)return z.asPromise(V,u,S,O,C,w);if(u.rpcImpl)try{return u.rpcImpl(S,O[u.requestDelimited?"encodeDelimited":"encode"](w).finish(),function(l,h){if(l)return u.emit("error",l,S),_(l);if(null!==h){if(!(h instanceof C))try{h=C[u.responseDelimited?"decodeDelimited":"decode"](h)}catch(f){return u.emit("error",f,S),_(f)}return u.emit("data",h,S),_(null,h)}u.end(!0)})}catch(l){return u.emit("error",l,S),void setTimeout(function(){_(l)},0)}else setTimeout(function(){_(Error("already ended"))},0)},L.prototype.end=function(V){return this.rpcImpl&&(V||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(Ye,F,q)=>{"use strict";Ye.exports=L;var z=q(9693);function L(C,w){this.lo=C>>>0,this.hi=w>>>0}var V=L.zero=new L(0,0);V.toNumber=function(){return 0},V.zzEncode=V.zzDecode=function(){return this},V.length=function(){return 1};var S=L.zeroHash="\0\0\0\0\0\0\0\0";L.fromNumber=function(C){if(0===C)return V;var w=C<0;w&&(C=-C);var _=C>>>0,u=(C-_)/4294967296>>>0;return w&&(u=~u>>>0,_=~_>>>0,++_>4294967295&&(_=0,++u>4294967295&&(u=0))),new L(_,u)},L.from=function(C){if("number"==typeof C)return L.fromNumber(C);if(z.isString(C)){if(!z.Long)return L.fromNumber(parseInt(C,10));C=z.Long.fromString(C)}return C.low||C.high?new L(C.low>>>0,C.high>>>0):V},L.prototype.toNumber=function(C){if(!C&&this.hi>>>31){var w=1+~this.lo>>>0,_=~this.hi>>>0;return w||(_=_+1>>>0),-(w+4294967296*_)}return this.lo+4294967296*this.hi},L.prototype.toLong=function(C){return z.Long?new z.Long(0|this.lo,0|this.hi,!!C):{low:0|this.lo,high:0|this.hi,unsigned:!!C}};var O=String.prototype.charCodeAt;L.fromHash=function(C){return C===S?V:new L((O.call(C,0)|O.call(C,1)<<8|O.call(C,2)<<16|O.call(C,3)<<24)>>>0,(O.call(C,4)|O.call(C,5)<<8|O.call(C,6)<<16|O.call(C,7)<<24)>>>0)},L.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},L.prototype.zzEncode=function(){var C=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^C)>>>0,this.lo=(this.lo<<1^C)>>>0,this},L.prototype.zzDecode=function(){var C=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^C)>>>0,this.hi=(this.hi>>>1^C)>>>0,this},L.prototype.length=function(){var C=this.lo,w=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return 0===_?0===w?C<16384?C<128?1:2:C<2097152?3:4:w<16384?w<128?5:6:w<2097152?7:8:_<128?9:10}},9693:function(Ye,F,q){"use strict";var z=F;function L(S,O,C){for(var w=Object.keys(O),_=0;_<w.length;++_)void 0!==S[w[_]]&&C||(S[w[_]]=O[w[_]]);return S}function V(S){function O(C,w){if(!(this instanceof O))return new O(C,w);Object.defineProperty(this,"message",{get:function(){return C}}),Error.captureStackTrace?Error.captureStackTrace(this,O):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),w&&L(this,w)}return(O.prototype=Object.create(Error.prototype)).constructor=O,Object.defineProperty(O.prototype,"name",{get:function(){return S}}),O.prototype.toString=function(){return this.name+": "+this.message},O}z.asPromise=q(4537),z.base64=q(7419),z.EventEmitter=q(9211),z.float=q(945),z.inquire=q(7199),z.utf8=q(4997),z.pool=q(6662),z.LongBits=q(1945),z.isNode=!!(void 0!==q.g&&q.g&&q.g.process&&q.g.process.versions&&q.g.process.versions.node),z.global=z.isNode&&q.g||typeof window<"u"&&window||typeof self<"u"&&self||this,z.emptyArray=Object.freeze?Object.freeze([]):[],z.emptyObject=Object.freeze?Object.freeze({}):{},z.isInteger=Number.isInteger||function(S){return"number"==typeof S&&isFinite(S)&&Math.floor(S)===S},z.isString=function(S){return"string"==typeof S||S instanceof String},z.isObject=function(S){return S&&"object"==typeof S},z.isset=z.isSet=function(S,O){var C=S[O];return!(null==C||!S.hasOwnProperty(O))&&("object"!=typeof C||(Array.isArray(C)?C.length:Object.keys(C).length)>0)},z.Buffer=function(){try{var S=z.inquire("buffer").Buffer;return S.prototype.utf8Write?S:null}catch{return null}}(),z._Buffer_from=null,z._Buffer_allocUnsafe=null,z.newBuffer=function(S){return"number"==typeof S?z.Buffer?z._Buffer_allocUnsafe(S):new z.Array(S):z.Buffer?z._Buffer_from(S):typeof Uint8Array>"u"?S:new Uint8Array(S)},z.Array=typeof Uint8Array<"u"?Uint8Array:Array,z.Long=z.global.dcodeIO&&z.global.dcodeIO.Long||z.global.Long||z.inquire("long"),z.key2Re=/^true|false|0|1$/,z.key32Re=/^-?(?:0|[1-9][0-9]*)$/,z.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,z.longToHash=function(S){return S?z.LongBits.from(S).toHash():z.LongBits.zeroHash},z.longFromHash=function(S,O){var C=z.LongBits.fromHash(S);return z.Long?z.Long.fromBits(C.lo,C.hi,O):C.toNumber(!!O)},z.merge=L,z.lcFirst=function(S){return S.charAt(0).toLowerCase()+S.substring(1)},z.newError=V,z.ProtocolError=V("ProtocolError"),z.oneOfGetter=function(S){for(var O={},C=0;C<S.length;++C)O[S[C]]=1;return function(){for(var w=Object.keys(this),_=w.length-1;_>-1;--_)if(1===O[w[_]]&&null!=this[w[_]])return w[_]}},z.oneOfSetter=function(S){return function(O){for(var C=0;C<S.length;++C)S[C]!==O&&delete this[S[C]]}},z.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},z._configure=function(){var S=z.Buffer;S?(z._Buffer_from=S.from!==Uint8Array.from&&S.from||function(O,C){return new S(O,C)},z._Buffer_allocUnsafe=S.allocUnsafe||function(O){return new S(O)}):z._Buffer_from=z._Buffer_allocUnsafe=null}},1173:(Ye,F,q)=>{"use strict";Ye.exports=u;var z,L=q(9693),V=L.LongBits,S=L.base64,O=L.utf8;function C(A,k,T){this.fn=A,this.len=k,this.next=void 0,this.val=T}function w(){}function _(A){this.head=A.head,this.tail=A.tail,this.len=A.len,this.next=A.states}function u(){this.len=0,this.head=new C(w,0,0),this.tail=this.head,this.states=null}var l=function(){return L.Buffer?function(){return(u.create=function(){return new z})()}:function(){return new u}};function h(A,k,T){k[T]=255&A}function f(A,k){this.len=A,this.next=void 0,this.val=k}function g(A,k,T){for(;A.hi;)k[T++]=127&A.lo|128,A.lo=(A.lo>>>7|A.hi<<25)>>>0,A.hi>>>=7;for(;A.lo>127;)k[T++]=127&A.lo|128,A.lo=A.lo>>>7;k[T++]=A.lo}function b(A,k,T){k[T]=255&A,k[T+1]=A>>>8&255,k[T+2]=A>>>16&255,k[T+3]=A>>>24}u.create=l(),u.alloc=function(A){return new L.Array(A)},L.Array!==Array&&(u.alloc=L.pool(u.alloc,L.Array.prototype.subarray)),u.prototype._push=function(A,k,T){return this.tail=this.tail.next=new C(A,k,T),this.len+=k,this},(f.prototype=Object.create(C.prototype)).fn=function(A,k,T){for(;A>127;)k[T++]=127&A|128,A>>>=7;k[T]=A},u.prototype.uint32=function(A){return this.len+=(this.tail=this.tail.next=new f((A>>>=0)<128?1:A<16384?2:A<2097152?3:A<268435456?4:5,A)).len,this},u.prototype.int32=function(A){return A<0?this._push(g,10,V.fromNumber(A)):this.uint32(A)},u.prototype.sint32=function(A){return this.uint32((A<<1^A>>31)>>>0)},u.prototype.int64=u.prototype.uint64=function(A){var k=V.from(A);return this._push(g,k.length(),k)},u.prototype.sint64=function(A){var k=V.from(A).zzEncode();return this._push(g,k.length(),k)},u.prototype.bool=function(A){return this._push(h,1,A?1:0)},u.prototype.sfixed32=u.prototype.fixed32=function(A){return this._push(b,4,A>>>0)},u.prototype.sfixed64=u.prototype.fixed64=function(A){var k=V.from(A);return this._push(b,4,k.lo)._push(b,4,k.hi)},u.prototype.float=function(A){return this._push(L.float.writeFloatLE,4,A)},u.prototype.double=function(A){return this._push(L.float.writeDoubleLE,8,A)};var x=L.Array.prototype.set?function(A,k,T){k.set(A,T)}:function(A,k,T){for(var M=0;M<A.length;++M)k[T+M]=A[M]};u.prototype.bytes=function(A){var k=A.length>>>0;if(!k)return this._push(h,1,0);if(L.isString(A)){var T=u.alloc(k=S.length(A));S.decode(A,T,0),A=T}return this.uint32(k)._push(x,k,A)},u.prototype.string=function(A){var k=O.length(A);return k?this.uint32(k)._push(O.write,k,A):this._push(h,1,0)},u.prototype.fork=function(){return this.states=new _(this),this.head=this.tail=new C(w,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new C(w,0,0),this.len=0),this},u.prototype.ldelim=function(){var A=this.head,k=this.tail,T=this.len;return this.reset().uint32(T),T&&(this.tail.next=A.next,this.tail=k,this.len+=T),this},u.prototype.finish=function(){for(var A=this.head.next,k=this.constructor.alloc(this.len),T=0;A;)A.fn(A.val,k,T),T+=A.len,A=A.next;return k},u._configure=function(A){z=A,u.create=l(),z._configure()}},3155:(Ye,F,q)=>{"use strict";Ye.exports=V;var z=q(1173);(V.prototype=Object.create(z.prototype)).constructor=V;var L=q(9693);function V(){z.call(this)}function S(O,C,w){O.length<40?L.utf8.write(O,C,w):C.utf8Write?C.utf8Write(O,w):C.write(O,w)}V._configure=function(){V.alloc=L._Buffer_allocUnsafe,V.writeBytesBuffer=L.Buffer&&L.Buffer.prototype instanceof Uint8Array&&"set"===L.Buffer.prototype.set.name?function(O,C,w){C.set(O,w)}:function(O,C,w){if(O.copy)O.copy(C,w,0,O.length);else for(var _=0;_<O.length;)C[w++]=O[_++]}},V.prototype.bytes=function(O){L.isString(O)&&(O=L._Buffer_from(O,"base64"));var C=O.length>>>0;return this.uint32(C),C&&this._push(V.writeBytesBuffer,C,O),this},V.prototype.string=function(O){var C=L.Buffer.byteLength(O);return this.uint32(C),C&&this._push(S,C,O),this},V._configure()},7714:(Ye,F,q)=>{"use strict";F.R=void 0;const z=q(6919),L=q(7448);F.R=new class{init(){return _asyncToGenerator(function*(){})()}createSessionHandler(V,S){return _asyncToGenerator(function*(){const O=new z.Session(S);return yield O.loadModel(V),new L.OnnxjsSessionHandler(O)})()}}},4200:(Ye,F,q)=>{"use strict";F.c8=F.rX=void 0;const z=q(1670),L=q(5381),V=q(2157),S=q(2306);F.rX=()=>{if(("number"!=typeof z.env.wasm.initTimeout||z.env.wasm.initTimeout<0)&&(z.env.wasm.initTimeout=0),"boolean"!=typeof z.env.wasm.simd&&(z.env.wasm.simd=!0),"boolean"!=typeof z.env.wasm.proxy&&(z.env.wasm.proxy=!1),"number"!=typeof z.env.wasm.numThreads||!Number.isInteger(z.env.wasm.numThreads)||z.env.wasm.numThreads<=0){const O=typeof navigator>"u"?(0,L.cpus)().length:navigator.hardwareConcurrency;z.env.wasm.numThreads=Math.min(4,Math.ceil((O||1)/2))}},F.c8=new class{init(){return _asyncToGenerator(function*(){(0,F.rX)(),yield(0,V.initWasm)()})()}createSessionHandler(O,C){return _asyncToGenerator(function*(){const w=new S.OnnxruntimeWebAssemblySessionHandler;return yield w.loadModel(O,C),Promise.resolve(w)})()}}},6018:function(Ye,F,q){"use strict";var z=this&&this.__createBinding||(Object.create?function(S,O,C,w){void 0===w&&(w=C);var _=Object.getOwnPropertyDescriptor(O,C);_&&!("get"in _?!O.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return O[C]}}),Object.defineProperty(S,w,_)}:function(S,O,C,w){void 0===w&&(w=C),S[w]=O[C]}),L=this&&this.__exportStar||function(S,O){for(var C in S)"default"===C||Object.prototype.hasOwnProperty.call(O,C)||z(O,S,C)};Object.defineProperty(F,"__esModule",{value:!0}),L(q(1670),F);const V=q(1670);{const S=q(7714).R;(0,V.registerBackend)("webgl",S,-10)}{const S=q(4200).c8;(0,V.registerBackend)("cpu",S,10),(0,V.registerBackend)("wasm",S,10),(0,V.registerBackend)("xnnpack",S,9)}},246:(Ye,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createAttributeWithCacheKey=void 0;class q{constructor(L){Object.assign(this,L)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(L=>`${this[L]}`).join(";")),this._cacheKey}}F.createAttributeWithCacheKey=z=>new q(z)},7778:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Attribute=void 0;const z=q(1446),L=q(9395),V=q(9162),S=q(2517);var O=L.onnxruntime.experimental.fbs;class C{constructor(_){if(this._attributes=new Map,null!=_){for(const u of _)u instanceof z.onnx.AttributeProto?this._attributes.set(u.name,[C.getValue(u),C.getType(u)]):u instanceof O.Attribute&&this._attributes.set(u.name(),[C.getValue(u),C.getType(u)]);if(this._attributes.size<_.length)throw new Error("duplicated attribute names")}}set(_,u,l){this._attributes.set(_,[l,u])}delete(_){this._attributes.delete(_)}getFloat(_,u){return this.get(_,"float",u)}getInt(_,u){return this.get(_,"int",u)}getString(_,u){return this.get(_,"string",u)}getTensor(_,u){return this.get(_,"tensor",u)}getFloats(_,u){return this.get(_,"floats",u)}getInts(_,u){return this.get(_,"ints",u)}getStrings(_,u){return this.get(_,"strings",u)}getTensors(_,u){return this.get(_,"tensors",u)}get(_,u,l){const h=this._attributes.get(_);if(void 0===h){if(void 0!==l)return l;throw new Error(`required attribute not found: ${_}`)}if(h[1]!==u)throw new Error(`type mismatch: expected ${u} but got ${h[1]}`);return h[0]}static getType(_){const u=_ instanceof z.onnx.AttributeProto?_.type:_.type();switch(u){case z.onnx.AttributeProto.AttributeType.FLOAT:return"float";case z.onnx.AttributeProto.AttributeType.INT:return"int";case z.onnx.AttributeProto.AttributeType.STRING:return"string";case z.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case z.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case z.onnx.AttributeProto.AttributeType.INTS:return"ints";case z.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case z.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${z.onnx.AttributeProto.AttributeType[u]}`)}}static getValue(_){const u=_ instanceof z.onnx.AttributeProto?_.type:_.type();if(u===z.onnx.AttributeProto.AttributeType.GRAPH||u===z.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const l=this.getValueNoCheck(_);if(u===z.onnx.AttributeProto.AttributeType.INT&&S.LongUtil.isLong(l))return S.LongUtil.longToNumber(l);if(u===z.onnx.AttributeProto.AttributeType.INTS){const h=l,f=new Array(h.length);for(let g=0;g<h.length;g++)f[g]=S.LongUtil.longToNumber(h[g]);return f}if(u===z.onnx.AttributeProto.AttributeType.TENSOR)return _ instanceof z.onnx.AttributeProto?V.Tensor.fromProto(l):V.Tensor.fromOrtTensor(l);if(u===z.onnx.AttributeProto.AttributeType.TENSORS){if(_ instanceof z.onnx.AttributeProto)return l.map(h=>V.Tensor.fromProto(h));if(_ instanceof O.Attribute)return l.map(h=>V.Tensor.fromOrtTensor(h))}return u===z.onnx.AttributeProto.AttributeType.STRING&&_ instanceof z.onnx.AttributeProto?(0,S.decodeUtf8String)(l):u===z.onnx.AttributeProto.AttributeType.STRINGS&&_ instanceof z.onnx.AttributeProto?l.map(S.decodeUtf8String):l}static getValueNoCheck(_){return _ instanceof z.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(_):this.getValueNoCheckFromOrtFormat(_)}static getValueNoCheckFromOnnxFormat(_){switch(_.type){case z.onnx.AttributeProto.AttributeType.FLOAT:return _.f;case z.onnx.AttributeProto.AttributeType.INT:return _.i;case z.onnx.AttributeProto.AttributeType.STRING:return _.s;case z.onnx.AttributeProto.AttributeType.TENSOR:return _.t;case z.onnx.AttributeProto.AttributeType.GRAPH:return _.g;case z.onnx.AttributeProto.AttributeType.FLOATS:return _.floats;case z.onnx.AttributeProto.AttributeType.INTS:return _.ints;case z.onnx.AttributeProto.AttributeType.STRINGS:return _.strings;case z.onnx.AttributeProto.AttributeType.TENSORS:return _.tensors;case z.onnx.AttributeProto.AttributeType.GRAPHS:return _.graphs;default:throw new Error(`unsupported attribute type: ${z.onnx.AttributeProto.AttributeType[_.type]}`)}}static getValueNoCheckFromOrtFormat(_){switch(_.type()){case O.AttributeType.FLOAT:return _.f();case O.AttributeType.INT:return _.i();case O.AttributeType.STRING:return _.s();case O.AttributeType.TENSOR:return _.t();case O.AttributeType.GRAPH:return _.g();case O.AttributeType.FLOATS:return _.floatsArray();case O.AttributeType.INTS:{const u=[];for(let l=0;l<_.intsLength();l++)u.push(_.ints(l));return u}case O.AttributeType.STRINGS:{const u=[];for(let l=0;l<_.stringsLength();l++)u.push(_.strings(l));return u}case O.AttributeType.TENSORS:{const u=[];for(let l=0;l<_.tensorsLength();l++)u.push(_.tensors(l));return u}default:throw new Error(`unsupported attribute type: ${O.AttributeType[_.type()]}`)}}}F.Attribute=C},7091:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.resolveBackend=F.backend=void 0;const z=q(5038),L=new Map;function V(O){return S.apply(this,arguments)}function S(){return(S=_asyncToGenerator(function*(O){const C=F.backend;if(void 0!==C[O]&&"initialize"in(w=C[O])&&"function"==typeof w.initialize&&"createSessionHandler"in w&&"function"==typeof w.createSessionHandler&&"dispose"in w&&"function"==typeof w.dispose){const w=C[O];let _=w.initialize();if("object"==typeof _&&"then"in _&&(_=yield _),_)return L.set(O,w),w}var w})).apply(this,arguments)}F.backend={webgl:new z.WebGLBackend},F.resolveBackend=function(){var O=_asyncToGenerator(function*(w){if(!w)return C(["webgl"]);{const _="string"==typeof w?[w]:w;for(const u of _){const l=L.get(u);if(l)return l;const h=yield V(u);if(h)return h}}throw new Error("no available backend to use")});function C(w){return O.apply(this,arguments)}return C}()},5038:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.WebGLBackend=void 0;const z=q(1670),L=q(6231),V=q(6416),S=q(7305);F.WebGLBackend=class{get contextId(){return z.env.webgl.contextId}set contextId(O){z.env.webgl.contextId=O}get matmulMaxBatchSize(){return z.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(O){z.env.webgl.matmulMaxBatchSize=O}get textureCacheMode(){return z.env.webgl.textureCacheMode}set textureCacheMode(O){z.env.webgl.textureCacheMode=O}get pack(){return z.env.webgl.pack}set pack(O){z.env.webgl.pack=O}get async(){return z.env.webgl.async}set async(O){z.env.webgl.async=O}initialize(){try{return this.glContext=(0,S.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),L.Logger.setWithEnv(z.env),L.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(O){return L.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${O}`),!1}}createSessionHandler(O){return new V.WebGLSessionHandler(this,O)}dispose(){this.glContext.dispose()}}},5107:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.CoordsGlslLib=void 0;const z=q(2517),L=q(8520),V=q(5060),S=q(7859),O=q(9390);F.CoordsGlslLib=class C extends L.GlslLib{constructor(_){super(_)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new L.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new L.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){const _=this.context.outputTextureLayout;return _.isPacked?this.getPackedOutputSamplingSnippet(_):this.getUnpackedOutputSamplingSnippet(_)}getPackedOutputSamplingSnippet(_){const u=_.unpackedShape,l=[_.width,_.height],h={},f="getOutputCoords";switch(u.length){case 0:h[f]=this.getOutputScalarCoords();break;case 1:h[f]=this.getOutputPacked1DCoords(u,l);break;case 2:h[f]=this.getOutputPacked2DCoords(u,l);break;case 3:h[f]=this.getOutputPacked3DCoords(u,l);break;default:h[f]=this.getOutputPackedNDCoords(u,l)}const g=`\n      void setOutput(vec4 val) {\n        ${(0,V.getGlsl)(this.context.glContext.version).output} = val;\n      }\n    `;return h.floatTextureSetRGBA=new L.GlslLibRoutine(g),h}getUnpackedOutputSamplingSnippet(_){const u=_.unpackedShape,l=[_.width,_.height],h={},f="getOutputCoords";switch(u.length){case 0:h[f]=this.getOutputScalarCoords();break;case 1:h[f]=this.getOutputUnpacked1DCoords(u,l);break;case 2:h[f]=this.getOutputUnpacked2DCoords(u,l);break;case 3:h[f]=this.getOutputUnpacked3DCoords(u,l);break;case 4:h[f]=this.getOutputUnpacked4DCoords(u,l);break;case 5:h[f]=this.getOutputUnpacked5DCoords(u,l);break;case 6:h[f]=this.getOutputUnpacked6DCoords(u,l);break;default:throw new Error(`Unsupported output dimensionality: ${u.length}`)}const g=`\n        void setOutput(float val) {\n          ${(0,V.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);\n        }\n    `;return h.floatTextureSetR=new L.GlslLibRoutine(g),h}getOutputScalarCoords(){return new L.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(_,u){const l=u;let h="";return 1===l[0]?(h=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ${l[1]}.0);\n          }\n        `,new L.GlslLibRoutine(h)):1===l[1]?(h=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ${l[0]}.0);\n          }\n        `,new L.GlslLibRoutine(h)):(h=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(${l[0]}, ${l[1]}));\n          return 2 * (resTexRC.y * ${l[0]} + resTexRC.x);\n        }\n      `,new L.GlslLibRoutine(h))}getOutputPacked2DCoords(_,u){let l="";if(z.ArrayUtil.arraysEqual(_,u))return l=`\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(${u[0]}, ${u[1]}));\n        }\n      `,new L.GlslLibRoutine(l);const h=u,f=Math.ceil(_[1]/2);return l=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${h[0]}, ${h[1]}));\n\n          int index = resTexRC.y * ${h[0]} + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${f}) * 2;\n          int c = 2 * (index / ${f});\n\n          return ivec2(r, c);\n        }\n      `,new L.GlslLibRoutine(l)}getOutputPacked3DCoords(_,u){const l=[u[0],u[1]],h=Math.ceil(_[2]/2),f=h*Math.ceil(_[1]/2);return new L.GlslLibRoutine(`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${l[0]}, ${l[1]}));\n          int index = resTexRC.y * ${l[0]} + resTexRC.x;\n\n          int b = index / ${f};\n          index -= b * ${f};\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${h}) * 2;\n          int c = 2 * (index / ${h});\n\n          return ivec3(b, r, c);\n        }\n      `)}getOutputPackedNDCoords(_,u){const l=[u[0],u[1]],h=Math.ceil(_[_.length-1]/2),f=h*Math.ceil(_[_.length-2]/2);let g=f,b="",x="b, r, c";for(let k=2;k<_.length-1;k++)g*=_[_.length-k-1],b=`\n      int b${k} = index / ${g};\n      index -= b${k} * ${g};\n    `+b,x=`b${k}, `+x;return new L.GlslLibRoutine(`\n      ivec${_.length} getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(${l[0]}, ${l[1]}));\n        int index = resTexRC.y * ${l[0]} + resTexRC.x;\n\n        ${b}\n\n        int b = index / ${f};\n        index -= b * ${f};\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ${h}) * 2;\n        int c = 2 * (index / ${h});\n\n        return ivec${_.length}(${x});\n      }\n    `)}getOutputUnpacked1DCoords(_,u){return new L.GlslLibRoutine(`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          return resTexRC.y * ${u[0]} + resTexRC.x;\n        }\n      `)}getOutputUnpacked2DCoords(_,u){return new L.GlslLibRoutine(`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          int r = index / ${_[1]};\n          int c = index - r * ${_[1]};\n          return ivec2(r, c);\n        }\n      `)}getOutputUnpacked3DCoords(_,u){let l="";const h=_.length;let f=null;h<2&&(f=[]),f=new Array(h-1),f[h-2]=_[h-1];for(let x=h-3;x>=0;--x)f[x]=f[x+1]*_[x+1];const g=["r","c","d"],b=f.map((x,A)=>`int ${g[A]} = index / ${x}; ${A===f.length-1?`int ${g[A+1]} = index - ${g[A]} * ${x}`:`index -= ${g[A]} * ${x}`};`).join("");return l=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          ${b}\n          return ivec3(r, c, d);\n        }\n      `,new L.GlslLibRoutine(l)}getOutputUnpacked4DCoords(_,u){let l="";const h=_.length;let f=null;h<2&&(f=[]),f=new Array(h-1),f[h-2]=_[h-1];for(let x=h-3;x>=0;--x)f[x]=f[x+1]*_[x+1];const g=["r","c","d","d2"],b=f.map((x,A)=>`int ${g[A]} = index / ${x}; ${A===f.length-1?`int ${g[A+1]} = index - ${g[A]} * ${x}`:`index -= ${g[A]} * ${x}`};`).join("");return l=`\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          ${b}\n          return ivec4(r, c, d, d2);\n        }\n      `,new L.GlslLibRoutine(l)}getOutputUnpacked5DCoords(_,u){let l="";const h=_.length;let f=null;h<2&&(f=[]),f=new Array(h-1),f[h-2]=_[h-1];for(let x=h-3;x>=0;--x)f[x]=f[x+1]*_[x+1];const g=["r","c","d","d2","d3"],b=f.map((x,A)=>`int ${g[A]} = index / ${x}; ${A===f.length-1?`int ${g[A+1]} = index - ${g[A]} * ${x}`:`index -= ${g[A]} * ${x}`};`).join("");return l=`\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${u[0]}, ${u[1]}));\n          int index = resTexRC.y * ${u[0]} + resTexRC.x;\n          ${b}\n          return ivec5(r, c, d, d2, d3);\n        }\n      `,new L.GlslLibRoutine(l)}getOutputUnpacked6DCoords(_,u){let l="";const h=_.length;let f=null;h<2&&(f=[]),f=new Array(h-1),f[h-2]=_[h-1];for(let x=h-3;x>=0;--x)f[x]=f[x+1]*_[x+1];const g=["r","c","d","d2","d3","d4"],b=f.map((x,A)=>`int ${g[A]} = index / ${x}; ${A===f.length-1?`int ${g[A+1]} = index - ${g[A]} * ${x}`:`index -= ${g[A]} * ${x}`};`).join("");return l=`\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(${u[0]}, ${u[1]}));\n         int index = resTexRC.y * ${u[0]} + resTexRC.x;\n         ${b}\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     `,new L.GlslLibRoutine(l)}getCommonUtilFuncs(){const _={};let u="uvFromFlat";_[u]=new L.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),u="packedUVfrom1D",_[u]=new L.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),u="packedUVfrom2D",_[u]=new L.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),u="packedUVfrom3D",_[u]=new L.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),u="sampleTexture";const l=(0,V.getGlsl)(this.context.glContext.version);return _[u]=new L.GlslLibRoutine(`\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ${l.texture2D}(textureSampler, uv).r;\n        }`),_}getInputsSamplingSnippets(){const _={},u=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((l,h)=>{const f=this.context.inputTextureLayouts[h],g=(0,O.generateShaderFuncNameFromInputSamplerName)(l);_[g]=f.isPacked?this.getPackedSamplerFromInput(g,l,f):this.getUnpackedSamplerFromInput(g,l,f);const b=(0,O.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(l);f.unpackedShape.length<=u.unpackedShape.length&&(_[b]=f.isPacked?this.getPackedSamplerAtOutputCoords(b,f,u,l):this.getUnpackedSamplerAtOutputCoords(b,f,u,l))}),_}getPackedSamplerAtOutputCoords(_,u,l,h){const f=u.unpackedShape,g=l.unpackedShape,x=(0,O.generateShaderFuncNameFromInputSamplerName)(h),A=f.length,k=g.length,T=z.BroadcastUtil.getBroadcastDims(f,g),M=(0,O.getCoordsDataType)(k),P=k-A;let B;const U=(0,O.getGlChannels)();B=0===A?"":k<2&&T.length>=1?"coords = 0;":T.map(X=>`coords.${U[X+P]} = 0;`).join("\n");let N="";N=k<2&&A>0?"coords":f.map((X,oe)=>`coords.${U[oe+P]}`).join(", ");let $="return outputValue;";const G=1===z.ShapeUtil.size(f),W=1===z.ShapeUtil.size(g);if(1!==A||G||W){if(G&&!W)$=1===k?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(T.length){const X=A-2,oe=A-1;T.indexOf(X)>-1&&T.indexOf(oe)>-1?$="return vec4(outputValue.x);":T.indexOf(X)>-1?$="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":T.indexOf(oe)>-1&&($="return vec4(outputValue.xx, outputValue.zz);")}}else $="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";return new L.GlslLibRoutine(`\n      vec4 ${_}() {\n        ${M} coords = getOutputCoords();\n        \n        int lastDim = coords.${U[k-1]};\n        coords.${U[k-1]} = coords.${U[k-2]};\n        coords.${U[k-2]} = lastDim;\n      \n        ${B}\n        vec4 outputValue = ${x}(${N});\n        ${$}\n      }\n    `,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(_,u,l,h){const f=[l.width,l.height],g=[u.width,u.height],b=u.unpackedShape.length,x=l.unpackedShape.length,A=u.unpackedShape,k=l.unpackedShape,T=(0,O.generateShaderFuncNameFromInputSamplerName)(h);if(b===x&&z.ArrayUtil.arraysEqual(g,f))return new L.GlslLibRoutine(`\n          float ${_}() {\n            return sampleTexture(${h}, TexCoords);\n          }\n        `,["coordinates.sampleTexture"]);const M=(0,O.getCoordsDataType)(x),P=z.BroadcastUtil.getBroadcastDims(A,k),B=x-b;let U;const N=(0,O.getGlChannels)();U=0===b?"":x<2&&P.length>=1?"coords = 0;":P.map(W=>`coords.${N[W+B]} = 0;`).join("\n");let $="";return $=x<2&&b>0?"coords":u.unpackedShape.map((W,K)=>`coords.${N[K+B]}`).join(", "),new L.GlslLibRoutine(`\n        float ${_}() {\n          ${M} coords = getOutputCoords();\n          ${U}\n          return ${T}(${$});\n        }\n      `,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(_,u,l){switch(l.unpackedShape.length){case 0:return this.getPackedSamplerScalar(_,u);case 1:return this.getPackedSampler1D(_,u,l);case 2:return this.getPackedSampler2D(_,u,l);case 3:return this.getPackedSampler3D(_,u,l);default:return this.getPackedSamplerND(_,u,l)}}getUnpackedSamplerFromInput(_,u,l){const h=l.unpackedShape;switch(h.length){case 0:return this.getUnpackedSamplerScalar(_,u,l);case 1:return this.getUnpackedSampler1D(_,u,l);case 2:return this.getUnpackedSampler2D(_,u,l);case 3:return this.getUnpackedSampler3D(_,u,l);case 4:return this.getUnpackedSampler4D(_,u,l);case 5:return this.getUnpackedSampler5D(_,u,l);case 6:return this.getUnpackedSampler6D(_,u,l);default:throw new Error(`Unsupported dimension ${h.length}-D`)}}getPackedSamplerScalar(_,u){const l=`\n          vec4 ${_}() {\n            return ${(0,V.getGlsl)(this.context.glContext.version).texture2D}(${u}, halfCR);\n          }\n        `;return new L.GlslLibRoutine(l)}getPackedSampler1D(_,u,l){const h=[l.width,l.height],f=[h[1],h[0]],g=(0,V.getGlsl)(this.context.glContext.version);return new L.GlslLibRoutine(`vec4 ${_}(int index) {\n      vec2 uv = packedUVfrom1D(\n      ${f[0]}, ${f[1]}, index);\n      return ${g.texture2D}(${u}, uv);\n    }`,["coordinates.packedUVfrom1D"])}getPackedSampler2D(_,u,l){const h=l.unpackedShape,f=[l.width,l.height],g=(0,V.getGlsl)(this.context.glContext.version),b=f[0],x=f[1];if(null!=f&&z.ArrayUtil.arraysEqual(h,f))return new L.GlslLibRoutine(`vec4 ${_}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${x}.0, ${b}.0);\n        return ${g.texture2D}(${u}, uv);\n      }`);const A=f,k=Math.ceil(h[1]/2);return new L.GlslLibRoutine(`vec4 ${_}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${A[1]}, ${A[0]}, ${k}, row, col);\n      return ${g.texture2D}(${u}, uv);\n    }`,["coordinates.packedUVfrom2D"])}getPackedSampler3D(_,u,l){const h=l.unpackedShape,f=[l.width,l.height],g=[f[0],f[1]],b=(0,V.getGlsl)(this.context.glContext.version);if(1===h[0]){const M=h.slice(1),P=[1,2],B=(0,O.squeezeInputShape)(h,M),U=["b","row","col"],N=JSON.parse(JSON.stringify(l));N.unpackedShape=B;const $=this.getPackedSamplerFromInput(_,u,N),G=`${$.routineBody}\n      vec4 ${_}(int b, int row, int col) {\n        return ${_}(${(0,O.getSqueezedParams)(U,P)});\n      } `;return new L.GlslLibRoutine(G,$.dependencies)}const x=g[0],A=g[1],k=Math.ceil(h[2]/2),T=`vec4 ${_}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${A}, ${x}, ${k*Math.ceil(h[1]/2)}, ${k}, b, row, col);\n      return ${b.texture2D}(${u}, uv);}`;return new L.GlslLibRoutine(T,["coordinates.packedUVfrom3D"])}getPackedSamplerND(_,u,l){const h=l.unpackedShape,f=h.length,g=[l.width,l.height],b=(0,V.getGlsl)(this.context.glContext.version),x=[g[0],g[1]],A=x[1],k=x[0],T=Math.ceil(h[f-1]/2);let M=T*Math.ceil(h[f-2]/2),P="int b, int row, int col",B=`b * ${M} + (row / 2) * ${T} + (col / 2)`;for(let N=2;N<f-1;N++)P=`int b${N}, `+P,M*=h[f-N-1],B=`b${N} * ${M} + `+B;return new L.GlslLibRoutine(`vec4 ${_}(${P}) {\n      int index = ${B};\n      int texR = index / ${k};\n      int texC = index - texR * ${k};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${k}, ${A});\n      return ${b.texture2D}(${u}, uv);\n    }`)}getUnpackedSamplerScalar(_,u,l){const[h,f]=[l.width,l.height];return 1===h&&1===f?new L.GlslLibRoutine(`\n          float ${_}() {\n            return sampleTexture(${u}, halfCR);\n          }\n        `,["coordinates.sampleTexture"]):new L.GlslLibRoutine(`\n        float ${_}() {\n          int offset_${u} = coordsToOffset(TexCoords, ${h}, ${f});\n          vec2 uv = uvFromFlat(${h}, ${f}, offset_${u});\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(_,u,l){const h=l.width,f=l.height;return 1===f&&1===h?new L.GlslLibRoutine(`\n        float ${_}(int index) {\n          return sampleTexture(${u}, halfCR);\n        }\n      `,["coordinates.sampleTexture"]):1===f?new L.GlslLibRoutine(`\n          float ${_}(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ${h}.0, 0.5);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture"]):1===h?new L.GlslLibRoutine(`\n          float ${_}(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${f}.0);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture"]):new L.GlslLibRoutine(`\n        float ${_}(int index) {\n          vec2 uv = uvFromFlat(${h}, ${f}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(_,u,l){const h=l.unpackedShape,f=[l.height,l.width];if(null!=f&&z.ArrayUtil.arraysEqual(h,f))return new L.GlslLibRoutine(`\n          float ${_}(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(${f[1]}.0, ${f[0]}.0);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture"]);const{newShape:g,keptDims:b}=(0,S.squeezeShape)(h);if(g.length<h.length){const M=(0,O.squeezeInputShape)(h,g),P=JSON.parse(JSON.stringify(l));P.unpackedShape=M;const B=["col","row"],U=`\n          ${this.getUnpackedSamplerFromInput(_,u,P).routineBody}\n          float ${_}(int row, int col) {\n            return ${_}(${(0,O.getSqueezedParams)(B,b)});\n          }\n        `;return new L.GlslLibRoutine(U,["coordinates.sampleTexture"])}const A=f[1],k=f[0];return 1===k?new L.GlslLibRoutine(`\n          float ${_}(int row, int col) {\n            int offset_${u} = coordsToOffset(TexCoords, ${A}, ${k});\n            float index = dot(vec3(row, col, offset_${u}), vec3(${h[1]}, 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ${A}.0);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture","coordinates.coordsToOffset"]):1===A?new L.GlslLibRoutine(`\n          float ${_}(int row, int col) {\n            int offset_${u} = coordsToOffset(TexCoords, ${A}, ${k});\n            float index = dot(vec3(row, col, offset_${u}), vec3(${h[1]}, 1, 1));\n            vec2 uv = vec2((index + 0.5) / ${k}.0, 0.5);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.sampleTexture","coordinates.coordsToOffset"]):new L.GlslLibRoutine(`\n        float ${_}(int row, int col) {\n          int index = col * ${h[1]} + row;\n          vec2 uv = uvFromFlat(${A}, ${k}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(_,u,l){const h=l.unpackedShape,f=h[1]*h[2],g=h[2],{newShape:b,keptDims:x}=(0,S.squeezeShape)(h);if(b.length<h.length){const T=(0,O.squeezeInputShape)(h,b),M=["batch","col","row"],P=JSON.parse(JSON.stringify(l));P.unpackedShape=T;const B=this.getUnpackedSamplerFromInput(_,u,P),U=x.reverse(),N=`\n          ${B.routineBody}\n          float ${_}(int batch, int row, int col) {\n            return ${_}(${(0,O.getSqueezedParams)(M,U)});\n          }\n        `;return new L.GlslLibRoutine(N,B.dependencies)}return new L.GlslLibRoutine(`\n          float ${_}(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ${f} + col * ${g} + row;\n            vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);\n            return sampleTexture(${u}, uv);\n          }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(_,u,l){const h=l.unpackedShape,f=h[3],g=h[2]*f;return new L.GlslLibRoutine(`\n        float ${_}(int row, int col, int depth, int depth2) {\n          int index = row * ${h[1]*g} + col * ${g} +\n              depth2 * ${f} + depth;\n          vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(_,u,l){const h=l.unpackedShape,f=h[4],g=h[3]*f,b=h[2]*g,x=h[1]*b,{newShape:A,keptDims:k}=(0,S.squeezeShape)(h);if(A.length<h.length){const M=(0,O.squeezeInputShape)(h,A),P=["row","col","depth","depth2","depth3"],B=JSON.parse(JSON.stringify(l));B.unpackedShape=M;const U=`\n          ${this.getUnpackedSamplerFromInput(_,u,B).routineBody}\n          float ${_}(int row, int col, int depth, int depth2, int depth3) {\n            return ${_}(${(0,O.getSqueezedParams)(P,k)});\n          }\n        `;return new L.GlslLibRoutine(U,["coordinates.sampleTexture","coordinates.uvFromFlat"])}return new L.GlslLibRoutine(`\n        float ${_}(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ${x} + col * ${b} + depth * ${g} +\n          depth3 * ${f} + depth2;\n          vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);\n          return sampleTexture(${u}, uv);\n        }\n      `,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(_,u,l){const h=l.unpackedShape,f=h[5],g=h[4]*f,b=h[3]*g,x=h[2]*b,A=h[1]*x,{newShape:k,keptDims:T}=(0,S.squeezeShape)(h);if(k.length<h.length){const P=(0,O.squeezeInputShape)(h,k),B=["row","col","depth","depth2","depth3","depth4"],U=JSON.parse(JSON.stringify(l));U.unpackedShape=P;const N=`\n            ${this.getUnpackedSamplerFromInput(_,u,U).routineBody}\n            float ${_}(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ${_}(${(0,O.getSqueezedParams)(B,T)});\n            }\n          `;return new L.GlslLibRoutine(N,["coordinates.sampleTexture","coordinates.uvFromFlat"])}return new L.GlslLibRoutine(`\n          float ${_}(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ${A} + col * ${x} + depth * ${b} +\n            depth2 * ${g} + depth3 * ${f} + depth4;\n            vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);\n            return sampleTexture(${u}, uv);\n          }\n        `,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const _=this.context.outputTextureLayout,u=_.shape.length,l=_.strides,h=_.width,f=_.height,g=[];for(let x=0;x<u-1;++x)g.push(`\n        c[${x}] = offset / ${l[x]};`),g.push(`\n        offset -= c[${x}] * ${l[x]};`);g.push(`\n        c[${u-1}] = offset;`);const b=`\n      void toVec(vec2 texCoords, out int c[${u}]) {\n        int offset = coordsToOffset(texCoords, ${h}, ${f});\n        ${g.join("")}\n      }\n      void toVec(int offset, out int c[${u}]) {\n        ${g.join("")}\n      }\n    `;return{toVec:new L.GlslLibRoutine(b,["coordinates.coordsToOffset"])}}valueFrom(){const _={};return this.context.programInfo.inputNames.forEach((u,l)=>{const h=this.context.inputTextureLayouts[l],f=(h.unpackedShape.length>0?h.unpackedShape:h.shape).length;let g=`_${u}`;_[g]=new L.GlslLibRoutine(this.getValueFromSingle(u,f,h.width,h.height,!1),[`shapeUtils.indicesToOffset${g}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),g+="_T",_[g]=new L.GlslLibRoutine(this.getValueFromSingle(u,f,h.width,h.height,!0),[`shapeUtils.indicesToOffset${g}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),_}getValueFromSingle(_,u,l,h,f){let g=`_${_}`;return f&&(g+="_T"),`\n        float ${g}(int m[${u}]) {\n          int offset = indicesToOffset${g}(m);\n          vec2 coords = offsetToCoords(offset, ${l}, ${h});\n          float value = getColorAsFloat(${(0,V.getGlsl)(this.context.glContext.version).texture2D}(${_}, coords));\n          return value;\n        }\n        `}getPackedValueFrom(_,u,l,h,f){let g=`_${_}_Pack`;return f&&(g+="_T"),`\n        vec4 ${g}(int m[${u}]) {\n          int offset = indicesToOffset_${_}(m);\n          vec2 coords = offsetToCoords(offset, ${l}, ${h});\n          return ${(0,V.getGlsl)(this.context.glContext.version).texture2D}(${_}, coords);\n        }\n        `}}},8520:(Ye,F)=>{"use strict";var q;Object.defineProperty(F,"__esModule",{value:!0}),F.TopologicalSortGlslRoutines=F.GlslLibRoutineNode=F.GlslLibRoutine=F.GlslLib=F.GlslContext=F.FunctionType=void 0,(q=F.FunctionType||(F.FunctionType={}))[q.ValueBased=0]="ValueBased",q[q.Positional=1]="Positional",F.GlslContext=class{constructor(z,L,V,S){this.glContext=z,this.programInfo=L,this.inputTextureLayouts=V,this.outputTextureLayout=S}},F.GlslLib=class{constructor(z){this.context=z}},F.GlslLibRoutine=class{constructor(z,L){this.routineBody=z,this.dependencies=L}},F.GlslLibRoutineNode=class{constructor(z,L,V){this.name=z,this.dependencies=V||[],L&&(this.routineBody=L)}addDependency(z){z&&this.dependencies.push(z)}},F.TopologicalSortGlslRoutines=class{static returnOrderedNodes(z){if(!z||0===z.length)return[];if(1===z.length)return z;const L=new Set,V=new Set,S=new Array;return this.createOrderedNodes(z,L,V,S),S}static createOrderedNodes(z,L,V,S){for(let O=0;O<z.length;++O)this.dfsTraverse(z[O],L,V,S)}static dfsTraverse(z,L,V,S){if(!z||V.has(z.name))return;if(L.has(z.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");L.add(z.name);const O=z.dependencies;if(O&&O.length>0)for(let C=0;C<O.length;++C)this.dfsTraverse(O[C],L,V,S);S.push(z),V.add(z.name),L.delete(z.name)}}},7341:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.EncodingGlslLib=void 0;const z=q(8520);class L extends z.GlslLib{constructor(S){super(S)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new z.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new z.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){const S=L.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new z.GlslLibRoutine(`\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ${S}\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        `)}}decodeUint8(){const S=L.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new z.GlslLibRoutine(`\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ${S}\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        `)}}static isLittleEndian(){const S=new ArrayBuffer(4),O=new Uint32Array(S),C=new Uint8Array(S);if(O[0]=3735928559,239===C[0])return!0;if(222===C[0])return!1;throw new Error("unknown endianness")}}F.EncodingGlslLib=L},9894:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.FragColorGlslLib=void 0;const z=q(8520),L=q(5060);F.FragColorGlslLib=class V extends z.GlslLib{constructor(O){super(O)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const O=(0,L.getGlsl)(this.context.glContext.version);return{setFragColor:new z.GlslLibRoutine(`\n        void setFragColor(float value) {\n            ${O.output} = encode(value);\n        }\n        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new z.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}},2848:(Ye,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.replaceInlines=void 0;const q=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;F.replaceInlines=function(z){const L={};let V;for(;null!==(V=q.exec(z));){const S=V[3].split(",").map(O=>{const C=O.trim().split(" ");return C&&2===C.length?{type:C[0],name:C[1]}:null}).filter(O=>null!==O);L[V[2]]={params:S,body:V[4]}}for(const S in L){const O="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",S),C=new RegExp(O,"gm");for(;null!==(V=C.exec(z));){const w=V[1],_=V[2],u=V[3].split(","),l=w?`${w} ${_};`:"";let h=L[S].body,f="";L[S].params.forEach((b,x)=>{b&&(f+=`${b.type} ${b.name} = ${u[x]};\n`)}),h=`${f}\n ${h}`,h=h.replace("return",`${_} = `),z=z.replace(V[0],`\n      ${l}\n      {\n        ${h}\n      }\n      `)}}return z.replace(q,"")}},8879:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.GlslPreprocessor=void 0;const z=q(8520),L=q(2848),V=q(5483),S=q(5060);F.GlslPreprocessor=class{constructor(O,C,w,_){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new z.GlslContext(O,C,w,_),Object.keys(V.glslRegistry).forEach(l=>{const h=new V.glslRegistry[l](this.context);this.libs[l]=h});const u=this.glslLibRoutineDependencyGraph;for(const l in this.libs){const h=this.libs[l].getFunctions();for(const f in h){const g=l+"."+f;let b;u[g]?(b=u[g],b.routineBody=h[f].routineBody):(b=new z.GlslLibRoutineNode(g,h[f].routineBody),u[g]=b);const x=h[f].dependencies;if(x)for(let A=0;A<x.length;++A)if(u[x[A]])b.addDependency(u[x[A]]);else{const k=new z.GlslLibRoutineNode(x[A]);u[x[A]]=k,b.addDependency(k)}}}}preprocess(){const O=this.context.programInfo;let C=O.shaderSource;return this.context.programInfo.hasMain||(C=`${C}\n      ${(0,S.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),C=(0,L.replaceInlines)(C),`${(0,S.getFragShaderPreamble)(this.context.glContext.version)}\n    ${this.getUniforms(O.inputNames,O.variables)}\n    ${this.getImports(C)}\n    ${C}`}getImports(O){const C=this.selectGlslLibRoutinesToBeIncluded(O);if(0===C.length)return"";let w="";for(let _=0;_<C.length;++_){if(!C[_].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${C[_].name}`);w+=C[_].routineBody+"\n"}return w}selectGlslLibRoutinesToBeIncluded(O){const C=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(w=>{const _=w.split(".")[1];-1!==O.indexOf(_)&&C.push(this.glslLibRoutineDependencyGraph[w])}),z.TopologicalSortGlslRoutines.returnOrderedNodes(C)}getUniforms(O,C){const w=[];if(O)for(const _ of O)w.push(`uniform sampler2D ${_};`);if(C)for(const _ of C)w.push(`uniform ${_.type} ${_.name}${_.arrayLength?`[${_.arrayLength}]`:""};`);return w.join("\n")}}},5483:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.glslRegistry=void 0;const z=q(5107),L=q(7341),V=q(9894),S=q(2655),O=q(3891);F.glslRegistry={encoding:L.EncodingGlslLib,fragcolor:V.FragColorGlslLib,vec:O.VecGlslLib,shapeUtils:S.ShapeUtilsGlslLib,coordinates:z.CoordsGlslLib}},2655:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ShapeUtilsGlslLib=void 0;const z=q(8520);class L extends z.GlslLib{constructor(S){super(S)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const S=this.context.outputTextureLayout.shape.length,O={};return this.context.programInfo.inputNames.forEach((C,w)=>{const _=this.context.inputTextureLayouts[w].unpackedShape;if(_.length<=S){const u=_.length,l=S-u,h=`bcastIndices_${C}`;let f="";for(let b=0;b<u;++b)f+=`\n          realIndices[${b}] = int( mod(float(bcastedIndices[${l+b}]), ${_[b]}.0) );\n          `;O[h]=new z.GlslLibRoutine(`\n        void ${h} (int bcastedIndices[${S}], out int realIndices[${u}]) {\n          ${f}\n        }\n        `)}}),O}bcastMatmulIndex(){const S=this.context.outputTextureLayout.shape.length,O={};return this.context.programInfo.inputNames.forEach((C,w)=>{const _=this.context.inputTextureLayouts[w].shape;if(!(_.length<2||_.length>S)){const u=_.length,l=S-u,h=`bcastMatmulIndices_${C}`;let f="";for(let b=0;b<u-2;++b)f+=`\n          realIndices[${b}] = int( mod(float(bcastedIndices[${l+b}]), ${_[b]}.0) );\n          `;O[h]=new z.GlslLibRoutine(`\n        void ${h}(int bcastedIndices[${S}], out int realIndices[${u}]) {\n          ${f}\n          realIndices[${u-1}] = bcastedIndices[${S-1}];\n          realIndices[${u-2}] = bcastedIndices[${S-2}];\n        }\n        `)}}),O}indicesToOffset(){const S={};return this.context.programInfo.inputNames.forEach((O,C)=>{const _=this.context.inputTextureLayouts[C].strides,u=this.context.inputTextureLayouts[C].shape.length;let l=`indicesToOffset_${O}`;S[l]=new z.GlslLibRoutine(L.indexToOffsetSingle(l,u,_)),l=`indicesToOffset_${O}_T`,S[l]=new z.GlslLibRoutine(L.indexToOffsetSingle(l,u,_.slice().reverse()))}),S}static indexToOffsetSingle(S,O,C){let w="";for(let _=O-1;_>=0;--_)w+=`\n        offset += indices[${_}] * ${C[_]};\n        `;return`\n      int ${S}(int indices[${O}]) {\n        int offset = 0;\n        ${w}\n        return offset;\n      }\n      `}offsetToIndices(){const S={};return this.context.programInfo.inputNames.forEach((O,C)=>{const _=this.context.inputTextureLayouts[C].strides,u=this.context.inputTextureLayouts[C].shape.length;let l=`offsetToIndices_${O}`;S[l]=new z.GlslLibRoutine(L.offsetToIndicesSingle(l,u,_)),l=`offsetToIndices_${O}_T`,S[l]=new z.GlslLibRoutine(L.offsetToIndicesSingle(l,u,_.slice().reverse()))}),S}static offsetToIndicesSingle(S,O,C){const w=[];for(let _=0;_<O-1;++_)w.push(`\n      indices[${_}] = offset / ${C[_]};`),w.push(`\n        offset -= indices[${_}] * ${C[_]};`);return w.push(`\n      indices[${O-1}] = offset;`),`\n      void ${S}(int offset, out int indices[${O}]) {\n        ${w.join("")}\n      }\n      `}incrementIndices(){const S={};return this.context.programInfo.inputNames.forEach((O,C)=>{const w=this.context.inputTextureLayouts[C].shape,_=w.length,u=`incrementIndices_${O}`;let l="";for(let f=0;f<_;++f)l+=`\n        shape[${f}] = ${w[f]};`;S[u]=new z.GlslLibRoutine(`\n        void ${u}(int axis, out int indices[${_}]) {\n          int shape[${_}];\n          ${l};\n          for(int i = ${_} -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        `)}),S}}F.ShapeUtilsGlslLib=L},5060:(Ye,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getDefaultFragShaderMain=F.getFragShaderPreamble=F.getVertexShaderSource=F.getGlsl=void 0;const q={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},z={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function L(V){return 1===V?q:z}F.getGlsl=L,F.getVertexShaderSource=function(V){const S=L(V);return`${S.version}\n      precision highp float;\n      ${S.attribute} vec3 position;\n      ${S.attribute} vec2 textureCoord;\n\n      ${S.varyingVertex} vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }`},F.getFragShaderPreamble=function(V){const S=L(V);return`${S.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${S.varyingFrag} vec2 TexCoords;\n    ${S.outputDeclaration}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    `},F.getDefaultFragShaderMain=function(V,S){return`\n  void main() {\n    int indices[${S}];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ${L(V).output} = result;\n  }\n  `}},3891:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.VecGlslLib=void 0;const z=q(8520);F.VecGlslLib=class L extends z.GlslLib{constructor(S){super(S)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const S=this.context.outputTextureLayout.shape.length,O={add:"+=",sub:"-=",mul:"*=",div:"/="},C={};for(const w in O){const _=`${w}Vec`;let u="";for(let h=0;h<S;++h)u+=`\n          dest[${h}] ${O[w]} src[${h}];\n          `;C[_]=new z.GlslLibRoutine(`\n        void ${_}(int src[${S}], out int dest[${S}]) {\n          ${u}\n        }\n        `)}return C}copyVec(){const S=this.context.outputTextureLayout.shape.length;let O="";for(let w=0;w<S;++w)O+=`\n        dest[${w}] = src[${w}];\n        `;return{copyVec:new z.GlslLibRoutine(`\n      void copyVec(int src[${S}], out int dest[${S}]) {\n        ${O}\n      }\n      `)}}setVecItem(){const S=this.context.outputTextureLayout.shape.length;let O=`\n        if(index < 0)\n            index =${S} + index;\n        if (index == 0)\n            m[0] = value;\n        `;for(let w=1;w<S-1;++w)O+=`\n        else if (index == ${w})\n            m[${w}] = value;\n            `;return O+=`\n        else\n            m[${S-1}] = value;\n        `,{setVecItem:new z.GlslLibRoutine(`\n      void setVecItem(out int m[${S}], int index, int value) {\n        ${O}\n      }\n        `)}}getVecItem(){const S=this.context.outputTextureLayout.shape.length;let O=`\n        if(index < 0)\n            index = ${S} + index;\n        if (index == 0)\n            return m[0];\n      `;for(let w=1;w<S-1;++w)O+=`\n        else if (index == ${w})\n            return m[${w}];\n      `;return O+=`\n        else\n            return m[${S-1}];\n        `,{getVecItem:new z.GlslLibRoutine(`\n      int getVecItem(int m[${S}], int index) {\n        ${O}\n      }\n    `)}}}},8316:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.WebGLInferenceHandler=void 0;const z=q(6231),L=q(9162),V=q(2517),S=q(2403),O=q(7019),C=q(8710),w=q(5611),_=q(4057),u=q(2039);F.WebGLInferenceHandler=class{constructor(l){this.session=l,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(l,h){return(0,_.calculateTextureWidthAndHeight)(this.session.layoutStrategy,l,h)}executeProgram(l,h){if(h.length<l.inputNames.length)throw new Error(`Input size mustn't be less than ${l.inputNames.length}.`);if(l.inputNames.length!==l.inputTypes.length)throw new Error("input names size does not match input types");const f=[];for(let T=0;T<l.inputNames.length;++T)f[T]=this.getOrCreateTextureData(h[T],l.inputTypes[T]);const g=((T,M)=>{const P=M.map(U=>`${U.unpackedShape.join(",")};${U.width}x${U.height}`).join("_");let B=T.name;return T.cacheHint&&(B+="["+T.cacheHint+"]"),B+=":"+P,B})(l,f);let b=this.session.programManager.getArtifact(g);const x=b?b.programInfo:"function"==typeof l.get?l.get():l,A=(0,_.createTextureLayoutFromTextureType)(this.session.layoutStrategy,x.output.dims,x.output.textureType),k=this.createTextureData(A,x.output.type);return b||(b=this.session.programManager.build(x,f,k),this.session.programManager.setArtifact(g,b)),this.runProgram(b,f,k),k}run(l,h){return this.executeProgram(l,h).tensor}runProgram(l,h,f){for(let g=0;g<h.length;++g)if(!!h[g].isPacked!=(l.programInfo.inputTypes[g]===u.TextureType.packed))throw new Error(`input[${g}] property packed inconsistent`);if(!!f.isPacked!=(l.programInfo.output.textureType===u.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(l,h,f)}getOrCreateTextureData(l,h){let f=this.getTextureData(l.dataId,h===u.TextureType.packed);if(!f&&(f=this.getTextureData(l.dataId,h!==u.TextureType.packed),f))return h===u.TextureType.packed?this.pack(f):this.unpack(f);if(!f){const g=(0,_.createTextureLayoutFromTextureType)(this.session.layoutStrategy,l.dims,h);if(h===u.TextureType.packedLastDimension){const A=l.dims;if(4===A.length){const k=[A[0],Math.ceil(A[1]*A[2]*A[3]/4)],T=(0,_.createTextureLayoutFromTextureType)(this.session.layoutStrategy,k,h);let M=l.numberData;if(A[1]*A[2]*A[3]%4!=0){const P=A[0],B=A[1]*A[2]*A[3],U=4*Math.ceil(1*B/4);M=new Float32Array(P*U);for(let N=0;N<P;++N){const $=N*B,G=N*U+N%1*B;M.set(l.numberData.subarray($,$+B),G)}}return this.createTextureData(T,l.type,M,l,1)}}if(h===u.TextureType.packed){const b=(0,_.createTextureLayoutFromShape)(this.session.layoutStrategy,l.dims,1,[],{reverseWH:!0}),x=this.createTextureData(b,l.type,l.numberData,l,1);f=this.pack(x)}else f=this.createTextureData(g,l.type,l.numberData,l,1)}return f}createTextureDataFromLayoutBindTensor(l,h,f,g){return this.createTextureData(l,h,f,g,1)}createTextureData(l,h,f,g,b){z.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(l)}]`);const x=this.session.textureManager.createTextureFromLayout(h,l,f,b);return this.createTextureDataFromTexture(l,h,x,g)}reshapeUnpacked(l,h){const f=this.getOrCreateTextureData(l,u.TextureType.unpacked),g={channels:f.channels,height:f.height,width:f.width,shape:0!==h.length?h:[1],strides:V.ShapeUtil.computeStrides(h),unpackedShape:h};return this.createTextureDataFromTexture(g,l.type,f.texture).tensor}reshapePacked(l,h){const f=this.getOrCreateTextureData(l,u.TextureType.packed);if((0,O.isReshapeCheap)(l.dims,h)){const k={channels:f.channels,height:f.height,width:f.width,shape:0!==h.length?h:[1],strides:V.ShapeUtil.computeStrides(h),unpackedShape:h,isPacked:!0};return this.createTextureDataFromTexture(k,l.type,f.texture).tensor}const g=(0,O.processDims3D)(l.dims),b=(0,O.processDims3D)(h),x=this.reshapePacked(l,g),A=this.run((0,O.createPackedReshape3DProgramInfoLoader)(this,x,b),[x]);return this.reshapePacked(A,h)}cast(l,h){const f=this.getOrCreateTextureData(l,u.TextureType.unpacked);return this.createTextureDataFromTexture(f,h,f.texture).tensor}createTextureDataFromTexture(l,h,f,g,b){var x=this;const A=Object.assign(Object.assign({},l),{tensor:g||new L.Tensor(l.unpackedShape,h,k=>this.readTexture(A),function(){var k=_asyncToGenerator(function*(T){return x.readTextureAsync(A)});return function(T){return k.apply(this,arguments)}}(),void 0,b),texture:f});return this.setTextureData(A.tensor.dataId,A,l.isPacked),A}getTextureData(l,h=!1){return this.session.isInitializer(l)?this.session.getTextureData(l,h):h?this.packedTextureDataCache.get(l):this.unpackedTextureDataCache.get(l)}setTextureData(l,h,f=!1){this.session.isInitializer(l)?this.session.setTextureData(l,h,f):(f?this.packedTextureDataCache:this.unpackedTextureDataCache).set(l,h)}isTextureLayoutCached(l,h=!1){return!!this.getTextureData(l.dataId,h)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(l=>this.session.textureManager.releaseTexture(l)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(l=>this.session.textureManager.releaseTexture(l)),this.unpackedTextureDataCache=new Map}readTexture(l){return l.isPacked?this.readTexture(this.unpack(l)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(l,l.tensor.type,l.channels):this.session.textureManager.readUint8TextureAsFloat((0,C.encodeAsUint8)(this,l))}readTextureAsync(l){var h=this;return _asyncToGenerator(function*(){return l.isPacked?h.readTextureAsync(h.unpack(l)):h.session.backend.glContext.isFloat32DownloadSupported?h.session.textureManager.readTextureAsync(l,l.tensor.type,l.channels):h.session.textureManager.readUint8TextureAsFloat((0,C.encodeAsUint8)(h,l))})()}pack(l){return this.executeProgram((0,S.createPackProgramInfoLoader)(this,l.tensor),[l.tensor])}unpack(l){return this.executeProgram((0,w.createUnpackProgramInfoLoader)(this,l.tensor),[l.tensor])}}},1640:function(Ye,F,q){"use strict";var z=this&&this.__createBinding||(Object.create?function(ge,je,de,Be){void 0===Be&&(Be=de);var ee=Object.getOwnPropertyDescriptor(je,de);ee&&!("get"in ee?!je.__esModule:ee.writable||ee.configurable)||(ee={enumerable:!0,get:function(){return je[de]}}),Object.defineProperty(ge,Be,ee)}:function(ge,je,de,Be){void 0===Be&&(Be=de),ge[Be]=je[de]}),L=this&&this.__setModuleDefault||(Object.create?function(ge,je){Object.defineProperty(ge,"default",{enumerable:!0,value:je})}:function(ge,je){ge.default=je}),V=this&&this.__importStar||function(ge){if(ge&&ge.__esModule)return ge;var je={};if(null!=ge)for(var de in ge)"default"!==de&&Object.prototype.hasOwnProperty.call(ge,de)&&z(je,ge,de);return L(je,ge),je};Object.defineProperty(F,"__esModule",{value:!0}),F.WEBGL_OP_RESOLVE_RULES=void 0;const S=q(2898),O=V(q(7839)),C=q(4196),w=q(2069),_=q(8138),u=q(9663),l=q(5193),h=q(7992),f=q(1253),g=q(4776),b=q(6572),x=q(3346),A=q(5623),k=q(2870),T=q(2143),M=q(4939),P=q(718),B=q(2268),U=q(8117),N=q(2278),$=q(5524),G=q(5975),W=q(3933),K=q(6558),X=q(5723),oe=q(3738),Z=V(q(4909)),ae=q(8428),pe=q(9793);F.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Z.abs],["Acos","","7+",Z.acos],["Add","","7+",O.add],["And","","7+",O.and],["Asin","","7+",Z.asin],["Atan","","7+",Z.atan],["AveragePool","","7+",T.averagePool,T.parseAveragePoolAttributes],["BatchNormalization","","7+",S.batchNormalization,S.parseBatchNormalizationAttributes],["Cast","","6+",C.cast,C.parseCastAttributes],["Ceil","","6+",Z.ceil],["Clip","","6-10",Z.clip,Z.parseClipAttributes],["Clip","","11+",Z.clipV11],["Concat","","4+",w.concat,w.parseConcatAttributes],["Conv","","1+",_.conv,_.parseConvAttributes],["ConvTranspose","","1+",u.convTranspose,u.parseConvTransposeAttributes],["Cos","","7+",Z.cos],["Div","","7+",O.div],["Dropout","","7+",Z.identity],["DepthToSpace","","1+",l.depthToSpace,l.parseDepthToSpaceAttributes],["Equal","","7+",O.equal],["Elu","","6+",Z.elu,Z.parseEluAttributes],["Exp","","6+",Z.exp],["Flatten","","1+",h.flatten,h.parseFlattenAttributes],["Floor","","6+",Z.floor],["FusedConv","com.microsoft","1+",_.conv,_.parseConvAttributes],["Gather","","1+",f.gather,f.parseGatherAttributes],["Gemm","","7-10",g.gemm,g.parseGemmAttributesV7],["Gemm","","11+",g.gemm,g.parseGemmAttributesV11],["GlobalAveragePool","","1+",T.globalAveragePool,T.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",T.globalMaxPool],["Greater","","7+",O.greater],["Identity","","1+",Z.identity],["ImageScaler","","1+",b.imageScaler,b.parseImageScalerAttributes],["InstanceNormalization","","6+",x.instanceNormalization,x.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Z.leakyRelu,Z.parseLeakyReluAttributes],["Less","","7+",O.less],["Log","","6+",Z.log],["MatMul","","1+",A.matMul,A.parseMatMulAttributes],["MaxPool","","1+",T.maxPool,T.parseMaxPoolAttributes],["Mul","","7+",O.mul],["Neg","","6+",Z.neg],["Not","","1+",Z.not],["Or","","7+",O.or],["Pad","","2-10",k.padV2,k.parsePadAttributesV2],["Pad","","11+",k.padV11,k.parsePadAttributesV11],["Pow","","7+",O.pow],["PRelu","","7+",O.pRelu],["ReduceLogSum","","1+",M.reduceLogSum,M.parseReduceAttributes],["ReduceMax","","1+",M.reduceMax,M.parseReduceAttributes],["ReduceMean","","1+",M.reduceMean,M.parseReduceAttributes],["ReduceMin","","1+",M.reduceMin,M.parseReduceAttributes],["ReduceProd","","1+",M.reduceProd,M.parseReduceAttributes],["ReduceSum","","1-12",M.reduceSum,M.parseReduceAttributes],["ReduceSumSquare","","1+",M.reduceLogSumSquare,M.parseReduceAttributes],["Relu","","6+",Z.relu],["Reshape","","5+",P.reshape],["Resize","","10",B.resize,B.parseResizeAttributesV10],["Resize","","11+",B.resize,B.parseResizeAttributesV11],["Shape","","1+",U.shape],["Sigmoid","","6+",Z.sigmoid],["Sin","","7+",Z.sin],["Slice","","10+",N.sliceV10],["Slice","","1-9",N.slice,N.parseSliceAttributes],["Softmax","","1-12",$.softmax,$.parseSoftmaxAttributes],["Softmax","","13+",$.softmaxV13,$.parseSoftmaxAttributesV13],["Split","","2-12",G.split,G.parseSplitAttributes],["Sqrt","","6+",Z.sqrt],["Squeeze","","1-12",W.squeeze,W.parseSqueezeAttributes],["Squeeze","","13+",W.squeezeV13],["Sub","","7+",O.sub],["Sum","","6+",K.sum],["Tan","","7+",Z.tan],["Tanh","","6+",Z.tanh],["Tile","","6+",X.tile],["Transpose","","1+",oe.transpose,oe.parseTransposeAttributes],["Upsample","","7-8",pe.upsample,pe.parseUpsampleAttributesV7],["Upsample","","9",pe.upsample,pe.parseUpsampleAttributesV9],["Unsqueeze","","1-12",ae.unsqueeze,ae.parseUnsqueezeAttributes],["Unsqueeze","","13+",ae.unsqueezeV13],["Xor","","7+",O.xor]]},2898:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseBatchNormalizationAttributes=F.batchNormalization=void 0;const z=q(246),L=q(5060),V=q(2039),S={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[V.TextureType.unpacked,V.TextureType.unpacked,V.TextureType.unpacked,V.TextureType.unpacked,V.TextureType.unpacked]};F.batchNormalization=(w,_,u)=>(C(_),[w.run(Object.assign(Object.assign({},S),{cacheHint:u.cacheKey,get:()=>O(w,_,u)}),_)]),F.parseBatchNormalizationAttributes=w=>{const _=w.attributes.getFloat("epsilon",1e-5),u=w.attributes.getFloat("momentum",.9),l=w.attributes.getInt("spatial",1);return(0,z.createAttributeWithCacheKey)({epsilon:_,momentum:u,spatial:l})};const O=(w,_,u)=>{const l=(0,L.getGlsl)(w.session.backend.glContext.version),h=_[0].dims.length,[f,g]=w.calculateTextureWidthAndHeight(_[1].dims,V.TextureType.unpacked),b=`\n  float process(int[${h}] indices) {\n    vec2 position = offsetToCoords(indices[1], ${f}, ${g});\n    float scale = getColorAsFloat(${l.texture2D}(Scale, position));\n    float mean = getColorAsFloat(${l.texture2D}(Mean, position));\n    float variance = getColorAsFloat(${l.texture2D}(Variance, position));\n    float b = getColorAsFloat(${l.texture2D}(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${u.epsilon})) ) + b;\n  }`;return Object.assign(Object.assign({},S),{output:{dims:_[0].dims,type:_[0].type,textureType:V.TextureType.unpacked},shaderSource:b})},C=w=>{if(!w||5!==w.length)throw new Error("BatchNormalization requires 5 inputs.");const _=w[0],u=w[1],l=w[2],h=w[3],f=w[4];if(_.dims.length<3||1!==u.dims.length||1!==l.dims.length||1!==h.dims.length||1!==f.dims.length)throw new Error("invalid input shape.");if(u.dims[0]!==_.dims[1]||l.dims[0]!==_.dims[1]||h.dims[0]!==_.dims[1]||f.dims[0]!==_.dims[1])throw new Error("invalid input shape.");if("float32"!==_.type&&"float64"!==_.type||"float32"!==u.type&&"float64"!==u.type||"float32"!==l.type&&"float64"!==l.type||"float32"!==h.type&&"float64"!==h.type||"float32"!==f.type&&"float64"!==f.type)throw new Error("invalid input tensor types.")}},7839:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.xor=F.sub=F.pRelu=F.pow=F.or=F.mul=F.less=F.greater=F.equal=F.div=F.and=F.add=F.glslPRelu=F.glslPow=F.glslXor=F.glslOr=F.glslAnd=F.glslLess=F.glslGreater=F.glslEqual=F.glslSub=F.glslMul=F.glslDiv=F.glslAdd=void 0;const z=q(2517),L=q(8520),V=q(5060),S=q(2039);function O(){const M="add_";return{body:`\n  float ${M}(float a, float b) {\n    return a + b;\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function C(){const M="div_";return{body:`\n  float ${M}(float a, float b) {\n    return a / b;\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function w(){const M="mul_";return{body:`\n  float ${M}(float a, float b) {\n    return a * b;\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function _(){const M="sub_";return{body:`\n  float ${M}(float a, float b) {\n    return a - b;\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function u(){const M="equal_";return{body:`\n  float ${M}(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function l(){const M="greater_";return{body:`\n  float ${M}(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function h(){const M="less_";return{body:`\n  float ${M}(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function f(){const M="and_";return{body:`\n  float ${M}(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function g(){const M="or_";return{body:`\n  float ${M}(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function b(){const M="xor_";return{body:`\n  float ${M}(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}function x(){return function(M){const P=`${M}_`;return{body:`\n  float ${P}(float a, float b) {\n    return ${M}(a, b);\n  }\n  vec4 ${P}(vec4 v1, vec4 v2) {\n    return ${M}(v1, v2);\n  }\n  `,name:P,type:L.FunctionType.ValueBased}}("pow")}function A(){const M="prelu_";return{body:`\n  float ${M}(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ${M}(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  `,name:M,type:L.FunctionType.ValueBased}}F.glslAdd=O,F.glslDiv=C,F.glslMul=w,F.glslSub=_,F.glslEqual=u,F.glslGreater=l,F.glslLess=h,F.glslAnd=f,F.glslOr=g,F.glslXor=b,F.glslPow=x,F.glslPRelu=A;const k=(M,P,B,U=P[0].type,N)=>{const $=M.session.pack?S.TextureType.packed:S.TextureType.unpacked;return{name:B.name,inputNames:["A","B"],inputTypes:[$,$],cacheHint:N,get:()=>T(M,P,B,U)}},T=(M,P,B,U=P[0].type)=>{const N=M.session.pack?S.TextureType.packed:S.TextureType.unpacked,$=!z.ShapeUtil.areEqual(P[0].dims,P[1].dims);let G=P[0].dims;const W=M.session.pack;if($){const oe=z.BroadcastUtil.calcShape(P[0].dims,P[1].dims,!1);if(!oe)throw new Error("Can't perform binary op on the given tensors");G=oe;const Z=G.length,ae=0!==P[0].dims.length?P[0].dims.length:1,pe=0!==P[1].dims.length?P[1].dims.length:1,ge=0!==P[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",je=0!==P[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",de=(0,V.getGlsl)(M.session.backend.glContext.version);return{name:B.name,inputNames:["A","B"],inputTypes:[N,N],output:{dims:G,type:U,textureType:N},shaderSource:W?`\n      ${B.body}\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ${B.name}(a, b);\n        ${de.output} = result;\n      }`:`\n      ${B.body}\n      float process(int indices[${Z}]) {\n        int aindices[${ae}];\n        int bindices[${pe}];\n        ${ge}\n        ${je}\n        return ${B.name}(_A(aindices), _B(bindices));\n      }`,hasMain:W}}const K=(0,V.getGlsl)(M.session.backend.glContext.version);return{name:B.name,inputNames:["A","B"],inputTypes:[N,N],output:{dims:P[0].dims,type:U,textureType:N},shaderSource:`\n    ${B.body}\n    void main() {\n      vec4 v1 = ${K.texture2D}(A, TexCoords);\n      vec4 v2 = ${K.texture2D}(B, TexCoords);\n      vec4 result = ${B.name}(v1, v2);\n      ${K.output} = result;\n    }\n    `,hasMain:!0}};F.add=(M,P)=>[M.run(k(M,P,O()),P)],F.and=(M,P)=>[M.run(k(M,P,f(),"bool"),P)],F.div=(M,P)=>[M.run(k(M,P,C()),P)],F.equal=(M,P)=>[M.run(k(M,P,u(),"bool"),P)],F.greater=(M,P)=>[M.run(k(M,P,l(),"bool"),P)],F.less=(M,P)=>[M.run(k(M,P,h(),"bool"),P)],F.mul=(M,P)=>[M.run(k(M,P,w()),P)],F.or=(M,P)=>[M.run(k(M,P,g(),"bool"),P)],F.pow=(M,P)=>[M.run(k(M,P,x()),P)],F.pRelu=(M,P)=>[M.run(k(M,P,A()),P)],F.sub=(M,P)=>[M.run(k(M,P,_()),P)],F.xor=(M,P)=>[M.run(k(M,P,b(),"bool"),P)]},4196:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseCastAttributes=F.cast=void 0;const z=q(2517);F.cast=(V,S,O)=>(L(S),[V.cast(S[0],O)]),F.parseCastAttributes=V=>z.ProtoUtil.tensorDataTypeFromProto(V.attributes.getInt("to"));const L=V=>{if(!V||1!==V.length)throw new Error("Cast requires 1 input.");if("string"===V[0].type)throw new Error("Invalid input type.")}},1163:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createPackedConcatProgramInfoLoader=void 0;const z=q(5060),L=q(2039),V=q(9390),S=q(2827);F.createPackedConcatProgramInfoLoader=(C,w,_)=>{const u=(l=w.length,h=_.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:l},(f,g)=>`X${g}`),inputTypes:Array(l).fill(L.TextureType.packed),cacheHint:h});var l,h;return Object.assign(Object.assign({},u),{get:()=>((f,g,b,x)=>{const A=b[0].dims.slice();if(x>=A.length||x<-1*A.length)throw new Error("axis specified for concat doesn't match input dimensionality");x<0&&(x=A.length+x);const k=A.slice(0);for(let ge=1;ge<b.length;ge++){const je=b[ge].dims.slice();for(let de=0;de<A.length;de++)if(de===x)k[x]+=je[de];else if(A[de]!==je[de])throw new Error("non concat dimensions must match")}const T=k.length,M=(0,S.getChannels)("coords",T),P=(0,V.getCoordsDataType)(T),B=(0,S.unpackFromChannel)(),U=b.map(ge=>ge.dims),N=(0,V.getGlChannels)(T),$=new Array(U.length-1);$[0]=U[0][x];for(let ge=1;ge<$.length;ge++)$[ge]=$[ge-1]+U[ge][x];const G=N[x],W=N.slice(-2),K=N.join();let X=`if (${G} < ${$[0]}) {\n        return getChannel(\n            getX0(${K}), vec2(${W.join()}));\n        }`;for(let ge=1;ge<$.length;ge++){const je=$[ge-1];X+=`\n            if (${G} < ${$[ge]}  && ${G} >= ${$[ge-1]}) {\n              return getChannel(\n                getX${ge}(${O(N,G,je)}),\n                vec2(${O(W,G,je)}));\n            }`}const Z=$[$.length-1];X+=`\n            return getChannel(\n              getX${$.length}(${O(N,G,Z)}),\n              vec2(${O(W,G,Z)}));`;const ae=(0,z.getGlsl)(f.session.backend.glContext.version),pe=`\n          ${B}\n          float getValue(${N.map(ge=>"int "+ge)}) {\n            ${X}\n          }\n\n          void main() {\n            ${P} coords = getOutputCoords();\n            int lastDim = coords.${N[T-1]};\n            coords.${N[T-1]} = coords.${N[T-2]};\n            coords.${N[T-2]} = lastDim;\n\n            vec4 result = vec4(getValue(${M}), 0., 0., 0.);\n\n            ${M[T-1]} = ${M[T-1]} + 1;\n            if (${M[T-1]} < ${k[T-1]}) {\n              result.g = getValue(${M});\n            }\n\n            ${M[T-2]} = ${M[T-2]} + 1;\n            if (${M[T-2]} < ${k[T-2]}) {\n              result.a = getValue(${M});\n            }\n\n            ${M[T-1]} = ${M[T-1]} - 1;\n            if (${M[T-2]} < ${k[T-2]} &&\n                ${M[T-1]} < ${k[T-1]}) {\n              result.b = getValue(${M});\n            }\n            ${ae.output} = result;\n          }\n        `;return Object.assign(Object.assign({},g),{output:{dims:k,type:b[0].type,textureType:L.TextureType.packed},shaderSource:pe,hasMain:!0})})(C,u,w,_.axis)})};const O=(C,w,_)=>{const u=C.indexOf(w);return C.map((l,h)=>h===u?`${l} - ${_}`:l).join()}},2069:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseConcatAttributes=F.concat=void 0;const z=q(246),L=q(2039),V=q(1163);F.concat=(l,h,f)=>(u(h),l.session.pack&&h[0].dims.length>1?[l.run((0,V.createPackedConcatProgramInfoLoader)(l,h,f),h)]:[l.run(S(l,h,f),h)]);const S=(l,h,f)=>{const g=(b=h.length,x=f.cacheKey,{name:"Concat",inputNames:Array.from({length:b},(A,k)=>`X${k}`),inputTypes:Array(b).fill(L.TextureType.unpacked),cacheHint:x});var b,x;return Object.assign(Object.assign({},g),{get:()=>((A,k,T,M)=>{const P=T[0].dims.slice();if(M>=P.length||M<-1*P.length)throw new Error("axis specified for concat doesn't match input dimensionality");M<0&&(M=P.length+M);const B=P.slice(0);for(let K=1;K<T.length;K++){const X=T[K].dims.slice();for(let oe=0;oe<P.length;oe++)if(oe===M)B[M]+=X[oe];else if(P[oe]!==X[oe])throw new Error("non concat dimensions must match")}const U=B.length,N=new Array(T.length);let $=0;for(let K=0;K<N.length;++K)$+=T[K].dims[M],N[K]=$;let G="";G=T.length<5?O(N):C(N);const W=`\n        ${w(T.length,U)}\n        ${_(N)}\n        ${G}\n        float process(int indices[${U}]) {\n          int textureIndex = getTextureWhereDataResides (indices[${M}]);\n\n          if(textureIndex != 0) {\n            indices[${M}] = indices[${M}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }`;return Object.assign(Object.assign({},k),{output:{dims:B,type:T[0].type,textureType:L.TextureType.unpacked},shaderSource:W})})(0,g,h,f.axis)})},O=l=>`int getTextureWhereDataResides(int index) {\n      ${l.map((h,f)=>`if(index<${h}) {return ${f};}\n`).join("")}\n    }`,C=l=>O(l),w=(l,h)=>{const f=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${h}]) {`];for(let g=0;g<l;++g)f.push(0===g?`\tif (textureIndex == ${g}) { return _X${g}(indices); }`:g===l-1?`\telse { return _X${g}(indices); }`:`\telse if (textureIndex == ${g}) { return _X${g}(indices); }`);return f.push("\t}"),f.join("\n")},_=l=>{const h=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let f=0;f<l.length;++f)h.push(0===f?`\tif (index == ${f}) { return ${l[f]}; }`:f===l.length-1?`\telse { return ${l[f]}; }`:`\telse if (index == ${f}) { return ${l[f]}; }`);return h.push("\t}"),h.join("\n")};F.parseConcatAttributes=l=>(0,z.createAttributeWithCacheKey)({axis:l.attributes.getInt("axis")});const u=l=>{if(!l||l.length<1)throw new Error("too few inputs");const h=l[0].type,f=l[0].dims.length;if("string"===h)throw new Error("string tensor is not supported yet");for(const g of l){if(g.type!==h)throw new Error("input tensors should be one type");if(g.dims.length!==f)throw new Error("input tensors should have the same shape")}}},4770:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createUnpackedGroupedConvProgramInfoLoader=void 0;const z=q(6231),L=q(5060),V=q(2039),S=q(8138),O=q(2823);F.createUnpackedGroupedConvProgramInfoLoader=(C,w,_)=>{const u={name:"GroupedConv",inputNames:(l=w.length>2)?["X","W","Bias"]:["X","W"],inputTypes:l?[V.TextureType.unpacked,V.TextureType.unpacked,V.TextureType.unpacked]:[V.TextureType.unpacked,V.TextureType.unpacked],cacheHint:_.cacheKey};var l;return Object.assign(Object.assign({},u),{get:()=>((f,g,b,x)=>{const A=g.length>2?"value += getBias(output_channel);":"",k=g[0].dims.slice(),T=g[1].dims.slice(),M=T[0]/x.group;z.Logger.verbose("GroupedConv",`autpPad:${x.autoPad}, dilations:${x.dilations}, group:${x.group}, kernelShape:${x.kernelShape}, pads:${x.pads}, strides:${x.strides}`);const P=(0,S.calculateOutputShape)(k,T,x.dilations,x.pads,x.strides),B=(0,L.getGlsl)(f.session.backend.glContext.version),{activationFunction:U,applyActivation:N}=(0,O.getActivationSnippet)(x),$=`\n  const ivec2 strides = ivec2(${x.strides[0]}, ${x.strides[1]});\n  const ivec2 pads = ivec2(${x.pads[0]}, ${x.pads[1]});\n  ${U}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ${M};\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ${T[1]}; wInChannel++) {\n      int input_channel = group_id * ${T[1]} + wInChannel;\n      for (int wHeight = 0; wHeight < ${T[2]}; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ${x.dilations[0]};\n\n        if (xHeight < 0 || xHeight >= ${k[2]}) {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ${T[3]}; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ${x.dilations[1]};\n          if (xWidth < 0 || xWidth >= ${k[3]}) {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${A}\n    ${N}\n    ${B.output} = vec4(value, .0, .0, .0);\n  }\n`;return Object.assign(Object.assign({},b),{output:{dims:P,type:g[0].type,textureType:V.TextureType.unpacked},shaderSource:$,hasMain:!0})})(C,w,u,_)})}},1386:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.conv2DPacked=F.conv2DPackedPointwise=void 0;const z=q(8138),L=q(8555),V=q(708);F.conv2DPackedPointwise=(S,O,C)=>{const w=O[0].dims,_=O[1].dims,u=(0,z.calculateOutputShape)(w,_,C.dilations,C.pads,C.strides),l=S.reshapePacked(O[0],[w[1],w[2]*w[3]]),h=S.reshapePacked(O[1],[_[0],_[1]]),f=O.length>2?[h,l,O[2]]:[h,l],g=S.run((0,V.createPackedMatmulProgramInfoLoader)(S,f,C),f);return S.reshapePacked(g,u)},F.conv2DPacked=(S,O,C)=>{const _=O[1].dims,u=(0,z.calculateOutputShape)(O[0].dims,_,C.dilations,C.pads,C.strides),l=S.run((0,L.createPackedIm2ColProgramInfoLoader)(S,O[0],O[1],u,C),[O[0]]),h=S.reshapePacked(O[1],[_[0],_[1]*_[2]*_[3]]),f=3===O.length?[h,l,O[2]]:[h,l],g=S.run((0,V.createPackedMatmulProgramInfoLoader)(S,f,C),f);return S.reshapePacked(g,u)}},9663:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseConvTransposeAttributes=F.convTranspose=void 0;const z=q(246),L=q(5060),V=q(2039),S=q(2823),O=(h,f,g,b,x,A)=>(h-1)*f+g+(b-1)*x+1-A,C=(h,f,g,b,x)=>{const A=Math.floor(h/2);"SAME_UPPER"===f?(g[b]=A,g[x]=h-A):"SAME_LOWER"===f&&(g[b]=h-A,g[x]=A)};F.convTranspose=(h,f,g)=>(l(f,g),w(h,f,g));const w=(h,f,g)=>{const b=u(g,f);return[_(h,f,b)]},_=(h,f,g)=>h.run(((b,x,A)=>{const k={name:"ConvTranspose",inputNames:(T=x.length>2)?["X","W","B"]:["X","W"],inputTypes:T?[V.TextureType.unpacked,V.TextureType.unpacked,V.TextureType.unpacked]:[V.TextureType.unpacked,V.TextureType.unpacked],cacheHint:A.cacheKey};var T;return Object.assign(Object.assign({},k),{get:()=>((P,B,U,N)=>{const $=B.length>2?"getB(output_channel)":"0.0",G=B[0].dims,W=B[1].dims,K=W[1],X=W[0]/N.group,oe=[B[0].dims[0],B[1].dims[1]*N.group,...N.outputShape],Z=(0,L.getGlsl)(P.session.backend.glContext.version),{activationFunction:ae,applyActivation:pe}=(0,S.getActivationSnippet)(N),ge=`\n  const ivec2 strides = ivec2(${N.strides[0]}, ${N.strides[1]});\n  const ivec2 pads = ivec2(${N.pads[0]}, ${N.pads[1]});\n  ${ae}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ${K};\n    int wOutChannel = output_channel - group_id * ${K};\n\n    float value = ${$};\n    for (int inChannelOffset = 0; inChannelOffset < ${X}; inChannelOffset++) {\n      int input_channel = group_id * ${X} + inChannelOffset;\n      for (int wWOff = 0; wWOff < ${W[2]}; wWOff++) {\n        for (int wHOff = 0; wHOff < ${W[3]}; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ${N.dilations[0]}, wHOff * ${N.dilations[1]});\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ${G[2]} &&\n            wLocIn.y >= 0 && wLocIn.y < ${G[3]}\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ${pe}\n    ${Z.output} = vec4(value, .0, .0, .0);\n  }\n`;return Object.assign(Object.assign({},U),{output:{dims:oe,type:B[0].type,textureType:V.TextureType.unpacked},shaderSource:ge,hasMain:!0})})(b,x,k,A)})})(h,f,g),f),u=(h,f)=>{const g=h.kernelShape.slice();if(0===h.kernelShape.length)for(let k=2;k<f[1].dims.length;++k)g.push(f[1].dims[k]);const b=h.pads.slice(),x=h.outputShape.slice();((k,T,M,P,B,U,N,$)=>{const G=k.length-2,W=0===$.length;for(let K=0;K<G;++K){const oe=O(k[K+2],U[K],B[K],T[K],M[K],W?k[K+2]*U[K]:$[K]);C(oe,P,B,K,K+G),W&&$.push(U[K]*(k[K+2]-1)+N[K]+(T[K]-1)*M[K]+1-B[K]-B[K+G])}})(f[0].dims,g,h.dilations,h.autoPad,b,h.strides,h.outputPadding,x);const A=Object.assign({},h);return Object.assign(A,{kernelShape:g,pads:b,outputShape:x,cacheKey:h.cacheKey}),A};F.parseConvTransposeAttributes=h=>{const f=h.attributes,g=(0,S.parseInternalActivationAttributes)(f),b=f.getString("auto_pad","NOTSET"),x=f.getInts("dilations",[1,1]),A=f.getInt("group",1),k=f.getInts("kernel_shape",[]),T=f.getInts("output_padding",[0,0]),M=f.getInts("output_shape",[]),P=f.getInts("pads",[0,0,0,0]),B=f.getInts("strides",[1,1]);return(0,z.createAttributeWithCacheKey)(Object.assign({autoPad:b,dilations:x,group:A,kernelShape:k,outputPadding:T,outputShape:M,pads:P,strides:B},g))};const l=(h,f)=>{if(!h||2!==h.length&&3!==h.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==h[0].dims.length||4!==h[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(h[0].dims[1]!==h[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===h.length&&(1!==h[2].dims.length||h[2].dims[0]!==h[1].dims[1]*f.group))throw new Error("invalid bias");const b=h[0].dims.length-2;if(f.dilations.length!==b)throw new Error(`dilations should be ${b}D`);if(f.strides.length!==b)throw new Error(`strides should be ${b}D`);if(f.pads.length!==2*b)throw new Error(`pads should be ${2*b}D`);if(f.outputPadding.length!==b)throw new Error(`output_padding should be ${b}D`);if(0!==f.kernelShape.length&&f.kernelShape.length!==h[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==f.outputShape.length&&f.outputShape.length!==h[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==h[0].type||"float32"!==h[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===h.length&&"float32"!==h[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseConvAttributes=F.conv=F.calculateOutputShape=void 0;const z=q(246),L=q(2517),V=q(4770),S=q(1386),O=q(9828),C=q(2823),w=q(3248),_=q(5623);F.calculateOutputShape=(b,x,A,k,T)=>{const M=b[0],P=b.slice(2),B=P.length,U=x[0],N=x.slice(2).map((G,W)=>G+(G-1)*(A[W]-1)),$=P.map((G,W)=>G+k[W]+k[W+B]).map((G,W)=>Math.floor((G-N[W]+T[W])/T[W]));return[M,U].concat(...$)},F.conv=(b,x,A)=>(g(x,A),u(b,x,A));const u=(b,x,A)=>{const k=f(A,x),T=b.session.pack,M=1===k.kernelShape[0]&&1===k.kernelShape[1];return k.group>1?[b.run((0,V.createUnpackedGroupedConvProgramInfoLoader)(b,x,k),x)]:M&&T?[l(b,x,k)]:T&&4===x[0].dims.length&&1===x[0].dims[0]&&!M?[(0,S.conv2DPacked)(b,x,k)]:[h(b,x,k)]},l=(b,x,A)=>{const k=x[0].dims,T=x[1].dims,M=(0,F.calculateOutputShape)(k,T,A.dilations,A.pads,A.strides),P=b.reshapeUnpacked(x[0],[k[1],k[2]*k[3]]),B=b.reshapeUnpacked(x[1],[T[0],T[1]]),U=x.length>2?[B,P,x[2]]:[B,P],N=b.run((0,_.createMatmulProgramInfoLoader)(U,A),U);return b.reshapeUnpacked(N,M)},h=(b,x,A)=>{const M=(0,F.calculateOutputShape)(x[0].dims,x[1].dims,A.dilations,A.pads,A.strides),P=b.run((0,w.createIm2ColProgramInfoLoader)(b,x[0],x[1],M,A),[x[0]]),B=3===x.length?[P,x[1],x[2]]:[P,x[1]];return b.run((0,O.createDotProductProgramInfoLoader)(b,x,M,A),B)},f=(b,x)=>{const A=b.kernelShape.slice();if(0===b.kernelShape.length)for(let M=2;M<x[1].dims.length;++M)A.push(x[1].dims[M]);const k=b.pads.slice();L.PoolConvUtil.adjustPadsBasedOnAutoPad(x[0].dims,b.strides,b.dilations,A,k,b.autoPad);const T=Object.assign({},b);return Object.assign(T,{kernelShape:A,pads:k,cacheKey:b.cacheKey}),T};F.parseConvAttributes=b=>{const x=b.attributes,A=(0,C.parseInternalActivationAttributes)(x),k=x.getString("auto_pad","NOTSET"),T=x.getInts("dilations",[1,1]),M=x.getInt("group",1),P=x.getInts("kernel_shape",[]),B=x.getInts("pads",[0,0,0,0]),U=x.getInts("strides",[1,1]);return(0,z.createAttributeWithCacheKey)(Object.assign({autoPad:k,dilations:T,group:M,kernelShape:P,pads:B,strides:U},A))};const g=(b,x)=>{if(!b||2!==b.length&&3!==b.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==b[0].dims.length||4!==b[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(b[0].dims[1]!==b[1].dims[1]*x.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===b.length&&(1!==b[2].dims.length||b[1].dims[0]!==b[2].dims[0]))throw new Error("invalid bias");const A=b[0].dims.length-2;if(x.dilations.length!==A)throw new Error(`dilations should be ${A}D`);if(x.strides.length!==A)throw new Error(`strides should be ${A}D`);if(x.pads.length!==2*A)throw new Error(`pads should be ${2*A}D`);if(0!==x.kernelShape.length&&x.kernelShape.length!==b[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==b[0].type||"float32"!==b[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===b.length&&"float32"!==b[2].type)throw new Error("Conv input(bias) should be float tensor")}},5193:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseDepthToSpaceAttributes=F.depthToSpace=void 0;const z=q(3738);F.depthToSpace=(V,S,O)=>{L(S);const C=O.blocksize,w=C*C,_="DCR"===O.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],l=V.reshapeUnpacked(S[0],"DCR"===O.mode?[S[0].dims[0],C,C,S[0].dims[1]/w,S[0].dims[2],S[0].dims[3]]:[S[0].dims[0],S[0].dims[1]/w,C,C,S[0].dims[2],S[0].dims[3]]),h={perm:_,cacheKey:`${_}`},[f]=(0,z.transpose)(V,[l],h);return[V.reshapeUnpacked(f,[S[0].dims[0],S[0].dims[1]/w,S[0].dims[2]*C,S[0].dims[3]*C])]},F.parseDepthToSpaceAttributes=V=>{const S=V.attributes.getInt("blocksize");if(S<1)throw new Error(`blocksize must be >= 1, but got : ${S} for DepthToSpace`);const O=V.attributes.getString("mode","DCR");if("DCR"!==O&&"CRD"!==O)throw new Error(`unrecognized mode: ${O} for DepthToSpace`);return{mode:O,blocksize:S}};const L=V=>{if(1!==V.length)throw new Error(`DepthToSpace expect 1 inputs, but got ${V.length}`);if("string"===V[0].type||4!==V[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createDotProductProgramInfoLoader=void 0;const z=q(2517),L=q(5060),V=q(2039),S=q(2823),O=q(3248);F.createDotProductProgramInfoLoader=(C,w,_,u)=>{const l={name:"ConvDotProduct",inputNames:(h=w.length>2)?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:h?[V.TextureType.unpacked,V.TextureType.packedLastDimension,V.TextureType.unpacked]:[V.TextureType.unpacked,V.TextureType.packedLastDimension],cacheKey:u.activationCacheKey};var h;return Object.assign(Object.assign({},l),{get:()=>((h,f,g,b,x)=>{const A=g[0].dims,k=g[1].dims,T=[k[0],Math.ceil(A[1]*k[2]*k[3]/4)],M=(0,O.calculateIm2ColDims)(A,k,b),[P,B]=h.calculateTextureWidthAndHeight(T,V.TextureType.packedLastDimension),U=z.ShapeUtil.computeStrides(M),[N,$]=h.calculateTextureWidthAndHeight(M,V.TextureType.packedLastDimension),G=b.length,W=g.length<3?"0.0":"_B(b)",K=Math.ceil(A[1]*k[2]*k[3]/4),{activationFunction:X,applyActivation:oe}=(0,S.getActivationSnippet)(x),Z=(0,L.getGlsl)(h.session.backend.glContext.version),ae=`\n${X}\nfloat process(int indices[${G}]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ${U[0]} + im2col[1] * ${U[1]} + im2col[2] * ${U[2]};\n  int kernelOffset = indices[1] * ${T[1]};\n  float value = ${W};\n  for (int i = 0; i < ${K}; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ${N}, ${$});\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ${P}, ${B});\n    value += dot(${Z.texture2D}(Im2Col, im2colCoords), ${Z.texture2D}(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ${oe}\n  return value;\n}`;return Object.assign(Object.assign({},f),{output:{dims:b,type:g[0].type,textureType:V.TextureType.unpacked},shaderSource:ae})})(C,l,w,_,u)})}},7992:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseFlattenAttributes=F.flatten=void 0;const z=q(2517);F.flatten=(V,S,O)=>{L(S,O);const C=z.ShapeUtil.flattenShape(S[0].dims,O);return[V.reshapeUnpacked(S[0],C)]},F.parseFlattenAttributes=V=>V.attributes.getInt("axis",1);const L=(V,S)=>{if(!V||1!==V.length)throw new Error("Flatten requires 1 input.");const O=V[0].dims.length;if(0===O)throw new Error("scalar tensor is not supported.");if(S<-O||S>O)throw new Error("Invalid axis");if("string"===V[0].type)throw new Error("string tensor is not supported.")}},2823:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseInternalActivationAttributes=F.getActivationSnippet=void 0;const z=q(2517),L=q(4909);F.getActivationSnippet=function(V){let S;switch(V.activation){case"Relu":S=(0,L.glslRelu)();break;case"Sigmoid":S=(0,L.glslSigmoid)();break;case"Clip":S=(0,L.glslClip)(V.clipMin,V.clipMax);break;default:return{activationFunction:"",applyActivation:""}}return{activationFunction:S.body,applyActivation:`value = ${S.name}_(value);`}},F.parseInternalActivationAttributes=V=>{const S=V.getString("activation","");if("Clip"===S){const[O,C]=V.getFloats("activation_params",[z.MIN_CLIP,z.MAX_CLIP]);return{activation:S,clipMax:C,clipMin:O,activationCacheKey:`${S}:${O},${C}`}}return{activation:S,activationCacheKey:S}}},1253:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseGatherAttributes=F.gather=void 0;const z=q(246),L=q(782),V=q(2517),S=q(2039);F.gather=(_,u,l)=>(w(u,l.axis),[_.run(C(_,u,l),u)]),F.parseGatherAttributes=_=>(0,z.createAttributeWithCacheKey)({axis:_.attributes.getInt("axis",0)});const O={name:"Gather",inputNames:["A","B"],inputTypes:[S.TextureType.unpacked,S.TextureType.unpacked]},C=(_,u,l)=>{const h=Object.assign(Object.assign({},O),{cacheHint:l.cacheKey});return Object.assign(Object.assign({},h),{get:()=>((f,g,b,x)=>{const A=b[0].dims.slice(),k=b[1].dims.slice(),T=new Array(A.length+k.length-1);x=V.ShapeUtil.normalizeAxis(x,A.length);const M=[];for(let B=0;B<T.length;B++)B<x?(T[B]=A[B],M.push(`inputIdx[${B}] = outputIdx[${B}];`)):B<x+k.length?(T[B]=k[B-x],M.push(`indexDataIdx[${B-x}] = outputIdx[${B}];`)):(T[B]=A[B-k.length+1],M.push(`inputIdx[${B-k.length+1}] = outputIdx[${B}];`));const P=`\n      float process(int outputIdx[${T.length||1}]) {\n        int inputIdx[${A.length}];\n        int indexDataIdx[${k.length||1}];\n        indexDataIdx[0] = 0;\n        ${M.join("\n        ")}\n        int idx = int(_B(indexDataIdx));\n        inputIdx[${x}] = idx < 0 ? idx + ${A[x]} : idx;\n        return _A(inputIdx);\n      }`;return Object.assign(Object.assign({},g),{output:{dims:T,type:b[0].type,textureType:S.TextureType.unpacked},shaderSource:P})})(0,h,u,l.axis)})},w=(_,u)=>{if(!_||2!==_.length)throw new Error("Gather requires 2 inputs.");const l=_[0].dims.length;if(l<1)throw new Error("Invalid input shape.");if(u<-l||u>l-1)throw new Error("Invalid axis.");if(-1===L.NUMBER_TYPES.indexOf(_[0].type))throw new Error("Invaid input type.");if("int32"!==_[1].type&&"int16"!==_[1].type)throw new Error("Invaid input type.")}},4776:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseGemmAttributesV11=F.parseGemmAttributesV7=F.gemm=void 0;const z=q(246),L=q(2517),V=q(2039);F.gemm=(_,u,l)=>(w(u,l),[_.run(O(u,l),u)]);const S=(_,u)=>{const l=0!==_.attributes.getInt("transA",0),h=0!==_.attributes.getInt("transB",0),f=_.attributes.getFloat("alpha",1),g=_.attributes.getFloat("beta",1);return(0,z.createAttributeWithCacheKey)({transA:l,transB:h,alpha:f,beta:g,isOptionalC:u})};F.parseGemmAttributesV7=_=>S(_,!1),F.parseGemmAttributesV11=_=>S(_,!0);const O=(_,u)=>{const l={name:"Gemm",inputNames:3===_.length?["A","B","C"]:["A","B"],inputTypes:3===_.length?[V.TextureType.unpacked,V.TextureType.unpacked,V.TextureType.unpacked]:[V.TextureType.unpacked,V.TextureType.unpacked],key:u.cacheKey};return Object.assign(Object.assign({},l),{get:()=>C(l,_,u)})},C=(_,u,l)=>{const h=u[0].dims.slice(),f=u[1].dims.slice(),[g,b]=L.GemmUtil.getShapeOfGemmResult(h,l.transA,f,l.transB,3===u.length?u[2].dims:void 0),x=[g,b];if(!x)throw new Error("Can't use gemm on the given tensors");let A=h[h.length-1],k="";l.transA&&(A=h[0]),l.transA&&l.transB?k="value += _A_T(a) * _B_T(b);":l.transA&&!l.transB?k="value += _A_T(a) * _B(b);":!l.transA&&l.transB?k="value += _A(a) * _B_T(b);":l.transA||l.transB||(k="value += _A(a) * _B(b);");const T=x.length,M=`\n      float process(int indices[${T}]) {\n          int a[${T}];\n          int b[${T}];\n          ${3===u.length?`int c[${u[2].dims.length}];`:""}\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ${3===u.length?"bcastIndices_C(indices, c);":""}\n\n          float value = 0.0;\n          for (int k=0; k<${A}; ++k) {\n              a[${T-1}] = k;\n              b[${T-2}] = k;\n              ${k}\n          }\n\n          value = value * alpha;\n          ${3===u.length?"value += beta * _C(c);":""}\n          return value;\n      }`;return Object.assign(Object.assign({},_),{output:{dims:x,type:u[0].type,textureType:V.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:l.alpha},{name:"beta",type:"float",data:l.beta}],shaderSource:M})},w=(_,u)=>{if(!_)throw new Error("Input is missing");if(u.isOptionalC&&(_.length<2||_.length>3))throw new Error("Invaid input shape.");if(!u.isOptionalC&&3!==_.length)throw new Error("Gemm requires 3 inputs");if(3===_.length&&1!==_[2].dims.length&&2!==_[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==_[0].type&&"float64"!==_[0].type||"float32"!==_[1].type&&"float64"!==_[1].type||3===_.length&&"float32"!==_[2].type&&"float64"!==_[2].type)throw new Error("Invalid input type.");if(_[0].type!==_[1].type||3===_.length&&_[0].type!==_[2].type)throw new Error("Input types are mismatched")}},8555:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createPackedIm2ColProgramInfoLoader=void 0;const z=q(5060),L=q(2039),V=q(2827);F.createPackedIm2ColProgramInfoLoader=(S,O,C,w,_)=>{const u={name:"Im2Col (packed)",inputNames:["A"],inputTypes:[L.TextureType.packed],cacheHint:_.cacheKey};return Object.assign(Object.assign({},u),{get:()=>((h,f,g,b,x,A)=>{const k=g.dims,T=b.dims,M=x.length,P=[T[1]*T[2]*T[3],x[2]*x[3]],B=T[2]*T[3],U=(0,V.unpackFromChannel)(),N=(0,z.getGlsl)(h.session.backend.glContext.version);let $="";for(let W=0;W<=1;W++)for(let K=0;K<=1;K++)$+=`\n            blockIndex = rc.x + ${K};\n            pos = rc.y + ${W};\n\n            if(blockIndex < ${P[1]} && pos < ${P[0]}) {\n              offsetY = int(blockIndex / (${x[M-1]})) * ${A.strides[0]} -\n                ${A.pads[0]};\n              d0 = offsetY + ${A.dilations[0]} * (imod(pos, ${B}) / ${T[2]});\n\n              if(d0 < ${k[2]} && d0 >= 0) {\n                offsetX = imod(blockIndex, ${x[M-1]}) * ${A.strides[1]} -\n                  ${A.pads[1]};\n                d1 = offsetX + ${A.dilations[1]} * imod(imod(pos, ${B}), ${T[2]});\n\n                if(d1 < ${k[3]} && d1 >= 0) {\n\n                  ch = int(float(pos)/ ${B}.);\n                    innerDims = vec2(d0, d1);\n                    result[${2*W+K}] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          `;const G=`\n      ${U}\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ${$}\n          ${N.output} = result;\n      }\n            `;return Object.assign(Object.assign({},f),{output:{dims:P,type:g.type,textureType:L.TextureType.packed},shaderSource:G,hasMain:!0})})(S,u,O,C,w,_)})}},3248:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.calculateIm2ColDims=F.createIm2ColProgramInfoLoader=void 0;const z=q(2039);F.createIm2ColProgramInfoLoader=(L,V,S,O,C)=>{const w={name:"Im2Col",inputNames:["X"],inputTypes:[z.TextureType.unpacked],cacheHint:C.cacheKey};return Object.assign(Object.assign({},w),{get:()=>((u,l,h,f,g,b)=>{const x=h.dims,k=g.length,T=(0,F.calculateIm2ColDims)(x,f.dims,g,4),M=`\n        const int XC = ${x[1]};\n        const int XH = ${x[2]};\n        const int XW = ${x[3]};\n        const int KH = ${b.kernelShape[0]};\n        const int KW = ${b.kernelShape[1]};\n        const int dilationH = ${b.dilations[0]};\n        const int dilationW = ${b.dilations[1]};\n        const int strideH = ${b.strides[0]};\n        const int strideW = ${b.strides[1]};\n        const int padH = ${b.pads[0]};\n        const int padW = ${b.pads[1]};\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[${k}]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[${x.length}];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        `;return Object.assign(Object.assign({},l),{output:{dims:T,type:h.type,textureType:z.TextureType.packedLastDimension},shaderSource:M})})(0,w,V,S,O,C)})},F.calculateIm2ColDims=(L,V,S,O=4)=>[S[0],S[2],S[3],Math.ceil(L[1]*V[2]*V[3]/O)]},6572:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseImageScalerAttributes=F.imageScaler=void 0;const z=q(246),L=q(2039);F.imageScaler=(w,_,u)=>(C(_),[w.run(S(w,_,u),_)]),F.parseImageScalerAttributes=w=>{const _=w.attributes.getFloat("scale"),u=w.attributes.getFloats("bias");return(0,z.createAttributeWithCacheKey)({scale:_,bias:u})};const V={name:"ImageScaler",inputNames:["X"],inputTypes:[L.TextureType.unpacked]},S=(w,_,u)=>{const l=Object.assign(Object.assign({},V),{cacheHint:u.cacheKey});return Object.assign(Object.assign({},l),{get:()=>((h,f,g,b)=>{const x=g[0].dims.slice(),A=x.length,k=`\n      ${O(b.bias.length)}\n      float process(int indices[${A}]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }`;return Object.assign(Object.assign({},f),{output:{dims:x,type:g[0].type,textureType:L.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:b.bias.length,data:b.bias},{name:"scale",type:"float",data:b.scale}],shaderSource:k})})(0,l,_,u)})},O=w=>{const _=[`float getBias(float bias[${w}], int channel) {`];for(let u=0;u<w;++u)_.push(0===u?`\tif (channel == ${u}) { return bias[${u}]; }`:u===w-1?`\telse { return bias[${u}]; }`:`\telse if (channel == ${u}) { return bias[${u}]; }`);return _.push("\t}"),_.join("\n")},C=w=>{if(!w||1!==w.length)throw new Error("ImageScaler requires 1 input.");if(4!==w[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==w[0].type&&"float64"!==w[0].type)throw new Error("Invalid input type.")}},3346:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseInstanceNormalizationAttributes=F.instanceNormalization=void 0;const z=q(5060),L=q(2039);F.instanceNormalization=(_,u,l)=>{w(u);const h=_.run(S(u[0]),u);return[_.run(C(_,u[0],l,h.dims),[u[0],h,u[1],u[2]])]},F.parseInstanceNormalizationAttributes=_=>_.attributes.getFloat("epsilon",1e-5);const V={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[L.TextureType.unpacked]},S=_=>Object.assign(Object.assign({},V),{get:()=>((u,l)=>{const h=l.dims.slice(),g=h[2]*h[3],b=[h[0],h[1]],x=`\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<${h[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${h[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(${g});\n        temp = 0.0;\n        for(int a2=0; a2<${h[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${h[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(${g});\n\n        return v;\n      }`;return Object.assign(Object.assign({},u),{output:{dims:b,type:l.type,textureType:L.TextureType.packedLastDimension},shaderSource:x})})(V,_)}),O={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[L.TextureType.unpacked,L.TextureType.packedLastDimension,L.TextureType.unpacked,L.TextureType.unpacked]},C=(_,u,l,h)=>{const f=Object.assign(Object.assign({},O),{cacheHint:`${l}`});return Object.assign(Object.assign({},f),{get:()=>((g,b,x,A,k)=>{const T=(0,z.getGlsl)(g.session.backend.glContext.version),[M,P]=g.calculateTextureWidthAndHeight(k,L.TextureType.packedLastDimension),[B,U]=[M/4,P],N=`\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ${B}, ${U});\n        return ${T.texture2D}(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }`;return Object.assign(Object.assign({},b),{output:{dims:x.dims,type:x.type,textureType:L.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:A}],shaderSource:N})})(_,f,u,l,h)})},w=_=>{if(!_||3!==_.length)throw new Error("InstanceNormalization requires 3 inputs.");const u=_[0],l=_[1],h=_[2];if(u.dims.length<3||1!==l.dims.length||1!==h.dims.length)throw new Error("Invalid input shape.");if(l.dims[0]!==u.dims[1]||h.dims[0]!==u.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==u.type&&"float64"!==u.type||"float32"!==l.type&&"float64"!==l.type||"float32"!==h.type&&"float64"!==h.type)throw new Error("Invalid input type.");if(4!==_[0].dims.length)throw new Error("Only support 4-D input shape.")}},708:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createPackedMatmulProgramInfoLoader=void 0;const z=q(2517),L=q(5060),V=q(2039),S=q(9390),O=q(2823),C=q(5623);F.createPackedMatmulProgramInfoLoader=(w,_,u)=>{const l={name:"MatMul (packed)",inputNames:(h=_.length>2)?["A","B","Bias"]:["A","B"],inputTypes:h?[V.TextureType.packed,V.TextureType.packed,V.TextureType.packed]:[V.TextureType.packed,V.TextureType.packed],cacheHint:u.activationCacheKey};var h;return Object.assign(Object.assign({},l),{get:()=>((g,b,x,A)=>{const k=x.length>2,T=k?"value += getBiasForMatmul();":"",M=x[0].dims,P=x[1].dims,B=z.BroadcastUtil.calcShape(M,P,!0),U=!z.ShapeUtil.areEqual(x[0].dims,x[1].dims);if(!B)throw new Error("Can't use matmul on the given tensors");const $=Math.ceil(M[M.length-1]/2),G=M.length,W=P.length,K=(0,L.getGlsl)(g.session.backend.glContext.version),X=(0,S.getCoordsDataType)(B.length),oe=B.length,Z=(0,S.getGlChannels)(),{activationFunction:ae,applyActivation:pe}=(0,O.getActivationSnippet)(A),ge=k?`${(0,C.getBiasForMatmul)(X,Z,x[2].dims,B,!0)}`:"",je=U?`${function(Ae,Ue,qe,Mt){let gt=[],zt=[];const Ce=qe[0].dims,Le=qe[1].dims,Yt=Ce.length,Ct=Le.length,Ne=Mt.length,Wt=Ne-Yt,En=Ne-Ct;gt=Ce.map((Sn,Q)=>`coords.${Ue[Q+Wt]}`),gt[Yt-1]="i*2",gt.join(", "),zt=Le.map((Sn,Q)=>`coords.${Ue[Q+En]}`),zt[Ct-2]="i*2",zt.join(", ");const rn=z.BroadcastUtil.getBroadcastDims(Ce,Mt),dn=z.BroadcastUtil.getBroadcastDims(Le,Mt),hi=rn.map(Sn=>`coords.${Ue[Sn+Wt]} = 0;`).join("\n"),ii=dn.map(Sn=>`coords.${Ue[Sn+En]} = 0;`).join("\n"),Ki=`int lastDim = coords.${Ue[Ne-1]};\n  coords.${Ue[Ne-1]} = coords.${Ue[Ne-2]};\n  coords.${Ue[Ne-2]} = lastDim;`;return`\nvec4 getAAtOutCoordsMatmul(int i) {\n  ${Ae} coords = getOutputCoords();\n  ${Ki}\n  ${hi}\n  vec4 outputValue = getA(${gt});\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ${Ae} coords = getOutputCoords();\n  ${Ki}\n  ${ii}\n  vec4 outputValue = getB(${zt});\n  return outputValue;\n}`}(X,Z,x,B)}`:"",de=U?"getAAtOutCoordsMatmul(i)":`getA(${function(Ae,Ue){let qe="";for(let Mt=0;Mt<Ue-2;Mt++)qe+=`rc.${Ae[Mt]}, `;return qe+=`rc.${Ae[Ue-2]}, i*2`,qe}(Z,G)})`,Be=U?"getBAtOutCoordsMatmul(i)":`getB(${function(Ae,Ue){let qe="";for(let Mt=0;Mt<Ue-2;Mt++)qe+=`rc.${Ae[Mt]}, `;return qe+=`i*2, rc.${Ae[Ue-1]}`,qe}(Z,W)})`,ee=`\n            ${je}\n            ${ge}\n            ${ae}\n            void main() {\n              ${U?"":`${X} rc =\n          getOutputCoords(); int lastDim = rc.${Z[oe-1]}; rc.${Z[oe-1]} =\n          rc.${Z[oe-2]}; rc.${Z[oe-2]} = lastDim;\n      `}\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ${$}; i++) {\n                vec4 a = ${de};\n                vec4 b = ${Be};\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ${T}\n              ${pe}\n              ${K.output} = value;\n            }`;return Object.assign(Object.assign({},b),{output:{dims:B,type:x[0].type,textureType:V.TextureType.packed},shaderSource:ee,hasMain:!0})})(w,l,_,u)})}},5623:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getBiasForMatmul=F.createMatmulProgramInfoLoader=F.parseMatMulAttributes=F.matMul=void 0;const z=q(2517),L=q(2039),V=q(9390),S=q(2823),O=q(708);function C(u,l){const h={name:"MatMul",inputNames:(f=u.length>2)?["A","B","Bias"]:["A","B"],inputTypes:f?[L.TextureType.unpacked,L.TextureType.unpacked,L.TextureType.unpacked]:[L.TextureType.unpacked,L.TextureType.unpacked],cacheHint:l.activationCacheKey};var f;return Object.assign(Object.assign({},h),{get:()=>function(b,x,A){const k=x[0].dims,T=x[1].dims,M=z.BroadcastUtil.calcShape(k,T,!0);if(!M)throw new Error("Can't use matmul on the given tensors");const P=(0,V.getCoordsDataType)(M.length),B=(0,V.getGlChannels)(),{activationFunction:U,applyActivation:N}=(0,S.getActivationSnippet)(A),$=x.length>2,G=$?"value += getBiasForMatmul();":"",W=$?`${_(P,B,x[2].dims,M,!1)}`:"",X=k.length,oe=T.length,Z=`\n    ${U}\n    ${W}\n    float process(int indices[${M.length}]) {\n        int a[${X}];\n        int b[${oe}];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<${k[k.length-1]}; ++k) {\n            a[${X-1}] = k;\n            b[${oe-2}] = k;\n            value += _A(a) * _B(b);\n        }\n        ${G}\n        ${N}\n        return value;\n    }`;return Object.assign(Object.assign({},b),{output:{dims:M,type:x[0].type,textureType:L.TextureType.unpacked},shaderSource:Z})}(h,u,l)})}F.matMul=(u,l,h)=>(w(l),u.session.pack?[u.run((0,O.createPackedMatmulProgramInfoLoader)(u,l,h),l)]:[u.run(C(l,h),l)]),F.parseMatMulAttributes=u=>(0,S.parseInternalActivationAttributes)(u.attributes),F.createMatmulProgramInfoLoader=C;const w=u=>{if(!u||2!==u.length)throw new Error("MatMul requires 2 inputs.");if(u[0].dims[u[0].dims.length-1]!==u[1].dims[u[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==u[0].type&&"float64"!==u[0].type||"float32"!==u[1].type&&"float64"!==u[1].type)throw new Error("inputs should be float type");if(u[0].type!==u[1].type)throw new Error("inputs types should match")};function _(u,l,h,f,g){let b="";const x=h.length,A=f.length,k=A-x;b=A<2&&x>0?"coords":h.map((P,B)=>`coords.${l[B+k]}`).join(", ");const T=z.BroadcastUtil.getBroadcastDims(h,f).map(P=>`coords.${l[P+k]} = 0;`).join("\n");let M="vec4(outputValue.xx, outputValue.yy)";return 1===z.ShapeUtil.size(h)&&(M="vec4(outputValue.x)"),g?`\nvec4 getBiasForMatmul() {\n  ${u} coords = getOutputCoords();\n  ${T}\n  vec4 outputValue = getBias(${b});\n  return ${M};\n}`:`\nfloat getBiasForMatmul() {\n  ${u} coords = getOutputCoords();\n  ${T}\n  return getBias(coords.x);\n}`}F.getBiasForMatmul=_},2403:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createPackProgramInfoLoader=void 0;const z=q(5060),L=q(2039),V=q(9390),S=q(2827),O={name:"pack",inputNames:["A"],inputTypes:[L.TextureType.unpackedReversed]};F.createPackProgramInfoLoader=(C,w)=>Object.assign(Object.assign({},O),{get:()=>((_,u)=>{const l=(0,z.getGlsl)(_.session.backend.glContext.version),h=u.dims,f=h.length,g=u.dims.length,b=(0,V.getCoordsDataType)(g),x=(0,S.getChannels)("rc",g),A=(T=x,0===(k=g)||1===k?"":`\n    int r = ${T[k-2]};\n    int c = ${T[k-1]};\n    int rp1 = ${T[k-2]} + 1;\n    int cp1 = ${T[k-1]} + 1;\n    bool rEdge = rp1 >= ${h[h.length-1]};\n    bool cEdge = cp1 >= ${h[h.length-2]};\n    `);var k,T;let B;B=0===f?[1,1]:1===f?[h[0],1]:[h[g-1],h[g-2]];const U=function(G,W,K){if(0===G)return"false";if(1===G)return`rc > ${W[0]}`;let X="";for(let oe=G-2;oe<G;oe++)X+=`${K[oe]} >= ${W[oe-G+2]}`,oe<G-1&&(X+="||");return X}(g,B,x),N=function(G,W){const K=G.length;if(0===K)return"getA(), 0, 0, 0";if(1===K)return`getA(rc),\n            rc + 1 >= ${G[0]} ? 0. : getA(rc + 1),\n            0, 0`;let X="";if(K>2)for(let oe=0;oe<K-2;++oe)X+=`${W[oe]},`;return`getA(${X}r, c),\n          rEdge ? 0. : getA(${X}rp1, c),\n          cEdge ? 0. : getA(${X}r, cp1),\n          rEdge || cEdge ? 0. : getA(${X}rp1, cp1)`}(h,x),$=`\n        void main() {\n          ${b} rc = getOutputCoords();\n\n          if(${U}) {\n            ${l.output} = vec4(0);\n          } else {\n            ${A}\n\n            ${l.output} = vec4(${N});\n          }\n        }\n      `;return Object.assign(Object.assign({},O),{hasMain:!0,output:{dims:u.dims,type:u.type,textureType:L.TextureType.packed},shaderSource:$})})(C,w)})},2827:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.unpackFromChannel=F.getChannels=F.getVecChannels=void 0;const z=q(9390);function L(V,S){return(0,z.getGlChannels)(S).map(O=>`${V}.${O}`)}F.getVecChannels=L,F.getChannels=function(V,S){return 1===S?[V]:L(V,S)},F.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},2870:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parsePadAttributesV11=F.padV11=F.parsePadAttributesV2=F.padV2=void 0;const z=q(246),L=q(2517),V=q(5060),S=q(2039),O={name:"Pad",inputNames:["A"],inputTypes:[S.TextureType.unpacked]};F.padV2=(b,x,A)=>(_(x),[b.run(Object.assign(Object.assign({},O),{cacheHint:A.cacheKey,get:()=>w(b,x[0],A)}),x)]),F.parsePadAttributesV2=b=>{const x=b.attributes.getString("mode","constant"),A=b.attributes.getFloat("value",0),k=b.attributes.getInts("pads");return(0,z.createAttributeWithCacheKey)({mode:x,value:A,pads:k})},F.padV11=(b,x,A)=>{u(x);const k=C(b,x,A);return(0,F.padV2)(b,[x[0]],k)},F.parsePadAttributesV11=b=>b.attributes.getString("mode","constant");const C=(b,x,A)=>{if(!b.session.isInitializer(x[1].dataId)||x.length>=3&&!b.session.isInitializer(x[2].dataId))throw new Error("dynamic pad attributes are not allowed");const k=Array.from(x[1].integerData);return(0,z.createAttributeWithCacheKey)({mode:A,pads:k,value:x.length>=3?x[2].floatData[0]:0})},w=(b,x,A)=>{const k=L.ShapeUtil.padShape(x.dims.slice(),A.pads),T=k.length,M=`\n      ${l(b,x,A)}\n      float process(int[${T}] indices) {\n          return padA(indices);\n      }`;return{name:"Pad",inputNames:["A"],inputTypes:[S.TextureType.unpacked],output:{dims:k,type:x.type,textureType:S.TextureType.unpacked},shaderSource:M}},_=b=>{if(!b||1!==b.length)throw new Error("Pad requires 1 input");if("float32"!==b[0].type&&"float64"!==b[0].type)throw new Error("Invalid input type.")},u=b=>{if(!b||2!==b.length&&3!==b.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==b[1].type)throw new Error("Invalid input type.");if(b.length>=3&&"string"===b[2].type)throw new Error("Invalid input type.")},l=(b,x,A)=>{const k=(0,V.getGlsl)(b.session.backend.glContext.version),[T,M]=b.calculateTextureWidthAndHeight(x.dims,S.TextureType.unpacked),P=L.ShapeUtil.computeStrides(x.dims);switch(A.mode){case"constant":return h(k,x.dims,P,T,M,A.pads,A.value);case"reflect":return f(k,x.dims,P,T,M,A.pads);case"edge":return g(k,x.dims,P,T,M,A.pads);default:throw new Error("Invalid mode")}},h=(b,x,A,k,T,M,P)=>{const B=x.length;let U="";for(let N=B-1;N>=0;--N)U+=`\n        k = m[${N}] - ${M[N]};\n        if (k < 0)  return constant;\n        if (k >= ${x[N]}) return constant;\n        offset += k * ${A[N]};\n        `;return`\n      float padA(int m[${B}]) {\n        const float constant = float(${P});\n        int offset = 0;\n        int k = 0;\n        ${U}\n        vec2 coords = offsetToCoords(offset, ${k}, ${T});\n        float value = getColorAsFloat(${b.texture2D}(A, coords));\n        return value;\n      }\n      `},f=(b,x,A,k,T,M)=>{const P=x.length;let B="";for(let U=P-1;U>=0;--U)B+=`\n        k = m[${U}] - ${M[U]};\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ${2*(x[U]-1)};\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ${x[U]}) { k = _2n_1 - k; }\n        }\n        offset += k * ${A[U]};\n        `;return`\n      float padA(int m[${P}]) {\n        int offset = 0;\n        int k = 0;\n        ${B}\n        vec2 coords = offsetToCoords(offset, ${k}, ${T});\n        float value = getColorAsFloat(${b.texture2D}(A, coords));\n        return value;\n      }\n      `},g=(b,x,A,k,T,M)=>{const P=x.length;let B="";for(let U=P-1;U>=0;--U)B+=`\n        k = m[${U}] - ${M[U]};\n        if (k < 0)  k = 0;\n        if (k >= ${x[U]}) k = ${x[U]-1};\n        offset += k * ${A[U]};\n      `;return`\n      float padA(int m[${P}]) {\n        int offset = 0;\n        int k = 0;\n        ${B}\n        vec2 coords = offsetToCoords(offset, ${k}, ${T});\n        float value = getColorAsFloat(${b.texture2D}(A, coords));\n        return value;\n      }\n      `}},2143:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.globalMaxPool=F.parseMaxPoolAttributes=F.maxPool=F.parseGlobalAveragePoolAttributes=F.globalAveragePool=F.parseAveragePoolAttributes=F.averagePool=void 0;const z=q(246),L=q(2517),V=q(2039);F.averagePool=(g,b,x)=>{u(b);const A={name:"AveragePool",inputNames:["X"],inputTypes:[V.TextureType.unpacked],cacheHint:x.cacheKey};return[g.run(Object.assign(Object.assign({},A),{get:()=>S(b,A,!1,x)}),b)]},F.parseAveragePoolAttributes=g=>{const b=g.attributes.getString("auto_pad","NOTSET"),x=g.attributes.getInt("ceil_mode",0),A=0!==g.attributes.getInt("count_include_pad",0),k=g.attributes.getInts("kernel_shape"),T=g.attributes.getInts("strides",[]),M=g.attributes.getInts("pads",[]);if(0!==x)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,z.createAttributeWithCacheKey)({autoPad:b,ceilMode:x,countIncludePad:A,kernelShape:k,strides:T,pads:M})};const S=(g,b,x,A)=>{const[k,T]=C(g,A,x),M=L.ShapeUtil.size(k.kernelShape);let P="";P+=k.countIncludePad?`value /= float(${M});`:`value /= float(${M} - pad);`;const B=`\n        ${l(g[0].dims,k,"value += _X(x);",P,"0.0")}\n      `;return Object.assign(Object.assign({},b),{output:{dims:T,type:g[0].type,textureType:V.TextureType.unpacked},shaderSource:B})};F.globalAveragePool=(g,b,x)=>{u(b);const A={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[V.TextureType.unpacked],cacheHint:`${x.countIncludePad}`};return[g.run(Object.assign(Object.assign({},A),{get:()=>S(b,A,!0,x)}),b)]},F.parseGlobalAveragePoolAttributes=g=>{const b=0!==g.attributes.getInt("count_include_pad",0);return(0,z.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:b,kernelShape:[],strides:[],pads:[]})},F.maxPool=(g,b,x)=>{u(b);const A={name:"MaxPool",inputNames:["X"],inputTypes:[V.TextureType.unpacked],cacheHint:x.cacheKey};return[g.run(Object.assign(Object.assign({},A),{get:()=>O(b,A,!1,x)}),b)]},F.parseMaxPoolAttributes=g=>{const b=g.attributes.getString("auto_pad","NOTSET"),x=g.attributes.getInt("ceil_mode",0),A=g.attributes.getInts("kernel_shape"),k=g.attributes.getInts("strides",[]),T=g.attributes.getInts("pads",[]),M=g.attributes.getInt("storage_order",0),P=g.attributes.getInts("dilations",[]);if(0!==M)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==x)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,z.createAttributeWithCacheKey)({autoPad:b,ceilMode:x,countIncludePad:!1,kernelShape:A,strides:k,pads:T,storageOrder:M,dilations:P})};const O=(g,b,x,A)=>{const[k,T]=C(g,A,x),M=`\n      ${l(g[0].dims,k,"\n      value = max(_X(x), value);\n    ","","-1e5")}\n    `;return Object.assign(Object.assign({},b),{output:{dims:T,type:g[0].type,textureType:V.TextureType.unpacked},shaderSource:M})},C=(g,b,x)=>{const A=g[0].dims.slice(),k=Object.hasOwnProperty.call(b,"dilations"),T=b.kernelShape.slice(),M=b.strides.slice(),P=k?b.dilations.slice():[],B=b.pads.slice();L.PoolConvUtil.adjustPoolAttributes(x,A,T,M,P,B);const U=L.PoolConvUtil.computePoolOutputShape(x,A,M,P,T,B,b.autoPad),N=Object.assign({},b);return Object.assign(N,k?{kernelShape:T,strides:M,pads:B,dilations:P,cacheKey:b.cacheKey}:{kernelShape:T,strides:M,pads:B,cacheKey:b.cacheKey}),[N,U]},w={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},_={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[V.TextureType.unpacked]};F.globalMaxPool=(g,b)=>(u(b),[g.run(Object.assign(Object.assign({},_),{get:()=>O(b,_,!0,w)}),b)]);const u=g=>{if(!g||1!==g.length)throw new Error("Pool ops requires 1 input.");if("float32"!==g[0].type&&"float64"!==g[0].type)throw new Error("Invalid input type.")},l=(g,b,x,A,k)=>{const T=g.length;if(b.kernelShape.length<=2){const M=b.kernelShape[b.kernelShape.length-1],P=b.strides[b.strides.length-1],B=b.pads[b.pads.length/2-1];let $="",G="",W="";if($=B+b.pads[b.pads.length-1]!==0?`\n          for (int i = 0; i < ${M}; i++) {\n            x[${T} - 1] = indices[${T} - 1] * ${P} - ${B} + i;\n            if (x[${T} - 1] < 0 || x[${T} - 1] >= ${g[T-1]}) {\n              pad++;\n              continue;\n            }\n            ${x}\n          }`:`\n          for (int i = 0; i < ${M}; i++) {\n            x[${T} - 1] = indices[${T} - 1] * ${P} - ${B} + i;\n            ${x}\n          }`,2===b.kernelShape.length){const K=b.kernelShape[b.kernelShape.length-2],X=b.strides[b.strides.length-2],oe=b.pads[b.pads.length/2-2];G=oe+b.pads[b.pads.length-2]!==0?`\n            for (int j = 0; j < ${K}; j++) {\n              x[${T} - 2] = indices[${T} - 2] * ${X} - ${oe} + j;\n              if (x[${T} - 2] < 0 || x[${T} - 2] >= ${g[T-2]}) {\n                pad+= ${M};\n                continue;\n              }\n          `:`\n            for (int j = 0; j < ${K}; j++) {\n              x[${T} - 2] = indices[${T} - 2] * ${X} - ${oe} + j;\n            `,W="\n          }\n        "}return`\n        float process(int indices[${T}]) {\n          int x[${T}];\n          copyVec(indices, x);\n\n          float value = ${k};\n          int pad = 0;\n          ${G}\n          ${$}\n          ${W}\n          ${A}\n          return value;\n        }\n      `}{const M=L.ShapeUtil.size(b.kernelShape),P=L.ShapeUtil.computeStrides(b.kernelShape),B=P.length,U=b.pads.length,N=f(B),$=h(g,"inputDims"),G=h(b.pads,"pads"),W=h(P,"kernelStrides"),K=h(b.strides,"strides");let X="";return X=b.pads.reduce((oe,Z)=>oe+Z)?`\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ${x}\n          }`:`\n          }\n          ${x}\n        `,`\n        ${N}\n        float process(int indices[${T}]) {\n          int x[${T}];\n          copyVec(indices, x);\n          int offset[${B}];\n          int pads[${U}];\n          int inputDims[${T}];\n          int kernelStrides[${B}];\n          int strides[${B}];\n          ${G}\n          ${$}\n          ${K}\n          ${W}\n\n          float value = ${k};\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ${M}; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ${T} - ${B}; j < ${T}; j++) {\n              x[j] = indices[j] * strides[j - ${T} + ${B}]\n                + offset[j - ${T} + ${B}] - pads[j - 2];\n              ${X}\n          }\n          ${A}\n\n          return value;\n        }\n      `}},h=(g,b)=>{let x="";for(let A=0;A<g.length;A++)x+=`\n      ${b}[${A}] = ${g[A]};\n    `;return x},f=g=>`\n  void offsetToIndices(int offset, int[${g}] strides, out int[${g}] indices) {\n    if (${g} == 0) {\n      return;\n    }\n    for (int i = 0; i < ${g} - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[${g} - 1] = offset;\n  }`},4939:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.reduceLogSumSquare=F.reduceLogSum=F.reduceProd=F.reduceMin=F.reduceMax=F.reduceMean=F.reduceSum=F.parseReduceAttributes=void 0;const z=q(246),L=q(782),V=q(2517),S=q(2039),O=(_,u,l,h,f)=>{w(u);const g={name:h,inputNames:["A"],inputTypes:[S.TextureType.unpacked]};return[_.run(Object.assign(Object.assign({},g),{cacheHint:l.cacheKey,get:()=>C(_,u,l,h,f,g)}),u)]};F.parseReduceAttributes=_=>{const u=_.attributes.getInts("axes",[]),l=1===_.attributes.getInt("keepdims",1);return(0,z.createAttributeWithCacheKey)({axes:u,keepDims:l})};const C=(_,u,l,h,f,g)=>{const b=[],x=u[0].dims.length||1,A=[],k=V.ShapeUtil.normalizeAxes(l.axes,u[0].dims.length),T=f(u,k);let M=T[1];for(let B=0;B<u[0].dims.length;B++)k.indexOf(B)>=0||0===k.length?(l.keepDims&&b.push(1),M=`\n          for(int j${B} = 0; j${B} < ${u[0].dims[B]}; j${B}++) {\n            inputIdx[${B}] = j${B};\n            ${M}\n          }`):(A.push(`inputIdx[${B}] = outputIdx[${b.length}];`),b.push(u[0].dims[B]));const P=`\n      float process(int outputIdx[${b.length||1}]) {\n        float value;                 // final result\n        int inputIdx[${x}];      // addressing input data\n        ${A.join("\n")}\n        ${T[0]}       // init ops for reduce max/min\n        ${M}\n        ${T[2]}       // final computation for reduce mean\n        return value;\n      }`;return Object.assign(Object.assign({},g),{output:{dims:b,type:u[0].type,textureType:S.TextureType.unpacked},shaderSource:P})},w=_=>{if(!_||1!==_.length)throw new Error("Reduce op requires 1 input.");if(-1===L.NUMBER_TYPES.indexOf(_[0].type))throw new Error("Invalid input type.")};F.reduceSum=(_,u,l)=>O(_,u,l,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),F.reduceMean=(_,u,l)=>O(_,u,l,"ReduceMean",(h,f)=>{let g=1;for(let b=0;b<h[0].dims.length;b++)(f.indexOf(b)>=0||0===f.length)&&(g*=h[0].dims[b]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${g}.;`]}),F.reduceMax=(_,u,l)=>O(_,u,l,"ReduceMax",(h,f)=>{const g=[];for(let b=0;b<h[0].dims.length;b++)(f.indexOf(b)>=0||0===f.length)&&g.push(`inputIdx[${b}] = 0;`);return[`${g.join("\n")}\nvalue = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),F.reduceMin=(_,u,l)=>O(_,u,l,"ReduceMin",(h,f)=>{const g=[];for(let b=0;b<h[0].dims.length;b++)(f.indexOf(b)>=0||0===f.length)&&g.push(`inputIdx[${b}] = 0;`);return[`${g.join("\n")}\nvalue = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),F.reduceProd=(_,u,l)=>O(_,u,l,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),F.reduceLogSum=(_,u,l)=>O(_,u,l,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),F.reduceLogSumSquare=(_,u,l)=>O(_,u,l,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.isReshapeCheap=F.processDims3D=F.createPackedReshape3DProgramInfoLoader=void 0;const z=q(2517),L=q(5060),V=q(2039),S=q(2827);F.createPackedReshape3DProgramInfoLoader=(O,C,w)=>{const _={name:"Reshape (packed)",inputTypes:[V.TextureType.packed],inputNames:["A"],cacheHint:`${w}`};return Object.assign(Object.assign({},_),{get:()=>((u,l,h,f)=>{const g=l.dims,b=f;let x="";for(let T=0;T<4;T++){let M="";switch(T){case 0:M="outputCoords = rc;";break;case 1:M="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:M="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:M="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}x+=`\n        ${M}\n        ${T>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${T}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ${T>0?"}":""}\n      `}const A=(0,L.getGlsl)(u.session.backend.glContext.version),k=`\n      ${function(T){const M=z.ShapeUtil.computeStrides(T),P=["b","r","c"],B="index";return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${M.map((U,N)=>`int ${P[N]} = ${B} / ${U}; ${N===M.length-1?`int ${P[N+1]} = ${B} - ${P[N]} * ${U}`:`index -= ${P[N]} * ${U}`};`).join("")}\n      return ivec3(b, r, c);\n    }\n  `}(g)}\n      ${function(T){const M=z.ShapeUtil.computeStrides(T);return`\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ${M[0]} + coords.z * ${M[1]} + coords.y;\n  }\n`}(b)}\n      ${(0,S.unpackFromChannel)()}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ${b[2]};\n        int cols = ${b[1]};\n\n        ${x}\n        ${A.output} = result;\n      }\n    `;return Object.assign(Object.assign({},h),{output:{dims:b,type:l.type,textureType:V.TextureType.packed},shaderSource:k,hasMain:!0})})(O,C,_,w)})},F.processDims3D=function(O){if(0===O.length)return[1,1,1];let C=1;for(let w=0;w<O.length-2;++w)C*=O[w];return[C,O.length>1?O[O.length-2]:1,O[O.length-1]]},F.isReshapeCheap=function(O,C){let w=!1;return w=0===O.length||0===C.length||(O.length<2||C.length<2?O[O.length-1]===C[C.length-1]:O[O.length-1]===C[C.length-1]&&O[O.length-2]===C[C.length-2]),w}},718:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.reshape=void 0;const z=q(2517);F.reshape=(L,V)=>{const S=z.ShapeUtil.calculateReshapedDims(V[0].dims,V[1].integerData);return L.session.pack?[L.reshapePacked(V[0],S)]:[L.reshapeUnpacked(V[0],S)]}},2268:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseResizeAttributesV11=F.parseResizeAttributesV10=F.resize=void 0;const z=q(5060),L=q(2039),V=q(9390),S=q(2827),O=q(9793),C={name:"Resize",inputNames:["A"],inputTypes:[L.TextureType.packed]};F.resize=(h,f,g)=>((0,O.validateInputs)(f,g),[h.run(Object.assign(Object.assign({},C),{cacheHint:g.cacheKey,get:()=>w(h,f,g)}),f)]),F.parseResizeAttributesV10=h=>(0,O.parseUpsampleAttributes)(h,10),F.parseResizeAttributesV11=h=>(0,O.parseUpsampleAttributes)(h,11);const w=(h,f,g)=>{const b=(0,z.getGlsl)(h.session.backend.glContext.version),[x,A]=_(f,g);if(x.every(X=>1===X)&&"tf_crop_and_resize"!==g.coordinateTransformMode)return Object.assign(Object.assign({},C),{output:{dims:A,type:f[0].type,textureType:L.TextureType.packed},hasMain:!0,shaderSource:`void main() {\n                    vec4 v = ${b.texture2D}(X, TexCoords);\n                    ${b.output} = v;\n                }`});const k=A.length;if(k<2)throw new Error(`output dimension should be at least 2, but got ${k}`);const T=A[k-2],M=A[k-1],P=f[0].dims;if(k!==P.length)throw new Error(`output dimension should match input ${P.length}, but got ${k}`);const B=P[k-2],U=P[k-1],N=x[k-2],$=x[k-1];let G="";if("linear"!==g.mode)throw new Error(`resize (packed) does not support mode: '${g.mode}'`);switch(g.coordinateTransformMode){case"asymmetric":G="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":G="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":G=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ${M}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ${T}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ${M}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ${T}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                `;break;case"align_corners":G=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(${M}.0 - 1.0, ${T}.0 - 1.0, ${M}.0 - 1.0,\n                            ${T}.0 - 1.0);\n                        vec4 original = vec4(${U}.0 - 1.0, ${B}.0 - 1.0, ${U}.0 - 1.0,\n                            ${B}.0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${g.coordinateTransformMode}'`)}const W=(0,V.getCoordsDataType)(k),K=`\n            const vec2 inputWH = vec2(${B}.0, ${U}.0);\n            const vec4 scaleWHWH = vec4(float(${N}), float(${$}), float(${N}), float(${$}));\n            ${(0,S.unpackFromChannel)()}\n            ${G}\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ${W} rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ${T-1};\n                bool hasNextCol = rc.z < ${M-1};\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ${b.output} = vec4(newValue);\n            }\n        `;return Object.assign(Object.assign({},C),{output:{dims:A,type:f[0].type,textureType:L.TextureType.packed},hasMain:!0,shaderSource:K})},_=(h,f)=>{const g=h[0].dims;let b,x=f.scales;if(0===x.length){const k=h[f.scalesInputIdx];if(k&&0!==k.size){if(h[f.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");x=u(k,f.mode,f.isResize)}else{const T=h[f.sizesInputIdx];if(!T||0===T.size)throw new Error("Either scales or sizes MUST be provided as input.");b=Array.from(T.integerData),x=l(b,g,f.mode,f.isResize)}}else if(h[f.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const A=b||g.map((k,T)=>Math.floor(k*x[T]));return[x,A]},u=(h,f,g)=>{const b=Array.from(h.floatData);return(0,O.scalesValidation)(b,f,g),b},l=(h,f,g,b)=>{const x=f.length,A=new Array(x);for(let k=0,T=x;k<T;k++)if(0===f[k]){if(0!==h[k])throw new Error("Input dim is zero but required output dim is non-zero.");A[k]=1}else A[k]=h[k]/f[k];return(0,O.scalesValidation)(A,g,b),A}},8117:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.shape=void 0;const z=q(9162);F.shape=(V,S)=>(L(S),[new z.Tensor([S[0].dims.length],"int32",void 0,void 0,new Int32Array(S[0].dims))]);const L=V=>{if(!V||1!==V.length)throw new Error("Shape requires 1 input.")}},2278:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.sliceV10=F.parseSliceAttributes=F.slice=void 0;const z=q(246),L=q(782),V=q(2517),S=q(2039),O={name:"Slice",inputNames:["A"],inputTypes:[S.TextureType.unpacked]};F.slice=(l,h,f)=>(w(h),[l.run(Object.assign(Object.assign({},O),{cacheHint:f.cacheKey,get:()=>C(l,h[0],f)}),h)]),F.parseSliceAttributes=l=>{const h=l.attributes.getInts("starts"),f=l.attributes.getInts("ends"),g=l.attributes.getInts("axes",[]);return(0,z.createAttributeWithCacheKey)({starts:h,ends:f,axes:g})};const C=(l,h,f)=>{const g=0===f.axes.length?h.dims.slice(0).map((P,B)=>B):f.axes,b=V.ShapeUtil.normalizeAxes(g,h.dims.length),x=f.starts.map((P,B)=>P>h.dims[b[B]]-1?h.dims[b[B]]:V.ShapeUtil.normalizeAxis(P,h.dims[b[B]])),A=f.ends.map((P,B)=>P>h.dims[b[B]]-1?h.dims[b[B]]:V.ShapeUtil.normalizeAxis(P,h.dims[b[B]])),k=h.dims.slice(),T=[];for(let P=0;P<b.length;P++)k[b[P]]=A[P]-x[P],x[P]>0&&T.push(`outputIdx[${b[P]}] += ${x[P]};`);const M=`\n      float process(int outputIdx[${k.length}]) {\n        ${T.join("\n      ")}\n        return _A(outputIdx);\n      }`;return Object.assign(Object.assign({},O),{output:{dims:k,type:h.type,textureType:S.TextureType.unpacked},shaderSource:M})},w=l=>{if(!l||1!==l.length)throw new Error("Slice requires 1 input.");if(-1===L.NUMBER_TYPES.indexOf(l[0].type))throw new Error("Invalid input type.")};F.sliceV10=(l,h)=>{u(h);const f=_(l,h);return[l.run(Object.assign(Object.assign({},O),{cacheHint:f.cacheKey,get:()=>C(l,h[0],f)}),[h[0]])]};const _=(l,h)=>{if(!l.session.isInitializer(h[1].dataId)||!l.session.isInitializer(h[2].dataId)||h.length>=4&&!l.session.isInitializer(h[3].dataId)||h.length>=5&&!l.session.isInitializer(h[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(h.length>=5&&h[4].integerData.some(x=>1!==x))throw new Error("currently non-1 steps is not supported for Slice");const f=Array.from(h[1].integerData),g=Array.from(h[2].integerData),b=h.length>=4?Array.from(h[3].integerData):[];return{starts:f,ends:g,axes:b,cacheKey:`${b};${f};${g}`}},u=l=>{if(!l||l.length<3||l.length>5)throw new Error("Invalid input number.");if("int32"!==l[1].type||1!==l[1].dims.length)throw new Error("Invalid input type.");if("int32"!==l[2].type||1!==l[2].dims.length)throw new Error("Invalid input type.");if(l.length>=4&&("int32"!==l[3].type||1!==l[3].dims.length))throw new Error("Invalid input type.");if(l.length>=5&&("int32"!==l[4].type||1!==l[4].dims.length))throw new Error("Invalid input type.")}},5524:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.softmaxV13=F.parseSoftmaxAttributesV13=F.parseSoftmaxAttributes=F.softmax=void 0;const z=q(246),L=q(2517),V=q(5060),S=q(2039),O=q(3738),C={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[S.TextureType.unpacked]},w={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[S.TextureType.unpacked,S.TextureType.unpacked]},_={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[S.TextureType.unpacked,S.TextureType.unpacked,S.TextureType.unpacked]};F.softmax=(b,x,A)=>{g(x);const k=x[0].dims.slice(),T=L.ShapeUtil.normalizeAxis(A.axis,k.length),M=L.ShapeUtil.sizeToDimension(k,T),P=L.ShapeUtil.sizeFromDimension(k,T);return u(b,x,A,M,P)},F.parseSoftmaxAttributes=b=>(0,z.createAttributeWithCacheKey)({axis:b.attributes.getInt("axis",1)}),F.parseSoftmaxAttributesV13=b=>(0,z.createAttributeWithCacheKey)({axis:b.attributes.getInt("axis",-1)}),F.softmaxV13=(b,x,A)=>{g(x);const k=x[0].dims.slice(),T=L.ShapeUtil.normalizeAxis(A.axis,k.length),M=k.length,P=T!==M-1,B=[];let U,N=[],$=[];P&&(N=Array.from({length:M}).map((X,oe)=>oe),N[T]=M-1,N[M-1]=T,N.map(X=>B.push(k[X])),U=(0,z.createAttributeWithCacheKey)({perm:N}),$=(0,O.transpose)(b,x,U));const G=L.ShapeUtil.sizeToDimension(P?B:k,M-1),W=L.ShapeUtil.sizeFromDimension(P?B:k,M-1),K=u(b,P?$:x,A,G,W);return P?(0,O.transpose)(b,K,U):K};const u=(b,x,A,k,T)=>{const M=l(b,x[0],k,T,[k]),P=b.run(Object.assign(Object.assign({},C),{cacheHint:A.cacheKey,get:()=>M}),x),B=h(b,x[0],k,T,M.output.dims,[k]),U=b.run(Object.assign(Object.assign({},w),{cacheHint:A.cacheKey,get:()=>B}),[x[0],P]),N=f(b,x[0],k,T,M.output.dims,B.output.dims);return[b.run(Object.assign(Object.assign({},_),{cacheHint:A.cacheKey,get:()=>N}),[x[0],P,U])]},l=(b,x,A,k,T)=>{const[M,P]=b.calculateTextureWidthAndHeight(x.dims,S.TextureType.unpacked),B=T.length;if(A<1||k<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==T.length)throw new Error("Dimensionality of the output should be 1");if(T[0]!==A)throw new Error("Shape of the output should be equal to logical row count");const U=(0,V.getGlsl)(b.session.backend.glContext.version),N=`\n      float process(int[${B}] indices) {\n        int logical_row_start_offset = indices[0] * ${k};\n\n        float max = getColorAsFloat(${U.texture2D}(A, offsetToCoords(logical_row_start_offset, ${M},\n        ${P} )));\n        for(int i=1; i<${k}; ++i)\n        {\n          float current = getColorAsFloat(${U.texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${M}, ${P})));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }`;return Object.assign(Object.assign({},C),{output:{dims:T,type:x.type,textureType:S.TextureType.unpacked},shaderSource:N})},h=(b,x,A,k,T,M)=>{const[P,B]=b.calculateTextureWidthAndHeight(x.dims,S.TextureType.unpacked),U=M.length;if(A<1||k<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==M.length)throw new Error("Dimensionality of the output should be 1");if(M[0]!==A)throw new Error("Shape of the output should be equal to logical row count");if(1!==T.length)throw new Error("Dimensionality of the intermediate results should be 1");if(T[0]!==A)throw new Error("Shape of the intermediate results should be equal to logical row count");const N=`\n      float process(int[${U}] indices) {\n        int logical_row_start_offset = indices[0] * ${k};\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<${k}; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(${(0,V.getGlsl)(b.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${P}, ${B}))) - max);\n        }\n\n        return norm_factor;\n      }`;return Object.assign(Object.assign({},w),{output:{dims:M,type:x.type,textureType:S.TextureType.unpacked},shaderSource:N})},f=(b,x,A,k,T,M)=>{const[P,B]=b.calculateTextureWidthAndHeight(x.dims,S.TextureType.unpacked),U=x.dims.length;if(A<1||k<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==T.length||1!==M.length)throw new Error("Dimensionality of the intermediate results should be 1");if(T[0]!==A||M[0]!==A)throw new Error("Shape of the intermediate results should be equal to logical row count");const N=`\n      float process(int[${U}] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ${P}, ${B});\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ${k};\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }`;return Object.assign(Object.assign({},_),{output:{dims:x.dims,type:x.type,textureType:S.TextureType.unpacked},shaderSource:N})},g=b=>{if(!b||1!==b.length)throw new Error("Softmax requires 1 input.");if("float32"!==b[0].type&&"float64"!==b[0].type)throw new Error("Invalid input type")}},5975:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseSplitAttributes=F.split=void 0;const z=q(246),L=q(2517),V=q(2039),S={name:"Split",inputNames:["A"],inputTypes:[V.TextureType.unpacked]};F.split=(_,u,l)=>{w(u);const h=L.ShapeUtil.normalizeAxis(l.axis,u[0].dims.length),f=O(_,u,h,l),g=[];for(let b=0;b<f;++b)g.push(_.run(Object.assign(Object.assign({},S),{cacheHint:`${l.cacheKey};${b}`,get:()=>C(_,u[0],l,h,b)}),u));return g},F.parseSplitAttributes=_=>{const u=_.attributes.getInt("axis",0),l=_.attributes.getInts("split",[]);return(0,z.createAttributeWithCacheKey)({axis:u,split:l,numOutputs:_.outputs.length})};const O=(_,u,l,h)=>{const[,f]=L.SplitUtil.splitShape(u[0].dims,l,h.split,h.numOutputs);return f.length},C=(_,u,l,h,f)=>{const[g,b]=L.SplitUtil.splitShape(u.dims,h,l.split,l.numOutputs),A=g[f],k=`\n      float process(int indices[${A.length}]) {\n        indices[${h}] += ${b[f]};\n        return _A(indices);\n      }\n    `;return Object.assign(Object.assign({},S),{cacheHint:`${l.cacheKey}:${f}`,output:{dims:A,type:u.type,textureType:V.TextureType.unpacked},shaderSource:k})},w=_=>{if(!_||1!==_.length)throw new Error("Split requires one input.");if("int8"!==_[0].type&&"uint8"!==_[0].type&&"int16"!==_[0].type&&"uint16"!==_[0].type&&"int32"!==_[0].type&&"uint32"!==_[0].type&&"float32"!==_[0].type&&"float64"!==_[0].type&&"bool"!==_[0].type)throw new Error("Invalid input type.")}},3933:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseSqueezeAttributes=F.squeezeV13=F.squeeze=void 0;const z=q(2517);F.squeeze=(S,O,C)=>{L(O);const w=z.ShapeUtil.squeezeShape(O[0].dims,C);return[S.reshapeUnpacked(O[0],w)]},F.squeezeV13=(S,O)=>(V(O),(0,F.squeeze)(S,[O[0]],Array.from(O[1].integerData))),F.parseSqueezeAttributes=S=>S.attributes.getInts("axes");const L=S=>{if(!S||1!==S.length)throw new Error("Squeeze requires 1 input.");if("string"===S[0].type)throw new Error("invalid input tensor types.")},V=S=>{if(!S||2!==S.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==S[1].type)throw new Error("Invalid input type.")}},6558:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.sum=void 0;const z=q(5060),L=q(2039);F.sum=(O,C)=>{S(C);const w={name:"Sum",inputNames:C.map((_,u)=>`X${u}`),inputTypes:new Array(C.length).fill(L.TextureType.unpacked)};return[O.run(Object.assign(Object.assign({},w),{get:()=>V(O,C,w)}),C)]};const V=(O,C,w)=>{const _=(0,z.getGlsl)(O.session.backend.glContext.version),u=C[0].dims.slice(),l=`\n      void main() {\n        vec4 result = ${C.map((h,f)=>`${_.texture2D}(X${f},TexCoords)`).join(" + ")};\n        ${_.output} = result;\n      }\n    `;return Object.assign(Object.assign({},w),{output:{dims:u,type:C[0].type,textureType:L.TextureType.unpacked},hasMain:!0,shaderSource:l})},S=O=>{if(!O||0===O.length)throw new Error("Sum requires inputs.");const C=O[0].dims.length;for(let w=1;w<O.length;w++){if(C!==O[w].dims.length)throw new Error("Input shapes are mismatched.");for(let _=0;_<C;_++)if(O[0].dims[_]!==O[w].dims[_])throw new Error("Input shapes are not matched.")}if("float32"!==O[0].type&&"float64"!==O[0].type)throw new Error("Invalid input type.");for(let w=1;w<O.length;w++)if(O[0].type!==O[w].type)throw new Error("Input types are not matched.")}},5723:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.tile=void 0;const z=q(782),L=q(2039);F.tile=(O,C)=>{S(C);const w={name:"Tile",inputNames:["A"],inputTypes:[L.TextureType.unpacked]};return[O.run(Object.assign(Object.assign({},w),{get:()=>V(O,C,w)}),C)]};const V=(O,C,w)=>{const _=C[0].dims.slice(),u=new Array(_.length),l=[];for(let g=0;g<_.length;g++)u[g]=_[g]*C[1].numberData[g],l.push(`inputIdx[${g}] = int(mod(float(outputIdx[${g}]), ${_[g]}.));`);const h=u.length,f=`\n      float process(int outputIdx[${h}]) {\n        int inputIdx[${h}];\n        ${l.join("\n")}\n        return _A(inputIdx);\n      }\n    `;return Object.assign(Object.assign({},w),{output:{dims:u,type:C[0].type,textureType:L.TextureType.unpacked},shaderSource:f})},S=O=>{if(!O||2!==O.length)throw new Error("Tile requires 2 input.");if(1!==O[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(O[1].dims[0]!==O[0].dims.length)throw new Error("Invalid input shape.");if(-1===z.NUMBER_TYPES.indexOf(O[0].type))throw new Error("Invalid input type.");if("int32"!==O[1].type&&"int16"!==O[1].type)throw new Error("Invalid repeat type.")}},3738:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseTransposeAttributes=F.transpose=void 0;const z=q(246),L=q(2517),V=q(2039),S={name:"Transpose",inputNames:["A"],inputTypes:[V.TextureType.unpacked]};F.transpose=(l,h,f)=>(u(h),[l.run(Object.assign(Object.assign({},S),{cacheHint:f.cacheKey,get:()=>O(l,h[0],f.perm)}),h)]),F.parseTransposeAttributes=l=>(0,z.createAttributeWithCacheKey)({perm:l.attributes.getInts("perm",[])});const O=(l,h,f)=>{const g=h.dims;f=C(g,f);const b=w(g,f),x=g.length,A=`\n      ${_("perm",f,x)}\n      float process(int indices[${x}]) {\n        int a[${x}];\n        perm(a, indices);\n        return _A(a);\n      }`;return Object.assign(Object.assign({},S),{output:{dims:b,type:h.type,textureType:V.TextureType.unpacked},shaderSource:A})},C=(l,h)=>(h&&h.length!==l.length&&(h=[...l.keys()].reverse()),h),w=(l,h)=>(h=C(l,h),L.ShapeUtil.sortBasedOnPerm(l,h)),_=(l,h,f)=>{const g=[];g.push(`void ${l}(out int a[${f}], int src[${f}]) {`);for(let b=0;b<f;++b)g.push(`\ta[${h[b]}]=src[${b}];`);return g.push("\t}"),g.join("\n")},u=l=>{if(!l||1!==l.length)throw new Error("Transpose requires 1 input.");if("float32"!==l[0].type&&"float64"!==l[0].type)throw new Error("input should be float tensor")}},8710:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.encodeAsUint8=void 0;const z=q(5060),L=q(2039);F.encodeAsUint8=(V,S)=>{const O=S.shape,C=(0,z.getGlsl)(V.session.backend.glContext.version);return V.executeProgram({name:"Uint8Encode",inputTypes:[L.TextureType.unpacked],inputNames:["X"],output:{dims:O,type:S.tensor.type,textureType:L.TextureType.downloadUint8AsFloat},shaderSource:`\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ${C.texture2D}(X,TexCoords).r;\n      ${C.output} = encodeAsUint8(value);\n    }`,hasMain:!0},[S.tensor])}},4909:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.tanh=F.tan=F.sqrt=F.sin=F.sigmoid=F.relu=F.not=F.neg=F.log=F.parseLeakyReluAttributes=F.leakyRelu=F.identity=F.floor=F.exp=F.parseEluAttributes=F.elu=F.cos=F.ceil=F.clipV11=F.parseClipAttributes=F.clip=F.atan=F.asin=F.acos=F.abs=F.glslTanh=F.glslTan=F.glslSqrt=F.glslSigmoid=F.glslRelu=F.glslSin=F.glslNot=F.glslNeg=F.glslLog=F.glslLeakyRelu=F.glslIdentity=F.glslClip=F.glslFloor=F.glslExp=F.glslElu=F.glslCos=F.glslCeil=F.glslAtan=F.glslAsin=F.glslAcos=F.glslAbs=void 0;const z=q(246),L=q(2517),V=q(8520),S=q(5060),O=q(2039);function C(){return K("abs")}function w(){return K("acos")}function _(){return K("asin")}function u(){return K("atan")}function l(){return K("ceil")}function h(){return K("cos")}function f(Z){const ae="elu";return{body:`\n  const float alpha = float(${Z});\n\n  float ${ae}_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ${ae}_(vec4 v) {\n    return vec4(${ae}_(v.x), ${ae}_(v.y), ${ae}_(v.z), ${ae}_(v.w));\n  }\n  `,name:ae,type:V.FunctionType.ValueBased}}function g(){return K("exp")}function b(){return K("floor")}function x(Z,ae){const pe="clip";return{body:`\n  const float min = float(${Z});\n  const float max = float(${ae});\n\n  float ${pe}_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ${pe}_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  `,name:pe,type:V.FunctionType.ValueBased}}function A(){const Z="indentity";return{body:`\n  float ${Z}_(float a) {\n    return a;\n  }\n  vec4 ${Z}_(vec4 v) {\n    return v;\n  }\n  `,name:Z,type:V.FunctionType.ValueBased}}function k(Z){const ae="leakyRelu";return{body:`\n  const float alpha = float(${Z});\n\n  float ${ae}_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ${ae}_(vec4 v) {\n    return vec4(${ae}_(v.x), ${ae}_(v.y), ${ae}_(v.z), ${ae}_(v.w));\n  }\n  `,name:ae,type:V.FunctionType.ValueBased}}function T(){return K("log")}function M(){const Z="neg";return{body:`\n  float ${Z}_(float a) {\n    return -a;\n  }\n  vec4 ${Z}_(vec4 v) {\n    return -v;\n  }\n  `,name:Z,type:V.FunctionType.ValueBased}}function P(){const Z="not";return{body:`\n  float ${Z}_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ${Z}_(bool a) {\n    return !a;\n  }\n  vec4 ${Z}_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ${Z}_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  `,name:Z,type:V.FunctionType.ValueBased}}function B(){return K("sin")}function U(){const Z="relu";return{body:`\n  float ${Z}_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ${Z}_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  `,name:Z,type:V.FunctionType.ValueBased}}function N(){const Z="sigmoid";return{body:`\n  float ${Z}_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ${Z}_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  `,name:Z,type:V.FunctionType.ValueBased}}function $(){return K("sqrt")}function G(){return K("tan")}function W(){const Z="tanh";return{body:`\n  float ${Z}_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ${Z}_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  `,name:Z,type:V.FunctionType.ValueBased}}function K(Z){return{body:`\n  float ${Z}_(float a) {\n    return ${Z}(a);\n  }\n  vec4 ${Z}_(vec4 v) {\n    return ${Z}(v);\n  }\n  `,name:Z,type:V.FunctionType.ValueBased}}F.glslAbs=C,F.glslAcos=w,F.glslAsin=_,F.glslAtan=u,F.glslCeil=l,F.glslCos=h,F.glslElu=f,F.glslExp=g,F.glslFloor=b,F.glslClip=x,F.glslIdentity=A,F.glslLeakyRelu=k,F.glslLog=T,F.glslNeg=M,F.glslNot=P,F.glslSin=B,F.glslRelu=U,F.glslSigmoid=N,F.glslSqrt=$,F.glslTan=G,F.glslTanh=W;const X=(Z,ae,pe,ge)=>{const de={name:pe.name,inputTypes:[Z.session.pack?O.TextureType.packed:O.TextureType.unpacked],inputNames:["A"],cacheHint:ge};return Object.assign(Object.assign({},de),{get:()=>((Be,ee,Ae,Ue)=>{const qe=Be.session.pack?O.TextureType.packed:O.TextureType.unpacked,Mt=(0,S.getGlsl)(Be.session.backend.glContext.version);return Object.assign(Object.assign({},ee),{output:{dims:Ae.dims,type:Ae.type,textureType:qe},shaderSource:`\n     ${Ue.body}\n     void main() {\n       vec4 v = ${Mt.texture2D}(A, TexCoords);\n       v = ${Ue.name}_(v);\n       ${Mt.output} = v;\n     }\n     `,hasMain:!0})})(Z,de,ae,pe)})};F.abs=(Z,ae)=>[Z.run(X(Z,ae[0],C()),ae)],F.acos=(Z,ae)=>[Z.run(X(Z,ae[0],w()),ae)],F.asin=(Z,ae)=>[Z.run(X(Z,ae[0],_()),ae)],F.atan=(Z,ae)=>[Z.run(X(Z,ae[0],u()),ae)],F.clip=(Z,ae,pe)=>[Z.run(X(Z,ae[0],x(pe.min,pe.max),pe.cacheKey),ae)],F.parseClipAttributes=Z=>(0,z.createAttributeWithCacheKey)({min:Z.attributes.getFloat("min",L.MIN_CLIP),max:Z.attributes.getFloat("max",L.MAX_CLIP)}),F.clipV11=(Z,ae)=>{const pe=oe(Z,ae);return(0,F.clip)(Z,[ae[0]],pe)};const oe=(Z,ae)=>{if(ae.length>=3&&(!Z.session.isInitializer(ae[1].dataId)||!Z.session.isInitializer(ae[2].dataId)))throw new Error("dynamic clip attributes are not allowed");return(0,z.createAttributeWithCacheKey)({min:ae.length>=3?ae[1].numberData[0]:L.MIN_CLIP,max:ae.length>=3?ae[2].numberData[0]:L.MAX_CLIP})};F.ceil=(Z,ae)=>[Z.run(X(Z,ae[0],l()),ae)],F.cos=(Z,ae)=>[Z.run(X(Z,ae[0],h()),ae)],F.elu=(Z,ae,pe)=>[Z.run(X(Z,ae[0],f(pe.alpha),pe.cacheKey),ae)],F.parseEluAttributes=Z=>(0,z.createAttributeWithCacheKey)({alpha:Z.attributes.getFloat("alpha",1)}),F.exp=(Z,ae)=>[Z.run(X(Z,ae[0],g()),ae)],F.floor=(Z,ae)=>[Z.run(X(Z,ae[0],b()),ae)],F.identity=(Z,ae)=>[Z.run(X(Z,ae[0],A()),ae)],F.leakyRelu=(Z,ae,pe)=>[Z.run(X(Z,ae[0],k(pe.alpha),pe.cacheKey),ae)],F.parseLeakyReluAttributes=Z=>(0,z.createAttributeWithCacheKey)({alpha:Z.attributes.getFloat("alpha",.01)}),F.log=(Z,ae)=>[Z.run(X(Z,ae[0],T()),ae)],F.neg=(Z,ae)=>[Z.run(X(Z,ae[0],M()),ae)],F.not=(Z,ae)=>[Z.run(X(Z,ae[0],P()),ae)],F.relu=(Z,ae)=>[Z.run(X(Z,ae[0],U()),ae)],F.sigmoid=(Z,ae)=>[Z.run(X(Z,ae[0],N()),ae)],F.sin=(Z,ae)=>[Z.run(X(Z,ae[0],B()),ae)],F.sqrt=(Z,ae)=>[Z.run(X(Z,ae[0],$()),ae)],F.tan=(Z,ae)=>[Z.run(X(Z,ae[0],G()),ae)],F.tanh=(Z,ae)=>[Z.run(X(Z,ae[0],W()),ae)]},5611:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createUnpackProgramInfoLoader=F.createUnpackProgramInfo=void 0;const z=q(5060),L=q(2039),V=q(9390),S=q(2827),O={name:"unpack",inputNames:["A"],inputTypes:[L.TextureType.packed]};F.createUnpackProgramInfo=(C,w)=>{const _=w.dims.length,u=(0,S.getChannels)("rc",_),l=u.slice(-2),h=(0,V.getCoordsDataType)(_),f=(0,S.unpackFromChannel)(),g=0===w.dims.length?"":function(A,k){if(1===A)return"rc";let T="";for(let M=0;M<A;M++)T+=k[M],M<A-1&&(T+=",");return T}(_,u),b=_<=1?"rc":`vec2(${l.join(",")})`,x=`\n    ${f}\n    void main() {\n      ${h} rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(${g});\n\n       ${(0,z.getGlsl)(C.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${b}), 0, 0, 0);\n     }\n   `;return Object.assign(Object.assign({},O),{hasMain:!0,output:{dims:w.dims,type:w.type,textureType:L.TextureType.unpacked},shaderSource:x})},F.createUnpackProgramInfoLoader=(C,w)=>Object.assign(Object.assign({},O),{get:()=>(0,F.createUnpackProgramInfo)(C,w)})},8428:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.parseUnsqueezeAttributes=F.unsqueezeV13=F.unsqueeze=void 0;const z=q(2517);F.unsqueeze=(S,O,C)=>{L(O);const w=z.ShapeUtil.unsqueezeShape(O[0].dims,C);return[S.reshapeUnpacked(O[0],w)]},F.unsqueezeV13=(S,O)=>(V(O),(0,F.unsqueeze)(S,[O[0]],Array.from(O[1].integerData))),F.parseUnsqueezeAttributes=S=>S.attributes.getInts("axes");const L=S=>{if(!S||1!==S.length)throw new Error("Unsqueeze requires 1 input.");if("string"===S[0].type)throw new Error("invalid input tensor types.")},V=S=>{if(!S||2!==S.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==S[1].type)throw new Error("Invalid input type.")}},9793:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.scalesValidation=F.validateInputs=F.parseUpsampleAttributes=F.parseUpsampleAttributesV9=F.parseUpsampleAttributesV7=F.upsample=void 0;const z=q(246),L=q(5060),V=q(2039),S={name:"Upsample",inputNames:["X"],inputTypes:[V.TextureType.unpacked]};F.upsample=(C,w,_)=>((0,F.validateInputs)(w,_),[C.run(Object.assign(Object.assign({},S),{cacheHint:_.cacheKey,get:()=>O(C,w,_)}),w)]),F.parseUpsampleAttributesV7=C=>(0,F.parseUpsampleAttributes)(C,7),F.parseUpsampleAttributesV9=C=>(0,F.parseUpsampleAttributes)(C,9),F.parseUpsampleAttributes=(C,w)=>{const _=w>=10,u=C.attributes.getString("mode","nearest");if("nearest"!==u&&"linear"!==u&&(w<11||"cubic"!==u))throw new Error(`unrecognized mode: ${u}`);let l=[];w<9&&(l=C.attributes.getFloats("scales"),(0,F.scalesValidation)(l,u,_));const h=C.attributes.getFloat("extrapolation_value",0),f=w>10?C.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(f))throw new Error(`coordinate_transform_mode '${f}' is not supported`);const g="tf_crop_and_resize"===f,b=g,x="nearest"===u&&w>=11?C.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(x))throw new Error(`nearest_mode '${x}' is not supported`);const A=C.attributes.getFloat("cubic_coeff_a",-.75),k=0!==C.attributes.getInt("exclude_outside",0);if(k&&"cubic"!==u)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let M=0,P=0,B=0;return w>10?C.inputs.length>2?(M=1,P=2,B=3):(P=1,B=2):9===w&&(P=1),(0,z.createAttributeWithCacheKey)({opset:w,isResize:_,mode:u,scales:l,extrapolationValue:h,coordinateTransformMode:f,useExtrapolation:b,needRoiInput:g,nearestMode:x,cubicCoefficientA:A,excludeOutside:k,useNearest2xOptimization:w<11||"nearest"===u&&"asymmetric"===f&&"floor"===x,roiInputIdx:M,scalesInputIdx:P,sizesInputIdx:B})};const O=(C,w,_)=>{const u=(0,L.getGlsl)(C.session.backend.glContext.version),[l,h]=C.calculateTextureWidthAndHeight(w[0].dims,V.TextureType.unpacked),f=w[0].dims.map((B,U)=>Math.floor(B*_.scales[U])),[g,b]=C.calculateTextureWidthAndHeight(f,V.TextureType.unpacked),x=f.length,A=new Array(x),k=new Array(x);let T=`\n      int output_pitches[${x}];\n      int input_pitches[${x}];\n      `;for(let B=x-1;B>=0;B--)A[B]=B===x-1?1:A[B+1]*f[B+1],k[B]=B===x-1?1:k[B+1]*w[0].dims[B+1],T+=`\n        output_pitches[${B}] = ${A[B]};\n        input_pitches[${B}] = ${k[B]};\n        `;const M=`\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ${l}, ${h});\n        float value = getColorAsFloat(${u.texture2D}(X, coords));\n        return value;\n      }\n      `,P="nearest"===_.mode?`\n    ${M}\n    float process(int indices[${x}]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${g}, ${b});\n\n      ${T}\n\n      int d, m;\n      for (int dim = 0; dim < ${x}; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }`:4===x?`\n    ${M}\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${g}, ${b});\n\n      ${T}\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (${w[0].dims[2]} - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }`:`\n    ${M}\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${g}, ${b});\n\n      ${T}\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (${w[0].dims[0]} - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }`;return Object.assign(Object.assign({},S),{output:{dims:f,type:w[0].type,textureType:V.TextureType.unpacked},shaderSource:P,variables:[{name:"scales",type:"int",arrayLength:_.scales.length,data:_.scales.map(B=>Math.ceil(B))}]})};F.validateInputs=(C,w)=>{if(!C||w.opset<9&&1!==C.length||w.opset>=9&&w.opset<11&&2!==C.length||w.opset>=11&&C.length<2)throw new Error("invalid inputs.");if(w.scales.length>0&&C[0].dims.length!==w.scales.length)throw new Error("Invalid input shape.");if("string"===C[0].type)throw new Error("Invalid input tensor types.")},F.scalesValidation=(C,w,_)=>{if(_){for(const u of C)if(u<=0)throw new Error("Scale value should be greater than 0.")}else for(const u of C)if(u<1)throw new Error("Scale value should be greater than or equal to 1.");if(!("linear"!==w&&"cubic"!==w||2===C.length||4===C.length&&1===C[0]&&1===C[1]))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${_?"Resize":"Upsample"} opeartor.`)}},1958:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ProgramManager=void 0;const z=q(1670),L=q(6231),V=q(8879),S=q(5060);F.ProgramManager=class{constructor(O,C,w){this.profiler=O,this.glContext=C,this.textureLayoutStrategy=w,this.repo=new Map,this.attributesBound=!1}getArtifact(O){return this.repo.get(O)}setArtifact(O,C){this.repo.set(O,C)}run(O,C,w){var _;this.profiler.event("op",`ProgramManager.run ${null!==(_=O.programInfo.name)&&void 0!==_?_:"unknown kernel"}`,()=>{var u;this.glContext.gl.useProgram(O.program);try{this.bindOutput(w),this.attributesBound||this.bindAttributes(O.attribLocations),this.bindUniforms(O.uniformLocations,null!==(u=O.programInfo.variables)&&void 0!==u?u:[],C)}catch(f){throw L.Logger.error("ProgramManager",O.programInfo.shaderSource),f}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(O=>this.glContext.deleteProgram(O.program))}build(O,C,w){return this.profiler.event("backend","ProgramManager.build",()=>{const _=new V.GlslPreprocessor(this.glContext,O,C,w),u=_.preprocess(),l=this.compile(u);return{programInfo:O,program:l,uniformLocations:this.getUniformLocations(l,_.context.programInfo.inputNames,_.context.programInfo.variables),attribLocations:this.getAttribLocations(l)}})}compile(O){if(!this.vertexShader){L.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const _=(0,S.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(_,this.glContext.gl.VERTEX_SHADER)}z.env.debug&&L.Logger.verbose("ProrgramManager",`FragShader:\n${O}\n`);const C=this.glContext.compileShader(O,this.glContext.gl.FRAGMENT_SHADER),w=this.glContext.createProgram(this.vertexShader,C);return this.glContext.deleteShader(C),w}bindOutput(O){const C=O.width,w=O.height;L.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${C}/${w}, shape=${O.shape}, type=${O.tensor.type}`),this.glContext.attachFramebuffer(O.texture,C,w)}bindAttributes(O){this.glContext.setVertexAttributes(O.position,O.textureCoord),this.attributesBound=!0}bindUniforms(O,C,w){var _;const u=this.glContext.gl;let l=0;for(const{name:h,type:f,location:g,arrayLength:b}of O){const x=null===(_=C.find(A=>A.name===h))||void 0===_?void 0:_.data;if("sampler2D"!==f&&!x)throw new Error(`variable '${h}' does not have data defined in program info`);switch(f){case"sampler2D":this.bindTexture(w[l],g,l),l++;break;case"float":b?u.uniform1fv(g,x):u.uniform1f(g,x);break;case"int":b?u.uniform1iv(g,x):u.uniform1i(g,x);break;default:throw new Error(`Uniform not implemented: ${f}`)}}}bindTexture(O,C,w){this.glContext.bindTextureToUniform(O.texture,w,C)}getAttribLocations(O){return{position:this.getAttribLocation(O,"position"),textureCoord:this.getAttribLocation(O,"textureCoord")}}getUniformLocations(O,C,w){const _=[];if(C)for(const u of C)_.push({name:u,type:"sampler2D",location:this.getUniformLocation(O,u)});if(w)for(const u of w)_.push(Object.assign(Object.assign({},u),{location:this.getUniformLocation(O,u.name)}));return _}getUniformLocation(O,C){const w=this.glContext.gl.getUniformLocation(O,C);if(null===w)throw new Error(`Uniform ${C} not found.`);return w}getAttribLocation(O,C){return this.glContext.gl.getAttribLocation(O,C)}}},6416:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.WebGLSessionHandler=void 0;const z=q(6231),L=q(1047),V=q(8316),S=q(1640),O=q(1958),C=q(7859),w=q(5702);F.WebGLSessionHandler=class{constructor(_,u){this.backend=_,this.context=u,this.layoutStrategy=new C.PreferLogicalStrategy(_.glContext.maxTextureSize),this.programManager=new O.ProgramManager(this.context.profiler,_.glContext,this.layoutStrategy),this.textureManager=new w.TextureManager(_.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===_.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=_.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new V.WebGLInferenceHandler(this)}onGraphInitialized(_){const u=_.getValues().filter(l=>-1===l.from&&l.tensor).map(l=>l.tensor.dataId);this.initializers=new Set(u)}isInitializer(_){return!!this.initializers&&this.initializers.has(_)}addInitializer(_){this.initializers.add(_)}getTextureData(_,u){return u?this.packedTextureDataCache.get(_):this.unpackedTextureDataCache.get(_)}setTextureData(_,u,l=!1){z.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),l?this.packedTextureDataCache.set(_,u):this.unpackedTextureDataCache.set(_,u)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(_=>this.textureManager.releaseTexture(_,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(_=>this.textureManager.releaseTexture(_,!0)),this.unpackedTextureDataCache=new Map}resolve(_,u,l){const h=(0,L.resolveOperator)(_,u,S.WEBGL_OP_RESOLVE_RULES);return{impl:h.opImpl,context:h.opInit?h.opInit(_,l):_}}}},7769:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Uint8DataEncoder=F.RGBAFloatDataEncoder=F.RedFloat32DataEncoder=void 0;const z=q(6231);F.RedFloat32DataEncoder=class{constructor(L,V=1){if(1===V)this.internalFormat=L.R32F,this.format=L.RED,this.textureType=L.FLOAT,this.channelSize=V;else{if(4!==V)throw new Error(`Invalid number of channels: ${V}`);this.internalFormat=L.RGBA32F,this.format=L.RGBA,this.textureType=L.FLOAT,this.channelSize=V}}encode(L,V){let S,O;return L.constructor!==Float32Array&&(z.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),O=new Float32Array(L)),V*this.channelSize>L.length?(z.Logger.warning("Encoder","Source data too small. Allocating larger array"),O=L,S=this.allocate(V*this.channelSize),O.forEach((C,w)=>S[w]=C)):(O=L,S=O),S}allocate(L){return new Float32Array(4*L)}decode(L,V){return 1===this.channelSize?L.filter((S,O)=>O%4==0).subarray(0,V):L.subarray(0,V)}},F.RGBAFloatDataEncoder=class{constructor(L,V=1,S){if(1!==V&&4!==V)throw new Error(`Invalid number of channels: ${V}`);this.internalFormat=L.RGBA,this.format=L.RGBA,this.channelSize=V,this.textureType=S||L.FLOAT}encode(L,V){let S=L;return 1===this.channelSize&&(z.Logger.verbose("Encoder","Exploding into a larger array"),S=this.allocate(V),L.forEach((O,C)=>S[4*C]=O)),S}allocate(L){return new Float32Array(4*L)}decode(L,V){return 1===this.channelSize?L.filter((S,O)=>O%4==0).subarray(0,V):L.subarray(0,V)}},F.Uint8DataEncoder=class{constructor(L,V=1){if(this.channelSize=4,1===V)this.internalFormat=L.ALPHA,this.format=L.ALPHA,this.textureType=L.UNSIGNED_BYTE,this.channelSize=V;else{if(4!==V)throw new Error(`Invalid number of channels: ${V}`);this.internalFormat=L.RGBA,this.format=L.RGBA,this.textureType=L.UNSIGNED_BYTE,this.channelSize=V}}encode(L,V){return new Uint8Array(L.buffer,L.byteOffset,L.byteLength)}allocate(L){return new Uint8Array(L*this.channelSize)}decode(L,V){if(L instanceof Uint8Array)return L.subarray(0,V);throw new Error(`Invalid array type: ${L.constructor}`)}}},7859:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getBatchDim=F.sizeToSquarishShape=F.getRowsCols=F.sizeFromShape=F.isInt=F.parseAxisParam=F.squeezeShape=F.PreferLogicalStrategy=F.AlwaysKeepOriginalSizeStrategy=void 0;const z=q(6231),L=q(2517);function V(_,u){const l=[],h=[],f=null!=u&&Array.isArray(u)&&0===u.length,g=null==u||f?null:S(u,_).sort();let b=0;for(let x=0;x<_.length;++x){if(null!=g){if(g[b]===x&&1!==_[x])throw new Error(`Can't squeeze axis ${x} since its dim '${_[x]}' is not 1`);(null==g[b]||g[b]>x)&&1===_[x]&&(l.push(_[x]),h.push(x)),g[b]<=x&&b++}1!==_[x]&&(l.push(_[x]),h.push(x))}return{newShape:l,keptDims:h}}function S(_,u){const l=u.length;return _=null==_?u.map((h,f)=>f):[].concat(_),(0,L.assert)(_.every(h=>h>=-l&&h<l),()=>`All values in axis param must be in range [-${l}, ${l}) but got axis ${_}`),(0,L.assert)(_.every(O),()=>`All values in axis param must be integers but got axis ${_}`),_.map(h=>h<0?l+h:h)}function O(_){return _%1==0}function C(_){if(0===_.length)return 1;let u=_[0];for(let l=1;l<_.length;l++)u*=_[l];return u}function w(_){const u=Math.ceil(Math.sqrt(_));return[u,Math.ceil(_/u)]}F.AlwaysKeepOriginalSizeStrategy=class{constructor(_){this.maxTextureSize=_}computeTextureWH(_,u){if(0===_.length)return[1,1];const l=this.maxTextureSize;if(u&&void 0!==u.breakAxis){const g=u.breakAxis>=_.length?1:_.slice(u.breakAxis).reduce((x,A)=>x*A),b=u.breakAxis<=0?1:_.slice(0,u.breakAxis).reduce((x,A)=>x*A);if(!(g>l||b>l))return[g,b];z.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${_}, breakAxis:${u.breakAxis}`)}const h=_.reduce((g,b)=>g*b);let f=Math.floor(Math.sqrt(h));for(;f<l&&f<h&&h%f!=0;f++);if(f>=l||h%f!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${_}`);return[f,h/f]}},F.PreferLogicalStrategy=class{constructor(_){this.maxTextureSize=_}computeTextureWH(_,u){const l=this.computeTexture(_,u);return u&&u.isPacked&&(l[0]/=2,l[1]/=2),u&&u.reverseWH?[l[1],l[0]]:l}computeTexture(_,u){const l=u&&u.isPacked;if(0===_.length)return l?[2,2]:[1,1];let h=this.maxTextureSize;if(u&&void 0!==u.breakAxis){const b=u.breakAxis>=_.length?1:_.slice(u.breakAxis).reduce((A,k)=>A*k),x=u.breakAxis<=0?1:_.slice(0,u.breakAxis).reduce((A,k)=>A*k);if(!(b>h||x>h))return[b,x];z.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${_}, breakAxis:${u.breakAxis}`)}let f=_.slice(0);l&&(h*=2,f=f.map((b,x)=>x>=f.length-2?f[x]%2==0?f[x]:f[x]+1:f[x]),1===f.length&&(f=[2,f[0]])),2!==f.length&&(f=V(f).newShape);const g=C(f);return f.length<=1&&g<=h?[1,g]:2===f.length&&f[0]<=h&&f[1]<=h?f:3===f.length&&f[0]*f[1]<=h&&f[2]<=h?[f[0]*f[1],f[2]]:3===f.length&&f[0]<=h&&f[1]*f[2]<=h?[f[0],f[1]*f[2]]:4===f.length&&f[0]*f[1]*f[2]<=h&&f[3]<=h?[f[0]*f[1]*f[2],f[3]]:4===f.length&&f[0]<=h&&f[1]*f[2]*f[3]<=h?[f[0],f[1]*f[2]*f[3]]:l?w(g/4).map(b=>2*b):w(g)}},F.squeezeShape=V,F.parseAxisParam=S,F.isInt=O,F.sizeFromShape=C,F.getRowsCols=function(_){if(0===_.length)throw Error("Cannot get rows and columns of an empty shape array.");return[_.length>1?_[_.length-2]:1,_[_.length-1]]},F.sizeToSquarishShape=w,F.getBatchDim=function(_,u=2){return C(_.slice(0,_.length-u))}},4057:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createTextureLayoutFromShape=F.calculateTextureWidthAndHeight=F.createTextureLayoutFromTextureType=void 0;const z=q(2517),L=q(2039);F.createTextureLayoutFromTextureType=(V,S,O)=>{const C=O===L.TextureType.unpacked||O===L.TextureType.unpackedReversed?1:4,w=O===L.TextureType.packed,_=O===L.TextureType.unpackedReversed||O===L.TextureType.packed,u=O===L.TextureType.packedLastDimension?S.length-1:void 0,l=O===L.TextureType.packedLastDimension?S.map((h,f)=>f===S.length-1?4*h:h):void 0;return(0,F.createTextureLayoutFromShape)(V,S,C,l,{isPacked:w,reverseWH:_,breakAxis:u})},F.calculateTextureWidthAndHeight=(V,S,O)=>{const C=(0,F.createTextureLayoutFromTextureType)(V,S,O);return[C.width,C.height]},F.createTextureLayoutFromShape=(V,S,O=1,C,w)=>{const _=!(!w||!w.isPacked),[u,l]=V.computeTextureWH(_&&C||S,w),h=S.length;let f=S.slice(0);if(0===h&&(f=[1]),1===O)C=S;else if(_){if(4!==O)throw new Error("a packed texture must be 4-channel");C=S,h>0&&(f[h-1]=Math.ceil(f[h-1]/2)),h>1&&(f[h-2]=Math.ceil(f[h-2]/2))}else if(!C)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:l,channels:O,isPacked:_,shape:f,strides:z.ShapeUtil.computeStrides(f),unpackedShape:C,reversedWH:w&&w.reverseWH}}},5702:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.TextureManager=void 0;const z=q(6231);F.TextureManager=class{constructor(L,V,S,O){this.glContext=L,this.layoutStrategy=V,this.profiler=S,this.config=O,this.pendingRead=new Map,O.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(L,V,S,O){const C=this.toEncoderType(L),w=this.glContext.getEncoder(C,V.channels||1,O);if(V.isPacked&&1===O)throw new Error("not implemented");const _=V.width,u=V.height;let l,h;if(this.config.reuseTextures){l=`${_}x${u}_${w.format}_${w.internalFormat}_${w.textureType}`,h=this.inUseTextures.get(l),h||(h=[],this.inUseTextures.set(l,h));const g=this.idleTextures.get(l);if(g&&g.length>0){const b=g.pop();return h.push(b),1===O&&this.glContext.updateTexture(b,_,u,w,this.toTextureData(L,S)),b}}z.Logger.verbose("TextureManager",`Creating new texture of size ${V.width}x${V.height}`);const f=this.glContext.allocateTexture(_,u,w,this.toTextureData(L,S));return this.config.reuseTextures&&(h.push(f),this.textureLookup.set(f,l)),f}readTexture(L,V,S){return S||(S=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const O=L.shape.reduce((w,_)=>w*_)*S,C=this.glContext.readTexture(L.texture,L.width,L.height,O,this.toEncoderType(V),S);return this.toTensorData(V,C)})}readTextureAsync(L,V,S){var O=this;return _asyncToGenerator(function*(){const C=L.tensor.dataId;if(S||(S=1),O.pendingRead.has(C)){const w=O.pendingRead.get(C);return new Promise(_=>w?.push(_))}return O.profiler.event("backend","TextureManager.readTextureAsync",_asyncToGenerator(function*(){O.pendingRead.set(C,[]);const w=L.shape.reduce((h,f)=>h*f)*S;yield O.glContext.createAndWaitForFence();const _=O.glContext.readTexture(L.texture,L.width,L.height,w,O.toEncoderType(V),S),u=O.toTensorData(V,_),l=O.pendingRead.get(C);return O.pendingRead.delete(C),l?.forEach(h=>h(u)),u}))})()}readUint8TextureAsFloat(L){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const V=L.shape.reduce((O,C)=>O*C),S=this.glContext.readTexture(L.texture,L.width,L.height,4*V,"byte",4);return new Float32Array(S.buffer,S.byteOffset,V)})}releaseTexture(L,V){let S;if(this.config.reuseTextures&&(S=this.textureLookup.get(L.texture),S)){V&&this.textureLookup.delete(S);const O=this.inUseTextures.get(S);if(O){const C=O.indexOf(L.texture);if(-1!==C){O.splice(C,1);let w=this.idleTextures.get(S);w||(w=[],this.idleTextures.set(S,w)),w.push(L.texture)}}}S&&!V||(z.Logger.verbose("TextureManager",`Deleting texture of size ${L.width}x${L.height}`),this.glContext.deleteTexture(L.texture))}toTensorData(L,V){switch(L){case"int16":return V instanceof Int16Array?V:Int16Array.from(V);case"int32":return V instanceof Int32Array?V:Int32Array.from(V);case"int8":return V instanceof Int8Array?V:Int8Array.from(V);case"uint16":return V instanceof Uint16Array?V:Uint16Array.from(V);case"uint32":return V instanceof Uint32Array?V:Uint32Array.from(V);case"uint8":case"bool":return V instanceof Uint8Array?V:Uint8Array.from(V);case"float32":return V instanceof Float32Array?V:Float32Array.from(V);case"float64":return V instanceof Float64Array?V:Float64Array.from(V);default:throw new Error(`TensorData type ${L} is not supported`)}}toTextureData(L,V){if(V)return V instanceof Float32Array?V:new Float32Array(V)}toEncoderType(L){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(Ye,F)=>{"use strict";var q;Object.defineProperty(F,"__esModule",{value:!0}),F.TextureType=void 0,(q=F.TextureType||(F.TextureType={}))[q.unpacked=0]="unpacked",q[q.unpackedReversed=1]="unpackedReversed",q[q.packed=2]="packed",q[q.downloadUint8AsFloat=3]="downloadUint8AsFloat",q[q.packedLastDimension=4]="packedLastDimension"},9390:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.getGlChannels=F.getCoordsDataType=F.getSqueezedParams=F.squeezeInputShape=F.generateShaderFuncNameFromInputSamplerNameAtOutCoords=F.generateShaderFuncNameFromInputSamplerName=F.repeatedTry=F.getPackedShape=void 0;const z=q(2517);F.getPackedShape=function(L){const V=L.length;return L.slice(0,V-1).concat(L[V-1]/4)},F.repeatedTry=function(){var L=_asyncToGenerator(function*(V,S=(C=>0),O){return new Promise((C,w)=>{let _=0;const u=()=>{if(V())return void C();_++;const l=S(_);null!=O&&_>=O?w():setTimeout(u,l)};u()})});return function(V){return L.apply(this,arguments)}}(),F.generateShaderFuncNameFromInputSamplerName=function(L){return(0,z.assert)(void 0!==L&&0!==L.length,()=>"empty string found for sampler name"),"get"+L.charAt(0).toUpperCase()+L.slice(1)},F.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(L){return(0,z.assert)(void 0!==L&&0!==L.length,()=>"empty string found for sampler name"),"get"+L.charAt(0).toUpperCase()+L.slice(1)+"AtOutCoords"},F.squeezeInputShape=function(L,V){let S=JSON.parse(JSON.stringify(L));return S=V,S},F.getSqueezedParams=function(L,V){return V.map(S=>L[S]).join(", ")},F.getCoordsDataType=function(L){if(L<=1)return"int";if(2===L)return"ivec2";if(3===L)return"ivec3";if(4===L)return"ivec4";if(5===L)return"ivec5";if(6===L)return"ivec6";throw Error(`GPU for rank ${L} is not yet supported`)},F.getGlChannels=function(L=6){return["x","y","z","w","u","v"].slice(0,L)}},7305:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.createNewWebGLContext=F.createWebGLContext=void 0;const z=q(6231),L=q(1713),V={};function S(O){const C=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const u=document.createElement("canvas");return u.width=1,u.height=1,u}();let w;const _={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!O||"webgl2"===O)&&(w=C.getContext("webgl2",_),w))try{return new L.WebGLContext(w,2)}catch(u){z.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${u}`)}if((!O||"webgl"===O)&&(w=C.getContext("webgl",_)||C.getContext("experimental-webgl",_),w))try{return new L.WebGLContext(w,1)}catch(u){z.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${u}`)}throw new Error("WebGL is not supported")}F.createWebGLContext=function O(C){let w;C&&"webgl2"!==C||!("webgl2"in V)?C&&"webgl"!==C||!("webgl"in V)||(w=V.webgl):w=V.webgl2,w=w||S(C);const _=w.gl;return V[C=C||1===w.version?"webgl":"webgl2"]=w,_.isContextLost()?(delete V[C],O(C)):(_.disable(_.DEPTH_TEST),_.disable(_.STENCIL_TEST),_.disable(_.BLEND),_.disable(_.DITHER),_.disable(_.POLYGON_OFFSET_FILL),_.disable(_.SAMPLE_COVERAGE),_.enable(_.SCISSOR_TEST),_.enable(_.CULL_FACE),_.cullFace(_.BACK),w)},F.createNewWebGLContext=S},1713:function(Ye,F,q){"use strict";var z=this&&this.__createBinding||(Object.create?function(_,u,l,h){void 0===h&&(h=l);var f=Object.getOwnPropertyDescriptor(u,l);f&&!("get"in f?!u.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(_,h,f)}:function(_,u,l,h){void 0===h&&(h=l),_[h]=u[l]}),L=this&&this.__setModuleDefault||(Object.create?function(_,u){Object.defineProperty(_,"default",{enumerable:!0,value:u})}:function(_,u){_.default=u}),V=this&&this.__importStar||function(_){if(_&&_.__esModule)return _;var u={};if(null!=_)for(var l in _)"default"!==l&&Object.prototype.hasOwnProperty.call(_,l)&&z(u,_,l);return L(u,_),u};Object.defineProperty(F,"__esModule",{value:!0}),F.WebGLContext=F.linearSearchLastTrue=void 0;const S=q(1670),O=V(q(7769)),C=q(9390);function w(_){let u=0;for(;u<_.length&&_[u]();++u);return u-1}F.linearSearchLastTrue=w,F.WebGLContext=class{constructor(_,u){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=_,this.version=u,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(_,u,l,h){const f=this.gl,g=f.createTexture();f.bindTexture(f.TEXTURE_2D,g),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);const b=h?l.encode(h,_*u):null;return f.texImage2D(f.TEXTURE_2D,0,l.internalFormat,_,u,0,l.format,l.textureType,b),this.checkError(),g}updateTexture(_,u,l,h,f){const g=this.gl;g.bindTexture(g.TEXTURE_2D,_);const b=h.encode(f,u*l);g.texSubImage2D(g.TEXTURE_2D,0,0,0,u,l,h.format,h.textureType,b),this.checkError()}attachFramebuffer(_,u,l){const h=this.gl;h.bindTexture(h.TEXTURE_2D,_),h.bindFramebuffer(h.FRAMEBUFFER,this.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,_,0),this.checkError(),h.viewport(0,0,u,l),h.scissor(0,0,u,l)}readTexture(_,u,l,h,f,g){const b=this.gl;g||(g=1),this.frameBufferBound||this.attachFramebuffer(_,u,l);const x=this.getEncoder(f,g),A=x.allocate(u*l);return b.bindTexture(b.TEXTURE_2D,_),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,_,0),b.readPixels(0,0,u,l,b.RGBA,x.textureType,A),this.checkError(),x.decode(A,h)}isFramebufferReady(){return!0}getActiveTexture(){const _=this.gl;return"TEXTURE"+(_.getParameter(this.gl.ACTIVE_TEXTURE)-_.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(_,u){const l=this.gl;l.vertexAttribPointer(_,3,l.FLOAT,!1,20,0),l.enableVertexAttribArray(_),-1!==u&&(l.vertexAttribPointer(u,2,l.FLOAT,!1,20,12),l.enableVertexAttribArray(u)),this.checkError()}createProgram(_,u){const l=this.gl,h=l.createProgram();return l.attachShader(h,_),l.attachShader(h,u),l.linkProgram(h),h}compileShader(_,u){const l=this.gl,h=l.createShader(u);if(!h)throw new Error(`createShader() returned null with type ${u}`);if(l.shaderSource(h,_),l.compileShader(h),!1===l.getShaderParameter(h,l.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${l.getShaderInfoLog(h)}\nShader source:\n${_}`);return h}deleteShader(_){this.gl.deleteShader(_)}bindTextureToUniform(_,u,l){const h=this.gl;h.activeTexture(h.TEXTURE0+u),this.checkError(),h.bindTexture(h.TEXTURE_2D,_),this.checkError(),h.uniform1i(l,u),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(S.env.debug){const _=this.gl,u=_.getError();let l="";switch(u){case _.NO_ERROR:return;case _.INVALID_ENUM:l="INVALID_ENUM";break;case _.INVALID_VALUE:l="INVALID_VALUE";break;case _.INVALID_OPERATION:l="INVALID_OPERATION";break;case _.INVALID_FRAMEBUFFER_OPERATION:l="INVALID_FRAMEBUFFER_OPERATION";break;case _.OUT_OF_MEMORY:l="OUT_OF_MEMORY";break;case _.CONTEXT_LOST_WEBGL:l="CONTEXT_LOST_WEBGL";break;default:l=`Unknown WebGL Error: ${u.toString(16)}`}throw new Error(l)}}deleteTexture(_){this.gl.deleteTexture(_)}deleteProgram(_){this.gl.deleteProgram(_)}getEncoder(_,u,l=0){if(2===this.version)return new O.RedFloat32DataEncoder(this.gl,u);switch(_){case"float":return 1===l||this.isRenderFloat32Supported?new O.RGBAFloatDataEncoder(this.gl,u):new O.RGBAFloatDataEncoder(this.gl,u,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new O.Uint8DataEncoder(this.gl,u);default:throw new Error(`Invalid dataType: ${_}`)}}clearActiveTextures(){const _=this.gl;for(let u=0;u<this.maxTextureImageUnits;++u)_.activeTexture(_.TEXTURE0+u),_.bindTexture(_.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(this.framebuffer),_.bindBuffer(_.ARRAY_BUFFER,null),_.deleteBuffer(this.vertexbuffer),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,null),_.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const _=this.gl,u=_.createBuffer();if(!u)throw new Error("createBuffer() returned null");const l=this.createDefaultGeometry();return _.bindBuffer(_.ARRAY_BUFFER,u),_.bufferData(_.ARRAY_BUFFER,l,_.STATIC_DRAW),this.checkError(),u}createFramebuffer(){const _=this.gl.createFramebuffer();if(!_)throw new Error("createFramebuffer returned null");return _}queryVitalParameters(){const _=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS)}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const _=this.gl,u=_.createTexture();_.bindTexture(_.TEXTURE_2D,u),_.texImage2D(_.TEXTURE_2D,0,2===this.version?_.RGBA32F:_.RGBA,1,1,0,_.RGBA,_.FLOAT,null);const h=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,h),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,u,0);const f=_.checkFramebufferStatus(_.FRAMEBUFFER)===_.FRAMEBUFFER_COMPLETE;return _.bindTexture(_.TEXTURE_2D,null),_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteTexture(u),_.deleteFramebuffer(h),f}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const _=this.gl;let u,l,h,f,g;try{return u=_.createTexture(),l=_.createFramebuffer(),_.bindTexture(_.TEXTURE_2D,u),_.texImage2D(_.TEXTURE_2D,0,2===this.version?_.RGBA32F:_.RGBA,1,1,0,_.RGBA,_.FLOAT,null),_.bindFramebuffer(_.FRAMEBUFFER,l),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,u,0),_.enable(_.BLEND),h=_.createShader(_.VERTEX_SHADER),!!h&&(_.shaderSource(h,"void main(){}"),_.compileShader(h),f=_.createShader(_.FRAGMENT_SHADER),!!f&&(_.shaderSource(f,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),_.compileShader(f),g=_.createProgram(),!!g&&(_.attachShader(g,h),_.attachShader(g,f),_.linkProgram(g),_.useProgram(g),_.drawArrays(_.POINTS,0,1),_.getError()===_.NO_ERROR)))}finally{_.disable(_.BLEND),g&&_.deleteProgram(g),h&&_.deleteShader(h),f&&_.deleteShader(f),l&&(_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(l)),u&&(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(u))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){const _=this.gl,u=this.disjointTimerQueryWebgl2Extension,l=_.createQuery();return _.beginQuery(u.TIME_ELAPSED_EXT,l),l}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");this.gl.endQuery(this.disjointTimerQueryWebgl2Extension.TIME_ELAPSED_EXT)}isTimerResultAvailable(_){let u=!1,l=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const h=this.gl,f=this.disjointTimerQueryWebgl2Extension;u=h.getQueryParameter(_,h.QUERY_RESULT_AVAILABLE),l=h.getParameter(f.GPU_DISJOINT_EXT)}return u&&!l}getTimerResult(_){let u=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{const l=this.gl;u=l.getQueryParameter(_,l.QUERY_RESULT),l.deleteQuery(_)}return u/1e6}waitForQueryAndGetTime(_){var u=this;return _asyncToGenerator(function*(){return yield(0,C.repeatedTry)(()=>u.isTimerResultAvailable(_)),u.getTimerResult(_)})()}createAndWaitForFence(){var _=this;return _asyncToGenerator(function*(){const u=_.createFence(_.gl);return _.pollFence(u)})()}createFence(_){let u;const l=_,h=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0);return _.flush(),u=null===h?()=>!0:()=>{const f=l.clientWaitSync(h,0,0);return f===l.ALREADY_SIGNALED||f===l.CONDITION_SATISFIED},{query:h,isFencePassed:u}}pollFence(_){var u=this;return _asyncToGenerator(function*(){return new Promise(l=>{u.addItemToPoll(()=>_.isFencePassed(),()=>l())})})()}pollItems(){const _=w(this.itemsToPoll.map(u=>u.isDoneFn));for(let u=0;u<=_;++u){const{resolveFn:l}=this.itemsToPoll[u];l()}this.itemsToPoll=this.itemsToPoll.slice(_+1)}addItemToPoll(_,u){var l=this;return _asyncToGenerator(function*(){l.itemsToPoll.push({isDoneFn:_,resolveFn:u}),l.itemsToPoll.length>1||(yield(0,C.repeatedTry)(()=>(l.pollItems(),0===l.itemsToPoll.length)))})()}}},1036:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.ExecutionPlan=void 0;const z=q(6231);class L{constructor(S,O){this.op=S,this.node=O}}F.ExecutionPlan=class{constructor(V,S,O){this.graph=V,this.profiler=O,this.initialize(S)}initialize(V){this.profiler.event("session","ExecutionPlan.initialize",()=>{const S=this.graph.getNodes();if(S.length!==V.length)throw new Error("The size of nodes and OPs do not match.");this._ops=V.map((O,C)=>new L(O,S[C])),this.reset(),this._starter=[],this._ops.forEach((O,C)=>{let w=!0;for(const _ of O.node.inputs)if(!this._values[_]&&-1===this.graph.getInputIndices().indexOf(_)){w=!1;break}w&&this._starter.push(C)})})}reset(){this._values=this.graph.getValues().map(V=>V.tensor)}execute(V,S){var O=this;return _asyncToGenerator(function*(){return O.profiler.event("session","ExecutionPlan.execute",_asyncToGenerator(function*(){O.reset();const C=V.createInferenceHandler(),w=O.graph.getInputIndices();if(S.length!==w.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${S.length} expected: ${w.length}`);S.forEach((g,b)=>{O._values[w[b]]=g});const _=O._starter.slice(0),u=O.graph.getValues(),l=O.graph.getNodes();let h=0;for(;h<_.length;){const g=_[h++],b=O._ops[g],x=b.node.inputs.map(M=>O._values[M]);if(-1!==x.indexOf(void 0))throw new Error(`unresolved input detected: op: ${b.node}`);const A=x;z.Logger.verbose("ExecPlan",`Runing op:${b.node.name} (${A.map((M,P)=>`'${b.node.inputs[P]}': ${M.type}[${M.dims.join(",")}]`).join(", ")})`);const k=yield O.profiler.event("node",b.node.name,_asyncToGenerator(function*(){return b.op.impl(C,A,b.op.context)}));if(k.length!==b.node.outputs.length)throw new Error("the size of output does not match model definition.");k.forEach((M,P)=>{const B=b.node.outputs[P];if(O._values[B])throw new Error(`output [${B}] already has value: op:${b.node.name}`);O._values[B]=M});const T=new Set;k.forEach((M,P)=>{const B=b.node.outputs[P];for(const U of u[B].to){const N=l[U];let $=!0;for(const G of N.inputs)if(!O._values[G]){$=!1;break}$&&T.add(U)}}),_.push(...T)}const f=[];for(let g=0;g<O.graph.getOutputIndices().length;g++){const b=O.graph.getOutputIndices()[g],x=O._values[b];if(void 0===x)throw new Error(`required output [${b}] does not have value`);0===b&&(yield x.getData()),f.push(x)}return z.Logger.verbose("ExecPlan","disposing of inferenceHandler"),C.dispose(),f}))})()}}},7070:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Graph=void 0;const z=q(1446),L=q(7778),V=q(9395),S=q(9162),O=q(2517);var C=V.onnxruntime.experimental.fbs;F.Graph={from:(l,h)=>new u(l,h)};class w{constructor(h){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,h&&(this.type=O.ProtoUtil.tensorValueTypeFromProto(h.type.tensorType))}get from(){return this._from}get to(){return this._to}}class _{constructor(h,f){h instanceof z.onnx.NodeProto?(this.name=h.name,this.opType=h.opType,this.attributes=new L.Attribute(h.attribute)):h instanceof C.Node&&(this.name=f??h.name(),this.opType=h.opType(),this.attributes=new L.Attribute(O.ProtoUtil.tensorAttributesFromORTFormat(h))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class u{constructor(h,f){if(!h)throw new TypeError("graph is empty");this.buildGraph(h),this.transformGraph(f),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(h){if(h instanceof z.onnx.GraphProto)this.buildGraphFromOnnxFormat(h);else{if(!(h instanceof C.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(h)}}buildGraphFromOnnxFormat(h){const f=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const g=new Map;if(!h.input)throw new Error("missing information in graph: input");const b=[];for(const x of h.input){if(f.has(x.name))throw new Error(`duplicated input name: ${x.name}`);const A=this._allData.push(new w(x))-1;f.set(x.name,A),b.push(x.name)}if(!h.initializer)throw new Error("missing information in graph: initializer");for(const x of h.initializer){let A=f.get(x.name);if(void 0===A){const k=new w;k.type={shape:{dims:O.ProtoUtil.tensorDimsFromProto(x.dims)},tensorType:O.ProtoUtil.tensorDataTypeFromProto(x.dataType)},A=this._allData.push(k)-1,f.set(x.name,A)}this._allData[A]._from=-1,this._allData[A].tensor=S.Tensor.fromProto(x)}for(let x=0;x<this._allData.length;x++)this._allData[x].tensor||(this._allInputIndices.push(x),this._allInputNames.push(b[x]));if(!h.output)throw new Error("missing information in graph: output");for(const x of h.output){if(f.has(x.name))throw new Error(`duplicated output name: ${x.name}`);const A=this._allData.push(new w(x))-1;f.set(x.name,A),this._allOutputIndices.push(A),this._allOutputNames.push(x.name)}if(!h.node)throw new Error("missing information in graph: node");for(const x of h.node){if(!x.name)for(let k=0;;k++){const T=`unnamed_${x.opType}_${k}`;if(!g.has(T)){x.name=T;break}}if(g.has(x.name))throw new Error(`duplicated node name: ${x.name}`);const A=this._nodes.push(new _(x))-1;g.set(x.name,A)}for(let x=0;x<this._nodes.length;x++){const A=this._nodes[x],k=h.node[x];if(!k.output)throw new Error(`missing output for node: ${k.name}`);for(const T of k.output){let M=f.get(T);if(void 0===M&&(M=this._allData.push(new w)-1,f.set(T,M)),A.outputs.push(M),void 0!==this._allData[M]._from)throw new Error(`multiple nodes output to one data value: ${M}`);if(this._allData[M]._from=x,"Constant"===k.opType){if(!k.attribute||1!==k.attribute.length||!k.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!k.output||1!==k.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");A.outputs.pop(),A.executeNode=!1,this._allData[M]._from=-1,this._allData[M].tensor=S.Tensor.fromProto(k.attribute[0].t)}}}for(let x=0;x<this._nodes.length;x++){const A=this._nodes[x],k=h.node[x];if(!k.input)throw new Error(`missing input for node: ${k.name}`);for(const T of k.input){const M=f.get(T);if(void 0===M){if(""===T&&3===k.input.length&&"Resize"===k.opType)continue;throw new Error(`unrecognized input '${T}' for node: ${k.name}`)}A.inputs.push(M),this._allData[M]._to.push(x)}}return!0}buildGraphFromOrtFormat(h){var f,g,b;const x=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const A=new Map,k=[];for(let T=0;T<h.inputsLength();T++){const M=h.inputs(T);if(x.has(M))throw new Error(`duplicated input name: ${M}`);for(let P=0;P<h.nodeArgsLength();P++)if((null===(f=h.nodeArgs(P))||void 0===f?void 0:f.name())===M){const B=new w;if((null===(b=null===(g=h.nodeArgs(P))||void 0===g?void 0:g.type())||void 0===b?void 0:b.valueType())!==C.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const U=h.nodeArgs(P).type().value(new C.TensorTypeAndShape),N=O.ProtoUtil.tensorDataTypeFromProto(U.elemType()),$=U.shape(),G=[];for(let K=0;K<$.dimLength();K++)G.push(O.LongUtil.longToNumber($.dim(K).value().dimValue()));B.type={shape:{dims:G},tensorType:N};const W=this._allData.push(B)-1;x.set(M,W),k.push(M)}}for(let T=0;T<h.initializersLength();T++){const M=h.initializers(T);let P=x.get(M.name());if(void 0===P){const B=new w,U=O.ProtoUtil.tensorDimsFromORTFormat(M),N=O.ProtoUtil.tensorDataTypeFromProto(M.dataType());B.type={shape:{dims:U},tensorType:N},P=this._allData.push(B)-1,x.set(M.name(),P)}this._allData[P]._from=-1,this._allData[P].tensor=S.Tensor.fromOrtTensor(M)}for(let T=0;T<this._allData.length;T++)this._allData[T].tensor||(this._allInputIndices.push(T),this._allInputNames.push(k[T]));for(let T=0;T<h.outputsLength();T++){const M=h.outputs(T);if(x.has(M))throw new Error(`duplicated output name: ${M}`);const P=this._allData.push(new w)-1;x.set(M,P),this._allOutputIndices.push(P),this._allOutputNames.push(M)}if(!h.nodes)throw new Error("missing information in graph: node");for(let T=0;T<h.nodesLength();T++){const M=h.nodes(T);let P=M.name();if(!P)for(let U=0;P=`unnamed_${M.opType()}_${U}`,A.has(P);U++);if(A.has(P))throw new Error(`duplicated node name: ${P}`);const B=this._nodes.push(new _(M,P))-1;A.set(P,B)}for(let T=0;T<this._nodes.length;T++){const M=this._nodes[T],P=h.nodes(T);if(null==P)throw new Error(`No node exists at index ${T}`);if(0===P?.outputsLength())throw new Error(`missing output for node: ${P.name}`);for(let B=0;B<P?.outputsLength();B++){const U=P?.outputs(B);let N=x.get(U);if(void 0===N&&(N=this._allData.push(new w)-1,x.set(U,N)),M.outputs.push(N),void 0!==this._allData[N]._from)throw new Error(`multiple nodes output to one data value: ${N}`);if(this._allData[N]._from=T,"Constant"===P.opType()){if(1!==P.attributesLength()||!P.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==P.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");M.outputs.pop(),M.executeNode=!1,this._allData[N]._from=-1,this._allData[N].tensor=S.Tensor.fromOrtTensor(P.attributes(0).t())}}}for(let T=0;T<this._nodes.length;T++){const M=this._nodes[T],P=h.nodes(T);if(0===P.inputsLength())throw new Error(`missing input for node: ${P.name}`);for(let B=0;B<P.inputsLength();B++){const U=P.inputs(B),N=x.get(U);if(void 0===N)throw new Error(`unrecognized input '${U}' for node: ${P.name()}`);M.inputs.push(N),this._allData[N]._to.push(T)}}}checkIsAcyclic(){const h=new Set;this._allInputIndices.forEach(b=>{this._allData[b]._to.forEach(x=>{h.add(x)})});const f=Array.from(h),g=new Array(this._nodes.length).fill("white");for(;f.length>0;){const b=f.pop();"gray"===g[b]?g[b]="black":(f.push(b),g[b]="gray",this._nodes[b].outputs.forEach(x=>{const A=this._allData[x];if(void 0!==A.tensor)throw new Error("node outputs should not be initialized");if(A._from!==b)throw new Error("from property of the Value object doesn't match index of Node being processed");A._to.forEach(k=>{if("gray"===g[k])throw new Error("model graph is cyclic");"white"===g[k]&&f.push(k)})}))}}transformGraph(h){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),h&&h.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let h=0;for(let f=0;f<this._nodes.length;f++)this._nodes[f].executeNode?h>0&&(this._nodes[f].inputs.forEach(g=>{const b=this._allData[g]._to.indexOf(f+h);-1!==b&&(this._allData[g]._to[b]=f)}),this._nodes[f].outputs.forEach(g=>{this._allData[g]._from&&this._allData[g]._from===f+h&&(this._allData[g]._from=f)})):(h++,this._nodes[f].outputs.forEach(g=>{this._allData[g]._from=-2}),this._nodes.splice(f,1),f--);h=0;for(let f=0;f<this._allData.length;f++)if(-2!==this._allData[f].from||-1!==this._allOutputIndices.indexOf(f+h)){if(h>0){let g=-1;void 0!==this._allData[f].from&&-1!==this._allData[f].from?(g=this._nodes[this._allData[f].from].outputs.indexOf(f+h),-1!==g&&(this._nodes[this._allData[f].from].outputs[g]=f)):(g=this._allInputIndices.indexOf(f+h),-1!==g&&(this._allInputIndices[g]=f)),this._allData[f].to.forEach(b=>{g=this._nodes[b].inputs.indexOf(f+h),-1!==g&&(this._nodes[b].inputs[g]=f)}),0===this._allData[f].to.length&&(g=this._allOutputIndices.indexOf(f+h),-1!==g&&(this._allOutputIndices[g]=f))}}else h++,this._allData.splice(f,1),f--}deleteNode(h){const f=this._nodes[h];if(f.outputs.length>1)for(let T=1;T<f.outputs.length;T++)if(this._allData[f.outputs[T]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");f.executeNode=!1;const g=f.inputs[0],b=f.outputs[0],x=this._allData[b].to,A=this._allData[g].to.indexOf(h);if(-1===A)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[g].to.splice(A,1),this._allData[b]._to=[];const k=this._allOutputIndices.indexOf(b);if(-1!==k&&(this._allOutputIndices[k]=g),x&&x.length>0)for(const T of x){const M=this._nodes[T].inputs.indexOf(b);if(-1===M)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[T].inputs[M]=g,this._allData[g].to.push(T)}}removeAllDropoutNodes(){let h=0;for(const f of this._nodes){if("Dropout"===f.opType){if(1!==f.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==f.outputs.length&&2!==f.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===f.outputs.length&&0!==this._allData[f.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(h)}h++}}removeAllIdentityNodes(){let h=0;for(const f of this._nodes)"Identity"===f.opType&&this.deleteNode(h),h++}isActivation(h){switch(h.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const h of this._nodes)if("Conv"===h.opType){const f=this._allData[h.outputs[0]]._to;if(1===f.length&&this.isActivation(this._nodes[f[0]])){const g=this._nodes[f[0]];if("Clip"===g.opType)if(1===g.inputs.length)try{h.attributes.set("activation_params","floats",[g.attributes.getFloat("min"),g.attributes.getFloat("max")])}catch{h.attributes.set("activation_params","floats",[O.MIN_CLIP,O.MAX_CLIP])}else{if(!(g.inputs.length>=3&&void 0!==this._allData[g.inputs[1]].tensor&&void 0!==this._allData[g.inputs[2]].tensor))continue;h.attributes.set("activation_params","floats",[this._allData[g.inputs[1]].tensor.floatData[0],this._allData[g.inputs[2]].tensor.floatData[0]])}h.attributes.set("activation","string",g.opType),this.deleteNode(f[0])}}}}},6231:(Ye,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.now=F.Profiler=F.Logger=void 0;const q={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},z={none:new class{log(_,u,l){}},console:new class{log(_,u,l){console.log(`${this.color(_)} ${l?"\x1b[35m"+l+"\x1b[0m ":""}${u}`)}color(_){switch(_){case"verbose":return"\x1b[34;40mv\x1b[0m";case"info":return"\x1b[32mi\x1b[0m";case"warning":return"\x1b[30;43mw\x1b[0m";case"error":return"\x1b[31;40me\x1b[0m";case"fatal":return"\x1b[101mf\x1b[0m";default:throw new Error(`unsupported severity: ${_}`)}}}},L={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let V={"":L};function S(_,u,l,h){if(void 0===u)return{verbose:S.verbose.bind(null,f=_),info:S.info.bind(null,f),warning:S.warning.bind(null,f),error:S.error.bind(null,f),fatal:S.fatal.bind(null,f)};if(void 0===l)O(_,u);else if("number"==typeof l&&void 0===h)O(_,u);else if("string"==typeof l&&void 0===h)O(_,l,0,u);else{if("string"!=typeof l||"number"!=typeof h)throw new TypeError("input is valid");O(_,l,0,u)}var f}function O(_,u,l,h){const f=V[h||""]||V[""];q[_]<q[f.minimalSeverity]||(f.logDateTime&&(u=`${(new Date).toISOString()}|${u}`),z[f.provider].log(_,u,h))}(function(_){function u(h){V={},l("",h||{})}function l(h,f){if("*"===h)u(f);else{const g=V[h]||L;V[h]={provider:f.provider||g.provider,minimalSeverity:f.minimalSeverity||g.minimalSeverity,logDateTime:void 0===f.logDateTime?g.logDateTime:f.logDateTime,logSourceLocation:void 0===f.logSourceLocation?g.logSourceLocation:f.logSourceLocation}}}_.verbose=function(h,f){_("verbose",h,f)},_.info=function(h,f){_("info",h,f)},_.warning=function(h,f){_("warning",h,f)},_.error=function(h,f){_("error",h,f)},_.fatal=function(h,f){_("fatal",h,f)},_.reset=u,_.set=l,_.setWithEnv=function(h){const f={};h.logLevel&&(f.minimalSeverity=h.logLevel),l("",f)}})(S||(S={})),F.Logger=S;class C{constructor(u,l,h,f,g,b){this.category=u,this.name=l,this.startTime=h,this.endCallback=f,this.timer=g,this.ctx=b}end(){return this.endCallback(this)}checkTimer(){var u=this;return _asyncToGenerator(function*(){if(void 0===u.ctx||void 0===u.timer)throw new Error("No webgl timer found");return u.ctx.endTimer(),u.ctx.waitForQueryAndGetTime(u.timer)})()}}class w{constructor(u,l,h,f){this.category=u,this.name=l,this.startTime=h,this.endTime=f}}F.Profiler=class{static create(_){return void 0===_?new this:new this(_.maxNumberEvents,_.flushBatchSize,_.flushIntervalInMilliseconds)}constructor(_,u,l){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===_?1e4:_,this._flushBatchSize=void 0===u?10:u,this._flushIntervalInMilliseconds=void 0===l?5e3:l}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,F.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(_,u,l,h){const f=this._started?this.begin(_,u,h):void 0;let g=!1;const b=l();if(b&&"function"==typeof b.then)return g=!0,new Promise((x,A)=>{b.then(function(){var k=_asyncToGenerator(function*(T){f&&(yield f.end()),x(T)});return function(T){return k.apply(this,arguments)}}(),function(){var k=_asyncToGenerator(function*(T){f&&(yield f.end()),A(T)});return function(T){return k.apply(this,arguments)}}())});if(!g&&f){const x=f.end();if(x&&"function"==typeof x.then)return new Promise((A,k)=>{x.then(()=>{A(b)},T=>{k(T)})})}return b}begin(_,u,l){var h=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===l){const f=(0,F.now)();return this.flush(f),new C(_,u,f,g=>this.endSync(g))}{const f=l.beginTimer();return new C(_,u,0,function(){var g=_asyncToGenerator(function*(b){return h.end(b)});return function(b){return g.apply(this,arguments)}}(),f,l)}}end(_){var u=this;return _asyncToGenerator(function*(){const l=yield _.checkTimer();u._timingEvents.length<u._maxNumberEvents&&(u._timingEvents.push(new w(_.category,_.name,_.startTime,l)),u.flush(l))})()}endSync(_){const u=(0,F.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new w(_.category,_.name,_.startTime,u)),this.flush(u))}logOneEvent(_){F.Logger.verbose(`Profiler.${_.category}`,`${(_.endTime-_.startTime).toFixed(2)}ms on event '${_.name}' at ${_.endTime.toFixed(2)}`)}flush(_){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||_-this._flushTime>=this._flushIntervalInMilliseconds){for(const u=this._flushPointer;this._flushPointer<u+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,F.now)()}}get started(){return this._started}},F.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Model=void 0;const z=q(5686),L=q(1446),V=q(7070),S=q(9395),O=q(2517);var C=S.onnxruntime.experimental.fbs;F.Model=class{constructor(){}load(w,_,u){if(!u)try{return void this.loadFromOnnxFormat(w,_)}catch(l){if(void 0!==u)throw l}this.loadFromOrtFormat(w,_)}loadFromOnnxFormat(w,_){const u=L.onnx.ModelProto.decode(w);if(O.LongUtil.longToNumber(u.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=u.opsetImport.map(l=>({domain:l.domain,version:O.LongUtil.longToNumber(l.version)})),this._graph=V.Graph.from(u.graph,_)}loadFromOrtFormat(w,_){const u=new z.flatbuffers.ByteBuffer(w),l=C.InferenceSession.getRootAsInferenceSession(u).model();if(O.LongUtil.longToNumber(l.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let h=0;h<l.opsetImportLength();h++){const f=l.opsetImport(h);this._opsets.push({domain:f?.domain(),version:O.LongUtil.longToNumber(f.version())})}this._graph=V.Graph.from(l.graph(),_)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(Ye,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.FLOAT_TYPES=F.INT_TYPES=F.NUMBER_TYPES=void 0,F.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],F.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],F.FLOAT_TYPES=["float32","float64"]},1047:(Ye,F)=>{"use strict";function q(z,L){if(L.endsWith("+")){const V=Number.parseInt(L.substring(0,L.length-1),10);return!isNaN(V)&&V<=z}if(2===L.split("-").length){const V=L.split("-"),S=Number.parseInt(V[0],10),O=Number.parseInt(V[1],10);return!isNaN(S)&&!isNaN(O)&&S<=z&&z<=O}return Number.parseInt(L,10)===z}Object.defineProperty(F,"__esModule",{value:!0}),F.resolveOperator=void 0,F.resolveOperator=function(z,L,V){for(const S of V){const C=S[1],w=S[2],_=S[3],u=S[4];if(z.opType===S[0])for(const l of L)if((l.domain===C||"ai.onnx"===l.domain&&""===C)&&q(l.version,w))return{opImpl:_,opInit:u}}throw new TypeError(`cannot resolve operator '${z.opType}' with opsets: ${L.map(S=>`${S.domain||"ai.onnx"} v${S.version}`).join(", ")}`)}},9395:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.onnxruntime=void 0;const z=q(5686);var L,V,S,O;(function(S){let O;var C;(C=O=S.AttributeType||(S.AttributeType={}))[C.UNDEFINED=0]="UNDEFINED",C[C.FLOAT=1]="FLOAT",C[C.INT=2]="INT",C[C.STRING=3]="STRING",C[C.TENSOR=4]="TENSOR",C[C.GRAPH=5]="GRAPH",C[C.FLOATS=6]="FLOATS",C[C.INTS=7]="INTS",C[C.STRINGS=8]="STRINGS",C[C.TENSORS=9]="TENSORS",C[C.GRAPHS=10]="GRAPHS",C[C.SPARSE_TENSOR=11]="SPARSE_TENSOR",C[C.SPARSE_TENSORS=12]="SPARSE_TENSORS"})((V=(L=F.onnxruntime||(F.onnxruntime={})).experimental||(L.experimental={})).fbs||(V.fbs={})),function(C){let w;var _;(_=w=C.DimensionValueType||(C.DimensionValueType={}))[_.UNKNOWN=0]="UNKNOWN",_[_.VALUE=1]="VALUE",_[_.PARAM=2]="PARAM"}((O=(S=F.onnxruntime||(F.onnxruntime={})).experimental||(S.experimental={})).fbs||(O.fbs={})),function(S){!function(O){!function(C){let w;var _;(_=w=C.TensorDataType||(C.TensorDataType={}))[_.UNDEFINED=0]="UNDEFINED",_[_.FLOAT=1]="FLOAT",_[_.UINT8=2]="UINT8",_[_.INT8=3]="INT8",_[_.UINT16=4]="UINT16",_[_.INT16=5]="INT16",_[_.INT32=6]="INT32",_[_.INT64=7]="INT64",_[_.STRING=8]="STRING",_[_.BOOL=9]="BOOL",_[_.FLOAT16=10]="FLOAT16",_[_.DOUBLE=11]="DOUBLE",_[_.UINT32=12]="UINT32",_[_.UINT64=13]="UINT64",_[_.COMPLEX64=14]="COMPLEX64",_[_.COMPLEX128=15]="COMPLEX128",_[_.BFLOAT16=16]="BFLOAT16"}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){let w;var _;(_=w=C.NodeType||(C.NodeType={}))[_.Primitive=0]="Primitive",_[_.Fused=1]="Fused"}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){let w;var _;(_=w=C.TypeInfoValue||(C.TypeInfoValue={}))[_.NONE=0]="NONE",_[_.tensor_type=1]="tensor_type",_[_.sequence_type=2]="sequence_type",_[_.map_type=3]="map_type"}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsShape(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsShape(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}dim(u,l){let h=this.bb.__offset(this.bb_pos,4);return h?(l||new S.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}dimLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}static startShape(u){u.startObject(1)}static addDim(u,l){u.addFieldOffset(0,l,0)}static createDimVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startDimVector(u,l){u.startVector(4,l,4)}static endShape(u){return u.endObject()}static createShape(u,l){return w.startShape(u),w.addDim(u,l),w.endShape(u)}}C.Shape=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsDimension(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsDimension(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}value(u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new S.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(u){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,u):null}static startDimension(u){u.startObject(2)}static addValue(u,l){u.addFieldOffset(0,l,0)}static addDenotation(u,l){u.addFieldOffset(1,l,0)}static endDimension(u){return u.endObject()}static createDimension(u,l,h){return w.startDimension(u),w.addValue(u,l),w.addDenotation(u,h),w.endDimension(u)}}C.Dimension=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsDimensionValue(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsDimensionValue(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}dimType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt8(this.bb_pos+u):S.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}dimParam(u){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,u):null}static startDimensionValue(u){u.startObject(3)}static addDimType(u,l){u.addFieldInt8(0,l,S.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(u,l){u.addFieldInt64(1,l,u.createLong(0,0))}static addDimParam(u,l){u.addFieldOffset(2,l,0)}static endDimensionValue(u){return u.endObject()}static createDimensionValue(u,l,h,f){return w.startDimensionValue(u),w.addDimType(u,l),w.addDimValue(u,h),w.addDimParam(u,f),w.endDimensionValue(u)}}C.DimensionValue=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsTensorTypeAndShape(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTensorTypeAndShape(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}elemType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt32(this.bb_pos+u):S.experimental.fbs.TensorDataType.UNDEFINED}shape(u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new S.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(u){u.startObject(2)}static addElemType(u,l){u.addFieldInt32(0,l,S.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(u,l){u.addFieldOffset(1,l,0)}static endTensorTypeAndShape(u){return u.endObject()}static createTensorTypeAndShape(u,l,h){return w.startTensorTypeAndShape(u),w.addElemType(u,l),w.addShape(u,h),w.endTensorTypeAndShape(u)}}C.TensorTypeAndShape=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsMapType(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsMapType(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}keyType(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt32(this.bb_pos+u):S.experimental.fbs.TensorDataType.UNDEFINED}valueType(u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new S.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(u){u.startObject(2)}static addKeyType(u,l){u.addFieldInt32(0,l,S.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(u,l){u.addFieldOffset(1,l,0)}static endMapType(u){return u.endObject()}static createMapType(u,l,h){return w.startMapType(u),w.addKeyType(u,l),w.addValueType(u,h),w.endMapType(u)}}C.MapType=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsSequenceType(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSequenceType(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}elemType(u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new S.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(u){u.startObject(1)}static addElemType(u,l){u.addFieldOffset(0,l,0)}static endSequenceType(u){return u.endObject()}static createSequenceType(u,l){return w.startSequenceType(u),w.addElemType(u,l),w.endSequenceType(u)}}C.SequenceType=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){(O.fbs||(O.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(C,w){return this.bb_pos=C,this.bb=w,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(C,w,_,u){return C.prep(4,12),C.writeInt32(u),C.writeInt32(_),C.writeInt32(w),C.offset()}}}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsNodeEdge(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsNodeEdge(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}nodeIndex(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readUint32(this.bb_pos+u):0}inputEdges(u,l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new S.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+h)+12*u,this.bb):null}inputEdgesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}outputEdges(u,l){let h=this.bb.__offset(this.bb_pos,8);return h?(l||new S.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+h)+12*u,this.bb):null}outputEdgesLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}static startNodeEdge(u){u.startObject(3)}static addNodeIndex(u,l){u.addFieldInt32(0,l,0)}static addInputEdges(u,l){u.addFieldOffset(1,l,0)}static startInputEdgesVector(u,l){u.startVector(12,l,4)}static addOutputEdges(u,l){u.addFieldOffset(2,l,0)}static startOutputEdgesVector(u,l){u.startVector(12,l,4)}static endNodeEdge(u){return u.endObject()}static createNodeEdge(u,l,h,f){return w.startNodeEdge(u),w.addNodeIndex(u,l),w.addInputEdges(u,h),w.addOutputEdges(u,f),w.endNodeEdge(u)}}C.NodeEdge=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsNode(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsNode(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}name(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}docString(u){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,u):null}domain(u){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,u):null}sinceVersion(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readInt32(this.bb_pos+u):0}index(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readUint32(this.bb_pos+u):0}opType(u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,u):null}type(){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.readInt32(this.bb_pos+u):S.experimental.fbs.NodeType.Primitive}executionProviderType(u){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,u):null}inputs(u,l){let h=this.bb.__offset(this.bb_pos,20);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,l):null}inputsLength(){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__vector_len(this.bb_pos+u):0}outputs(u,l){let h=this.bb.__offset(this.bb_pos,22);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,l):null}outputsLength(){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.__vector_len(this.bb_pos+u):0}attributes(u,l){let h=this.bb.__offset(this.bb_pos,24);return h?(l||new S.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}attributesLength(){let u=this.bb.__offset(this.bb_pos,24);return u?this.bb.__vector_len(this.bb_pos+u):0}inputArgCounts(u){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+4*u):0}inputArgCountsLength(){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.__vector_len(this.bb_pos+u):0}inputArgCountsArray(){let u=this.bb.__offset(this.bb_pos,26);return u?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}implicitInputs(u,l){let h=this.bb.__offset(this.bb_pos,28);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,l):null}implicitInputsLength(){let u=this.bb.__offset(this.bb_pos,28);return u?this.bb.__vector_len(this.bb_pos+u):0}static startNode(u){u.startObject(13)}static addName(u,l){u.addFieldOffset(0,l,0)}static addDocString(u,l){u.addFieldOffset(1,l,0)}static addDomain(u,l){u.addFieldOffset(2,l,0)}static addSinceVersion(u,l){u.addFieldInt32(3,l,0)}static addIndex(u,l){u.addFieldInt32(4,l,0)}static addOpType(u,l){u.addFieldOffset(5,l,0)}static addType(u,l){u.addFieldInt32(6,l,S.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(u,l){u.addFieldOffset(7,l,0)}static addInputs(u,l){u.addFieldOffset(8,l,0)}static createInputsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startInputsVector(u,l){u.startVector(4,l,4)}static addOutputs(u,l){u.addFieldOffset(9,l,0)}static createOutputsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startOutputsVector(u,l){u.startVector(4,l,4)}static addAttributes(u,l){u.addFieldOffset(10,l,0)}static createAttributesVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startAttributesVector(u,l){u.startVector(4,l,4)}static addInputArgCounts(u,l){u.addFieldOffset(11,l,0)}static createInputArgCountsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addInt32(l[h]);return u.endVector()}static startInputArgCountsVector(u,l){u.startVector(4,l,4)}static addImplicitInputs(u,l){u.addFieldOffset(12,l,0)}static createImplicitInputsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startImplicitInputsVector(u,l){u.startVector(4,l,4)}static endNode(u){return u.endObject()}static createNode(u,l,h,f,g,b,x,A,k,T,M,P,B,U){return w.startNode(u),w.addName(u,l),w.addDocString(u,h),w.addDomain(u,f),w.addSinceVersion(u,g),w.addIndex(u,b),w.addOpType(u,x),w.addType(u,A),w.addExecutionProviderType(u,k),w.addInputs(u,T),w.addOutputs(u,M),w.addAttributes(u,P),w.addInputArgCounts(u,B),w.addImplicitInputs(u,U),w.endNode(u)}}C.Node=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsValueInfo(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsValueInfo(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}name(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}docString(u){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,u):null}type(u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new S.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(u){u.startObject(3)}static addName(u,l){u.addFieldOffset(0,l,0)}static addDocString(u,l){u.addFieldOffset(1,l,0)}static addType(u,l){u.addFieldOffset(2,l,0)}static endValueInfo(u){return u.endObject()}static createValueInfo(u,l,h,f){return w.startValueInfo(u),w.addName(u,l),w.addDocString(u,h),w.addType(u,f),w.endValueInfo(u)}}C.ValueInfo=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsTypeInfo(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTypeInfo(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}denotation(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}valueType(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readUint8(this.bb_pos+u):S.experimental.fbs.TypeInfoValue.NONE}value(u){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(u,this.bb_pos+l):null}static startTypeInfo(u){u.startObject(3)}static addDenotation(u,l){u.addFieldOffset(0,l,0)}static addValueType(u,l){u.addFieldInt8(1,l,S.experimental.fbs.TypeInfoValue.NONE)}static addValue(u,l){u.addFieldOffset(2,l,0)}static endTypeInfo(u){return u.endObject()}static createTypeInfo(u,l,h,f){return w.startTypeInfo(u),w.addDenotation(u,l),w.addValueType(u,h),w.addValue(u,f),w.endTypeInfo(u)}}C.TypeInfo=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsOperatorSetId(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsOperatorSetId(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}domain(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}version(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}static startOperatorSetId(u){u.startObject(2)}static addDomain(u,l){u.addFieldOffset(0,l,0)}static addVersion(u,l){u.addFieldInt64(1,l,u.createLong(0,0))}static endOperatorSetId(u){return u.endObject()}static createOperatorSetId(u,l,h){return w.startOperatorSetId(u),w.addDomain(u,l),w.addVersion(u,h),w.endOperatorSetId(u)}}C.OperatorSetId=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsTensor(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsTensor(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}name(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}docString(u){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,u):null}dims(u){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+8*u):this.bb.createLong(0,0)}dimsLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}dataType(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readInt32(this.bb_pos+u):S.experimental.fbs.TensorDataType.UNDEFINED}rawData(u){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+u):0}rawDataLength(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__vector_len(this.bb_pos+u):0}rawDataArray(){let u=this.bb.__offset(this.bb_pos,12);return u?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}stringData(u,l){let h=this.bb.__offset(this.bb_pos,14);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,l):null}stringDataLength(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__vector_len(this.bb_pos+u):0}static startTensor(u){u.startObject(6)}static addName(u,l){u.addFieldOffset(0,l,0)}static addDocString(u,l){u.addFieldOffset(1,l,0)}static addDims(u,l){u.addFieldOffset(2,l,0)}static createDimsVector(u,l){u.startVector(8,l.length,8);for(let h=l.length-1;h>=0;h--)u.addInt64(l[h]);return u.endVector()}static startDimsVector(u,l){u.startVector(8,l,8)}static addDataType(u,l){u.addFieldInt32(3,l,S.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(u,l){u.addFieldOffset(4,l,0)}static createRawDataVector(u,l){u.startVector(1,l.length,1);for(let h=l.length-1;h>=0;h--)u.addInt8(l[h]);return u.endVector()}static startRawDataVector(u,l){u.startVector(1,l,1)}static addStringData(u,l){u.addFieldOffset(5,l,0)}static createStringDataVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startStringDataVector(u,l){u.startVector(4,l,4)}static endTensor(u){return u.endObject()}static createTensor(u,l,h,f,g,b,x){return w.startTensor(u),w.addName(u,l),w.addDocString(u,h),w.addDims(u,f),w.addDataType(u,g),w.addRawData(u,b),w.addStringData(u,x),w.endTensor(u)}}C.Tensor=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsSparseTensor(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSparseTensor(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}values(u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new S.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new S.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(u){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+8*u):this.bb.createLong(0,0)}dimsLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}static startSparseTensor(u){u.startObject(3)}static addValues(u,l){u.addFieldOffset(0,l,0)}static addIndices(u,l){u.addFieldOffset(1,l,0)}static addDims(u,l){u.addFieldOffset(2,l,0)}static createDimsVector(u,l){u.startVector(8,l.length,8);for(let h=l.length-1;h>=0;h--)u.addInt64(l[h]);return u.endVector()}static startDimsVector(u,l){u.startVector(8,l,8)}static endSparseTensor(u){return u.endObject()}static createSparseTensor(u,l,h,f){return w.startSparseTensor(u),w.addValues(u,l),w.addIndices(u,h),w.addDims(u,f),w.endSparseTensor(u)}}C.SparseTensor=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsAttribute(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsAttribute(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}name(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}docString(u){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,u):null}type(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.readInt32(this.bb_pos+u):S.experimental.fbs.AttributeType.UNDEFINED}f(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readFloat32(this.bb_pos+u):0}i(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}s(u){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,u):null}t(u){let l=this.bb.__offset(this.bb_pos,16);return l?(u||new S.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(u){let l=this.bb.__offset(this.bb_pos,18);return l?(u||new S.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(u){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+4*u):0}floatsLength(){let u=this.bb.__offset(this.bb_pos,20);return u?this.bb.__vector_len(this.bb_pos+u):0}floatsArray(){let u=this.bb.__offset(this.bb_pos,20);return u?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}ints(u){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+8*u):this.bb.createLong(0,0)}intsLength(){let u=this.bb.__offset(this.bb_pos,22);return u?this.bb.__vector_len(this.bb_pos+u):0}strings(u,l){let h=this.bb.__offset(this.bb_pos,24);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,l):null}stringsLength(){let u=this.bb.__offset(this.bb_pos,24);return u?this.bb.__vector_len(this.bb_pos+u):0}tensors(u,l){let h=this.bb.__offset(this.bb_pos,26);return h?(l||new S.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}tensorsLength(){let u=this.bb.__offset(this.bb_pos,26);return u?this.bb.__vector_len(this.bb_pos+u):0}graphs(u,l){let h=this.bb.__offset(this.bb_pos,28);return h?(l||new S.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}graphsLength(){let u=this.bb.__offset(this.bb_pos,28);return u?this.bb.__vector_len(this.bb_pos+u):0}static startAttribute(u){u.startObject(13)}static addName(u,l){u.addFieldOffset(0,l,0)}static addDocString(u,l){u.addFieldOffset(1,l,0)}static addType(u,l){u.addFieldInt32(2,l,S.experimental.fbs.AttributeType.UNDEFINED)}static addF(u,l){u.addFieldFloat32(3,l,0)}static addI(u,l){u.addFieldInt64(4,l,u.createLong(0,0))}static addS(u,l){u.addFieldOffset(5,l,0)}static addT(u,l){u.addFieldOffset(6,l,0)}static addG(u,l){u.addFieldOffset(7,l,0)}static addFloats(u,l){u.addFieldOffset(8,l,0)}static createFloatsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addFloat32(l[h]);return u.endVector()}static startFloatsVector(u,l){u.startVector(4,l,4)}static addInts(u,l){u.addFieldOffset(9,l,0)}static createIntsVector(u,l){u.startVector(8,l.length,8);for(let h=l.length-1;h>=0;h--)u.addInt64(l[h]);return u.endVector()}static startIntsVector(u,l){u.startVector(8,l,8)}static addStrings(u,l){u.addFieldOffset(10,l,0)}static createStringsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startStringsVector(u,l){u.startVector(4,l,4)}static addTensors(u,l){u.addFieldOffset(11,l,0)}static createTensorsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startTensorsVector(u,l){u.startVector(4,l,4)}static addGraphs(u,l){u.addFieldOffset(12,l,0)}static createGraphsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startGraphsVector(u,l){u.startVector(4,l,4)}static endAttribute(u){return u.endObject()}static createAttribute(u,l,h,f,g,b,x,A,k,T,M,P,B,U){return w.startAttribute(u),w.addName(u,l),w.addDocString(u,h),w.addType(u,f),w.addF(u,g),w.addI(u,b),w.addS(u,x),w.addT(u,A),w.addG(u,k),w.addFloats(u,T),w.addInts(u,M),w.addStrings(u,P),w.addTensors(u,B),w.addGraphs(u,U),w.endAttribute(u)}}C.Attribute=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsGraph(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsGraph(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}initializers(u,l){let h=this.bb.__offset(this.bb_pos,4);return h?(l||new S.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}initializersLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}nodeArgs(u,l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new S.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}nodeArgsLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}nodes(u,l){let h=this.bb.__offset(this.bb_pos,8);return h?(l||new S.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}nodesLength(){let u=this.bb.__offset(this.bb_pos,8);return u?this.bb.__vector_len(this.bb_pos+u):0}maxNodeIndex(){let u=this.bb.__offset(this.bb_pos,10);return u?this.bb.readUint32(this.bb_pos+u):0}nodeEdges(u,l){let h=this.bb.__offset(this.bb_pos,12);return h?(l||new S.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}nodeEdgesLength(){let u=this.bb.__offset(this.bb_pos,12);return u?this.bb.__vector_len(this.bb_pos+u):0}inputs(u,l){let h=this.bb.__offset(this.bb_pos,14);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,l):null}inputsLength(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__vector_len(this.bb_pos+u):0}outputs(u,l){let h=this.bb.__offset(this.bb_pos,16);return h?this.bb.__string(this.bb.__vector(this.bb_pos+h)+4*u,l):null}outputsLength(){let u=this.bb.__offset(this.bb_pos,16);return u?this.bb.__vector_len(this.bb_pos+u):0}sparseInitializers(u,l){let h=this.bb.__offset(this.bb_pos,18);return h?(l||new S.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}sparseInitializersLength(){let u=this.bb.__offset(this.bb_pos,18);return u?this.bb.__vector_len(this.bb_pos+u):0}static startGraph(u){u.startObject(8)}static addInitializers(u,l){u.addFieldOffset(0,l,0)}static createInitializersVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startInitializersVector(u,l){u.startVector(4,l,4)}static addNodeArgs(u,l){u.addFieldOffset(1,l,0)}static createNodeArgsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startNodeArgsVector(u,l){u.startVector(4,l,4)}static addNodes(u,l){u.addFieldOffset(2,l,0)}static createNodesVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startNodesVector(u,l){u.startVector(4,l,4)}static addMaxNodeIndex(u,l){u.addFieldInt32(3,l,0)}static addNodeEdges(u,l){u.addFieldOffset(4,l,0)}static createNodeEdgesVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startNodeEdgesVector(u,l){u.startVector(4,l,4)}static addInputs(u,l){u.addFieldOffset(5,l,0)}static createInputsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startInputsVector(u,l){u.startVector(4,l,4)}static addOutputs(u,l){u.addFieldOffset(6,l,0)}static createOutputsVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startOutputsVector(u,l){u.startVector(4,l,4)}static addSparseInitializers(u,l){u.addFieldOffset(7,l,0)}static createSparseInitializersVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startSparseInitializersVector(u,l){u.startVector(4,l,4)}static endGraph(u){return u.endObject()}static createGraph(u,l,h,f,g,b,x,A,k){return w.startGraph(u),w.addInitializers(u,l),w.addNodeArgs(u,h),w.addNodes(u,f),w.addMaxNodeIndex(u,g),w.addNodeEdges(u,b),w.addInputs(u,x),w.addOutputs(u,A),w.addSparseInitializers(u,k),w.endGraph(u)}}C.Graph=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsModel(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsModel(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}irVersion(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}opsetImport(u,l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new S.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}opsetImportLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}producerName(u){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,u):null}producerVersion(u){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,u):null}domain(u){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,u):null}modelVersion(){let u=this.bb.__offset(this.bb_pos,14);return u?this.bb.readInt64(this.bb_pos+u):this.bb.createLong(0,0)}docString(u){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,u):null}graph(u){let l=this.bb.__offset(this.bb_pos,18);return l?(u||new S.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(u){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,u):null}static startModel(u){u.startObject(9)}static addIrVersion(u,l){u.addFieldInt64(0,l,u.createLong(0,0))}static addOpsetImport(u,l){u.addFieldOffset(1,l,0)}static createOpsetImportVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startOpsetImportVector(u,l){u.startVector(4,l,4)}static addProducerName(u,l){u.addFieldOffset(2,l,0)}static addProducerVersion(u,l){u.addFieldOffset(3,l,0)}static addDomain(u,l){u.addFieldOffset(4,l,0)}static addModelVersion(u,l){u.addFieldInt64(5,l,u.createLong(0,0))}static addDocString(u,l){u.addFieldOffset(6,l,0)}static addGraph(u,l){u.addFieldOffset(7,l,0)}static addGraphDocString(u,l){u.addFieldOffset(8,l,0)}static endModel(u){return u.endObject()}static createModel(u,l,h,f,g,b,x,A,k,T){return w.startModel(u),w.addIrVersion(u,l),w.addOpsetImport(u,h),w.addProducerName(u,f),w.addProducerVersion(u,g),w.addDomain(u,b),w.addModelVersion(u,x),w.addDocString(u,A),w.addGraph(u,k),w.addGraphDocString(u,T),w.endModel(u)}}C.Model=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsKernelCreateInfos(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsKernelCreateInfos(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}nodeIndices(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+4*u):0}nodeIndicesLength(){let u=this.bb.__offset(this.bb_pos,4);return u?this.bb.__vector_len(this.bb_pos+u):0}nodeIndicesArray(){let u=this.bb.__offset(this.bb_pos,4);return u?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+u),this.bb.__vector_len(this.bb_pos+u)):null}kernelDefHashes(u){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+8*u):this.bb.createLong(0,0)}kernelDefHashesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}static startKernelCreateInfos(u){u.startObject(2)}static addNodeIndices(u,l){u.addFieldOffset(0,l,0)}static createNodeIndicesVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addInt32(l[h]);return u.endVector()}static startNodeIndicesVector(u,l){u.startVector(4,l,4)}static addKernelDefHashes(u,l){u.addFieldOffset(1,l,0)}static createKernelDefHashesVector(u,l){u.startVector(8,l.length,8);for(let h=l.length-1;h>=0;h--)u.addInt64(l[h]);return u.endVector()}static startKernelDefHashesVector(u,l){u.startVector(8,l,8)}static endKernelCreateInfos(u){return u.endObject()}static createKernelCreateInfos(u,l,h){return w.startKernelCreateInfos(u),w.addNodeIndices(u,l),w.addKernelDefHashes(u,h),w.endKernelCreateInfos(u)}}C.KernelCreateInfos=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsSubGraphSessionState(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSubGraphSessionState(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}graphId(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}sessionState(u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new S.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(u){u.startObject(2)}static addGraphId(u,l){u.addFieldOffset(0,l,0)}static addSessionState(u,l){u.addFieldOffset(1,l,0)}static endSubGraphSessionState(u){let l=u.endObject();return u.requiredField(l,4),l}static createSubGraphSessionState(u,l,h){return w.startSubGraphSessionState(u),w.addGraphId(u,l),w.addSessionState(u,h),w.endSubGraphSessionState(u)}}C.SubGraphSessionState=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsSessionState(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsSessionState(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}kernels(u){let l=this.bb.__offset(this.bb_pos,4);return l?(u||new S.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(u,l){let h=this.bb.__offset(this.bb_pos,6);return h?(l||new S.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+h)+4*u),this.bb):null}subGraphSessionStatesLength(){let u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__vector_len(this.bb_pos+u):0}static startSessionState(u){u.startObject(2)}static addKernels(u,l){u.addFieldOffset(0,l,0)}static addSubGraphSessionStates(u,l){u.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(u,l){u.startVector(4,l.length,4);for(let h=l.length-1;h>=0;h--)u.addOffset(l[h]);return u.endVector()}static startSubGraphSessionStatesVector(u,l){u.startVector(4,l,4)}static endSessionState(u){return u.endObject()}static createSessionState(u,l,h){return w.startSessionState(u),w.addKernels(u,l),w.addSubGraphSessionStates(u,h),w.endSessionState(u)}}C.SessionState=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={})),function(S){!function(O){!function(C){class w{constructor(){this.bb=null,this.bb_pos=0}__init(u,l){return this.bb_pos=u,this.bb=l,this}static getRootAsInferenceSession(u,l){return(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static getSizePrefixedRootAsInferenceSession(u,l){return u.setPosition(u.position()+z.flatbuffers.SIZE_PREFIX_LENGTH),(l||new w).__init(u.readInt32(u.position())+u.position(),u)}static bufferHasIdentifier(u){return u.__has_identifier("ORTM")}ortVersion(u){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,u):null}model(u){let l=this.bb.__offset(this.bb_pos,6);return l?(u||new S.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(u){let l=this.bb.__offset(this.bb_pos,8);return l?(u||new S.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(u){u.startObject(3)}static addOrtVersion(u,l){u.addFieldOffset(0,l,0)}static addModel(u,l){u.addFieldOffset(1,l,0)}static addSessionState(u,l){u.addFieldOffset(2,l,0)}static endInferenceSession(u){return u.endObject()}static finishInferenceSessionBuffer(u,l){u.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(u,l){u.finish(l,"ORTM",!0)}static createInferenceSession(u,l,h,f){return w.startInferenceSession(u),w.addOrtVersion(u,l),w.addModel(u,h),w.addSessionState(u,f),w.endInferenceSession(u)}}C.InferenceSession=w}(O.fbs||(O.fbs={}))}(S.experimental||(S.experimental={}))}(F.onnxruntime||(F.onnxruntime={}))},7448:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.OnnxjsSessionHandler=void 0;const z=q(1670),L=q(9162);F.OnnxjsSessionHandler=class{constructor(V){this.session=V,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return _asyncToGenerator(function*(){})()}run(V,S,O){var C=this;return _asyncToGenerator(function*(){const w=new Map;for(const l in V)if(Object.hasOwnProperty.call(V,l)){const h=V[l];w.set(l,new L.Tensor(h.dims,h.type,void 0,void 0,h.data))}const _=yield C.session.run(w),u={};return _.forEach((l,h)=>{u[h]=new z.Tensor(l.type,l.data,l.dims)}),u})()}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.Session=void 0;const z=q(7067),L=q(1296),V=q(7091),S=q(1036),O=q(6231),C=q(2644);F.Session=class{constructor(w={}){this._initialized=!1,this.backendHint=w.backendHint,this.profiler=O.Profiler.create(w.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(w,_,u){var l=this;return _asyncToGenerator(function*(){yield l.profiler.event("session","Session.loadModel",_asyncToGenerator(function*(){const h=yield(0,V.resolveBackend)(l.backendHint);if(l.sessionHandler=h.createSessionHandler(l.context),l._model=new C.Model,"string"==typeof w){const f=w.endsWith(".ort");if(typeof fetch>"u"){const g=yield(0,L.promisify)(z.readFile)(w);l.initialize(g,f)}else{const g=yield fetch(w),b=yield g.arrayBuffer();l.initialize(new Uint8Array(b),f)}}else if(ArrayBuffer.isView(w))l.initialize(w);else{const f=new Uint8Array(w,_||0,u||w.byteLength);l.initialize(f)}}))})()}initialize(w,_){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{this._model.load(w,this.sessionHandler.transformGraph?this.sessionHandler:void 0,_),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new S.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(w){var _=this;return _asyncToGenerator(function*(){if(!_._initialized)throw new Error("session not initialized yet");return _.profiler.event("session","Session.run",_asyncToGenerator(function*(){const u=_.normalizeAndValidateInputs(w),l=yield _._executionPlan.execute(_.sessionHandler,u);return _.createOutput(l)}))})()}normalizeAndValidateInputs(w){const _=this._model.graph.getInputNames();if(Array.isArray(w)){if(w.length!==_.length)throw new Error(`incorrect input array length: expected ${_.length} but got ${w.length}`)}else{if(w.size!==_.length)throw new Error(`incorrect input map size: expected ${_.length} but got ${w.size}`);const u=new Array(w.size);let l=0;for(let h=0;h<_.length;++h){const f=w.get(_[h]);if(!f)throw new Error(`missing input tensor for: '${name}'`);u[l++]=f}w=u}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,w,!1);else{const u=this._model.graph.getInputIndices(),l=this._model.graph.getValues(),h=new Array(u.length);for(let f=0;f<u.length;++f){const g=l[u[f]];h[f]=g.type.shape.dims,this.context.graphInputTypes.push(g.type.tensorType),this.context.graphInputDims.push(w[f].dims)}this.validateInputTensorDims(h,w,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,w),w}validateInputTensorTypes(w,_){for(let u=0;u<_.length;u++){const l=w[u],h=_[u].type;if(l!==h)throw new Error(`input tensor[${u}] check failed: expected type '${l}' but got ${h}`)}}validateInputTensorDims(w,_,u){for(let l=0;l<_.length;l++){const h=w[l],f=_[l].dims;if(!this.compareTensorDims(h,f,u))throw new Error(`input tensor[${l}] check failed: expected shape '[${h.join(",")}]' but got [${f.join(",")}]`)}}compareTensorDims(w,_,u){if(w.length!==_.length)return!1;for(let l=0;l<w.length;++l)if(w[l]!==_[l]&&(!u||0!==w[l]))return!1;return!0}createOutput(w){const _=this._model.graph.getOutputNames();if(w.length!==_.length)throw new Error("expected number of outputs do not match number of generated outputs");const u=new Map;for(let l=0;l<_.length;++l)u.set(_[l],w[l]);return u}initializeOps(w){const _=w.getNodes();this._ops=new Array(_.length);for(let u=0;u<_.length;u++)this._ops[u]=this.sessionHandler.resolve(_[u],this._model.opsets,w)}}},9162:function(Ye,F,q){"use strict";var z=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(F,"__esModule",{value:!0}),F.Tensor=void 0;const L=q(3442),V=z(q(3720)),S=q(1446),O=q(9395),C=q(2517);var w=O.onnxruntime.experimental.fbs;class _{get data(){if(void 0===this.cache){const b=this.dataProvider(this.dataId);if(b.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=b}return this.cache}get stringData(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")}get(b){return this.data[C.ShapeUtil.indicesToOffset(b,this.strides)]}set(b,x){this.data[C.ShapeUtil.indicesToOffset(b,this.strides)]=x}getData(){var b=this;return _asyncToGenerator(function*(){return void 0===b.cache&&(b.cache=yield b.asyncDataProvider(b.dataId)),b.cache})()}get strides(){return this._strides||(this._strides=C.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(b,x,A,k,T,M=L.Guid.create()){this.dims=b,this.type=x,this.dataProvider=A,this.asyncDataProvider=k,this.cache=T,this.dataId=M,this.size=C.ShapeUtil.validateDimsAndCalcSize(b);const P=this.size,B=void 0===A&&void 0===k&&void 0===T;if(void 0!==T&&T.length!==P)throw new RangeError("Input dims doesn't match data length.");if("string"===x){if(!(void 0===T||Array.isArray(T)&&T.every(U=>"string"==typeof U)))throw new TypeError("cache should be a string array");B&&(this.cache=new Array(P))}else{if(void 0!==T){const U=l(x);if(!(T instanceof U))throw new TypeError(`cache should be type ${U.name}`)}if(B){const U=new ArrayBuffer(P*function(N){switch(N){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${N}`)}}(x));this.cache=(N=U,new(l(x))(N))}}var N}static fromProto(b){if(!b)throw new Error("cannot construct Value from an empty tensor");const x=C.ProtoUtil.tensorDataTypeFromProto(b.dataType),A=C.ProtoUtil.tensorDimsFromProto(b.dims),k=new _(A,x);if("string"===x)b.stringData.forEach((T,M)=>{k.data[M]=(0,C.decodeUtf8String)(T)});else if(b.rawData&&"number"==typeof b.rawData.byteLength&&b.rawData.byteLength>0){const T=k.data,M=new DataView(b.rawData.buffer,b.rawData.byteOffset,b.rawData.byteLength),P=u(b.dataType),B=b.rawData.byteLength/P;if(b.rawData.byteLength%P!=0)throw new Error("invalid buffer length");if(T.length!==B)throw new Error("buffer length mismatch");for(let U=0;U<B;U++){const N=f(M,b.dataType,U*P);T[U]=N}}else{let T;switch(b.dataType){case S.onnx.TensorProto.DataType.FLOAT:T=b.floatData;break;case S.onnx.TensorProto.DataType.INT32:case S.onnx.TensorProto.DataType.INT16:case S.onnx.TensorProto.DataType.UINT16:case S.onnx.TensorProto.DataType.INT8:case S.onnx.TensorProto.DataType.UINT8:case S.onnx.TensorProto.DataType.BOOL:T=b.int32Data;break;case S.onnx.TensorProto.DataType.INT64:T=b.int64Data;break;case S.onnx.TensorProto.DataType.DOUBLE:T=b.doubleData;break;case S.onnx.TensorProto.DataType.UINT32:case S.onnx.TensorProto.DataType.UINT64:T=b.uint64Data;break;default:throw new Error("unspecific error")}if(null==T)throw new Error("failed to populate data from a tensorproto value");const M=k.data;if(M.length!==T.length)throw new Error("array length mismatch");for(let P=0;P<T.length;P++){const B=T[P];M[P]=V.default.isLong(B)?h(B,b.dataType):B}}return k}static fromData(b,x,A){return new _(x,A,void 0,void 0,b)}static fromOrtTensor(b){if(!b)throw new Error("cannot construct Value from an empty tensor");const x=C.ProtoUtil.tensorDimsFromORTFormat(b),A=C.ProtoUtil.tensorDataTypeFromProto(b.dataType()),k=new _(x,A);if("string"===A)for(let T=0;T<b.stringDataLength();T++)k.data[T]=b.stringData(T);else if(b.rawDataArray()&&"number"==typeof b.rawDataLength()&&b.rawDataLength()>0){const T=k.data,M=new DataView(b.rawDataArray().buffer,b.rawDataArray().byteOffset,b.rawDataLength()),P=u(b.dataType()),B=b.rawDataLength()/P;if(b.rawDataLength()%P!=0)throw new Error("invalid buffer length");if(T.length!==B)throw new Error("buffer length mismatch");for(let U=0;U<B;U++){const N=f(M,b.dataType(),U*P);T[U]=N}}return k}}function u(g){switch(g){case S.onnx.TensorProto.DataType.UINT8:case S.onnx.TensorProto.DataType.INT8:case S.onnx.TensorProto.DataType.BOOL:return 1;case S.onnx.TensorProto.DataType.UINT16:case S.onnx.TensorProto.DataType.INT16:return 2;case S.onnx.TensorProto.DataType.FLOAT:case S.onnx.TensorProto.DataType.INT32:case S.onnx.TensorProto.DataType.UINT32:return 4;case S.onnx.TensorProto.DataType.INT64:case S.onnx.TensorProto.DataType.DOUBLE:case S.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${S.onnx.TensorProto.DataType[g]}`)}}function l(g){switch(g){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function h(g,b){if(b===S.onnx.TensorProto.DataType.INT64||b===w.TensorDataType.INT64){if(g.greaterThanOrEqual(2147483648)||g.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(b!==S.onnx.TensorProto.DataType.UINT32&&b!==w.TensorDataType.UINT32&&b!==S.onnx.TensorProto.DataType.UINT64&&b!==w.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${S.onnx.TensorProto.DataType[b]}`);if(g.greaterThanOrEqual(4294967296)||g.lessThan(0))throw new TypeError("uint64 is not supported")}return g.toNumber()}function f(g,b,x){switch(b){case S.onnx.TensorProto.DataType.BOOL:case S.onnx.TensorProto.DataType.UINT8:return g.getUint8(x);case S.onnx.TensorProto.DataType.INT8:return g.getInt8(x);case S.onnx.TensorProto.DataType.UINT16:return g.getUint16(x,!0);case S.onnx.TensorProto.DataType.INT16:return g.getInt16(x,!0);case S.onnx.TensorProto.DataType.FLOAT:return g.getFloat32(x,!0);case S.onnx.TensorProto.DataType.INT32:return g.getInt32(x,!0);case S.onnx.TensorProto.DataType.UINT32:return g.getUint32(x,!0);case S.onnx.TensorProto.DataType.INT64:return h(V.default.fromBits(g.getUint32(x,!0),g.getUint32(x+4,!0),!1),b);case S.onnx.TensorProto.DataType.DOUBLE:return g.getFloat64(x,!0);case S.onnx.TensorProto.DataType.UINT64:return h(V.default.fromBits(g.getUint32(x,!0),g.getUint32(x+4,!0),!0),b);default:throw new Error(`cannot read from DataView for type ${S.onnx.TensorProto.DataType[b]}`)}}F.Tensor=_},2517:function(Ye,F,q){"use strict";var z=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(F,"__esModule",{value:!0}),F.decodeUtf8String=F.MAX_CLIP=F.MIN_CLIP=F.PoolConvUtil=F.ReduceUtil=F.SplitUtil=F.MathUtil=F.ShapeUtil=F.LongUtil=F.ProtoUtil=F.GemmUtil=F.arrayCopyHelper=F.BroadcastUtil=F.MatMulUtil=F.ArrayUtil=F.assert=F.checkInputsShape=void 0;const L=q(5686),V=z(q(3720)),S=q(1446),O=q(9162);F.checkInputsShape=function(b,...x){if(!b||b.length!==x.length)return!1;for(let A=0;A<b.length;A++)if(!b[A].dims||b[A].dims.length!==x[A])return!1;return!0},F.assert=function(b,x){if(!b)throw new Error("string"==typeof x?x:x())},F.ArrayUtil=class{static arraysEqual(b,x){if(b.length!==x.length)return!1;for(let A=0;A<b.length;A++)if(b[A]!==x[A])return!1;return!0}};class C{static preprocessInputShapes(x,A){return[1===x.length?[1,x[0]]:x,1===A.length?[A[0],1]:A]}static postprocessOutputShape(x,A,k){1===A&&x.splice(x.length-2,1),1===k&&x.pop()}static calcMatMulShape(x,A){return x[1]!==A[0]?void 0:[x[0],A[1]]}}F.MatMulUtil=C;class w{static calcShape(x,A,k=!1){const T=x.length,M=A.length;if(0===T)return A;if(0===M)return x;const P=Math.max(x.length,A.length),B=new Array(P);if(k){if(T<2||M<2)return;const U=C.calcMatMulShape([x[T-2],x[T-1]],[A[M-2],A[M-1]]);if(void 0===U)return;[B[P-2],B[P-1]]=U}for(let U=k?3:1;U<=P;U++){const N=T-U<0?1:x[T-U],$=M-U<0?1:A[M-U];if(N!==$&&N>1&&$>1)return;B[P-U]=Math.max(N,$)}return B}static index(x,A){const k=new Array(A.length);return w.fillIndex(x,A,k),k}static fillIndex(x,A,k){const T=x.length-A.length;for(let M=0;M<A.length;M++)k[M]=x[T+M]%A[M]}static calc(x,A,k,T,M){const P=w.calcShape(x.dims,A.dims);if(P){if(T&&!l.areEqual(P,x.dims))return;const B=l.size(P),U=T?x:new O.Tensor(P,M||x.type);if(0===P.length)U.set([],k(x.get([]),A.get([])));else{const N=new Array(P.length),$=new Array(x.dims.length),G=new Array(A.dims.length);let W,K=0,X=0,oe=!1,Z=!1;0===x.dims.length&&(K=x.get([]),oe=!0),0===A.dims.length&&(X=A.get([]),Z=!0);for(let ae=0;ae<B;ae++){W=ae;for(let pe=P.length-1;pe>=0;pe--)N[pe]=W%P[pe],W=Math.floor(W/P[pe]);oe||(w.fillIndex(N,x.dims,$),K=x.get($)),Z||(w.fillIndex(N,A.dims,G),X=A.get(G)),U.set(N,k(K,X))}}return U}}static isValidBroadcast(x,A){const k=x.length,T=A.length;if(k>T)return!1;for(let M=1;M<=k;M++)if(1!==x[k-M]&&x[k-M]!==A[T-M])return!1;return!0}static getBroadcastDims(x,A){const k=x.length,T=[];for(let M=0;M<k;M++){const P=k-1-M;(A[A.length-1-M]||1)>1&&1===(x[P]||1)&&T.unshift(P)}return T}}F.BroadcastUtil=w,F.arrayCopyHelper=function(b,x,A,k,T){if(k<0||k>=x.length)throw new Error("sourceIndex out of bounds");if(A<0||A>=b.length)throw new Error("targetIndex out of bounds");if(k+T>x.length)throw new Error("source indices to be copied are outside bounds");if(A+T>b.length)throw new Error("target array is too small to hold result");for(let M=0;M<T;M++)b[A+M]=x[k+M]},F.GemmUtil=class{static getShapeOfGemmResult(b,x,A,k,T){if(2!==b.length||2!==A.length)throw new Error("shape need to be of size 2");let M,P,B;x?(M=b[1],P=b[0]):(M=b[0],P=b[1]);let U=-1;if(k?(B=A[0],U=1):(B=A[1],U=0),A[U]!==P)throw new Error("dimension mismatch");if(M<=0||B<=0||P<=0)throw new Error("invalid shape specified");if(T&&!w.isValidBroadcast(T,[M,B]))throw new Error("gemm: invalid bias shape for broadcast");return[M,B,P]}};class _{static tensorDataTypeFromProto(x){switch(x){case S.onnx.TensorProto.DataType.INT8:return"int8";case S.onnx.TensorProto.DataType.UINT8:return"uint8";case S.onnx.TensorProto.DataType.BOOL:return"bool";case S.onnx.TensorProto.DataType.INT16:return"int16";case S.onnx.TensorProto.DataType.UINT16:return"uint16";case S.onnx.TensorProto.DataType.INT32:return"int32";case S.onnx.TensorProto.DataType.UINT32:return"uint32";case S.onnx.TensorProto.DataType.FLOAT:return"float32";case S.onnx.TensorProto.DataType.DOUBLE:return"float64";case S.onnx.TensorProto.DataType.STRING:return"string";case S.onnx.TensorProto.DataType.INT64:return"int32";case S.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${S.onnx.TensorProto.DataType[x]}`)}}static tensorDataTypeStringToEnum(x){switch(x){case"int8":return S.onnx.TensorProto.DataType.INT8;case"uint8":return S.onnx.TensorProto.DataType.UINT8;case"bool":return S.onnx.TensorProto.DataType.BOOL;case"int16":return S.onnx.TensorProto.DataType.INT16;case"uint16":return S.onnx.TensorProto.DataType.UINT16;case"int32":return S.onnx.TensorProto.DataType.INT32;case"uint32":return S.onnx.TensorProto.DataType.UINT32;case"float32":return S.onnx.TensorProto.DataType.FLOAT;case"float64":return S.onnx.TensorProto.DataType.DOUBLE;case"string":return S.onnx.TensorProto.DataType.STRING;case"int64":return S.onnx.TensorProto.DataType.INT64;case"uint64":return S.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${x}`)}}static tensorDimsFromProto(x){return x.map(A=>V.default.isLong(A)?A.toNumber():A)}static tensorValueTypeFromProto(x){return{tensorType:_.tensorDataTypeFromProto(x.elemType),shape:{dims:_.tensorDimsFromProto(x.shape.dim.map(A=>A.dimValue))}}}static tensorDimsFromORTFormat(x){const A=[];for(let k=0;k<x.dimsLength();k++)A.push(u.longToNumber(x.dims(k)));return A}static tensorAttributesFromORTFormat(x){const A=[];for(let k=0;k<x.attributesLength();k++)A.push(x.attributes(k));return A}}F.ProtoUtil=_;class u{static longToNumber(x,A){return V.default.isLong(x)?x.toNumber():x instanceof L.flatbuffers.Long?V.default.fromValue({low:x.low,high:x.high,unsigned:null!=A&&A}).toNumber():x}static isLong(x){return V.default.isLong(x)||x instanceof L.flatbuffers.Long}}F.LongUtil=u;class l{static size(x){return l.getSizeFromDimensionRange(x,0,x.length)}static sizeFromDimension(x,A){if(A<0||A>x.length)throw new Error(`invalid dimension of ${A} for sizeFromDimension as Tensor has ${x.length} dimensions.`);return l.getSizeFromDimensionRange(x,A,x.length)}static sizeToDimension(x,A){if(A<0||A>x.length)throw new Error(`invalid dimension of ${A} for sizeToDimension as Tensor has ${x.length} dimensions.`);return l.getSizeFromDimensionRange(x,0,A)}static getSizeFromDimensionRange(x,A,k){let T=1;for(let M=A;M<k;M++){if(x[M]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");T*=x[M]}return T}static computeStrides(x){const A=x.length;if(0===A)return[];if(1===A)return[1];const k=new Array(A);k[A-1]=1,k[A-2]=x[A-1];for(let T=A-3;T>=0;--T)k[T]=k[T+1]*x[T+1];return k}static transpose(x){return x.slice().reverse()}static indicesToOffset(x,A,k){void 0===k&&(k=x.length);let T=0;for(let M=0;M<k;++M)T+=A[M]*x[M];return T}static offsetToIndices(x,A){const k=A.length;if(0===k)return[];if(1===k)return[x*A[0]];const T=new Array(A.length);for(let M=0;M<T.length-1;++M)T[M]=Math.floor(x/A[M]),x-=T[M]*A[M];return T[T.length-1]=x,T}static normalizeAxis(x,A){if(x<-A&&x>=A)throw new Error("unsupported axis for this operation.");return x<0?x+A:x}static normalizeAxes(x,A){return x.map(k=>this.normalizeAxis(k,A))}static incrementIndex(x,A,k){if(0===A.length||0===x.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===k)k=A.length;else if(k<=0||k>A.length)throw new Error("Incorrect axis to increment on");for(let T=k-1;T>=0&&(x[T]++,!(x[T]<A[T]));--T)x[T]=0}static calculateReshapedDims(x,A){if(0===A.length){if(0===x.length||1===l.size(x))return[];throw new Error("cannot reshape to a scalar Tensor")}const k=A.length,T=new Array(k);let M=-1,P=1;for(let U=0;U<k;U++){if(A[U]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===A[U]){if(-1!==M)throw new Error("at most one dimension in shape hints can be -1");M=U}else{if(0===A[U]){if(U>=x.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");T[U]=x[U]}else T[U]=A[U];P*=T[U]}}const B=l.size(x);if(-1!==M){if(B%P!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${x}] Output shape: [${A}]`);T[M]=B/P}else if(P!==B)throw new Error("reshapedDims and originalDims don't have matching sizes");return T}static sortBasedOnPerm(x,A){return A?A.map(k=>x[k]):x.slice().reverse()}static padShape(x,A){const k=x.length;return x.map((T,M)=>T+A[M]+A[M+k])}static areEqual(x,A){return x.length===A.length&&x.every((k,T)=>k===A[T])}static validateDimsAndCalcSize(x){if(x.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let A=1;for(const k of x){if(!Number.isInteger(k))throw new TypeError(`Invalid shape: ${k} is not an integer`);if(k<0||k>2147483647)throw new TypeError(`Invalid shape: length ${k} is not allowed`);A*=k}return A}static flattenShape(x,A){A<0&&(A+=x.length);const k=x.reduce((M,P)=>M*P,1),T=x.slice(A).reduce((M,P)=>M*P,1);return[k/T,T]}static squeezeShape(x,A){const k=new Array;A=l.normalizeAxes(A,x.length);for(let T=0;T<x.length;T++){const M=A.indexOf(T)>=0;if(M&&1!==x[T])throw new Error("squeeze an axis of size different than 1");(0===A.length&&x[T]>1||A.length>0&&!M)&&k.push(x[T])}return k}static unsqueezeShape(x,A){const k=new Array(x.length+A.length);k.fill(0);for(let M=0;M<A.length;M++){const P=l.normalizeAxis(A[M],k.length);if(P>=k.length)throw new Error("'axes' has an out of range axis");if(0!==k[P])throw new Error("'axes' has a duplicate axis");k[P]=1}let T=0;for(let M=0;M<k.length;M++)0===k[M]&&(k[M]=x[T++]);if(T!==x.length)throw new Error("the unsqueezed dimension could not be established");return k}}F.ShapeUtil=l,F.MathUtil=class{static sqr(b,x,A,k,T){if(k<0||k>=x.length)throw new Error("sourceIndex out of bounds");if(A<0||A>=b.length)throw new Error("targetIndex out of bounds");if(k+T>x.length)throw new Error("source indices to be copied are outside bounds");if(A+T>b.length)throw new Error("target array is too small to hold result");for(let M=0;M<T;M++)b[A+M]+=Math.pow(x[k+M],2)}static axpy(b,x,A,k,T,M){if(k<0||k>=x.length)throw new Error("sourceIndex out of bounds");if(A<0||A>=b.length)throw new Error("targetIndex out of bounds");if(k+T>x.length)throw new Error("source indices to be copied are outside bounds");if(A+T>b.length)throw new Error("target array is too small to hold result");for(let P=0;P<T;P++)b[A+P]+=M*x[k+P]}static powx(b,x,A,k,T,M){if(k<0||k>=x.length)throw new Error("sourceIndex out of bounds");if(A<0||A>=b.length)throw new Error("targetIndex out of bounds");if(k+T>x.length)throw new Error("source indices to be copied are outside bounds");if(A+T>b.length)throw new Error("target array is too small to hold result");for(let P=0;P<T;P++)b[A+P]=Math.pow(x[k+P],M)}static mul(b,x,A,k,T){if(k<0||k>=x.length)throw new Error("sourceIndex out of bounds");if(A<0||A>=b.length)throw new Error("targetIndex out of bounds");if(k+T>x.length)throw new Error("source indices to be copied are outside bounds");if(A+T>b.length)throw new Error("target array is too small to hold result");for(let M=0;M<T;M++)b[A+M]=x[k+M]*b[A+M]}};class h{static splitShape(x,A,k,T){if(0===k.length){if(!T)throw new Error("need to know number of outputs when the 'split' attribute is not specified");h.determineSplit(x[A],T,k)}const M=[],P=[0];for(let B=0;B<k.length;++B){0!==B&&P.push(P[B-1]+k[B-1]);const U=x.slice();U[A]=k[B],M.push(U)}return[M,P]}static determineSplit(x,A,k){if(x%A!=0)throw new Error("cannot split tensor to equal sized parts");for(let T=0;T<A;++T)k.push(x/A)}}F.SplitUtil=h;class f{static calcReduce(x,A,k,T,M){const P=x.dims.slice(0);0===A.length&&P.forEach((K,X)=>A.push(X));const B=f.calcReduceShape(P,A,!0),U=l.size(B),N=new O.Tensor(B,x.type),$=l.computeStrides(B),G=l.computeStrides(P),W=new Array(P.length);for(let K=0;K<U;K++){const X=l.offsetToIndices(K,$);w.fillIndex(X,P,W),N.set(X,f.calcReduceByAxis(x.numberData,A,P,0,l.indicesToOffset(W,G),T,M))}return k?N:new O.Tensor(f.calcReduceShape(P,A,k),N.type,void 0,void 0,N.data,N.dataId)}static calcReduceByAxis(x,A,k,T,M,P,B){let U=0;if(T>=A.length)return P(x[M]);const N=A[T],$=N>=k.length?1:l.size(k.slice(N+1));for(let G=0;G<k[N];G++)U=0===G?f.calcReduceByAxis(x,A,k,T+1,M,P,B):B(U,f.calcReduceByAxis(x,A,k,T+1,M,P,B)),M+=$;return U}static calcReduceShape(x,A,k){const T=x.slice();for(let M=0;M<A.length;M++)T[A[M]]=k?1:0;return T.filter(M=>0!==M)}}F.ReduceUtil=f;class g{static adjustPoolAttributes(x,A,k,T,M,P){if(!x&&k.length!==A.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(x)for(let B=0;B<A.length-2;B++)B>=k.length?k.push(A[B+2]):k[B]=A[B+2];for(let B=0;B<k.length;B++)if(B<T.length){if(T[B]<0)throw new Error("strides should be greater than or equal to 1")}else T.push(1);for(let B=0;B<k.length;B++)if(B<M.length){if(M[B]<0)throw new Error("dilations should be greater than or equal to 1")}else M.push(1);for(let B=0;B<2*k.length;B++)if(B<P.length){if(P[B]<0)throw new Error("pad should be greater than or equal to 1")}else P.push(0);for(let B=0;B<k.length;B++){if(k[B]<=0)throw new Error("kernel shapes need to be greater than 0");if(P[B]>=k[B]||P[B+k.length]>=k[B])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(x,A,k,T,M,P){if(P){if(M.length!==2*(x.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(A.length!==x.length-2)throw new Error("length of strides should be the length of data dimensions");if(T.length!==x.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let B=0;B<x.length-2;B++)g.adjustPadAndReturnShape(x[B+2],A[B],k[B],T[B],M,B,B+x.length-2,P)}}static computePoolOutputShape(x,A,k,T,M,P,B){if(A.length<=0)throw new Error("input shape must be of size greater than 0");const U=[A[0],A[1]];return g.computeShapeHelper(x,A,U,k,T,M,P,B),U}static computeConvOutputShape(x,A,k,T,M,P,B){if(x.length<=0||A.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const U=[x[0],A[0]];return g.computeShapeHelper(!1,x,U,k,T,M,P,B),U}static computeShapeHelper(x,A,k,T,M,P,B,U){if(x)for(let N=0;N<A.length-2;N++)k.push(1);else for(let N=0;N<A.length-2;N++)k.push(g.adjustPadAndReturnShape(A[N+2],T[N],M[N],P[N],B,N,N+A.length-2,U))}static adjustPadAndReturnShape(x,A,k,T,M,P,B,U){const N=k*(T-1)+1;if(!U||"NOTSET"===U)return Math.floor((x+M[P]+M[B]-N)/A+1);switch(U){case"VALID":return M[P]=0,M[B]=0,Math.floor((x-N)/A+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==k)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const $=((x+A-1)/A-1)*A+T-x;return M[P]=Math.floor("SAME_LOWER"===U?($+1)/2:$/2),M[B]=$-M[P],Math.floor((x+$-T)/A+1)}default:throw new Error("Unsupported AutoPad type")}}}F.PoolConvUtil=g,F.MIN_CLIP=-34028234663852886e22,F.MAX_CLIP=34028234663852886e22,F.decodeUtf8String=function(b){return(new TextDecoder).decode(b)}},7967:(Ye,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.iterateExtraOptions=void 0,F.iterateExtraOptions=(q,z,L,V)=>{if("object"==typeof q&&null!==q){if(L.has(q))throw new Error("Circular reference in options");L.add(q)}Object.entries(q).forEach(([S,O])=>{const C=z?z+S:S;if("object"==typeof O)(0,F.iterateExtraOptions)(O,C+".",L,V);else if("string"==typeof O||"number"==typeof O)V(C,O.toString());else{if("boolean"!=typeof O)throw new Error("Can't handle extra config type: "+typeof O);V(C,O?"1":"0")}})}},2157:function(Ye,F,q){"use strict";var z,L=this&&this.__createBinding||(Object.create?function($,G,W,K){void 0===K&&(K=W);var X=Object.getOwnPropertyDescriptor(G,W);X&&!("get"in X?!G.__esModule:X.writable||X.configurable)||(X={enumerable:!0,get:function(){return G[W]}}),Object.defineProperty($,K,X)}:function($,G,W,K){void 0===K&&(K=W),$[K]=G[W]}),V=this&&this.__setModuleDefault||(Object.create?function($,G){Object.defineProperty($,"default",{enumerable:!0,value:G})}:function($,G){$.default=G}),S=this&&this.__importStar||function($){if($&&$.__esModule)return $;var G={};if(null!=$)for(var W in $)"default"!==W&&Object.prototype.hasOwnProperty.call($,W)&&L(G,$,W);return V(G,$),G};Object.defineProperty(F,"__esModule",{value:!0}),F.endProfiling=F.run=F.releaseSession=F.createSession=F.createSessionFinalize=F.createSessionAllocate=F.initOrt=F.initWasm=void 0;const O=q(1670),C=S(q(349)),w=q(6361),_=()=>!!O.env.wasm.proxy&&typeof document<"u";let u,l,h,f=!1,g=!1,b=!1;const x=[],A=[],k=[],T=[],M=[],P=[],B=()=>{if(f||!g||b||!u)throw new Error("worker not ready")},U=$=>{switch($.data.type){case"init-wasm":f=!1,$.data.err?(b=!0,l[1]($.data.err)):(g=!0,l[0]());break;case"init-ort":$.data.err?h[1]($.data.err):h[0]();break;case"create_allocate":$.data.err?x.shift()[1]($.data.err):x.shift()[0]($.data.out);break;case"create_finalize":$.data.err?A.shift()[1]($.data.err):A.shift()[0]($.data.out);break;case"create":$.data.err?k.shift()[1]($.data.err):k.shift()[0]($.data.out);break;case"release":$.data.err?T.shift()[1]($.data.err):T.shift()[0]();break;case"run":$.data.err?M.shift()[1]($.data.err):M.shift()[0]($.data.out);break;case"end-profiling":$.data.err?P.shift()[1]($.data.err):P.shift()[0]()}},N=typeof document<"u"?null===(z=document?.currentScript)||void 0===z?void 0:z.src:void 0;F.initWasm=_asyncToGenerator(function*(){if(_()){if(g)return;if(f)throw new Error("multiple calls to 'initWasm()' detected.");if(b)throw new Error("previous call to 'initWasm()' failed.");return f=!0,void 0===O.env.wasm.wasmPaths&&N&&0!==N.indexOf("blob:")&&(O.env.wasm.wasmPaths=N.substr(0,+N.lastIndexOf("/")+1)),new Promise(($,G)=>{u?.terminate(),u=q(9710).Z(),u.onmessage=U,l=[$,G],u.postMessage({type:"init-wasm",in:O.env.wasm})})}return(0,w.initializeWebAssembly)(O.env.wasm)}),F.initOrt=function(){var $=_asyncToGenerator(function*(G,W){if(_())return B(),new Promise((K,X)=>{h=[K,X],u.postMessage({type:"init-ort",in:{numThreads:G,loggingLevel:W}})});C.initOrt(G,W)});return function(G,W){return $.apply(this,arguments)}}(),F.createSessionAllocate=function(){var $=_asyncToGenerator(function*(G){return _()?(B(),new Promise((W,K)=>{x.push([W,K]),u.postMessage({type:"create_allocate",in:{model:G}},[G.buffer])})):C.createSessionAllocate(G)});return function(G){return $.apply(this,arguments)}}(),F.createSessionFinalize=function(){var $=_asyncToGenerator(function*(G,W){return _()?(B(),new Promise((K,X)=>{A.push([K,X]),u.postMessage({type:"create_finalize",in:{modeldata:G,options:W}})})):C.createSessionFinalize(G,W)});return function(G,W){return $.apply(this,arguments)}}(),F.createSession=function(){var $=_asyncToGenerator(function*(G,W){return _()?(B(),new Promise((K,X)=>{k.push([K,X]),u.postMessage({type:"create",in:{model:G,options:W}},[G.buffer])})):C.createSession(G,W)});return function(G,W){return $.apply(this,arguments)}}(),F.releaseSession=function(){var $=_asyncToGenerator(function*(G){if(_())return B(),new Promise((W,K)=>{T.push([W,K]),u.postMessage({type:"release",in:G})});C.releaseSession(G)});return function(G){return $.apply(this,arguments)}}(),F.run=function(){var $=_asyncToGenerator(function*(G,W,K,X,oe){return _()?(B(),new Promise((Z,ae)=>{M.push([Z,ae]),u.postMessage({type:"run",in:{sessionId:G,inputIndices:W,inputs:K,outputIndices:X,options:oe}},C.extractTransferableBuffers(K))})):C.run(G,W,K,X,oe)});return function(G,W,K,X,oe){return $.apply(this,arguments)}}(),F.endProfiling=function(){var $=_asyncToGenerator(function*(G){if(_())return B(),new Promise((W,K)=>{P.push([W,K]),u.postMessage({type:"end-profiling",in:G})});C.endProfiling(G)});return function(G){return $.apply(this,arguments)}}()},586:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.setRunOptions=void 0;const z=q(7967),L=q(4983),V=q(6361);F.setRunOptions=S=>{const O=(0,V.getInstance)();let C=0;const w=[],_=S||{};try{if(void 0===S?.logSeverityLevel)_.logSeverityLevel=2;else if("number"!=typeof S.logSeverityLevel||!Number.isInteger(S.logSeverityLevel)||S.logSeverityLevel<0||S.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${S.logSeverityLevel}`);if(void 0===S?.logVerbosityLevel)_.logVerbosityLevel=0;else if("number"!=typeof S.logVerbosityLevel||!Number.isInteger(S.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${S.logVerbosityLevel}`);void 0===S?.terminate&&(_.terminate=!1);let u=0;if(void 0!==S?.tag&&(u=(0,L.allocWasmString)(S.tag,w)),C=O._OrtCreateRunOptions(_.logSeverityLevel,_.logVerbosityLevel,!!_.terminate,u),0===C)throw new Error("Can't create run options");return void 0!==S?.extra&&(0,z.iterateExtraOptions)(S.extra,"",new WeakSet,(l,h)=>{const f=(0,L.allocWasmString)(l,w),g=(0,L.allocWasmString)(h,w);if(0!==O._OrtAddRunConfigEntry(C,f,g))throw new Error(`Can't set a run config entry: ${l} - ${h}`)}),[C,w]}catch(u){throw 0!==C&&O._OrtReleaseRunOptions(C),w.forEach(O._free),u}}},2306:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.OnnxruntimeWebAssemblySessionHandler=void 0;const z=q(2806),L=q(1670),V=q(2850),S=q(2157);let O;F.OnnxruntimeWebAssemblySessionHandler=class{createSessionAllocate(C){return _asyncToGenerator(function*(){const w=yield fetch(C),_=yield w.arrayBuffer();return(0,S.createSessionAllocate)(new Uint8Array(_))})()}loadModel(C,w){var _=this;return _asyncToGenerator(function*(){if(O||(yield(0,S.initOrt)(L.env.wasm.numThreads,(u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}})(L.env.logLevel)),O=!0),"string"==typeof C)if(typeof fetch>"u"){const u=yield(0,V.promisify)(z.readFile)(C);[_.sessionId,_.inputNames,_.outputNames]=yield(0,S.createSession)(u,w)}else{const u=yield _.createSessionAllocate(C);[_.sessionId,_.inputNames,_.outputNames]=yield(0,S.createSessionFinalize)(u,w)}else[_.sessionId,_.inputNames,_.outputNames]=yield(0,S.createSession)(C,w)})()}dispose(){var C=this;return _asyncToGenerator(function*(){return(0,S.releaseSession)(C.sessionId)})()}run(C,w,_){var u=this;return _asyncToGenerator(function*(){const l=[],h=[];Object.entries(C).forEach(x=>{const A=x[0],k=x[1],T=u.inputNames.indexOf(A);if(-1===T)throw new Error(`invalid input '${A}'`);l.push(k),h.push(T)});const f=[];Object.entries(w).forEach(x=>{const A=x[0],k=u.outputNames.indexOf(A);if(-1===k)throw new Error(`invalid output '${A}'`);f.push(k)});const g=yield(0,S.run)(u.sessionId,h,l.map(x=>[x.type,x.dims,x.data]),f,_),b={};for(let x=0;x<g.length;x++)b[u.outputNames[f[x]]]=new L.Tensor(g[x][0],g[x][2],g[x][1]);return b})()}startProfiling(){}endProfiling(){(0,S.endProfiling)(this.sessionId)}}},4919:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.setSessionOptions=void 0;const z=q(7967),L=q(4983),V=q(6361);F.setSessionOptions=S=>{const O=(0,V.getInstance)();let C=0;const w=[],_=S||{};(u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});const l=u.extra.session;l.use_ort_model_bytes_directly||(l.use_ort_model_bytes_directly="1")})(_);try{void 0===S?.graphOptimizationLevel&&(_.graphOptimizationLevel="all");const u=(f=>{switch(f){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${f}`)}})(_.graphOptimizationLevel);void 0===S?.enableCpuMemArena&&(_.enableCpuMemArena=!0),void 0===S?.enableMemPattern&&(_.enableMemPattern=!0),void 0===S?.executionMode&&(_.executionMode="sequential");const l=(f=>{switch(f){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${f}`)}})(_.executionMode);let h=0;if(void 0!==S?.logId&&(h=(0,L.allocWasmString)(S.logId,w)),void 0===S?.logSeverityLevel)_.logSeverityLevel=2;else if("number"!=typeof S.logSeverityLevel||!Number.isInteger(S.logSeverityLevel)||S.logSeverityLevel<0||S.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${S.logSeverityLevel}`);if(void 0===S?.logVerbosityLevel)_.logVerbosityLevel=0;else if("number"!=typeof S.logVerbosityLevel||!Number.isInteger(S.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${S.logVerbosityLevel}`);if(void 0===S?.enableProfiling&&(_.enableProfiling=!1),C=O._OrtCreateSessionOptions(u,!!_.enableCpuMemArena,!!_.enableMemPattern,l,!!_.enableProfiling,0,h,_.logSeverityLevel,_.logVerbosityLevel),0===C)throw new Error("Can't create session options");return S?.executionProviders&&((f,g,b)=>{for(const x of g){let A="string"==typeof x?x:x.name;switch(A){case"xnnpack":A="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${A}`)}const k=(0,L.allocWasmString)(A,b);if(0!==(0,V.getInstance)()._OrtAppendExecutionProvider(f,k))throw new Error(`Can't append execution provider: ${A}`)}})(C,S.executionProviders,w),void 0!==S?.extra&&(0,z.iterateExtraOptions)(S.extra,"",new WeakSet,(f,g)=>{const b=(0,L.allocWasmString)(f,w),x=(0,L.allocWasmString)(g,w);if(0!==O._OrtAddSessionConfigEntry(C,b,x))throw new Error(`Can't set a session config entry: ${f} - ${g}`)}),[C,w]}catch(u){throw 0!==C&&O._OrtReleaseSessionOptions(C),w.forEach(O._free),u}}},4983:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.allocWasmString=void 0;const z=q(6361);F.allocWasmString=(L,V)=>{const S=(0,z.getInstance)(),O=S.lengthBytesUTF8(L)+1,C=S._malloc(O);return S.stringToUTF8(L,C,O),V.push(C),C}},349:(Ye,F,q)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.extractTransferableBuffers=F.endProfiling=F.run=F.releaseSession=F.createSession=F.createSessionFinalize=F.createSessionAllocate=F.initOrt=void 0;const z=q(586),L=q(4919),V=q(4983),S=q(6361);F.initOrt=(u,l)=>{const h=(0,S.getInstance)()._OrtInit(u,l);if(0!==h)throw new Error(`Can't initialize onnxruntime. error code = ${h}`)};const O=new Map;F.createSessionAllocate=u=>{const l=(0,S.getInstance)(),h=l._malloc(u.byteLength);return l.HEAPU8.set(u,h),[h,u.byteLength]},F.createSessionFinalize=(u,l)=>{const h=(0,S.getInstance)();let f=0,g=0,b=[];try{if([g,b]=(0,L.setSessionOptions)(l),f=h._OrtCreateSession(u[0],u[1],g),0===f)throw new Error("Can't create a session")}finally{h._free(u[0]),h._OrtReleaseSessionOptions(g),b.forEach(h._free)}const x=h._OrtGetInputCount(f),A=h._OrtGetOutputCount(f),k=[],T=[],M=[],P=[];for(let B=0;B<x;B++){const U=h._OrtGetInputName(f,B);if(0===U)throw new Error("Can't get an input name");T.push(U),k.push(h.UTF8ToString(U))}for(let B=0;B<A;B++){const U=h._OrtGetOutputName(f,B);if(0===U)throw new Error("Can't get an output name");P.push(U),M.push(h.UTF8ToString(U))}return O.set(f,[f,T,P]),[f,k,M]},F.createSession=(u,l)=>{const h=(0,F.createSessionAllocate)(u);return(0,F.createSessionFinalize)(h,l)},F.releaseSession=u=>{const l=(0,S.getInstance)(),h=O.get(u);if(!h)throw new Error("invalid session id");const f=h[0],b=h[2];h[1].forEach(l._OrtFree),b.forEach(l._OrtFree),l._OrtReleaseSession(f),O.delete(u)};const C=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},w=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},_=u=>{switch(u){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}};F.run=(u,l,h,f,g)=>{const b=(0,S.getInstance)(),x=O.get(u);if(!x)throw new Error("invalid session id");const A=x[0],k=x[1],T=x[2],M=l.length,P=f.length;let B=0,U=[];const N=[],$=[];try{[B,U]=(0,z.setRunOptions)(g);for(let Z=0;Z<M;Z++){const ae=h[Z][0],pe=h[Z][1],ge=h[Z][2];let je,de;if(Array.isArray(ge)){de=4*ge.length,je=b._malloc(de),$.push(je);let Ae=je/4;for(let Ue=0;Ue<ge.length;Ue++){if("string"!=typeof ge[Ue])throw new TypeError(`tensor data at index ${Ue} is not a string`);b.HEAPU32[Ae++]=(0,V.allocWasmString)(ge[Ue],$)}}else de=ge.byteLength,je=b._malloc(de),$.push(je),b.HEAPU8.set(new Uint8Array(ge.buffer,ge.byteOffset,de),je);const Be=b.stackSave(),ee=b.stackAlloc(4*pe.length);try{let Ae=ee/4;pe.forEach(qe=>b.HEAP32[Ae++]=qe);const Ue=b._OrtCreateTensor(C(ae),je,de,ee,pe.length);if(0===Ue)throw new Error("Can't create a tensor");N.push(Ue)}finally{b.stackRestore(Be)}}const G=b.stackSave(),W=b.stackAlloc(4*M),K=b.stackAlloc(4*M),X=b.stackAlloc(4*P),oe=b.stackAlloc(4*P);try{let Z=W/4,ae=K/4,pe=X/4,ge=oe/4;for(let Be=0;Be<M;Be++)b.HEAPU32[Z++]=N[Be],b.HEAPU32[ae++]=k[l[Be]];for(let Be=0;Be<P;Be++)b.HEAPU32[pe++]=0,b.HEAPU32[ge++]=T[f[Be]];let je=b._OrtRun(A,K,W,M,oe,P,X,B);const de=[];if(0===je)for(let Be=0;Be<P;Be++){const ee=b.HEAPU32[X/4+Be],Ae=b.stackSave(),Ue=b.stackAlloc(16);let qe,Mt=0;try{if(je=b._OrtGetTensorData(ee,Ue,Ue+4,Ue+8,Ue+12),0!==je)throw new Error(`Can't access output tensor data. error code = ${je}`);let gt=Ue/4;const zt=b.HEAPU32[gt++];Mt=b.HEAPU32[gt++];const Ce=b.HEAPU32[gt++],Le=b.HEAPU32[gt++],Yt=[];for(let Ne=0;Ne<Le;Ne++)Yt.push(b.HEAPU32[Ce/4+Ne]);b._OrtFree(Ce);const Ct=0===Yt.length?1:Yt.reduce((Ne,Wt)=>Ne*Wt);if(qe=w(zt),"string"===qe){const Ne=[];let Wt=Mt/4;for(let En=0;En<Ct;En++){const rn=b.HEAPU32[Wt++];Ne.push(b.UTF8ToString(rn,En===Ct-1?void 0:b.HEAPU32[Wt]-rn))}de.push([qe,Yt,Ne])}else{const Ne=new(_(qe))(Ct);new Uint8Array(Ne.buffer,Ne.byteOffset,Ne.byteLength).set(b.HEAPU8.subarray(Mt,Mt+Ne.byteLength)),de.push([qe,Yt,Ne])}}finally{b.stackRestore(Ae),"string"===qe&&Mt&&b._free(Mt),b._OrtReleaseTensor(ee)}}if(0===je)return de;throw new Error(`failed to call OrtRun(). error code = ${je}.`)}finally{b.stackRestore(G)}}finally{N.forEach(b._OrtReleaseTensor),$.forEach(b._free),b._OrtReleaseRunOptions(B),U.forEach(b._free)}},F.endProfiling=u=>{const l=(0,S.getInstance)(),h=O.get(u);if(!h)throw new Error("invalid session id");const g=l._OrtEndProfiling(h[0]);if(0===g)throw new Error("Can't get an profile file name");l._OrtFree(g)},F.extractTransferableBuffers=u=>{const l=[];for(const h of u){const f=h[2];!Array.isArray(f)&&f.buffer&&l.push(f.buffer)}return l}},6361:function(Ye,F,q){"use strict";var z=this&&this.__createBinding||(Object.create?function(g,b,x,A){void 0===A&&(A=x);var k=Object.getOwnPropertyDescriptor(b,x);k&&!("get"in k?!b.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return b[x]}}),Object.defineProperty(g,A,k)}:function(g,b,x,A){void 0===A&&(A=x),g[A]=b[x]}),L=this&&this.__setModuleDefault||(Object.create?function(g,b){Object.defineProperty(g,"default",{enumerable:!0,value:b})}:function(g,b){g.default=b}),V=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var b={};if(null!=g)for(var x in g)"default"!==x&&Object.prototype.hasOwnProperty.call(g,x)&&z(b,g,x);return L(b,g),b},S=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(F,"__esModule",{value:!0}),F.dispose=F.getInstance=F.initializeWebAssembly=void 0;const O=V(q(6449)),C=S(q(932)),w=q(3474);let _,u=!1,l=!1,h=!1;const f=(g,b)=>b?g?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":g?"ort-wasm-simd.wasm":"ort-wasm.wasm";F.initializeWebAssembly=function(){var g=_asyncToGenerator(function*(b){if(u)return Promise.resolve();if(l)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(h)throw new Error("previous call to 'initializeWebAssembly()' failed.");l=!0;const x=b.initTimeout,k=b.simd,T=b.numThreads>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),M=k&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),P="string"==typeof b.wasmPaths?b.wasmPaths:void 0,B=f(!1,T),U=f(M,T),N="object"==typeof b.wasmPaths?b.wasmPaths[U]:void 0;let $=!1;const G=[];if(x>0&&G.push(new Promise(W=>{setTimeout(()=>{$=!0,W()},x)})),G.push(new Promise((W,K)=>{const X=T?w:C.default,oe={locateFile:(Z,ae)=>T&&Z.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([q(4154)],{type:"text/javascript"})):Z===B?N??(P??ae)+U:ae+Z};if(T)if(typeof Blob>"u")oe.mainScriptUrlOrBlob=O.join("/","ort-wasm-threaded.js");else{const Z=`var ortWasmThreaded=(function(){var _scriptDir;return ${X.toString()}})();`;oe.mainScriptUrlOrBlob=new Blob([Z],{type:"text/javascript"})}X(oe).then(Z=>{l=!1,u=!0,_=Z,W()},Z=>{l=!1,h=!0,K(Z)})})),yield Promise.race(G),$)throw new Error(`WebAssembly backend initializing failed due to timeout: ${x}ms`)});return function(b){return g.apply(this,arguments)}}(),F.getInstance=()=>{if(u&&_)return _;throw new Error("WebAssembly is not initialized yet.")},F.dispose=()=>{var g;!u||l||h||(l=!0,null===(g=_.PThread)||void 0===g||g.terminateAllThreads(),_=void 0,l=!1,u=!1,h=!0)}},9710:(Ye,F,q)=>{"use strict";q.d(F,{Z:()=>V});var z=q(477),L=q.n(z);function V(){return L()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:Ye=>{"use strict";Ye.exports=function(F,q,z,L){var V=self||window;try{try{var S;try{S=new V.Blob([F])}catch{(S=new(V.BlobBuilder||V.WebKitBlobBuilder||V.MozBlobBuilder||V.MSBlobBuilder)).append(F),S=S.getBlob()}var O=V.URL||V.webkitURL,C=O.createObjectURL(S),w=new V[q](C,z);return O.revokeObjectURL(C),w}catch{return new V[q]("data:application/javascript,".concat(encodeURIComponent(F)),z)}}catch{if(!L)throw Error("Inline worker is not supported");return new V[q](L,z)}}},4154:Ye=>{"use strict";Ye.exports='"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\n'},1670:Ye=>{"use strict";Ye.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(Ye,F,q)=>{"use strict";q.r(F),q.d(F,{flatbuffers:()=>z});var z={SIZEOF_SHORT:2,SIZEOF_INT:4,FILE_IDENTIFIER_LENGTH:4,SIZE_PREFIX_LENGTH:4,Encoding:{UTF8_BYTES:1,UTF16_STRING:2}};z.int32=new Int32Array(2),z.float32=new Float32Array(z.int32.buffer),z.float64=new Float64Array(z.int32.buffer),z.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],z.Long=function(L,V){this.low=0|L,this.high=0|V},z.Long.create=function(L,V){return 0==L&&0==V?z.Long.ZERO:new z.Long(L,V)},z.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},z.Long.prototype.equals=function(L){return this.low==L.low&&this.high==L.high},z.Long.ZERO=new z.Long(0,0),z.Builder=function(L){if(L)V=L;else var V=1024;this.bb=z.ByteBuffer.allocate(V),this.space=V,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},z.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},z.Builder.prototype.forceDefaults=function(L){this.force_defaults=L},z.Builder.prototype.dataBuffer=function(){return this.bb},z.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},z.Builder.prototype.prep=function(L,V){L>this.minalign&&(this.minalign=L);for(var S=1+~(this.bb.capacity()-this.space+V)&L-1;this.space<S+L+V;){var O=this.bb.capacity();this.bb=z.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-O}this.pad(S)},z.Builder.prototype.pad=function(L){for(var V=0;V<L;V++)this.bb.writeInt8(--this.space,0)},z.Builder.prototype.writeInt8=function(L){this.bb.writeInt8(this.space-=1,L)},z.Builder.prototype.writeInt16=function(L){this.bb.writeInt16(this.space-=2,L)},z.Builder.prototype.writeInt32=function(L){this.bb.writeInt32(this.space-=4,L)},z.Builder.prototype.writeInt64=function(L){this.bb.writeInt64(this.space-=8,L)},z.Builder.prototype.writeFloat32=function(L){this.bb.writeFloat32(this.space-=4,L)},z.Builder.prototype.writeFloat64=function(L){this.bb.writeFloat64(this.space-=8,L)},z.Builder.prototype.addInt8=function(L){this.prep(1,0),this.writeInt8(L)},z.Builder.prototype.addInt16=function(L){this.prep(2,0),this.writeInt16(L)},z.Builder.prototype.addInt32=function(L){this.prep(4,0),this.writeInt32(L)},z.Builder.prototype.addInt64=function(L){this.prep(8,0),this.writeInt64(L)},z.Builder.prototype.addFloat32=function(L){this.prep(4,0),this.writeFloat32(L)},z.Builder.prototype.addFloat64=function(L){this.prep(8,0),this.writeFloat64(L)},z.Builder.prototype.addFieldInt8=function(L,V,S){(this.force_defaults||V!=S)&&(this.addInt8(V),this.slot(L))},z.Builder.prototype.addFieldInt16=function(L,V,S){(this.force_defaults||V!=S)&&(this.addInt16(V),this.slot(L))},z.Builder.prototype.addFieldInt32=function(L,V,S){(this.force_defaults||V!=S)&&(this.addInt32(V),this.slot(L))},z.Builder.prototype.addFieldInt64=function(L,V,S){!this.force_defaults&&V.equals(S)||(this.addInt64(V),this.slot(L))},z.Builder.prototype.addFieldFloat32=function(L,V,S){(this.force_defaults||V!=S)&&(this.addFloat32(V),this.slot(L))},z.Builder.prototype.addFieldFloat64=function(L,V,S){(this.force_defaults||V!=S)&&(this.addFloat64(V),this.slot(L))},z.Builder.prototype.addFieldOffset=function(L,V,S){(this.force_defaults||V!=S)&&(this.addOffset(V),this.slot(L))},z.Builder.prototype.addFieldStruct=function(L,V,S){V!=S&&(this.nested(V),this.slot(L))},z.Builder.prototype.nested=function(L){if(L!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},z.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},z.Builder.prototype.slot=function(L){this.vtable[L]=this.offset()},z.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},z.Builder.growByteBuffer=function(L){var V=L.capacity();if(3221225472&V)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var S=V<<1,O=z.ByteBuffer.allocate(S);return O.setPosition(S-V),O.bytes().set(L.bytes(),S-V),O},z.Builder.prototype.addOffset=function(L){this.prep(z.SIZEOF_INT,0),this.writeInt32(this.offset()-L+z.SIZEOF_INT)},z.Builder.prototype.startObject=function(L){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=L;for(var V=0;V<L;V++)this.vtable[V]=0;this.isNested=!0,this.object_start=this.offset()},z.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var L=this.offset(),V=this.vtable_in_use-1;V>=0&&0==this.vtable[V];V--);for(var S=V+1;V>=0;V--)this.addInt16(0!=this.vtable[V]?L-this.vtable[V]:0);this.addInt16(L-this.object_start);var O=(S+2)*z.SIZEOF_SHORT;this.addInt16(O);var C=0,w=this.space;e:for(V=0;V<this.vtables.length;V++){var _=this.bb.capacity()-this.vtables[V];if(O==this.bb.readInt16(_)){for(var u=z.SIZEOF_SHORT;u<O;u+=z.SIZEOF_SHORT)if(this.bb.readInt16(w+u)!=this.bb.readInt16(_+u))continue e;C=this.vtables[V];break}}return C?(this.space=this.bb.capacity()-L,this.bb.writeInt32(this.space,C-L)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-L,this.offset()-L)),this.isNested=!1,L},z.Builder.prototype.finish=function(L,V,S){var O=S?z.SIZE_PREFIX_LENGTH:0;if(V){var C=V;if(this.prep(this.minalign,z.SIZEOF_INT+z.FILE_IDENTIFIER_LENGTH+O),C.length!=z.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+z.FILE_IDENTIFIER_LENGTH);for(var w=z.FILE_IDENTIFIER_LENGTH-1;w>=0;w--)this.writeInt8(C.charCodeAt(w))}this.prep(this.minalign,z.SIZEOF_INT+O),this.addOffset(L),O&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},z.Builder.prototype.finishSizePrefixed=function(L,V){this.finish(L,V,!0)},z.Builder.prototype.requiredField=function(L,V){var S=this.bb.capacity()-L,O=S-this.bb.readInt32(S);if(0==this.bb.readInt16(O+V))throw new Error("FlatBuffers: field "+V+" must be set")},z.Builder.prototype.startVector=function(L,V,S){this.notNested(),this.vector_num_elems=V,this.prep(z.SIZEOF_INT,L*V),this.prep(S,L*V)},z.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},z.Builder.prototype.createString=function(L){if(L instanceof Uint8Array)var V=L;else{V=[];for(var S=0;S<L.length;){var O,C=L.charCodeAt(S++);(O=C<55296||C>=56320?C:(C<<10)+L.charCodeAt(S++)+-56613888)<128?V.push(O):(O<2048?V.push(O>>6&31|192):(O<65536?V.push(O>>12&15|224):V.push(O>>18&7|240,O>>12&63|128),V.push(O>>6&63|128)),V.push(63&O|128))}}this.addInt8(0),this.startVector(1,V.length,1),this.bb.setPosition(this.space-=V.length),S=0;for(var w=this.space,_=this.bb.bytes();S<V.length;S++)_[w++]=V[S];return this.endVector()},z.Builder.prototype.createLong=function(L,V){return z.Long.create(L,V)},z.ByteBuffer=function(L){this.bytes_=L,this.position_=0},z.ByteBuffer.allocate=function(L){return new z.ByteBuffer(new Uint8Array(L))},z.ByteBuffer.prototype.clear=function(){this.position_=0},z.ByteBuffer.prototype.bytes=function(){return this.bytes_},z.ByteBuffer.prototype.position=function(){return this.position_},z.ByteBuffer.prototype.setPosition=function(L){this.position_=L},z.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},z.ByteBuffer.prototype.readInt8=function(L){return this.readUint8(L)<<24>>24},z.ByteBuffer.prototype.readUint8=function(L){return this.bytes_[L]},z.ByteBuffer.prototype.readInt16=function(L){return this.readUint16(L)<<16>>16},z.ByteBuffer.prototype.readUint16=function(L){return this.bytes_[L]|this.bytes_[L+1]<<8},z.ByteBuffer.prototype.readInt32=function(L){return this.bytes_[L]|this.bytes_[L+1]<<8|this.bytes_[L+2]<<16|this.bytes_[L+3]<<24},z.ByteBuffer.prototype.readUint32=function(L){return this.readInt32(L)>>>0},z.ByteBuffer.prototype.readInt64=function(L){return new z.Long(this.readInt32(L),this.readInt32(L+4))},z.ByteBuffer.prototype.readUint64=function(L){return new z.Long(this.readUint32(L),this.readUint32(L+4))},z.ByteBuffer.prototype.readFloat32=function(L){return z.int32[0]=this.readInt32(L),z.float32[0]},z.ByteBuffer.prototype.readFloat64=function(L){return z.int32[z.isLittleEndian?0:1]=this.readInt32(L),z.int32[z.isLittleEndian?1:0]=this.readInt32(L+4),z.float64[0]},z.ByteBuffer.prototype.writeInt8=function(L,V){this.bytes_[L]=V},z.ByteBuffer.prototype.writeUint8=function(L,V){this.bytes_[L]=V},z.ByteBuffer.prototype.writeInt16=function(L,V){this.bytes_[L]=V,this.bytes_[L+1]=V>>8},z.ByteBuffer.prototype.writeUint16=function(L,V){this.bytes_[L]=V,this.bytes_[L+1]=V>>8},z.ByteBuffer.prototype.writeInt32=function(L,V){this.bytes_[L]=V,this.bytes_[L+1]=V>>8,this.bytes_[L+2]=V>>16,this.bytes_[L+3]=V>>24},z.ByteBuffer.prototype.writeUint32=function(L,V){this.bytes_[L]=V,this.bytes_[L+1]=V>>8,this.bytes_[L+2]=V>>16,this.bytes_[L+3]=V>>24},z.ByteBuffer.prototype.writeInt64=function(L,V){this.writeInt32(L,V.low),this.writeInt32(L+4,V.high)},z.ByteBuffer.prototype.writeUint64=function(L,V){this.writeUint32(L,V.low),this.writeUint32(L+4,V.high)},z.ByteBuffer.prototype.writeFloat32=function(L,V){z.float32[0]=V,this.writeInt32(L,z.int32[0])},z.ByteBuffer.prototype.writeFloat64=function(L,V){z.float64[0]=V,this.writeInt32(L,z.int32[z.isLittleEndian?0:1]),this.writeInt32(L+4,z.int32[z.isLittleEndian?1:0])},z.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+z.SIZEOF_INT+z.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var L="",V=0;V<z.FILE_IDENTIFIER_LENGTH;V++)L+=String.fromCharCode(this.readInt8(this.position_+z.SIZEOF_INT+V));return L},z.ByteBuffer.prototype.__offset=function(L,V){var S=L-this.readInt32(L);return V<this.readInt16(S)?this.readInt16(S+V):0},z.ByteBuffer.prototype.__union=function(L,V){return L.bb_pos=V+this.readInt32(V),L.bb=this,L},z.ByteBuffer.prototype.__string=function(L,V){L+=this.readInt32(L);var S=this.readInt32(L),O="",C=0;if(L+=z.SIZEOF_INT,V===z.Encoding.UTF8_BYTES)return this.bytes_.subarray(L,L+S);for(;C<S;){var w,_=this.readUint8(L+C++);if(_<192)w=_;else{var u=this.readUint8(L+C++);if(_<224)w=(31&_)<<6|63&u;else{var l=this.readUint8(L+C++);w=_<240?(15&_)<<12|(63&u)<<6|63&l:(7&_)<<18|(63&u)<<12|(63&l)<<6|63&this.readUint8(L+C++)}}w<65536?O+=String.fromCharCode(w):(w-=65536,O+=String.fromCharCode(55296+(w>>10),56320+(1023&w)))}return O},z.ByteBuffer.prototype.__indirect=function(L){return L+this.readInt32(L)},z.ByteBuffer.prototype.__vector=function(L){return L+this.readInt32(L)+z.SIZEOF_INT},z.ByteBuffer.prototype.__vector_len=function(L){return this.readInt32(L+this.readInt32(L))},z.ByteBuffer.prototype.__has_identifier=function(L){if(L.length!=z.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+z.FILE_IDENTIFIER_LENGTH);for(var V=0;V<z.FILE_IDENTIFIER_LENGTH;V++)if(L.charCodeAt(V)!=this.readInt8(this.position_+z.SIZEOF_INT+V))return!1;return!0},z.ByteBuffer.prototype.createLong=function(L,V){return z.Long.create(L,V)}}},__webpack_module_cache__={};function __nested_webpack_require_810672__(Ye){var F=__webpack_module_cache__[Ye];if(void 0!==F)return F.exports;var q=__webpack_module_cache__[Ye]={exports:{}};return __webpack_modules__[Ye].call(q.exports,q,q.exports,__nested_webpack_require_810672__),q.exports}__nested_webpack_require_810672__.n=Ye=>{var F=Ye&&Ye.__esModule?()=>Ye.default:()=>Ye;return __nested_webpack_require_810672__.d(F,{a:F}),F},__nested_webpack_require_810672__.d=(Ye,F)=>{for(var q in F)__nested_webpack_require_810672__.o(F,q)&&!__nested_webpack_require_810672__.o(Ye,q)&&Object.defineProperty(Ye,q,{enumerable:!0,get:F[q]})},__nested_webpack_require_810672__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),__nested_webpack_require_810672__.o=(Ye,F)=>Object.prototype.hasOwnProperty.call(Ye,F),__nested_webpack_require_810672__.r=Ye=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Ye,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ye,"__esModule",{value:!0})};var __nested_webpack_exports__=__nested_webpack_require_810672__(6018);return __nested_webpack_exports__})(),module.exports=F(__webpack_require__(964))},52:()=>{},143:()=>{},603:()=>{},806:()=>{},9:()=>{},837:()=>{},499:()=>{},293:Ye=>{function F(z,L,V,S,O,C,w){try{var _=z[C](w),u=_.value}catch(l){return void V(l)}_.done?L(u):Promise.resolve(u).then(S,O)}Ye.exports=function q(z){return function(){var L=this,V=arguments;return new Promise(function(S,O){var C=z.apply(L,V);function w(u){F(C,S,O,w,_,"next",u)}function _(u){F(C,S,O,w,_,"throw",u)}w(void 0)})}},Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports},467:(Ye,F,q)=>{"use strict";function z(V,S,O,C,w,_,u){try{var l=V[_](u),h=l.value}catch(f){return void O(f)}l.done?S(h):Promise.resolve(h).then(C,w)}function L(V){return function(){var S=this,O=arguments;return new Promise(function(C,w){var _=V.apply(S,O);function u(h){z(_,C,w,u,l,"next",h)}function l(h){z(_,C,w,u,l,"throw",h)}u(void 0)})}}q.d(F,{A:()=>L})}},Ye=>{Ye(Ye.s=692)}]);